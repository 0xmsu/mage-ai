"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8650],{71377:function(e,n,t){var r=t(82394),l=t(21831),o=(t(56756),t(17717)),i=t(9518),u=t(78050),c=t(82684),a=t(89706),s=t(97618),d=t(30160),f=t(44897),p=t(79899),v=t(72473),h=t(68804),m=t(46978),b=t(53808),g=t(70515),j=t(85385),C=t(53005),y=t(86735),w=t(28598);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var F="default_repo",O=i.default.div.withConfig({displayName:"Folder__ChildrenStyle",componentId:"sc-1gsjts-0"})([".expanded_children{display:block;}.collapsed_children{display:none;}"]),Z=i.default.div.withConfig({displayName:"Folder__ChevronStyle",componentId:"sc-1gsjts-1"})([".expanded{.down{display:block;position:relative;}.right{display:none;position:absolute;}}.collapsed{.down{display:none;position:absolute;}.right{display:block;position:relative;}}"]);function D(e){var n=e.children,t=e.idleTimeout,r=(0,c.useState)(!1),l=r[0],o=r[1];return(0,c.useEffect)((function(){l&&o(!1);var e=requestIdleCallback((function(){return o(!0)}),{timeout:t});return function(){return cancelIdleCallback(e)}}),[t]),l?n:null}function P(e){var n=e.name,t=e.path,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat((0,l.Z)(r||[]),t?[t]:[n||F])}function E(e){return e.join(o.sep)}n.Z=function e(n){var t=n.allowEmptyFolders,l=n.allowSelectingFolders,o=n.containerRef,i=n.cursorRef,k=n.disableContextMenu,I=n.file,L=n.isFileDisabled,_=n.isInPipelinesFolder,S=n.isNotFolder,R=n.level,T=n.onClickFile,M=n.onClickFolder,N=n.onSelectBlockFile,B=n.onlyShowChildren,A=n.onlyShowFolders,U=n.openFile,H=n.openSidekickView,Y=n.reloadCount,q=n.renderAfterContent,V=n.selectFile,z=n.setContextItem,Q=n.setCoordinates,W=n.setDraggingFile,G=n.setSelectedFile,$=n.theme,X=n.timeout,J=n.useRootFolder,K=n.uuidCombined,ee=n.uuidContainer,ne=(0,c.useRef)(null),te=I.children,re=I.disabled,le=I.name,oe=I.parent,ie=(I.path,I.pipeline_count),ue=(0,c.useMemo)((function(){return te?(0,y.YC)(te,(function(e){return e.children?0:1})):te}),[te]),ce=(0,c.useMemo)((function(){return P(I,K)}),[I,K]),ae=(0,c.useMemo)((function(){return E(ce)}),[ce]),se=(0,b.U2)(b.lQ,{}),de=(0,c.useRef)(null),fe=(0,c.useRef)(null),pe=(0,c.useRef)(ae in se?se[ae]:0===R),ve=(0,c.useRef)(0),he=null==pe?void 0:pe.current;le||t||(I.name=F);var me=(0,p.Z)({allowEmptyFolders:t,children:ue,disabled:re,file:I,isInPipelinesFolder:_,isFileDisabled:L,isNotFolder:S,level:R,name:le,theme:$,useRootFolder:J,uuid:ae}),be=me.BlockIcon,ge=me.Icon,je=(me.blockType,me.color),Ce=me.disabled,ye=me.filePathToUse,we=me.folderNameForBlock,ke=me.iconColor,xe=me.isBlockFile,Fe=me.isFirstParentFolderForBlock,Oe=me.isFolder,Ze=me.isPipelineFolder,De=(0,c.useMemo)((function(){return!!we&&!Oe&&!!xe}),[we,xe,Oe]),Pe=(0,c.useCallback)((function(n){return null==n?void 0:n.map((function(n){return(0,w.jsx)(e,{allowEmptyFolders:t,allowSelectingFolders:l,containerRef:o,cursorRef:i,disableContextMenu:k,file:x(x({},n),{},{parent:I}),isFileDisabled:L,isInPipelinesFolder:_||Ze,isNotFolder:null==n?void 0:n.isNotFolder,level:B?R:R+1,onClickFile:T,onClickFolder:M,onSelectBlockFile:N,onlyShowFolders:A,openFile:U,openSidekickView:H,reloadCount:Y,renderAfterContent:q,selectFile:V,setContextItem:z,setCoordinates:Q,setDraggingFile:W,setSelectedFile:G,theme:$,timeout:X,useRootFolder:J,uuidCombined:ce,uuidContainer:ee},"".concat(E(P(n,ce)),"-").concat(Y))}))}),[t,l,ue,k,I,L,_,Ze,R,T,M,N,A,B,U,H,Y,q,V,z,Q,W,G,J,ae,ce,ee]),Ee=(0,c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(pe.current=null==e?!pe.current:e,null!=de&&de.current&&(de.current.className=null!=pe&&pe.current?"expanded_children":"collapsed_children",fe.current.className=null!=pe&&pe.current?"expanded":"collapsed"),0===(null==ve?void 0:ve.current)){var t;if(null==ne||!ne.current){var l,o=document.getElementById(null==de||null===(l=de.current)||void 0===l?void 0:l.id);ne.current=(0,u.createRoot)(o)}null==ne||null===(t=ne.current)||void 0===t||t.render((null==ue?void 0:ue.length)>=1?(0,w.jsx)(D,{idleTimeout:n||1,children:Pe(ue)}):Oe?Pe(Ie):(0,w.jsx)("div",{}))}(0,b.rQ)(b.lQ,(0,r.Z)({},ae,pe.current)),ve.current+=1}),[ue,Oe,ae]);(0,c.useEffect)((function(){var e=function(e){var n=e.detail,t=n.expand,l=(n.file,n.folder);Oe&&l&&null!=ae&&ae.startsWith(null==l?void 0:l.uuid)&&((0,b.rQ)(b.lQ,(0,r.Z)({},ae,t)),Ee(t,100*R))};return window.addEventListener(h.op,e),function(){window.removeEventListener(h.op,e)}}),[Oe,R,Ee,ae]);var Ie=(0,c.useMemo)((function(){return[{disabled:!0,name:"Empty",parent:I,isNotFolder:!0,uuid:ce}]}),[I,ce]),Le=(0,c.useMemo)((function(){var e=[];return(0,y.w6)(R).forEach((function(n,t){var r,l=m.Cl-1;e.push((0,w.jsx)("div",{className:m.jk,style:{borderLeft:"1px solid ".concat(null==$||null===(r=$.content)||void 0===r?void 0:r.disabled),height:22,marginLeft:l/2-2,paddingLeft:l/2+2}},"line-".concat(ae,"-").concat(t)))})),e}),[R,$,ae]);return(0,c.useEffect)((function(){setTimeout((function(){var e;if(he&&0===(null==ve?void 0:ve.current)&&null!=de&&null!==(e=de.current)&&void 0!==e&&e.id){ve.current=1;try{var n;if(null==ne||!ne.current){var t,r=document.getElementById(null==de||null===(t=de.current)||void 0===t?void 0:t.id);ne.current=(0,u.createRoot)(r)}null==ne||null===(n=ne.current)||void 0===n||n.render((null==ue?void 0:ue.length)>=1?(0,w.jsx)(D,{idleTimeout:100*R,children:Pe(ue)}):null!=ue&&ue.length?null:Oe?Pe(Ie):(0,w.jsx)("div",{}))}catch(e){console.log(e)}}}),1)}),[]),!Oe&&A?null:(0,w.jsxs)(w.Fragment,{children:[!B&&(0,w.jsxs)("div",{className:"row",onClick:function(e){if(e.preventDefault(),!Ce){if((null==oe?void 0:oe.name)===a.PF){null==H||H(j.cH.CHARTS);var n=(0,C.lr)(I);n&&(null==N||N(n.uuid,n.type,(0,C.jN)(I)))}var t=(0,C.V3)(I);if(ue)l?V(ye,I):Ee(),null==M||M(ye,I);else if(T)T(ye,I);else if(t)null==N||N(t.uuid,t.type,(0,C.jN)(I),{file:I,path:ye});else if(le.match(a.xF))null==U||U(ye,I);else{var r=(0,C.lr)(I);r&&(null==N||N(r.uuid,r.type,(0,C.jN)(I)))}}},onContextMenu:function(e){if(!k){var n;if(clearTimeout(X.current),null==o||null===(n=o.current)||void 0===n||!n.contains(e.target)||k)return;e.preventDefault(),null==Q||Q({x:e.pageX,y:e.pageY}),null==W||W(null),null==G||G(x(x({},I),{},{uuid:ae}))}},onMouseDown:function(e){var n,t=I?(0,C.lr)(I,null,!0):null;null==o||null===(n=o.current)||void 0===n||!n.contains(e.target)||!t||(null==ue?void 0:ue.length)>=1||k||Ce||_||(e.preventDefault(),clearTimeout(X.current),X.current=setTimeout((function(){null==Q||Q({x:e.pageX,y:e.pageY}),null==W||W(I),null==G||G(null)}),300))},onMouseEnter:function(e){i&&(i.current={event:e,file:I,toggleExpandsion:Ee,uuid:ae})},style:{alignItems:"center",cursor:"default",display:"flex",minWidth:R*m.Cl+I.name.length*g.Fo+2*g.iI,paddingRight:g.iI/4},children:[(0,w.jsxs)(s.Z,{alignItems:"center",flex:1,children:[Le,(0,w.jsxs)(Z,{children:[ue&&(0,w.jsxs)("div",{className:he?"expanded":"collapsed",ref:fe,children:[(0,w.jsx)("div",{className:"down",children:(0,w.jsx)(v.ChevronDown,{muted:!0,size:m.ZG})}),(0,w.jsx)("div",{className:"right",children:(0,w.jsx)(v.ChevronRight,{muted:!0,size:m.ZG})})]}),!ue&&(0,w.jsx)("div",{style:{width:m.ZG}})]}),(0,w.jsx)("div",{style:{marginLeft:g.iI/2,marginRight:g.iI/2,paddingRight:!De||ie>1?0:g.iI/2},title:ie>1?"Used by multiple pipelines":1===ie?"Used by one pipeline":null,children:De?ie>1?(0,w.jsx)(v.DiamondShared,{fill:f.Z.accent.cyan,size:m.ZG}):(0,w.jsx)(be,{borderOnly:!ie,color:je,size:we&&!Oe?.7*m.ZG:m.ZG,square:!0}):(0,w.jsx)(ge,{disabled:Ce,fill:ke||(Fe?je:null),size:m.ZG})}),(0,w.jsx)(d.ZP,{cyan:ie>1,default:!Ce,disabled:Ce,monospace:!0,small:!0,children:le})]}),q&&q(I)]}),(0,w.jsx)(O,{children:(0,w.jsx)("div",{className:he?"expanded_children":"collapsed_children",id:"".concat(ee,"-").concat(ae),ref:de})})]})}},56756:function(e,n){var t,r,l;r=[],void 0===(l="function"==typeof(t=function(){var e,n,t,r,l=window,o=l.cancelRequestAnimationFrame&&l.requestAnimationFrame||setTimeout,i=l.cancelRequestAnimationFrame||clearTimeout,u=[],c=0,a=!1,s=7,d=35,f=125,p=0,v=0,h=0,m={get didTimeout(){return!1},timeRemaining:function(){var e=s-(Date.now()-v);return Math.max(0,e)}},b=g((function(){s=22,f=66,d=0}));function g(e){var n,t,r=99,l=function l(){var o=Date.now()-t;o<r?n=setTimeout(l,r-o):(n=null,e())};return function(){t=Date.now(),n||(n=setTimeout(l,r))}}function j(){a&&(r&&i(r),t&&clearTimeout(t),a=!1)}function C(){125!=f&&(s=7,f=125,d=35,a&&(j(),k())),b()}function y(){r=null,t=setTimeout(x,0)}function w(){t=null,o(y)}function k(){a||(n=f-(Date.now()-v),e=Date.now(),a=!0,d&&n<d&&(n=d),n>9?t=setTimeout(w,n):(n=0,w()))}function x(){var r,l,o,i=s>9?9:1;if(v=Date.now(),a=!1,t=null,c>2||v-n-50<e)for(l=0,o=u.length;l<o&&m.timeRemaining()>i;l++)r=u.shift(),h++,r&&r(m);u.length?k():c=0}function F(e){return p++,u.push(e),k(),p}function O(e){var n=e-1-h;u[n]&&(u[n]=null)}if(l.requestIdleCallback&&l.cancelIdleCallback)try{l.requestIdleCallback((function(){}),{timeout:0})}catch(e){!function(e){var n,t;if(l.requestIdleCallback=function(n,t){return t&&"number"==typeof t.timeout?e(n,t.timeout):e(n)},l.IdleCallbackDeadline&&(n=IdleCallbackDeadline.prototype)){if(!(t=Object.getOwnPropertyDescriptor(n,"timeRemaining"))||!t.configurable||!t.get)return;Object.defineProperty(n,"timeRemaining",{value:function(){return t.get.call(this)},enumerable:!0,configurable:!0})}}(l.requestIdleCallback)}else l.requestIdleCallback=F,l.cancelIdleCallback=O,l.document&&document.addEventListener&&(l.addEventListener("scroll",C,!0),l.addEventListener("resize",C),document.addEventListener("focus",C,!0),document.addEventListener("mouseover",C,!0),["click","keypress","touchstart","mousedown"].forEach((function(e){document.addEventListener(e,C,{capture:!0,passive:!0})})),l.MutationObserver&&new MutationObserver(C).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}));return{request:F,cancel:O}})?t.apply(n,r):t)||(e.exports=l)},79899:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(82684),l=t(39867),o=t(89706),i=t(44425),u=t(32929),c=t(72473),a=t(71953),s=t(55283),d=t(53005),f=t(81728);function p(e){var n=e.BlockIcons,t=void 0===n?u.iK:n,p=e.DefaultIcon,v=e.ExtensionIcons,h=void 0===v?a.T:v,m=e.IconColors,b=void 0===m?a.k:m,g=e.Icons,j=e.allowEmptyFolders,C=e.children,y=e.defaultColor,w=e.disabled,k=e.file,x=e.filePath,F=e.getBlockColor,O=e.isFolder,Z=e.isInPipelinesFolder,D=e.isFileDisabled,P=e.isNotFolder,E=(e.level,e.name),I=e.theme,L=e.useRootFolder,_=e.uuid,S=g||{Charts:c.Charts,Ellipsis:c.Ellipsis,FileFill:c.FileFill,FolderIcon:c.FolderV2Filled,Logs:c.Logs,Pipeline:c.Pipeline,PipelineV3:c.PipelineV3},R=S.Charts,T=S.Ellipsis,M=S.FileFill,N=S.FolderIcon,B=S.Logs,A=S.Pipeline,U=S.PipelineV3,H=(0,r.useMemo)((function(){return x||(L?(0,d.a9)(k):(0,d.jN)(k))}),[k,x,L]),Y=(0,r.useMemo)((function(){return O||!!C&&!P}),[C,O,P]),q=(0,r.useMemo)((function(){var e,n,t;return null==_||null===(e=_.split)||void 0===e||null===(n=e.call(_,"/"))||void 0===n||null===(t=n.find)||void 0===t?void 0:t.call(n,(function(e){return(0,f.C5)(e)in i.GJ}))}),[_]),V=(0,r.useMemo)((function(){return q?(0,f.C5)(q):null}),[q]),z=(0,r.useMemo)((function(){return Y&&q&&q===E}),[q,Y,E]),Q=(0,r.useMemo)((function(){return q&&!Y&&(0,d.y)(E)&&(0,d.o$)(E,V)}),[V,q,Y,E]),W=(0,r.useMemo)((function(){var e;return q?F?null==F||null===(e=F(V,{theme:I}))||void 0===e?void 0:e.accent:(0,s.qn)(V,{theme:I}).accent:null}),[V,F,q,I]),G=E===o.oy,$=(0,r.useMemo)((function(){return D?D(H,C):w||Z&&"__init__.py"===E||q&&"__init__.py"===E}),[C,w,,H,q,D,Z,E]),X=(0,r.useMemo)((function(){var e,n=p||M,r=(k||{extension:null}).extension;if(!Y&&P)n=T;else if(G)n=U;else if(E===o.PF)n=R;else if(Y&&!r)n=z&&(null==t?void 0:t[V])||N;else if(!E&&j)n=T;else if(Z&&!Y&&"metadata.yaml"===E)n=A;else if(null!=E&&E.includes(".log"))n=B;else if(!Y||r){var l=r||(0,d.mD)(E);l&&l in h&&(n=h[l],e=b[l]||y)}return{Icon:n,iconColor:e}}),[p,t,R,T,h,M,N,b,B,A,U,G,j,y,V,k,z,Y,Z,P,E]),J=X.Icon,K=X.iconColor;return{BlockIcon:(0,r.useMemo)((function(){var e=l.Z;return i.tf.CHART===V&&(e=R),e}),[R,V]),Icon:J,blockType:V,color:W,disabled:$,filePathToUse:H,folderNameForBlock:q,iconColor:K,isBlockFile:Q,isFirstParentFolderForBlock:z,isFolder:Y,isPipelineFolder:G}}},65327:function(e,n,t){t.d(n,{es:function(){return u},kA:function(){return c}});var r=t(9518),l=t(44897),o=t(42631),i=t(70515),u=(i.iI,r.default.div.withConfig({displayName:"indexstyle__DropZoneStyle",componentId:"sc-1g3zz7z-0"})(["border-radius:","px;padding:","px;max-width:","px;min-width:","px;",""],o.n_,8*i.iI,100*i.iI,55*i.iI,(function(e){return"\n    border: 1px dashed ".concat((e.theme.borders||l.Z.borders).contrast,";\n  ")}))),c=r.default.div.withConfig({displayName:"indexstyle__TableStyle",componentId:"sc-1g3zz7z-1"})(["max-width:","px;min-width:","px;"],100*i.iI,55*i.iI)},71953:function(e,n,t){t.d(n,{T:function(){return c},k:function(){return a}});var r,l,o=t(82394),i=t(72473),u=t(89706),c=(r={},(0,o.Z)(r,u.Lu.CSV,i.Table),(0,o.Z)(r,u.Lu.JSON,i.Code),(0,o.Z)(r,u.Lu.MD,i.File),(0,o.Z)(r,u.Lu.PY,i.Lightning),(0,o.Z)(r,u.Lu.R,i.Insights),(0,o.Z)(r,u.Lu.SH,i.Terminal),(0,o.Z)(r,u.Lu.SQL,i.Database),(0,o.Z)(r,u.Lu.TXT,i.Alphabet),(0,o.Z)(r,u.Lu.YAML,i.List),(0,o.Z)(r,u.Lu.YML,i.List),r),a=(l={},(0,o.Z)(l,u.Lu.CSV,"#C7CDDA"),(0,o.Z)(l,u.Lu.JSON,"#6B50D7"),(0,o.Z)(l,u.Lu.MD,"#9B6CA7"),(0,o.Z)(l,u.Lu.PY,"#FFE873"),(0,o.Z)(l,u.Lu.R,"#FF144D"),(0,o.Z)(l,u.Lu.SH,"#CBFE00"),(0,o.Z)(l,u.Lu.SQL,"#00758F"),(0,o.Z)(l,u.Lu.TXT,"#C7CDDA"),(0,o.Z)(l,u.Lu.YAML,"#95ECE2"),(0,o.Z)(l,u.Lu.YML,"#95ECE2"),l)},46978:function(e,n,t){t.d(n,{Cl:function(){return u},Nk:function(){return a},ZG:function(){return i},jk:function(){return c}});var r=t(9518),l=t(44897),o=t(70515),i=1.5*o.iI,u=1*i+o.iI/2,c="folder-vertical-line-indicator",a=r.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-uvd91-0"})(["display:inline-block;min-width:100%;.row:hover,.row.highlighted{"," p{","}.","{","}}"],(function(e){return"\n      background-color: ".concat((e.theme.interactive||l.Z.interactive).hoverBlackBackgroundTransparent,";\n    ")}),(function(e){return"\n        color: ".concat((e.theme.content||l.Z.content).active," !important;\n      ")}),c,(function(e){return"\n        border-color: ".concat((e.theme.interactive||l.Z.interactive).hoverBlackBackgroundTransparent," !important;\n      ")}))},78650:function(e,n,t){t.d(n,{Z:function(){return ce}});var r=t(82394),l=t(75582),o=t(17717),i=t(82684),u=t(9518),c=t(83455),a=t(85202),s=t(44425),d=t(71180),f=t(50724),p=t(55485),v=t(70374),h=t(38276),m=t(30160),b=t(44897),g=t(42631),j=t(70515),C=u.default.div.withConfig({displayName:"indexstyle__FileHeaderMenuContainerStyle",componentId:"sc-1lru5j9-0"})(["height:100%;width:100%;position:relative;padding:","px;",""],j.iI/2,(function(e){return"\n    border-bottom: ".concat(g.YF,"px ").concat(g.M8," ").concat((e.theme||b.Z).borders.medium,";\n  ")})),y=t(72473),w=t(26419),k=t(28598);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=function(e){var n=e.setShowHiddenFiles,t=e.showHiddenFiles,r=(0,i.useState)(null),l=r[0],o=r[1],u=(0,i.useRef)(null),c=(0,i.useMemo)((function(){return[{label:function(){return(0,k.jsxs)(p.ZP,{alignItems:"center",children:[t?(0,k.jsx)(y.PreviewOpen,{success:!0}):(0,k.jsx)(y.PreviewHidden,{muted:!0}),(0,k.jsx)(h.Z,{mr:1}),(0,k.jsx)(m.ZP,{noWrapping:!0,children:"Hidden files"})]})},onClick:function(){n((function(e){return!e}))},uuid:"Hidden files"}]}),[n,t]);return(0,k.jsx)(C,{children:(0,k.jsx)(f.Z,{onClickOutside:function(){return o(null)},open:!0,style:{width:"fit-content"},children:(0,k.jsx)(p.ZP,{alignItems:"center",fullHeight:!0,children:(0,k.jsxs)("div",{style:{position:"relative"},children:[(0,k.jsx)(d.ZP,F(F({},w.a),{},{noBackground:0!==l,onClick:function(){return o((function(e){return 0===e?null:0}))},onMouseEnter:function(){return o((function(e){return null!==e?0:null}))},ref:u,children:(0,k.jsx)(m.ZP,{default:!0,children:"View"})})),(0,k.jsx)(v.Z,{alternateBackground:!0,items:c,onClickCallback:function(){return o(null)},open:0===l,parentRef:u,uuid:"FileBrowser/FileHeaderMenu/view"})]})})})})},Z=t(71377),D=t(65186),P=t(68562),E=t(65956),I=t(17488),L=t(5332),_=t(53005),S=t(42122),R=t(72619);var T=function(e){var n=e.fetchFileTree,t=e.file,r=e.moveFile,o=e.onCancel,u=e.onCreateFile,a=e.selectedFolder,s=e.showError,f=(0,i.useRef)(null),v=(0,S.Qr)(t)?null:t,m=(0,i.useState)(v?(0,_.jN)(v,null,!0):""),b=m[0],g=m[1],C=(0,i.useState)(v?null==v?void 0:v.name:""),y=C[0],w=C[1];(0,i.useEffect)((function(){var e;null==f||null===(e=f.current)||void 0===e||e.focus()}),[]),(0,i.useEffect)((function(){a&&g((0,_.eV)(null==a?void 0:a.uuid))}),[a]);var x=(0,c.Db)(L.ZP.files.useCreate(),{onSuccess:function(e){return(0,R.wD)(e,{callback:function(e){var t=e.file;null==n||n(),o(),null==u||u(t)},onErrorCallback:function(e,n){return s({errors:n,response:e})}})}}),F=(0,l.Z)(x,1)[0],O=(0,c.Db)(L.ZP.files.useUpdate(v&&encodeURIComponent((0,_.jN)(v))),{onSuccess:function(e){return(0,R.wD)(e,{callback:function(){null==n||n(),o()},onErrorCallback:function(e,n){return s({errors:n,response:e})}})}}),Z=(0,l.Z)(O,1)[0];return(0,k.jsxs)(E.Z,{footer:(0,k.jsxs)(p.ZP,{children:[(0,k.jsxs)(P.ZP,{bold:!0,disabled:!y,inline:!0,onClick:function(){return v?Z({file:{dir_path:b,name:y},file_json_only:!0}):F({file:{dir_path:b,name:y,overwrite:!1},file_json_only:!0})},primary:!0,tabIndex:0,uuid:"NewFile/create_file",children:[v?r?"Move":"Rename":"Create"," file"]}),(0,k.jsx)(h.Z,{ml:1,children:(0,k.jsx)(d.ZP,{onClick:function(){return o()},tabIndex:0,children:"Cancel"})})]}),headerTitle:v?r?"Move file":"Rename file":"New file",minWidth:50*j.iI,children:[(0,k.jsx)(I.Z,{disabled:!!v&&!r,label:"Directory",monospace:!0,onChange:function(e){return g(e.target.value)},setContentOnMount:!0,value:b}),(0,k.jsx)(h.Z,{mt:2,children:(0,k.jsx)(I.Z,{disabled:!!r,label:"Filename",monospace:!0,onChange:function(e){return w(e.target.value)},ref:f,required:!0,value:y})})]})},M=t(82359);var N=function(e){var n=e.fetchFileTree,t=e.file,r=e.moveFile,o=e.onCancel,u=e.onCreateFile,a=e.projectType,s=e.selectedFolder,f=e.setErrors,v=e.showError,m=(0,i.useRef)(null),b=(0,S.Qr)(t)?null:t,g=(0,i.useState)(b?(0,_.jN)(b,null,!0):""),C=g[0],y=g[1],w=(0,i.useState)(b?null==b?void 0:b.name:""),x=w[0],F=w[1];(0,i.useEffect)((function(){var e;null==m||null===(e=m.current)||void 0===e||e.focus()}),[]),(0,i.useEffect)((function(){s&&y((0,_.eV)(null==s?void 0:s.uuid))}),[s]);var O=(0,c.Db)(L.ZP.folders.useCreate(),{onSuccess:function(e){return(0,R.wD)(e,{callback:function(e){var t=e.file;null==n||n(),o(),null==u||u(t)},onErrorCallback:function(e,n){return f?f({errors:n,response:e}):v({errors:n,response:e})}})}}),Z=(0,l.Z)(O,1)[0],D=(0,c.Db)(L.ZP.folders.useUpdate(b&&encodeURIComponent((0,_.jN)(b))),{onSuccess:function(e){return(0,R.wD)(e,{callback:function(){null==n||n(),o()},onErrorCallback:function(e,n){return f?f({errors:n,response:e}):v({errors:n,response:e})}})}}),T=(0,l.Z)(D,1)[0],N=(0,c.Db)(L.ZP.projects.useCreate(),{onSuccess:function(e){return(0,R.wD)(e,{callback:function(){null==n||n(),o()},onErrorCallback:function(e,n){return f?f({errors:n,response:e}):v({errors:n,response:e})}})}}),B=(0,l.Z)(N,2),A=B[0],U=B[1].isLoading;return(0,k.jsxs)(E.Z,{footer:(0,k.jsxs)(p.ZP,{children:[(0,k.jsxs)(P.ZP,{bold:!0,disabled:!x,inline:!0,loading:U,onClick:function(){return b?T({folder:{name:x,path:C}}):a?A({project:{repo_path:C,type:a,uuid:x}}):Z({folder:{name:x,overwrite:!1,path:C}})},primary:!0,tabIndex:0,uuid:"NewFolder/create_folder",children:[a&&"Create project",!a&&(0,k.jsxs)(k.Fragment,{children:[b?r?"Move":"Rename":"Create"," folder"]})]}),(0,k.jsx)(h.Z,{ml:1,children:(0,k.jsx)(d.ZP,{onClick:function(){return o()},tabIndex:0,children:"Cancel"})})]}),headerTitle:b?r?"Move folder":"Rename folder":a?M.k.STANDALONE===a?"New Mage project":M.k.DBT===a?"New dbt project":"New project":"New folder",minWidth:50*j.iI,children:[(0,k.jsx)(I.Z,{disabled:!!b&&!r,label:a?"Project directory":"Directory",monospace:!0,onChange:function(e){return y(e.target.value)},setContentOnMount:!0,value:C}),(0,k.jsx)(h.Z,{mt:2,children:(0,k.jsx)(I.Z,{disabled:!!r,label:a?"Project name":"Folder name",monospace:!0,onChange:function(e){return F(e.target.value)},ref:m,required:!0,value:x})})]})},B=t(57653),A=t(89515),U=t(14568),H=t(35185),Y=t(75499),q=t(65327),V=t(86735);var z=function(e){var n=e.fetchFileTree,t=e.onCancel,r=e.selectedFolder,o=(0,i.useState)(!1),u=o[0],c=o[1],a=(0,i.useState)({}),s=a[0],f=a[1],v=(0,i.useState)({}),b=v[0],g=v[1],j=!(0,S.Qr)(s),C=(0,i.useMemo)((function(){var e=[];return(0,V.YC)(Object.entries(s),(function(e){var n=(0,l.Z)(e,2),t=n[0];n[1];return t})).forEach((function(n){var t=(0,l.Z)(n,2),r=t[0],o=t[1],i=b[r],u=null==i?void 0:i.message;e.push([(0,k.jsxs)("div",{children:[(0,k.jsx)(m.ZP,{overflowWrap:!0,preWrap:!0,children:r}),u&&(0,k.jsx)(h.Z,{mt:1,children:(0,k.jsx)(m.ZP,{danger:!0,small:!0,children:u})})]},"name-".concat(r)),(0,k.jsx)(H.Z,{danger:!!u,progress:100*o},"progress-".concat(r))])})),(0,k.jsx)(Y.Z,{columnFlex:[1,4],columns:[{uuid:"Filename"},{uuid:"Upload progress"}],rows:e,uuid:"block-runs"})}),[s,b]);return(0,k.jsxs)(E.Z,{footer:(0,k.jsxs)(p.ZP,{fullWidth:!0,children:[(0,k.jsx)(d.ZP,{onClick:function(){return t()},children:"Close"}),j&&(0,k.jsx)(h.Z,{ml:1,children:(0,k.jsx)(d.ZP,{onClick:function(){f({}),g({})},children:"Clear files and retry"})})]}),headerTitle:"Upload files",children:[j&&(0,k.jsx)(q.kA,{children:C}),!j&&(0,k.jsx)(U.Z,{directoryPath:r?(0,_.jN)(r):"",onDragActiveChange:c,setFileUploadProgress:f,setUploadedFiles:function(e){g(e),null==n||n()},children:(0,k.jsx)(q.es,{children:(0,k.jsxs)(m.ZP,{center:!0,children:[u&&"Drop to upload",!u&&"Click or drop files and folders to upload"]})})})]})},Q=t(77417),W=t(19698),G=t(68804),$=t(46978),X=t(87432),J=t(31353),K=t(68669),ee=t(74401),ne=t(44952),te=t(89538);function re(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?re(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var oe,ie=20*j.iI;function ue(e,n){var t=e.addNewBlock,r=(e.blocks,e.deleteWidget),d=e.disableContextMenu,f=(e.fetchAutocompleteItems,e.fetchFiles),p=e.fetchPipeline,h=e.files,b=e.onClickFile,g=e.onClickFolder,C=e.onCreateFile,w=e.onSelectBlockFile,x=e.openFile,F=(e.openSidekickView,e.pipeline),P=e.renderAfterContent,E=e.showError,I=e.setSelectedBlock,S=e.setShowHiddenFiles,U=e.showHiddenFiles,H=e.showHiddenFilesSetting,Y=e.uuid,q=(e.widgets,(0,i.useRef)(0));(0,X.eM)((function(){q.current+=1,console.log("[FileBrowser][".concat(Y,"]: ").concat(q.current," renders"))}));var re=(0,i.useRef)(null),oe=(0,i.useRef)(null),ue=((0,i.useRef)(null),(0,i.useContext)(u.ThemeContext)),ce=(0,i.useState)(null),ae=ce[0],se=ce[1],de=(0,i.useState)(null),fe=de[0],pe=de[1],ve=(0,i.useState)(null),he=ve[0],me=ve[1],be=(0,i.useState)(0),ge=be[0],je=be[1],Ce=(0,i.useState)(null);Ce[0],Ce[1];(0,i.useEffect)((function(){je((function(e){return e+1}))}),[h]);var ye=(0,i.useMemo)((function(){return he&&void 0!==(null==he?void 0:he.children)&&he}),[he]),we=(0,Q.Z)(),ke=we.featureEnabled,xe=we.featureUUIDs,Fe=we.project,Oe=(0,W.Z)().status,Ze=(0,c.Db)((function(e){return L.ZP.downloads.files.useCreate(e)()}),{onSuccess:function(e){return(0,R.wD)(e,{callback:function(){var n=e.data.download.token;(0,ne.K)(n)},onErrorCallback:function(e,n){return E({errors:n,response:e})}})}}),De=(0,l.Z)(Ze,1)[0],Pe=(0,c.Db)((function(e){return L.ZP.files.useDelete(e)()}),{onSuccess:function(e){return(0,R.wD)(e,{callback:function(){null==f||f()},onErrorCallback:function(e,n){return E({errors:n,response:e})}})}}),Ee=(0,l.Z)(Pe,1)[0],Ie=(0,c.Db)((function(e){return L.ZP.folders.useDelete(e)()}),{onSuccess:function(e){return(0,R.wD)(e,{callback:function(){null==f||f()},onErrorCallback:function(e,n){return E({errors:n,response:e})}})}}),Le=(0,l.Z)(Ie,1)[0],_e=(0,c.Db)((function(e){var n=e.block,t=(n.language,n.type,n.uuid),r=e.file,l=e.force,o=void 0!==l&&l;return L.ZP.blocks.useDelete(encodeURIComponent(t),{file_path:r?encodeURIComponent((0,ee.a9)(r)):null,force:o})()}),{onSuccess:function(e){return(0,R.wD)(e,{callback:function(){null==f||f()},onErrorCallback:function(e,n){var t=e.error,r=t.exception;if(!t.message.includes("raise HasDownstreamDependencies"))return E({errors:n,response:e});Me({block:qe,file:he,exception:r})}})}}),Se=(0,l.Z)(_e,1)[0],Re=(0,te.dd)((function(e){var n=e.block,t=e.file;return(0,k.jsx)(A.Z,{centerOnScreen:!0,danger:!0,onCancel:Ne,onClick:function(){return Se({block:n,file:t,force:!0}).then((function(){return Ne()}))},subtitle:"Deleting this block file is dangerous. This block may have dependencies in active pipelines. Press confirm to delete this block anyway and remove it as a dependency from downstream blocks.",title:"Delete ".concat(n.uuid," anyway?"),width:34*j.iI})})),Te=(0,l.Z)(Re,2),Me=Te[0],Ne=Te[1],Be=(0,V.sE)(null==F?void 0:F.blocks,(function(e){var n=e.type;return s.tf.DATA_EXPORTER===n})),Ae=(0,c.Db)(L.ZP.blocks.pipelines.useUpdate(encodeURIComponent(null==F?void 0:F.uuid),encodeURIComponent(null==Be?void 0:Be.uuid)),{onSuccess:function(e){return(0,R.wD)(e,{callback:function(){null==p||p()},onErrorCallback:function(e,n){return E({errors:n,response:e})}})}}),Ue=(0,l.Z)(Ae,1)[0],He=(0,i.useCallback)((function(){return me(null)}),[me]);(0,i.useEffect)((function(){var e,r,l,o=function(e){if(clearTimeout(oe.current),pe(null),fe&&F&&t){var r,l,o=(null==n||null===(r=n.current)||void 0===r||null===(l=r.getBoundingClientRect)||void 0===l?void 0:l.call(r))||{},i=o.width,u=o.x;if(e.pageX>u+i){var c=(null==F?void 0:F.type)===B.qL.INTEGRATION,a=(0,K.TU)(le(le({},fe),{},{path:(0,ee.a9)(fe)}),null==Oe?void 0:Oe.repo_path,F);null==t||t(le(le({},a),{},{require_unique_name:!1}),(function(e){c&&Be&&!s.Hv.includes(e.type)&&Ue({block:le(le({},Be),{},{upstream_blocks:[e.uuid]})}),null==I||I(e)}),{disableFetchingFiles:!0})}}},i=function(e){fe&&se({x:e.pageX,y:e.pageY})};return null===(e=document)||void 0===e||e.addEventListener("click",He),null===(r=document)||void 0===r||r.addEventListener("mousemove",i),null===(l=document)||void 0===l||l.addEventListener("mouseup",o),function(){var e,n,t;null===(e=document)||void 0===e||e.removeEventListener("click",He),null===(n=document)||void 0===n||n.removeEventListener("mousemove",i),null===(t=document)||void 0===t||t.removeEventListener("mouseup",o)}}),[t,Be,fe,He,F,n,I,Oe,oe,Ue]);var Ye=(0,i.useMemo)((function(){return null==h?void 0:h.map((function(e){return(0,k.jsx)(Z.Z,{containerRef:n,cursorRef:re,disableContextMenu:d,file:e,level:0,onClickFile:b,onClickFolder:g,onSelectBlockFile:w,openFile:x,reloadCount:ge,renderAfterContent:P,setCoordinates:se,setDraggingFile:pe,setSelectedFile:me,theme:ue,timeout:oe,uuidContainer:Y},"".concat(e.name,"-").concat(ge))}))}),[d,h,b,g,x,w,ge,P,Y]),qe=(0,i.useMemo)((function(){return he&&(0,_.lr)(he)}),[he]),Ve=(0,i.useMemo)((function(){return fe&&(0,_.lr)(fe,null,!0)}),[fe]),ze=(0,te.dd)((function(){return(0,k.jsx)(z,{fetchFileTree:f,onCancel:Ge,selectedFolder:ye})}),{},[f,ye],{background:!0,uuid:"upload_files"}),Qe=(0,l.Z)(ze,2),We=Qe[0],Ge=Qe[1],$e=(0,te.dd)((function(e){return(0,k.jsx)(T,{fetchFileTree:f,file:null==e?void 0:e.file,moveFile:null==e?void 0:e.moveFile,onCancel:Ke,onCreateFile:C,selectedFolder:ye,showError:E})}),{},[f,C,ye,E],{background:!0,disableClickOutside:!0,uuid:"new_file"}),Xe=(0,l.Z)($e,2),Je=Xe[0],Ke=Xe[1],en=(0,te.dd)((function(e){return(0,k.jsx)(N,{fetchFileTree:f,file:null==e?void 0:e.file,moveFile:null==e?void 0:e.moveFile,onCancel:rn,projectType:null==e?void 0:e.projectType,selectedFolder:ye,showError:E})}),{},[f,ye,E,E],{background:!0,disableClickOutside:!0,uuid:"new_folder"}),nn=(0,l.Z)(en,2),tn=nn[0],rn=nn[1],ln=(0,i.useMemo)((function(){var e;if(!qe&&!he&&!ye)return(0,k.jsx)("div",{});var t=(null==n||null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect())||{},l=t.x,i=t.width,u=ae||{},c=u.x,d=void 0===c?0:c,f=u.y,p=void 0===f?0:f,h=d+j.iI;d+ie>=l+i&&(h=l+i-(ie+j.iI)),h<0&&(h=0);var g=[];ye?(g.push.apply(g,[{label:function(){return"Open all files in the immediate directory"},onClick:function(){var e;null==ye||null===(e=ye.children)||void 0===e||e.forEach((function(e){if(!("children"in e)){var n,t=(0,ee.a9)(ye);b(null===(n=[t,null==e?void 0:e.name])||void 0===n?void 0:n.join(o.sep),e)}}))},uuid:"new_folder"},{label:function(){return"New folder"},onClick:function(){tn()},uuid:"new_folder"},{label:function(){return"Rename folder"},onClick:function(){tn({file:ye})},uuid:"rename_folder"},{label:function(){return"Move folder"},onClick:function(){tn({file:ye,moveFile:!0})},uuid:"Move_folder"},{label:function(){return"Delete folder"},onClick:function(){var e=(0,ee.a9)(ye);window.confirm("Are you sure you want to delete folder ".concat(e," and all its subfolders and files?"))&&Le(encodeURIComponent(e))},uuid:"Delete_folder"},{label:function(){return"New file"},onClick:function(){Je({file:{}})},uuid:"new_file"},{label:function(){return"Upload files"},onClick:function(){We()},uuid:"upload_files"},{label:function(){return"Expand all subfolders"},onClick:function(){var e=new CustomEvent(G.op,{detail:{expand:!0,file:he,folder:ye}});window.dispatchEvent(e)},uuid:"Expand all subfolders"},{label:function(){return"Collapse all subfolders"},onClick:function(){var e=new CustomEvent(G.op,{detail:{expand:!1,file:he,folder:ye}});window.dispatchEvent(e)},uuid:"Collapse all subfolders"}]),g.push({beforeIcon:(0,k.jsx)(D.Z,{width:1.5*j.iI}),onClick:function(){tn({projectType:M.k.STANDALONE})},uuid:"New Mage project"}),null!=ke&&ke(null==xe?void 0:xe.DBT_V2)&&g.push({beforeIcon:(0,k.jsx)(y.DBT,{}),onClick:function(){tn({projectType:M.k.DBT})},uuid:"New dbt project"})):he&&(null!=he&&he.path&&g.push({label:function(){var e,n=null==he||null===(e=he.path)||void 0===e?void 0:e.split(o.sep),t=(null==n?void 0:n.length)||0;return(0,k.jsx)(m.ZP,{muted:!0,monospace:!0,noWrapping:!0,xsmall:!0,children:null==n?void 0:n.map((function(e,n){return(0,k.jsxs)("span",{children:[n>=1&&(0,k.jsx)("br",{}),n>=1&&"|",(0,V.w6)(n).map((function(){return"--"})).join(""),(0,k.jsx)(m.ZP,{inline:!0,monospace:!0,muted:n<=t-2,noWrapping:!0,xsmall:!0,children:e}),n<=t-2&&"/"]},"".concat(e,"_").concat(n))}))})},onClick:function(){return b?null==b?void 0:b(null==he?void 0:he.path,he):x?null==x?void 0:x(null==he?void 0:he.path,he):null},uuid:"file_path"}),g.push.apply(g,[{label:function(){return"Rename file"},onClick:function(){Je({file:he})},uuid:"rename_file"},{label:function(){return"Move file"},onClick:function(){Je({file:he,moveFile:!0})},uuid:"move_file"},{label:function(){return"Download file"},onClick:function(){var e=(0,ee.a9)(he);De(encodeURIComponent(e))},uuid:"download_file"}]),qe?g.push({label:function(){return"Delete file"},onClick:function(){if(qe.type===s.tf.CHART)window.confirm("Are you sure you want to delete ".concat(qe.uuid,"?"))&&r(qe);else{var e=(0,ee.a9)(he);window.confirm("Are you sure you want to delete ".concat(e,"?"))&&Ee(encodeURIComponent(e))}},uuid:"delete_block_file"}):g.push({label:function(){return"Delete file"},onClick:function(){var e=(0,ee.a9)(he);window.confirm("Are you sure you want to delete file ".concat(e,"?"))&&Ee(encodeURIComponent(e))},uuid:"delete_file"}));var C=p+j.iI/2,w=36*g.length;return p+w>=window.innerHeight&&(C=p-w),(0,a.createPortal)((0,k.jsx)("div",{style:{left:h,position:"fixed",top:C,zIndex:J.bf+100},children:(0,k.jsx)(v.Z,{items:g,open:!0,parentRef:void 0,uuid:"FileBrowser/ContextMenu",width:ie})}),document.body)}),[ae,Se,Ee,Le,r,De,ke,xe,Fe,n,We,Je,tn,qe,he,ye]);return(0,k.jsxs)($.Nk,{ref:n,children:[H&&S&&void 0!==U&&(0,k.jsx)(O,{setShowHiddenFiles:S,showHiddenFiles:U}),Ye,(qe||he||ye)&&ln,Ve&&(0,k.jsx)("div",{style:{left:(null==ae?void 0:ae.x)-j.iI,position:"fixed",top:(null==ae?void 0:ae.y)-j.iI,zIndex:J.bf+100},children:(0,k.jsx)(m.ZP,{cursor:"grabbing",monospace:!0,children:null==Ve?void 0:Ve.uuid})})]})}!function(e){e.BLOCK_FILE="block_file",e.DISABLED="disabled",e.FILE="file",e.FOLDER="folder",e.PIPELINE="pipeline"}(oe||(oe={}));var ce=i.forwardRef(ue)},53005:function(e,n,t){t.d(n,{IO:function(){return y},V3:function(){return C},a9:function(){return v},eV:function(){return h},jN:function(){return m},lr:function(){return j},mD:function(){return i.mD},o$:function(){return g},px:function(){return k},u$:function(){return w},y:function(){return b}});var r=t(82394),l=t(75582),o=t(17717),i=t(74401),u=t(44425),c=t(89706),a=t(86735),s=t(68669),d=t(81728);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function v(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?null:null==e?void 0:e.name);if(null!=e&&e.parent){var t=[e.parent.name];return(null==n?void 0:n.length)>=1&&t.push(n),v(e.parent,t.join(o.sep))}return n}function h(e){return null==e?void 0:e.split(o.sep).slice(1).join(o.sep)}function m(e){return h(v(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2]))}function b(e){var n=["\\.".concat(c.Lu.MD),"\\.".concat(c.Lu.PY),"\\.".concat(c.Lu.R),"\\.".concat(c.Lu.SQL),"\\.".concat(c.Lu.YAML),"\\.".concat(c.Lu.YML)].join("|"),t=new RegExp("".concat(n,"$")),r=e.match(t);return(null==r?void 0:r.length)>=1?r[0].replace(".",""):null}function g(e,n){var t=b(e);return!(["__init__.py"].includes(e)||u.tf.DBT===n&&[c.Lu.YAML,c.Lu.YML].includes(t))}function j(e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=v(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null).split(o.sep);if(!t)return null;var r=(0,s.ck)(t);if(!t)return null;var l="";if(l=t.length>=3?t.slice(2,t.length).join(o.sep):t[t.length-1],(n?u.Q3:u.$W).includes(r)&&b(l)){var i=l.lastIndexOf("."),a=l.slice(i+1);return{language:c.nB[a],type:r,uuid:l.slice(0,i)}}}function C(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=v(e,n).split(o.sep);if(t[1]){var r=(0,d.C5)(t[n?0:1]);t[1]===u.tf.DBT&&(r=u.tf.DBT);var l=t[t.length-1],i=new RegExp(".".concat(c.Lu.YAML,"$")),a=new RegExp(".".concat(c.Lu.R,"$")),s=new RegExp(".".concat(c.Lu.SQL,"$")),f=new RegExp(".".concat(c.Lu.MD,"$"));if(l.match(i)&&u.VZ.includes(r))return{type:r,uuid:l.replace(i,"")};if(l.match(a)&&u.J8.includes(r))return{type:r,uuid:l.replace(a,"")};if(l.match(s)&&u.HX.includes(r)){var p=l.replace(/[.]/g,"_");return{type:r,uuid:r===u.tf.DBT?t.slice(2,-1).join("_").concat("_".concat(p)):l.replace(s,"")}}return l.match(f)&&r===u.tf.MARKDOWN?{type:r,uuid:l.replace(f,"")}:void 0}}function y(e,n){var t=e.split("."),r=t[t.length-1];c.n6.includes(r)&&t.pop();var l=t.join("").split(o.sep),i=l.slice(1,l.length).join("");return n.find((function(e){return e.uuid===i}))}function w(e){var n=e||{},t=n.language,r=n.name,l=n.type;if(r&&t&&l){var o=l===u.tf.CUSTOM?l:"".concat(l,"s"),i=c.JD[t],a=(0,d.kE)(r);return"".concat(o,"/").concat(a,".").concat(i)}}function k(e){return(0,a.YC)(Object.entries(function(e){return(0,a.vM)(e,(function(e){var n=e.path;return(0,i.mD)(n)}))}(e||[])||{}),(function(e){var n=(0,l.Z)(e,1)[0];return c.bL[n]})).reduce((function(e,n){var t=(0,l.Z)(n,2),r=t[0],o=t[1],i={extension:r,language:c.nB[r],name:c.KA[r]};return e.concat(p(p({},i),{},{children:(0,a.YC)(o,"name").map((function(e){return p(p({},e),{},{parent:i})}))}))}),[])}},68669:function(e,n,t){t.d(n,{TU:function(){return h},ck:function(){return f},lU:function(){return v}});var r=t(21831),l=t(17717),o=t(44425),i=t(57653),u=t(89706),c=t(86735),a=t(74401),s=t(81728),d=t(42122),f=function(e){var n;if(null==e||e.forEach((function(e){if((null==e?void 0:e.length)>=1){var t=null==e?void 0:e.toLowerCase();(t in o.qC||(t=(0,s.C5)(t))in o.GJ)&&(n=t)}})),!n){var t=["\\.".concat(u.Lu.SQL),"\\.".concat(u.Lu.YAML),"\\.".concat(u.Lu.YML)].join("|"),r=new RegExp("".concat(t,"$"));if(e.join(l.sep).match(r)&&(e.includes(o.tf.DBT)||e.includes("dbts")))return o.tf.DBT}return n},p=function(e){return e[0]===o.tf.DBT?e.slice(1).join(l.sep):function(e){return e.at(-1)}(e).split(".")[0]};function v(){return new RegExp(Object.keys(u.nB).map((function(e){return".(".concat(e,")$")})).join("|"))}function h(e,n,t){var h,m=null==e||null===(h=e.path.match(v())[0])||void 0===h?void 0:h.split(".")[1],b=t.type===i.qL.INTEGRATION,g=(0,c.sE)(null==t?void 0:t.blocks,(function(e){var n=e.type;return o.tf.DATA_EXPORTER===n})),j=e.path.replace(n,"").split(l.sep),C=f(e.path.split(l.sep)),y=o.tf.DBT===C,w=p(j);if(j.length>=3&&!y){var k,x,F=null==j?void 0:j.findIndex((function(e){return null==e?void 0:e.startsWith(C)})),O=null!=j&&null!==(k=j[(null==j?void 0:j.length)-1])&&void 0!==k&&k.startsWith(w)?(null==j?void 0:j.length)-1:null==j?void 0:j.length,Z=null==j||null===(x=j.slice(F+1,O))||void 0===x?void 0:x.join(l.sep);(null==Z?void 0:Z.length)>=1&&(w="".concat(Z,"/").concat(w))}var D=u.nB[m],P={configuration:(0,d.hB)({file_path:y&&o.t6.SQL===D?(0,a.a9)(e):null,file_source:{path:(0,a.a9)(e)}}),language:D,name:(0,s.wE)(w),type:C};if(C===o.tf.CUSTOM&&(P.color=o.Lq.TEAL),b&&!o.Hv.includes(C)){var E=(0,c.sE)(t.blocks,(function(e){var n=e.type;return o.tf.DATA_LOADER===n})),I=(0,c.sE)(t.blocks,(function(e){var n=e.type;return o.tf.TRANSFORMER===n})),L=[];I?L.push(I.uuid):null!=g&&g.upstream_blocks?L.push.apply(L,(0,r.Z)(g.upstream_blocks)):E&&L.push(E.uuid),P.upstream_blocks=L}return P}},14568:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(82394),l=t(75582),o=t(17717),i=t(82684),u=t(83455),c=t(9518),a=t(50402),s=t(28598);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=c.default.div.withConfig({displayName:"MultiFileInput__DropzoneStyle",componentId:"sc-1l6yd2y-0"})(["&:hover{cursor:pointer;}"]);var v=function(e){var n=e.children,t=e.fileSelectOnly,r=e.inputOnChange,l=e.inputProps,o=e.onDragActiveChange,u=e.setFiles,c=(0,i.useCallback)((function(e){u(e)}),[u]),d=(0,a.uI)({onDrop:c}),v=d.getInputProps,h=d.getRootProps,m=d.isDragActive,b=v(),g=b.accept,j=b.autoComplete,C=b.multiple,y=b.onChange,w=b.onClick,k=b.ref,x=b.style,F=b.tabIndex,O=b.type,Z=f(f({},l),{},{accept:g,autoComplete:j,multiple:C,onChange:function(e){null==r||r(e),null==l||l.onChange(e),y(e)},onClick:w,ref:k,style:x,tabIndex:F,type:O});return(0,i.useEffect)((function(){null==o||o(m)}),[m,o]),(0,s.jsxs)(p,f(f({},h()),{},{children:[(0,s.jsx)("input",f(f({},Z),{},{directory:t?null:"",webkitdirectory:t?null:""})),n]}))},h=t(5332);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=function(e){var n=e.children,t=e.directoryPath,c=e.pipelineZip,a=void 0!==c&&c,d=e.overwrite,f=void 0!==d&&d,p=e.onDragActiveChange,m=e.setFileUploadProgress,g=e.setUploadedFiles,j=(0,u.Db)(h.ZP.files.useCreate({onUploadProgress:function(e,n){var t,l=n.body,i=[null==l?void 0:l.dir_path,null==l||null===(t=l.file)||void 0===t?void 0:t.name,null==l?void 0:l.pipelineZip].filter((function(e){return(null==e?void 0:e.length)>=1})).join(o.sep);null==m||m((function(n){return b(b({},n),{},(0,r.Z)({},i,e.loaded/e.total))}))}})),C=(0,l.Z)(j,1)[0],y=(0,i.useCallback)((function(e){e.forEach((function(e){var n=e.name,l=e.path,i=[t],u=l.split(o.sep).filter((function(e){return e&&e!==n})).join(o.sep);u&&i.push(u);var c=[],s=i.join(o.sep);(null==s?void 0:s.length)>=1&&i.push(s),c.push(n);var d=c.join(o.sep);C({dir_path:s,file:e,pipeline_zip:a,overwrite:f}).then((function(e){var n=e.data,t=n.error,l=n.file;g((function(e){return b(b({},e),{},(0,r.Z)({},d,l||t))}))})),m((function(e){return b(b({},e),{},(0,r.Z)({},d,0))}))}))}),[C,t,f,m,g,a]);return(0,s.jsx)(v,{fileSelectOnly:a,onDragActiveChange:p,setFiles:y,children:n})}},44952:function(e,n,t){t.d(n,{K:function(){return l}});var r=t(4383);function l(e){var n=(0,r.ZP)("downloads",e),t=document.createElement("a");t.href=n,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(n),document.body.removeChild(t)}}}]);