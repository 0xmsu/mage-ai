"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5471],{65557:function(e,n,t){var i=t(21831),o=t(75582),r=t(82684),l=t(80329);n.Z=function(e){var n=e.children,t=e.uuid,u=e.uuids,c=void 0===u?[]:u,s=(0,l.j)("apiReloads"),d=(0,o.Z)(s,1)[0],a=(0,i.Z)(c);t&&a.push(t);var f=a.map((function(e){return String(d[e])||"-"})).join("_");return r.cloneElement(n,{key:f})}},43449:function(e,n,t){var i=t(82394),o=t(75582),r=t(17717),l=t(82684),u=t(80329),c=t(83455),s=t(84749),d=t(44425),a=t(71180),f=t(92677),h=t(75810),p=t(89706),v=t(55485),m=t(68562),b=t(57653),g=t(38276),x=t(5332),y=t(71471),j=t(87432),C=t(39643),w=t(11498),k=t(85385),O=t(68669),P=t(86735),Z=t(81728),S=t(72619),I=t(42041),_=t(44688),F=t(19183),E=t(28598);function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n,t=e.active,M=e.addNewBlock,T=e.contained,B=e.containerRef,D=e.disableRefreshWarning,U=e.fetchPipeline,L=e.fetchVariables,N=e.filePath,A=e.codeEditorMaximumHeightOffset,W=e.hideHeaderButtons,z=e.onContentChange,H=e.onFileFetched,V=e.onMountCallback,X=e.onUpdateFileSuccess,K=e.openSidekickView,Q=e.originalContent,G=e.pipeline,J=e.saveFile,q=e.selectedFilePath,Y=e.sendTerminalMessage,$=e.setDisableShortcuts,ee=e.setErrors,ne=e.setFilesTouched,te=e.setSelectedBlock,ie=e.updateFile,oe=(0,l.useRef)(0);(0,j.eM)((function(){oe.current+=1,console.log("[FileEditor][".concat(N,"]: ").concat(oe.current," renders"))}));var re=(0,u.j)("apiReloads"),le=(0,o.Z)(re,2)[1],ue=(0,l.useState)(null),ce=ue[0],se=ue[1],de=(0,l.useState)(!1),ae=de[0],fe=(de[1],B||(0,l.useRef)(null)),he=(0,l.useRef)(null),pe=(0,F.i)().height,ve=(0,l.useMemo)((function(){return new s.Z}),[]),me=(0,l.useMemo)((function(){return{api_key:w.lG,token:ve.decodedToken.token}}),[ve]),be=x.ZP.statuses.list().data,ge=(0,l.useMemo)((function(){var e,n;return null==be||null===(e=be.statuses)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.repo_path}),[be]),xe=x.ZP.file_contents.detail(N).data;(0,l.useEffect)((function(){null!=xe&&xe.file_content?(se(xe.file_content),H&&(null==H||H(xe.file_content))):null!=xe&&xe.error&&(0,S.h$)(xe,{onErrorCallback:function(e,n){return ee({errors:n,response:e})}})}),[xe,ee]);var ye=(0,l.useState)(null==ce?void 0:ce.content),je=ye[0],Ce=ye[1],we=(0,l.useCallback)((function(e){Ce(e),z&&(null==z||z(e))}),[z]),ke=(0,l.useState)(!1),Oe=ke[0],Pe=ke[1],Ze=(0,l.useMemo)((function(){return encodeURIComponent(q)===N}),[N,q]);(0,l.useEffect)((function(){var e,n;Ze&&(null==fe||null===(e=fe.current)||void 0===e||e.scrollIntoView(),null!=he&&he.current&&(null==he||null===(n=he.current)||void 0===n||n.focus()))}),[Ze]);var Se=(0,c.Db)((function(e){return ie?ie(e):x.ZP.file_contents.useUpdate((null==ce?void 0:ce.path)&&encodeURIComponent(null==ce?void 0:ce.path))(e)}),{onSuccess:function(e){return(0,S.wD)(e,{callback:function(e){var n=e.file_content;le((function(e){return R(R({},e),{},(0,i.Z)({},"FileVersions/".concat(null==ce?void 0:ce.path),Number(new Date)))})),X&&(null==X||X(n))},onErrorCallback:function(e,n){return null==ee?void 0:ee({errors:n,response:e})}})}}),Ie=(0,o.Z)(Se,1)[0],_e=(0,l.useCallback)((function(e,n){if(J)return J(e,n);Ie({file_content:R(R({},n),{},{content:e})}).then((function(){decodeURIComponent(N).split(r.sep).pop()===p.dT.METADATA_YAML&&L&&(null==L||L())})),null==ne||ne((function(e){return R(R({},e),{},(0,i.Z)({},null==n?void 0:n.path,!1))})),Pe(!1)}),[L,N,J,ne,Ie]),Fe=(0,l.useMemo)((function(){return(0,O.lU)()}),[]),Ee=(0,l.useMemo)((function(){var e,n,t,i;return null===(null==ce||null===(e=ce.path)||void 0===e?void 0:e.match(Fe))?p.Lu.TXT:null==ce||null===(n=ce.path)||void 0===n||null===(t=n.match(Fe))||void 0===t||null===(i=t[0])||void 0===i?void 0:i.split(".")[1]}),[Fe,ce]),Me=(0,l.useMemo)((function(){return null==Q?void 0:Q[null==ce?void 0:ce.path]}),[ce,Q]),Re=(0,y.Z)({contained:T,containerRef:fe}).onDidChangeCursorPosition,Te=(0,l.useMemo)((function(){if(null!=ce&&ce.path){var e=!!Me&&(null==Me?void 0:Me.content_from_base);return(0,E.jsx)(h.Z,{autoHeight:!0,height:A?pe-A:null,language:p.nB[Ee],onDidChangeCursorPosition:Re,onChange:function(e){we(e),ne&&ne((function(e){return null!=e&&e[null==ce?void 0:ce.path]?e:R(R({},e),{},(0,i.Z)({},null==ce?void 0:ce.path,!0))})),Pe(!0)},onMountCallback:function(e){he.current=e,$&&(e.onDidFocusEditorWidget=function(){null==$||$(!0)}),$&&(e.onDidBlurEditorWidget=function(){null==$||$(!1)}),V&&(null==V||V(e))},onSave:function(e){_e(e,ce)},originalValue:null==Me?void 0:Me.content_from_base,padding:10,readOnly:!!e,selected:!0,showDiffs:!!e,textareaFocused:!0,value:(0,Z.Pb)(null==ce?void 0:ce.content)?JSON.stringify(JSON.parse(null==ce?void 0:ce.content),null,2):null==ce?void 0:ce.content,width:"100%"})}}),[A,ce,Ee,pe,V,Me,_e,we,ne]),Be=null!=G&&G.blocks?(0,P.sE)(null==G?void 0:G.blocks,(function(e){var n=e.type;return d.tf.DATA_EXPORTER===n})):null,De=(0,c.Db)(x.ZP.blocks.pipelines.useUpdate(encodeURIComponent(null==G?void 0:G.uuid),encodeURIComponent(null==Be?void 0:Be.uuid)),{onSuccess:function(e){return(0,S.wD)(e,{callback:function(){null==U||U()}})}}),Ue=(0,o.Z)(De,1)[0],Le=M&&G&&ce&&p.tE.includes(Ee)&&(0,O.ck)(null==ce||null===(n=ce.path)||void 0===n?void 0:n.split(r.sep))&&(0,E.jsx)(a.ZP,{onClick:function(){var e=(null==G?void 0:G.type)===b.qL.INTEGRATION,n=(0,O.TU)(ce,ge,G);M(n,(function(n){e&&Be&&Ue({block:R(R({},Be),{},{upstream_blocks:[n.uuid]})}),null==te||te(n)}))},primary:!0,children:"Add to current pipeline"}),Ne=Y&&(0,E.jsx)(g.Z,{m:2,children:(0,E.jsx)(m.ZP,{disabled:!ge,inline:!0,loading:ae,onClick:function(){null==K||K(k.cH.TERMINAL),null==Y||Y(JSON.stringify(R(R({},me),{},{command:["stdin","pip install -r ".concat(ge,"/requirements.txt\r")]})))},title:ge?"Pip install packages from your saved requirements.txt file (âŒ˜+S to save).":"Please use right panel terminal to install packages.",uuid:"FileEditor/InstallPackages",children:"Install packages"})}),Ae="FileEditor/".concat((null==ce?void 0:ce.path)||N),We=(0,_.y)(),ze=We.registerOnKeyDown,He=We.unregisterOnKeyDown;return(0,l.useEffect)((function(){return function(){He(Ae)}}),[He,Ae]),ze(Ae,(function(e,n){if(t&&!D)if((0,I.y)([C.zX,C.Um],n)||(0,I.y)([C.PQ,C.Um],n))e.preventDefault(),_e(je,ce);else if(Oe&&(0,I.y)([C.zX,C.hS],n)){e.preventDefault();var i="".concat(ce.path," has changes that are unsaved. ")+"Click cancel and save your changes before reloading page.";"undefined"!=typeof location&&window.confirm(i)&&location.reload()}}),[t,je,D,ce,_e,Oe]),(0,E.jsxs)("div",{ref:B?null:fe,children:[!W&&(0,E.jsx)(g.Z,{p:2,children:(0,E.jsxs)(v.ZP,{justifyContent:"space-between",children:[(0,E.jsxs)(f.Z,{children:[Le,(0,E.jsx)(a.ZP,{disabled:!je,onClick:function(e){e.preventDefault(),_e(je,ce)},title:je?null:"No changes have been made to this file.",children:"Save file content"})]}),K&&(0,E.jsx)(f.Z,{children:(0,E.jsx)(a.ZP,{compact:!0,onClick:function(){K(k.cH.FILE_VERSIONS)},small:!0,title:"View previous changes to this file.",children:"Show versions"})})]})}),Te,N===p.dT.REQS_TXT&&Ne]})}},69616:function(e,n,t){t.d(n,{Z:function(){return m}});var i=t(82684),o=t(39867),r=t(30160),l=t(72473),u=t(9518),c=t(70515),s=t(47041),d=t(91437),a=2.5*c.iI,f=u.default.div.withConfig({displayName:"indexstyle__ScrollerStyle",componentId:"sc-16b7ntp-0"})([""," align-items:center;display:flex;flex-direction:row;height:100%;overflow:auto;"],(0,s.y$)()),h=u.default.div.withConfig({displayName:"indexstyle__ArrowCount",componentId:"sc-16b7ntp-1"})(["display:none;"," position:absolute;z-index:1;",""],(0,d.eR)(),(function(e){return e.right&&"\n    right: 0px;\n  "})),p=u.default.div.withConfig({displayName:"indexstyle__CountInnerStyle",componentId:"sc-16b7ntp-2"})(["align-items:center;display:flex;"]),v=t(28598);var m=function(e){var n=e.children,t=e.fileTabs,u=e.selectedFilePathIndex,c=(e.widthOffset,(0,i.useRef)(null)),s=(0,i.useRef)(null),d=(0,i.useRef)([]),m=(0,i.useRef)(null),b=(0,i.useRef)(null),g=(0,i.useRef)(null),x=(0,i.useRef)(null),y=((0,i.useRef)(null),(0,i.useRef)(null),(0,i.useRef)(null)),j=(0,i.useState)(null),C=(j[0],j[1]);(0,i.useEffect)((function(){setTimeout((function(){var e,n,t,i;C({scroll:(null==c||null===(e=c.current)||void 0===e||null===(n=e.getBoundingClientRect())||void 0===n?void 0:n.width)||0,tabs:(null==s||null===(t=s.current)||void 0===t||null===(i=t.getBoundingClientRect())||void 0===i?void 0:i.width)||0})}),1)}),[]);var w=(0,i.useMemo)((function(){var e;return(null===(e=i.Children.toArray(t))||void 0===e?void 0:e.length)||0}),[t]);(0,i.useEffect)((function(){if(u>=0){var e,n,t,i,o=null==c||null===(e=c.current)||void 0===e?void 0:e.scrollLeft,r=0,l=0;null==d||null===(n=d.current)||void 0===n||null===(t=n.slice(0,u+1))||void 0===t||t.forEach((function(e,n){var t,i,o=(null==e||null===(t=e.current)||void 0===t||null===(i=t.getBoundingClientRect())||void 0===i?void 0:i.width)||0;r+=o,n<=u-1&&(l+=o)}));var s=((null==c||null===(i=c.current)||void 0===i?void 0:i.getBoundingClientRect())||{width:null}).width;if(null===s)return;var a,f=r-(s+o);if(f>0)null==c||null===(a=c.current)||void 0===a||a.scrollBy(f,0);else if(o>l){var h;null==c||null===(h=c.current)||void 0===h||h.scrollBy(l-o,0)}}}),[u,w]);var k=(0,i.useMemo)((function(){var e;return null===(e=i.Children.toArray(t))||void 0===e?void 0:e.map((function(e,n){var t,o;d.current[n]=(null==d||null===(t=d.current)||void 0===t?void 0:t[n])||(0,i.createRef)();var r=null==d||null===(o=d.current)||void 0===o?void 0:o[n];return(0,v.jsx)("div",{ref:r,children:e},"file-tab-".concat(n))}))}),[t]);function O(){var e,n,t,i=(null==c||null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect())||{left:0,width:0},o=i.left,r=i.width,l=(null==y||null===(n=y.current)||void 0===n?void 0:n.clientX)<=o+2*a;l&&(m.current.style.display="none");var u=(null==y||null===(t=y.current)||void 0===t?void 0:t.clientX)>=o+r-2*a;return u&&(g.current.style.display="none"),[l,u]}function P(e){y.current=e,O()}function Z(){var e,n,t=((null==c||null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect())||{width:null}).width;if(null!==t){var i=null==c||null===(n=c.current)||void 0===n?void 0:n.scrollLeft,o=[],r=[],l=[],u=null==d?void 0:d.current.map((function(e,n){var t,i;return(null==e||null===(t=e.current)||void 0===t||null===(i=t.getBoundingClientRect())||void 0===i?void 0:i.width)||0})),s=0;null==u||u.forEach((function(e,n){var u=s;s+e<i?o.push(n):u>i+t?l.push(n):r.push(n),s+=e}));var a=(null==o?void 0:o.length)||0,f=(null==l?void 0:l.length)||0,h=O();null!=m&&m.current&&(a>=2?(h[0]||(m.current.style.display="block"),b.current.innerText=a):(m.current.style.display="none",b.current.innerText=null)),null!=g&&g.current&&(f>=2?(h[1]||(g.current.style.display="block"),x.current.innerText=f):(g.current.style.display="none",x.current.innerText=null))}}return(0,i.useEffect)((function(){var e,n;return Z(),null==c||null===(e=c.current)||void 0===e||e.addEventListener("mousemove",P),null==c||null===(n=c.current)||void 0===n||n.addEventListener("scroll",Z),function(){var e,n;null==c||null===(e=c.current)||void 0===e||e.removeEventListener("mousemove",P),null==c||null===(n=c.current)||void 0===n||n.removeEventListener("scroll",Z)}}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(f,{ref:c,children:[(0,v.jsx)(h,{ref:m,children:(0,v.jsxs)(p,{className:"count-inner",children:[(0,v.jsx)(l.ChevronLeft,{size:a,warning:!0}),(0,v.jsx)(o.Z,{size:a,warning:!0,children:(0,v.jsx)(r.ZP,{bold:!0,inverted:!0,monospace:!0,ref:b})})]})}),(0,v.jsx)("div",{ref:s,style:{display:"flex",alignItems:"center",height:"100%"},children:k}),(0,v.jsx)(h,{ref:g,right:!0,children:(0,v.jsxs)(p,{className:"count-inner",children:[(0,v.jsx)(o.Z,{size:a,warning:!0,children:(0,v.jsx)(r.ZP,{bold:!0,inverted:!0,monospace:!0,ref:x})}),(0,v.jsx)(l.ChevronRight,{size:a,warning:!0})]})})]}),n]})}},28385:function(e,n,t){var i=t(82394),o=t(75582),r=t(17717),l=t(82684),u=t(80329),c=t(83455),s=t(71180),d=t(75810),a=t(89706),f=t(97618),h=t(55485),p=t(85854),v=t(38276),m=t(4190),b=t(75499),g=t(30160),x=t(5332),y=t(70515),j=t(68669),C=t(3917),w=t(81728),k=t(72619),O=t(95924),P=t(86735),Z=t(42122),S=t(28598);function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.onActionCallback,t=e.pipeline,I=e.selectedBlock,F=e.selectedFilePath,E=e.setErrors,M=e.width,R=(0,u.j)("apiReloads"),T=(0,o.Z)(R,2)[1],B=(0,l.useMemo)((function(){return F?encodeURIComponent(F):I?encodeURIComponent("".concat(null==I?void 0:I.type,"/").concat(null==I?void 0:I.uuid)):null}),[I,F]),D=x.ZP.file_versions.files.list(B,(0,Z.hB)({block_uuid:null==I?void 0:I.uuid,pipeline_uuid:null==t?void 0:t.uuid})),U=D.data,L=D.mutate,N=(0,l.useMemo)((function(){return(null==U?void 0:U.file_versions)||[]}),[U]),A=(0,l.useState)(null),W=A[0],z=A[1],H=(0,l.useMemo)((function(){return null==N?void 0:N[W]}),[W,N]),V=x.ZP.file_contents.detail(H?encodeURIComponent(H.path):null).data,X=(0,l.useMemo)((function(){return null==V?void 0:V.file_content}),[V]),K=(0,l.useMemo)((function(){return(0,j.lU)()}),[]),Q=(0,l.useMemo)((function(){var e,n,t,i;return null===(e="string"!=typeof F&&(0,Z.Kn)(F)?(null==F?void 0:F.path)||(null==F?void 0:F.name):F)||void 0===e||null===(n=e.match(K))||void 0===n||null===(t=n[0])||void 0===t||null===(i=t.split("."))||void 0===i?void 0:i[1]}),[F,K]),G=(0,c.Db)(x.ZP.file_contents.useUpdate(B),{onSuccess:function(e){return(0,k.wD)(e,{callback:function(e){var t;F&&L();var o=null==e||null===(t=e.file_content)||void 0===t?void 0:t.path,l="FileEditor/".concat(o);if(o){var u=o.split(r.sep);if("pipelines"===u[0]){var c=u.slice(1,u.length-1).join(r.sep);l="PipelineDetail/".concat(c)}}T((function(e){return _(_({},e),{},(0,i.Z)({},l,Number(new Date)))})),z((function(e){return e+1})),null==n||n(null==e?void 0:e.file_content,{blockUUID:null==I?void 0:I.uuid})},onErrorCallback:function(e,n){return E({errors:n,response:e})}})}}),J=(0,o.Z)(G,2),q=J[0],Y=J[1].isLoading,$=(0,l.useCallback)((function(e){var n=_({},e);return F||(n.block_uuid=null==I?void 0:I.uuid,n.pipeline_uuid=null==t?void 0:t.uuid),q({file_content:n})}),[t,I,F,q]),ee=(0,l.useMemo)((function(){var e=N.map((function(e){var n=e.name,t=e.path;return[(0,S.jsxs)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,S.jsxs)(f.Z,{flex:1,children:[(0,S.jsx)(g.ZP,{default:!0,monospace:!0,children:(0,C.JX)(n,{withSeconds:!0})}),(0,S.jsx)(v.Z,{px:2*y.cd,children:(0,S.jsx)(g.ZP,{monospace:!0,children:n})})]}),H&&(null==H?void 0:H.path)===t&&(0,S.jsx)(s.ZP,{compact:!0,loading:Y,onClick:function(e){(0,O.j)(e),$({version:n})},small:!0,children:"Replace with this version"})]},n)]}));if(H){var n,t=(0,S.jsx)(v.Z,{p:y.cd,children:(0,S.jsx)(m.Z,{},"spinner")});if(X&&null!=X&&null!==(n=X.path)&&void 0!==n&&n.includes(null==H?void 0:H.path)){var i=X.content,o=void 0===i?"":i;t=(0,S.jsx)(d.Z,{autoHeight:!0,language:a.nB[Q],padding:2*y.iI,readOnly:!0,value:(0,w.Pb)(o)?JSON.stringify(JSON.parse(o),null,2):o,width:M})}e=(0,P.Hk)([t],W+1,e)}return e}),[X,Q,N,Y,H,W,$,M]);return(0,S.jsxs)("div",{style:{width:M},children:[(0,S.jsxs)(v.Z,{p:y.cd,children:[(0,S.jsx)(p.Z,{level:5,children:"File versions"}),(0,S.jsx)(g.ZP,{inline:!0,monospace:!0,children:F?decodeURIComponent(F):null==I?void 0:I.uuid})]}),(0,S.jsx)(b.Z,{buildRowProps:function(e){if(H&&W+1===e)return{renderCell:function(e){return e},renderRow:function(e){return e}}},columnFlex:[1],columns:[{uuid:"Version"}],isSelectedRow:function(e){var n;return(null===(n=N[e])||void 0===n?void 0:n.name)===(null==H?void 0:H.name)},onClickRow:function(e){H?e===W?z(null):e<W?z(e):e>W+1&&z(e-1):z(e)},rows:ee})]})}},93528:function(e,n,t){t.d(n,{ZP:function(){return me}});var i=t(82394),o=t(75582),r=t(83991),l=t.n(r),u=t(64866),c=t(82684),s=t(80329),d=t(83455),a=t(65557),f=t(71180),h=t(26304),p=t(43449),v=t(9518),m=t(70515),b=t(91437),g=v.default.div.withConfig({displayName:"indexstyle__OverlayStyle",componentId:"sc-18cl054-0"})([""," backdrop-filter:saturate(","%) blur(","px);bottom:0;height:inherit;left:0;pointer-events:none;position:absolute;right:0;top:0;width:inherit;z-index:1;",""],(0,b.eR)(),20*m.iI,1*m.iI,(function(e){return(null==e?void 0:e.ready)&&"\n    opacity: 0;\n  "})),x=t(28598),y=["addNewBlock","contained","containerRef","disableRefreshWarning","fetchPipeline","fetchVariables","codeEditorMaximumHeightOffset","onUpdateFileSuccess","openFilePaths","openSidekickView","originalContent","pipeline","saveFile","selectedFilePath","sendTerminalMessage","setContentByFilePath","setDisableShortcuts","setErrors","setFilesTouched","setSelectedBlock"];function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=function(e){var n=e.addNewBlock,t=e.contained,o=e.containerRef,r=e.disableRefreshWarning,l=e.fetchPipeline,u=e.fetchVariables,s=e.codeEditorMaximumHeightOffset,d=e.onUpdateFileSuccess,f=e.openFilePaths,v=e.openSidekickView,m=e.originalContent,b=e.pipeline,j=e.saveFile,w=e.selectedFilePath,k=e.sendTerminalMessage,O=e.setContentByFilePath,P=e.setDisableShortcuts,Z=e.setErrors,S=e.setFilesTouched,I=e.setSelectedBlock,_=(0,h.Z)(e,y),F=(0,c.useState)(!1),E=F[0],M=F[1];return(0,c.useEffect)((function(){E||M(!0)}),[]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g,{ready:E}),null==f?void 0:f.map((function(e){return(0,x.jsx)("div",{style:{display:w===e?null:"none"},children:(0,x.jsx)(a.Z,{uuid:"FileEditor/".concat(decodeURIComponent(e)),children:(0,x.jsx)(p.Z,C(C({},_),{},{active:w===e,addNewBlock:n,contained:t,containerRef:o,disableRefreshWarning:r,fetchPipeline:l,fetchVariables:u,filePath:e?encodeURIComponent(e):null,codeEditorMaximumHeightOffset:s,hideHeaderButtons:!0,onContentChange:function(n){return O((0,i.Z)({},e,n))},onUpdateFileSuccess:d,openSidekickView:v,originalContent:m,pipeline:b,sendTerminalMessage:k,setDisableShortcuts:P,setSelectedBlock:I,saveFile:j,selectedFilePath:w,setErrors:Z,setFilesTouched:S}))})},e)}))]})},k=t(97618),O=t(55485),P=t(78650),Z=t(87418),S=t(69616),I=t(89706),_=t(28385),F=t(46732),E=t(49130),M=t(38276),R=t(27597),T=t(17488),B=t(5332),D=t(44897),U=t(21326),L=t(59457),N=t(19698),A=t(16682),W=t(72473),z=t(3917),H=t(72191),V=t(39643),X=t(53808),K=t(86735),Q="show_hidden_files",G="open_files";function J(e){(0,X.t8)(G,e)}var q=t(35526),Y=t(2842),$=t(46684),ee=t(47041),ne=(Y.uX,$.Mz,v.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-11pty4f-0"})(["height:","px;top:","px;z-index:3;",""],72,$.Mz,(function(e){return"\n    background-color: ".concat((e.theme.background||D.Z.background).codeArea,";\n  ")})),v.default.div.withConfig({displayName:"indexstyle__MenuStyle",componentId:"sc-11pty4f-1"})(["position:relative;z-index:1;",""],(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||D.Z.borders).medium,";\n  ")})),v.default.div.withConfig({displayName:"indexstyle__TabsStyle",componentId:"sc-11pty4f-2"})([""," height:","px;overflow-x:auto;position:sticky;width:100%;z-index:0;"],(0,ee.y$)(),36),v.default.div.withConfig({displayName:"indexstyle__SearchContainerStyle",componentId:"sc-11pty4f-3"})(["margin:","px;margin-right:0;",""],m.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||D.Z.background).panel,";\n  ")}))),te=t(53005),ie=t(81728),oe=t(74401),re=t(74052),le=t(89860),ue=t(42041),ce=t(72619),se=t(23780),de=t(90758),ae=t(44688);function fe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function he(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?fe(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var pe=2*m.iI,ve={default:!0,size:H.gt};var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uuid:null},n=e.addNewBlock,t=e.blocks,r=e.contained,h=e.containerRef,p=e.deleteWidget,v=e.disableContextMenu,b=e.fetchAutocompleteItems,g=e.fetchPipeline,y=e.fetchVariables,j=e.codeEditorMaximumHeightOffset,C=e.delayFetch,H=e.onClickTabClose,Y=e.onCreateFile,$=e.onFileVersionClick,ee=e.onOpenFile,fe=e.onSelectBlockFile,me=e.onSelectFile,be=e.onUpdateFileSuccess,ge=e.openSidekickView,xe=e.originalContent,ye=e.pipeline,je=e.query,Ce=e.selectedFilePath,we=e.sendTerminalMessage,ke=e.setDisableShortcuts,Oe=e.setSelectedBlock,Pe=e.showHiddenFilesSetting,Ze=e.uuid,Se=e.widgets,Ie=(0,c.useMemo)((function(){return"useFileComponents/".concat(Ze)}),[Ze]),_e=(0,s.j)("apiReloads"),Fe=(0,o.Z)(_e,2)[1],Ee=(0,se.VI)(null,{},[],{uuid:Ie}),Me=(0,o.Z)(Ee,1)[0],Re=(0,c.useState)((0,X.U2)(Q,!1)),Te=Re[0],Be=Re[1],De=(0,N.Z)({delay:0,refreshInterval:0,revalidateOnFocus:!1}).status,Ue=(0,c.useRef)(null),Le=(0,c.useRef)(null),Ne=(0,c.useRef)([]),Ae=(0,c.useRef)(null),We=(0,c.useRef)(null),ze=(0,c.useRef)(null),He=(0,c.useState)({}),Ve=He[0],Xe=He[1],Ke=(0,c.useState)({}),Qe=Ke[0],Ge=Ke[1],Je=(0,c.useCallback)((function(e){Le.current||(Le.current={}),Le.current=he(he({},Le.current),e),Ge((function(n){return he(he({},n),e)}))}),[Le]),qe=(0,c.useState)({}),Ye=qe[0],$e=qe[1],en=(0,c.useState)([]),nn=en[0],tn=en[1],on=(0,c.useState)(null),rn=on[0],ln=on[1],un=(0,c.useMemo)((function(){return null==nn?void 0:nn.findIndex((function(e){return e===rn}))}),[nn,rn]),cn=(0,c.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=(0,oe.WL)("function"==typeof e?null==e?void 0:e():e,De);if(!n){var i;null!=Ne&&Ne.current||(Ne.current=[]);var o=null===(i=Ne.current||[])||void 0===i?void 0:i.filter((function(e){return e!==t}));o.unshift(t),Ne.current=o}Ae.current=t,ln(t)}),[De]),sn=(0,c.useState)({}),dn=sn[0],an=sn[1],fn=(0,c.useCallback)((function(e){an((function(n){var t="function"==typeof e?null==e?void 0:e(n):e;return Object.entries(t).reduce((function(e,n){var t=(0,o.Z)(n,2),r=t[0],l=t[1];return he(he({},e),{},(0,i.Z)({},(0,oe.WL)(r,De),l))}),{})}))}),[De]),hn=(0,c.useState)(!1),pn=hn[0],vn=hn[1],mn=(0,c.useCallback)((function(e){vn((function(n){var t="function"==typeof e?null==e?void 0:e(n):e;return $&&(null==$||$(t)),t}))}),[$]),bn=(0,c.useMemo)((function(){return null==Ye?void 0:Ye[rn]}),[Ye,rn]),gn=(0,c.useMemo)((function(){return nn.reduce((function(e,n){var t=(0,le.fj)(n);return e[t]||(e[t]=[]),e[t].push(n),e}),{})}),[nn]),xn=(0,c.useCallback)((function(e){var n=null==e?void 0:e.map((function(e){return(0,oe.WL)(e,De)}));J(n),tn(n)}),[De]),yn=(0,c.useCallback)((function(e){xn(function(e){var n,t=(0,X.U2)(G,[]),i=null===(n=t)||void 0===n?void 0:n.indexOf(e);return i>=0&&(t=(0,K.oM)(t,i)),t.unshift(e),J(t),t}((0,oe.WL)(e,De)))}),[xn,De]),jn=(0,c.useCallback)((function(e){var n,t,o=null==e?void 0:e.map((function(e){return(0,oe.WL)(e,De)})),r=null==o?void 0:o.filter((function(e){return(null==dn?void 0:dn[e])&&!window.confirm("".concat(e," has unsaved changes, are you sure you want to close this file?"))}));if(!((null==r?void 0:r.length)>0)){var l=null==o?void 0:o.map((function(e){return null==nn?void 0:nn.findIndex((function(n){return n===e}))}));l.sort();var u=null==l?void 0:l.find((function(e,n){return n>=1&&e>l[n-1]+1}));null==u&&(u=null==l?void 0:l[0]),Je(null==o?void 0:o.reduce((function(e,n){return he(he({},e),{},(0,i.Z)({},n,null))}),{})),fn((function(e){return he(he({},e),null==o?void 0:o.reduce((function(e,n){return he(he({},e),{},(0,i.Z)({},n,!1))}),{}))}));var c=[];if(null==o||o.forEach((function(e){c=function(e){var n=(0,X.U2)(G,[]),t=(0,K.Od)(n,(function(n){return n===e}));return J(t),t}(e),xn(c)})),null!=Ne&&Ne.current&&(Ne.current=Ne.current.filter((function(e){return!(null!=o&&o.includes(e))}))),(null===(n=c)||void 0===n?void 0:n.length)>=1){var s,d=Math.min(u-1,(null===(s=c)||void 0===s?void 0:s.length)-1);cn(c[Math.max(d,0)])}else 0===(null===(t=c)||void 0===t?void 0:t.length)&&cn(null)}}),[dn,nn,Je,fn,xn,cn,De]),Cn=(0,c.useCallback)((function(e,n){var t=(0,oe.WL)(e,De);n||(yn(t),cn(t)),ee&&(null==ee||ee(t,n))}),[yn,ee,De,cn]),wn=(0,c.useCallback)((function(e){$e((function(n){return he(he({},n),{},(0,i.Z)({},(0,oe.WL)(e.path,De),e))}))}),[De]);(0,c.useEffect)((function(){if(null!=De&&De.repo_path&&null!=De&&De.repo_path_relative_root){var e,n=(0,X.U2)(G,[]);Ce&&(e=(0,oe.WL)(decodeURIComponent(Ce),De),null!=n&&n.includes(e)||(n.push(e),Cn(e)));var t=n.filter((function(e){return e.startsWith(De.repo_path)||e.startsWith(De.repo_path_relative_root)}));cn((function(n){return e||(!n&&(null==t?void 0:t.length)>=1?t[0]:n)})),xn(t)}}),[De]),(0,c.useCallback)((function(){var e=!Te;Be(e),(0,X.t8)(Q,e)}),[Te]);var kn=(0,L.Z)(B.ZP.files.list,Pe&&Te?he(he({},I.BB),je):je,{delay:null==C?0:C}),On=kn.data,Pn=kn.mutate,Zn=(0,c.useMemo)((function(){return(null==On?void 0:On.files)||[]}),[On]),Sn=(0,c.useState)(!1),In=Sn[0],_n=Sn[1],Fn=(0,c.useState)(I.QX.ALL_FILES),En=Fn[0],Mn=Fn[1],Rn=(0,c.useState)(null),Tn=Rn[0],Bn=Rn[1],Dn=(0,c.useMemo)((function(){var e=(0,le.Rz)(Zn,En);return Tn&&(e=(0,le.bE)(e,Tn)),e}),[En,Tn,Zn]),Un=(0,L.Z)(B.ZP.files.list,{pattern:encodeURIComponent(String(I.d2)),flatten:!0,exclude_pattern:I.I1,exclude_dir_pattern:I._n},{delay:null==C?0:C,pauseFetch:Ze!==A.X9.ArcaneLibrary}),Ln=Un.data,Nn=(Un.mutate,(0,c.useMemo)((function(){return(null==Ln?void 0:Ln.files)||[]}),[Ln])),An=(0,c.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n?(null==Ne?void 0:Ne.current)||[]:nn,i=(null==t?void 0:t.length)||0,o=null==t?void 0:t.findIndex((function(e){return(null==Ae?void 0:Ae.current)===e}));(o+=e)<0?o=0:o>i-1&&(o=i-1),cn(t[o],n)}),[nn,cn]),Wn=(0,ae.y)(),zn=(Wn.disableGlobalKeyboardShortcuts,Wn.registerOnKeyDown),Hn=Wn.unregisterOnKeyDown;(0,c.useEffect)((function(){return function(){Hn(Ie)}}),[Hn,Ie]),zn(Ie,(function(e,n,t){var i=Object.entries(dn).reduce((function(e,n){var t=(0,o.Z)(n,2),i=t[0];return t[1]?e.concat(i):e}),[]);if((0,ue.y)([V.zX,V.hS],n)&&(null==i?void 0:i.length)>=1){e.preventDefault();var r="You have changes that are unsaved: ".concat(i.join(", "),". ")+"Click cancel and save your changes before reloading page.";"undefined"!=typeof location&&window.confirm(r)&&location.reload()}else(0,ue.N)([V.zX,V.PQ],[V.QK],n,t)||(0,ue.N)([V.zX,V.PQ],[V.DY],n,t)?An(V.QK===t[0]?-1:1):(0,ue.N)([V.PQ],[V.Kh],n,t)||(0,ue.N)([V.PQ],[V.hQ],n,t)?An(V.Kh===t[0]?-1:1,!0):null!=Ae&&Ae.current&&(0,ue.N)([V.zX,V.XR],[V.VS],n,t)&&jn([null==Ae?void 0:Ae.current])}),[dn,An]);var Vn=(0,d.Db)((function(e){return B.ZP.file_contents.useUpdate((null==e?void 0:e.path)&&encodeURIComponent(null==e?void 0:e.path))({file_content:e})}),{onSuccess:function(e){return(0,ce.wD)(e,{callback:function(e){var n=e.file_content,t=(0,oe.WL)(null==n?void 0:n.path,De);Fe((function(e){return he(he({},e),{},(0,i.Z)({},"FileVersions/".concat(t),Number(new Date)))})),Je((0,i.Z)({},t,null)),Xe((0,i.Z)({},t,l()().utc().unix())),be&&(null==be||be(n))},onErrorCallback:function(e,n){return Me({errors:n,response:e})}})}}),Xn=(0,o.Z)(Vn,2),Kn=Xn[0],Qn=Xn[1].isLoading,Gn=(0,c.useCallback)((function(e,n){Kn(he(he({},n),{},{content:e})),fn((function(e){return he(he({},e),{},(0,i.Z)({},null==n?void 0:n.path,!1))}))}),[fn,Kn]),Jn=(0,c.useMemo)((function(){var e;return(0,re.Rz)({updated_at:null!=bn&&bn.modified_timestamp?null===(e=l().unix(null==bn?void 0:bn.modified_timestamp))||void 0===e?void 0:e.format(z.lE):null,uuid:null==bn?void 0:bn.path},{displayRelative:!0,isPipelineUpdating:Qn,pipelineContentTouched:!(null==Qe||!Qe[rn]),pipelineLastSaved:Number(null==Ve?void 0:Ve[rn]),showLastUpdatedTimestamp:1e3*(null==bn?void 0:bn.modified_timestamp)})}),[Qe,Qn,Ve,bn,rn]),qn=(0,c.useMemo)((function(){return{addNewBlock:n,blocks:t,deleteWidget:p,disableContextMenu:v,fetchAutocompleteItems:b,fetchFiles:Pn,fetchPipeline:g,onCreateFile:Y,onSelectBlockFile:fe,openSidekickView:ge,pipeline:ye,ref:Ue,showError:Me,setSelectedBlock:Oe,showHiddenFiles:Te,uuid:Ie,widgets:Se}}),[n,t,p,v,b,Pn,g,Ue,Y,fe,ge,ye,Oe,Me,Te,Ie,Se]),Yn=(0,c.useMemo)((function(){return(0,x.jsx)(P.Z,he(he({},qn),{},{files:Dn,onClickFile:!ee&&fe?null:function(e,n){return Cn(e)},onClickFolder:function(e,n){return Cn(e,!0)}}))}),[qn,Dn,ee,fe,Cn]),$n=(0,c.useCallback)((function(){return _n(!1)}),[]),et=(0,c.useMemo)((function(){return(0,x.jsx)(ne,{children:(0,x.jsxs)(O.ZP,{alignItems:"center",children:[(0,x.jsx)(T.Z,he(he({},q.hZ),{},{afterIcon:Tn?(0,x.jsx)(W.Close,{}):(0,x.jsx)(F.Z,{compact:!0,disableKeyboardShortcuts:!0,items:[{beforeIcon:En!==I.QX.UNUSED_BLOCK_FILES?(0,x.jsx)(W.Check,{fill:D.Z.content.default}):(0,x.jsx)(W.Circle,{muted:!0}),label:function(){return(0,ie.vg)(I.QX.ALL_FILES)},onClick:function(){Mn(I.QX.ALL_FILES)},uuid:"Files/Filter/AllFiles"},{beforeIcon:En===I.QX.UNUSED_BLOCK_FILES?(0,x.jsx)(W.Check,{fill:D.Z.accent.cyan}):(0,x.jsx)(W.Circle,{muted:!0}),label:function(){return(0,ie.vg)(I.QX.UNUSED_BLOCK_FILES)},onClick:function(){Mn(I.QX.UNUSED_BLOCK_FILES)},uuid:"Files/Filter/UnusedBlockFiles"}],onClickCallback:$n,onClickOutside:$n,open:In,parentRef:ze,rightOffset:0,roundedStyle:!0,topOffset:1,uuid:"Files/FilterMenu",children:(0,x.jsx)(f.ZP,{basic:!0,iconOnly:!0,noBackground:!0,onClick:function(){return _n((function(e){return!e}))},title:"Filter files",children:(0,x.jsx)(W.FilterV2,{fill:En!==I.QX.ALL_FILES?D.Z.accent.cyan:null})})}),afterIconClick:function(){var e;Tn&&(Bn(""),null==We||null===(e=We.current)||void 0===e||e.focus())},afterIconSize:pe,beforeIconSize:pe,compact:!0,maxWidth:300,onChange:function(e){return Bn(e.target.value)},paddingVertical:m.iI/2,placeholder:"Search files",ref:We,value:Tn})),(0,x.jsx)(f.ZP,{basic:!0,iconOnly:!0,noBackground:!0,onClick:Pn,title:"Refresh files",children:(0,x.jsx)(W.Refresh,{})})]})})}),[$n,Pn,En,In,Tn]),nt=(0,c.useMemo)((function(){return(0,x.jsx)(P.Z,he(he({},qn),{},{files:(0,te.px)(Nn),onClickFile:function(e,n){return Cn(null==n?void 0:n.path)},onClickFolder:function(e,n){return Cn(null==n?void 0:n.path,!0)}}))}),[qn,Nn,Cn]),tt=(0,c.useMemo)((function(){return(0,x.jsx)(w,{addNewBlock:n,codeEditorMaximumHeightOffset:j,contained:r,containerRef:h,disableRefreshWarning:!0,fetchPipeline:g,fetchVariables:y,onFileFetched:wn,onUpdateFileSuccess:be,openFilePaths:nn,openSidekickView:ge,originalContent:xe,pipeline:ye,saveFile:Gn,selectedFilePath:rn,sendTerminalMessage:we,setContentByFilePath:Je,setDisableShortcuts:ke,setErrors:Me,setFilesTouched:fn,setSelectedBlock:Oe,updateFile:Kn})}),[n,j,r,h,g,y,wn,be,nn,ge,xe,ye,Gn,rn,we,Je,ke,fn,Oe,Me,Kn]),it=(0,c.useMemo)((function(){return[{uuid:"File",items:[{beforeIcon:(0,x.jsx)(W.Save,he({},ve)),uuid:"Save file and and all changes",onClick:function(e){var n,t;(null==Le||null===(n=Le.current)||void 0===n||null===(t=n[rn])||void 0===t?void 0:t.length)>=1&&Gn(Le.current[rn],{path:rn})}}]},{uuid:"Edit",items:[{beforeIcon:(0,x.jsx)(W.Edit,he({success:pn},ve)),uuid:"Show previous file versions to undo changes",disabled:pn,onClick:function(){mn(!0)}},{beforeIcon:(0,x.jsx)(W.Edit,he({},ve)),uuid:"Close file versions",disabled:!W.Edit,onClick:function(){mn(!1)}}]},{uuid:"View",items:[{beforeIcon:(0,x.jsx)(W.VisibleEye,he({success:Te},ve)),onClick:function(){Be((function(e){return!e}))},uuid:Te?"Hide hidden files":"Show hidden files"}]},{uuid:"Keyboard shortcuts",items:[{uuid:"Next file in tab",beforeIcon:(0,x.jsx)(E.Z,{addPlusSignBetweenKeys:!0,keyTextGroups:[[V.RJ,V.hE,V.fs]],monospace:!0}),onClick:function(){return An(1)}},{uuid:"Previous file in tab",beforeIcon:(0,x.jsx)(E.Z,{addPlusSignBetweenKeys:!0,keyTextGroups:[[V.RJ,V.hE,V.qd]],monospace:!0}),onClick:function(){return An(-1)}},{uuid:"Next file recently viewed",beforeIcon:(0,x.jsx)(E.Z,{addPlusSignBetweenKeys:!0,keyTextGroups:[[V.hE,V.Up]],monospace:!0}),onClick:function(){return An(1,!0)}},{uuid:"Previously viewed file",beforeIcon:(0,x.jsx)(E.Z,{addPlusSignBetweenKeys:!0,keyTextGroups:[[V.hE,V.YQ]],monospace:!0}),onClick:function(){return An(-1,!0)}},{uuid:"Close current file",beforeIcon:(0,x.jsx)(E.Z,{addPlusSignBetweenKeys:!0,keyTextGroups:[[V.RJ,V.gC,V.uT]],monospace:!0}),onClick:function(){return jn([rn])}}]}]}),[Le,pn,jn,Gn,rn,An,Be,mn,Te]),ot=(0,c.useMemo)((function(){return(0,x.jsxs)(O.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,x.jsx)(k.Z,{flex:1,children:(0,x.jsx)(Z.Z,{menuGroups:it})}),(0,x.jsx)(M.Z,{mr:1})]})}),[it]),rt=(0,U.Z)("".concat(Ie,"/FileTabs")),lt=rt.contextMenu,ut=rt.hideContextMenu,ct=rt.showContextMenu,st=(0,c.useCallback)((function(e,n){ct(e,{menuItems:[{uuid:"Close tab",onClick:function(){jn([n]),ut()}},{uuid:"Close all tabs",onClick:function(){null==nn||nn.forEach((function(e){null!=dn&&dn[e]||jn([e])})),ut()}},{uuid:"Close all other tabs",onClick:function(){return null==nn?void 0:nn.forEach((function(e){e===n||null!=dn&&dn[e]||jn([e]),ut()}))}},{uuid:"Close all tabs to the right",onClick:function(){var e,t=null==nn?void 0:nn.findIndex((function(e){return e===n}));null==nn||null===(e=nn.slice(t+1))||void 0===e||e.forEach((function(e){null!=dn&&dn[e]||jn([e])})),ut()}},{uuid:"Close tabs with files saved",onClick:function(){null==nn||nn.forEach((function(e){null!=dn&&dn[e]||jn([e])})),ut()}},{uuid:"Copy file path",onClick:function(){alert("".concat(n," is copied to your clipboard.")),ut()},render:function(e){return(0,x.jsx)(u.CopyToClipboard,{text:n,children:e})}}]})}),[dn,ut,nn,jn,ct]),dt=(0,de.o3)({filePaths:nn,filesTouched:dn,isSelectedFilePath:function(e,n){return e===n},onClickTab:function(e){cn(e),me&&(null==me||me(e))},onClickTabClose:function(e){jn([e]),H&&(null==H||H(e))},onContextMenu:st,renderTabTitle:function(e){var n=(0,le.fj)(e),t=gn[n];return t&&(null==t?void 0:t.length)>=2?e:n},selectedFilePath:rn}),at=dt.tabs,ft=dt.tabsBefore,ht=(0,c.useMemo)((function(){return(0,x.jsx)(S.Z,{fileTabs:null==ft?void 0:ft.concat(at),selectedFilePathIndex:un,children:lt})}),[lt,un,at,ft]),pt=(0,c.useMemo)((function(){return(0,x.jsx)(a.Z,{uuid:"FileVersions/".concat(rn?decodeURIComponent(rn):"__missing_file_path__"),children:(0,x.jsx)(_.Z,{onActionCallback:function(e){e.content;var n=e.path,t=(0,oe.WL)(n,De);jn([t]),setTimeout((function(){return Cn(t)}),1)},selectedFilePath:rn,setErrors:Me})})}),[rn,Me,De]),vt=(0,c.useMemo)((function(){return(0,x.jsx)(R.Z,{inline:!0,pipelineContentTouched:!(null==Qe||!Qe[rn]),pipelineLastSaved:Number(null==Ve?void 0:Ve[rn]),refreshInterval:0,saveStatus:Jn})}),[Qe,Ve,Jn,rn]);return{browser:Yn,browserFlatten:nt,controller:tt,fetchFiles:Pn,filePaths:nn,files:Zn,filesTouched:dn,footer:vt,menu:ot,openFile:Cn,search:et,selectedFilePath:rn,tabs:ht,versions:pt,versionsVisible:pn}}},89860:function(e,n,t){t.d(n,{Rz:function(){return p},bE:function(){return h},fj:function(){return f}});var i=t(82394),o=t(26304),r=t(17717),l=t(89706),u=t(81728),c=["children"],s=["children"];function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function f(e){var n,t,i;"string"!=typeof e&&"object"==typeof e&&(e=(null===(t=e)||void 0===t?void 0:t.path)||(null===(i=e)||void 0===i?void 0:i.name));var o=null===(n=e)||void 0===n?void 0:n.split(r.sep);return null==o?void 0:o[(null==o?void 0:o.length)-1]}function h(e,n){return e.reduce((function(e,t){var i,r=t.children,l=(0,o.Z)(t,c);return(0,u.L_)(l.name).includes((0,u.L_)(n))&&!r?(e.push(l),e):(null!==(i=r=h(r||[],n))&&void 0!==i&&i.length&&e.push(a(a({},l),{},{children:r})),e)}),[])}function p(e,n){return n===l.QX.UNUSED_BLOCK_FILES?e.reduce((function(e,t){var i,r=t.children,l=(0,o.Z)(t,s);return(null==l?void 0:l.pipeline_count)||r?(null!==(i=r=p(r||[],n))&&void 0!==i&&i.length&&e.push(a(a({},l),{},{children:r})),e):(e.push(l),e)}),[]):e}},90758:function(e,n,t){t.d(n,{ZP:function(){return O},o3:function(){return k}});var i=t(26304),o=t(82684),r=t(9518),l=t(39867),u=t(55485),c=t(48670),s=t(38276),d=t(30160),a=t(12468),f=t(44897),h=t(79899),p=t(72473),v=t(97133),m=t(70515),b=t(15610),g=t(95924),x=t(28598),y=1.25*m.iI;var j=function(e){var n=e.disableClose,t=e.filePath,i=e.filesTouched,r=void 0===i?{}:i,j=e.isLast,C=e.onClickTab,w=e.onClickTabClose,k=e.onContextMenu,O=e.renderTabIcon,P=e.renderTabTitle,Z=e.savePipelineContent,S=e.selected,I=e.themeContext,_=(0,o.useState)(!1),F=_[0],E=_[1],M=(0,h.Z)({filePath:t,name:t,uuid:t}),R=M.BlockIcon,T=M.Icon,B=M.color,D=M.iconColor,U=M.isBlockFile;return(0,x.jsx)(u.ZP,{flexDirection:"column",fullHeight:!0,onClick:function(e){e.preventDefault(),S||(C?C(t):(null==Z||Z(),(0,b.u)({file_path:encodeURIComponent(t)})))},onMouseEnter:function(){return E(!0)},onMouseLeave:function(){return E(!1)},children:(0,x.jsx)(v.Gb,{last:j,selected:S,onContextMenu:function(e){return k(e,t)},children:(0,x.jsxs)(u.ZP,{alignItems:"center",fullHeight:!0,children:[(0,x.jsx)(a.Z,{appearAbove:!0,label:t,size:null,widthFitContent:!0,children:(0,x.jsxs)(u.ZP,{alignItems:"center",fullHeight:!0,children:[!r[t]&&(0,x.jsx)(x.Fragment,{children:O?O(t):U?(0,x.jsx)("div",{style:{padding:1,justifyContent:"center",display:"flex",alignItems:"center"},children:(0,x.jsx)(R,{color:B,size:10,square:!0})}):(0,x.jsx)(T,{fill:D,size:1.5*m.iI})}),r[t]&&(0,x.jsx)(a.Z,{block:!0,label:"Unsaved changes",size:null,widthFitContent:!0,children:(0,x.jsx)("div",{style:{padding:1},children:(0,x.jsx)(l.Z,{borderColor:(I||f.Z).borders.danger,size:y})})}),(0,x.jsx)(s.Z,{mr:1}),(0,x.jsx)(d.ZP,{monospace:!0,muted:!S,noWrapping:!0,small:!0,children:P?P(t):t})]})}),w&&!n&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.Z,{mr:2}),(0,x.jsxs)(c.Z,{autoHeight:!0,block:!0,noHoverUnderline:!0,noOutline:!0,onClick:function(e){(0,g.j)(e),null==w||w(t)},preventDefault:!0,title:"Close",children:[(F||S)&&(0,x.jsx)(p.Close,{muted:!S,size:y}),!F&&!S&&(0,x.jsx)("div",{style:{width:y}})]})]})]})})})},C=t(86735),w=["children"];function k(e){var n=e.filePaths,t=e.filesTouched,i=e.isSelectedFilePath,l=e.onClickTab,u=e.onClickTabClose,c=e.onContextMenu,s=e.renderTabIcon,d=e.renderTabTitle,a=e.savePipelineContent,f=e.selectedFilePath,h=e.shouldDisableClose,p=e.tabsBefore,v=(0,o.useContext)(r.ThemeContext),m=(0,o.useMemo)((function(){return null==n?void 0:n.map((function(e){return decodeURIComponent(e)}))}),[n]),g=(0,o.useMemo)((function(){return(null==m?void 0:m.length)||0}),[m]),y=(0,o.useMemo)((function(){return(null==p?void 0:p.length)>=1?null==p?void 0:p.map((function(e){var n=e.label,t=e.onClick,o=e.uuid,r=i?i(o,f):f===encodeURIComponent(o);return(0,x.jsx)(j,{onClickTab:function(){return null==t?void 0:t({onClickTab:l})},renderTabTitle:function(){return n?null==n?void 0:n():o},selected:r,themeContext:v},o)})):[]}),[i,l,f,p,v]);return{tabs:(0,o.useMemo)((function(){return null==m?void 0:m.map((function(e,n){var o=i?i(e,f):f===encodeURIComponent(e);return(0,x.jsx)(j,{disableClose:h&&(null==h?void 0:h(e)),savePipelineContent:a,filesTouched:t,filePath:e,isLast:n===g-1,onClickTab:l,onClickTabClose:function(e){if(u)u(e);else{var n=(0,C.Od)(m,(function(n){return n===e})).map((function(e){return encodeURIComponent(e)}));(0,b.u)({file_path:n[n.length-1]||null,"file_paths[]":n},{pushHistory:!0})}},onContextMenu:c,renderTabIcon:s,renderTabTitle:d,selected:o,themeContext:v},e)}))}),[m,t,i,g,l,u,c,s,d,a,f,h,v]),tabsBefore:y}}var O=function(e){var n,t=e.children,o=(0,i.Z)(e,w);return(0,x.jsxs)(u.ZP,{alignItems:"center",fullHeight:!0,justifyContent:"flex-start",children:[null===(n=k(o))||void 0===n?void 0:n.tabs,t]})}},27597:function(e,n,t){t.d(n,{Z:function(){return C}});var i=t(82684),o=t(15338),r=t(55485),l=t(16756),u=t(38276),c=t(30160),s=t(12468),d=t(38907),a=t(72473),f=t(39643),h=t(70515),p=t(9518),v=t(44897),m=p.default.div.withConfig({displayName:"indexstyle__StatusFooterStyle",componentId:"sc-tixdln-0"})(["z-index:2;"," "," ",""],(function(e){return"\n    background-color: ".concat((e.theme.background||v.Z.background).header,";\n  ")}),(function(e){return!e.inline&&"\n    bottom: 0;\n    position: fixed;\n  "}),(function(e){return void 0!==e.width&&"\n    width: ".concat(e.width,"px;\n  ")})),b=t(58325),g=t(81728),x=t(28598),y=1.25*h.iI;function j(e,n){var t=e.inline,p=e.pipelineType,v=e.pipelineContentTouched,j=(e.pipelineLastSaved,e.refreshInterval),C=e.saveStatus,w=e.width,k=(0,d.Z)({pipelineType:p,refreshInterval:j}).kernel||{},O=(k.alive,k.usage),P=(0,i.useMemo)((function(){if(null!=O&&O.kernel_memory){var e=O.kernel_memory,n=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,n)).toFixed(2))).concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n])}return null}),[null==O?void 0:O.kernel_memory]),Z=(0,i.useMemo)((function(){return void 0!==(null==O?void 0:O.kernel_cpu)?(0,g.QV)(null==O?void 0:O.kernel_cpu,3):null}),[O]);return(0,x.jsxs)(m,{inline:t,ref:n,width:w,children:[(0,x.jsx)(o.Z,{light:!0}),(0,x.jsx)(u.Z,{px:h.cd,py:1,children:(0,x.jsxs)(r.ZP,{alignItems:"center",justifyContent:"space-between",children:[O&&(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(r.ZP,{alignItems:"center",children:[null!==Z&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(a.Lightning,{muted:!0,size:y}),(0,x.jsx)(u.Z,{mr:1}),(0,x.jsxs)(c.ZP,{monospace:!0,muted:!0,noWrapping:!0,small:!0,children:["CPU: ",(0,x.jsxs)(c.ZP,{danger:Z>=90,inline:!0,muted:Z<50,small:!0,warning:Z>=50&&Z<90,children:[Z,"%"]})]})]}),null!==Z&&null!==P&&(0,x.jsxs)(u.Z,{mx:h.cd,children:[(0,x.jsx)(u.Z,{mr:1}),(0,x.jsx)(c.ZP,{monospace:!0,muted:!0,noWrapping:!0,small:!0,children:"/"})]}),null!==P&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(a.HexagonAll,{muted:!0,size:y}),(0,x.jsx)(u.Z,{mr:1}),(0,x.jsxs)(c.ZP,{monospace:!0,muted:!0,noWrapping:!0,small:!0,children:["Memory: ",P]})]}),(0,x.jsx)(u.Z,{mx:h.cd})]})}),(0,x.jsx)(s.Z,{appearAbove:!0,appearBefore:!0,block:!0,description:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(r.ZP,{alignItems:"center",children:[(0,x.jsx)(c.ZP,{default:!0,inline:!0,children:"Press"}),"Â ",(0,x.jsx)(l.Z,{inline:!0,keyText:(0,b.V5)()?f.RJ:f.hE}),"Â ",(0,x.jsx)(c.ZP,{default:!0,inline:!0,children:"+"}),"Â ",(0,x.jsx)(l.Z,{inline:!0,keyText:f.SS}),"Â ",(0,x.jsx)(c.ZP,{default:!0,inline:!0,children:"to save changes."}),(0,x.jsx)("br",{})]}),(0,x.jsx)(u.Z,{mt:1,children:(0,x.jsxs)(c.ZP,{default:!0,children:["Or go to ",(0,x.jsx)(c.ZP,{inline:!0,monospace:!0,children:"File"})," â€º ",(0,x.jsx)(c.ZP,{inline:!0,monospace:!0,children:"Save pipeline"}),"."]})})]}),size:null,widthFitContent:!0,children:(0,x.jsxs)(r.ZP,{alignItems:"center",children:[v&&(0,x.jsx)(a.AlertTriangle,{size:y,warning:!0}),!v&&(0,x.jsx)(a.File,{muted:!0,size:y}),(0,x.jsx)(u.Z,{mr:1}),(0,x.jsx)(c.ZP,{monospace:!0,muted:!0,noWrapping:!0,small:!0,warning:v,children:C})]})})]})})]})}var C=i.forwardRef(j)},97133:function(e,n,t){t.d(n,{Gb:function(){return f},fm:function(){return d},lO:function(){return s},rK:function(){return a},zn:function(){return c}});var i=t(9518),o=t(44897),r=t(2842),l=t(70515),u=t(47041),c=300,s=i.default.div.withConfig({displayName:"indexstyle__PipelineContainerStyle",componentId:"sc-1sv9513-0"})([".pipeline-detail-enter-active{opacity:1;transition:opacity ","ms linear;}.pipeline-detail-enter-done{opacity:0;transition:opacity ","ms linear;}"],c,c),d=i.default.div.withConfig({displayName:"indexstyle__OverlayStyle",componentId:"sc-1sv9513-1"})(["height:100vh;opacity:1;position:fixed;width:100vw;z-index:9999;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||o.Z.background).codeArea,";\n  ")})),a=i.default.div.withConfig({displayName:"indexstyle__PipelineHeaderStyle",componentId:"sc-1sv9513-2"})(["height:","px;position:sticky;top:","px;width:100%;z-index:5;"," "," "," ",""],r.Wi,r.Wi,(function(e){return"\n    background-color: ".concat((e.theme.background||o.Z.background).panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||o.Z.borders).medium,";\n  ")}),(function(e){return e.relativePosition&&"\n    position: relative;\n  "}),(function(e){return e.secondary&&"\n    height: ".concat(37,"px;\n    top: ").concat(r.Wi,"px;\n    overflow-x: auto;\n    z-index: 3;\n  ")}),(0,u.y$)()),f=i.default.div.withConfig({displayName:"indexstyle__FileTabStyle",componentId:"sc-1sv9513-3"})(["border-right:1px solid transparent;height:100%;padding:","px ","px;position:relative;"," "," ",""],1*l.iI,1.5*l.iI,(function(e){return"\n    &:hover {\n      cursor: default;\n\n      p {\n        color: ".concat((e.theme.content||o.Z.content).active," !important;\n        cursor: default;\n      }\n    }\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.background||o.Z.background).codeTextarea,";\n  ")}),(function(e){return!e.selected&&!e.last&&"\n    border-color: ".concat((e.theme.borders||o.Z.borders).light," !important;\n  ")}));i.default.div.withConfig({displayName:"indexstyle__HeaderViewOptionsStyle",componentId:"sc-1sv9513-4"})(["left:50%;position:absolute;transform:translateX(-50%);"])},75375:function(e,n,t){t.d(n,{H:function(){return h},Z:function(){return v}});var i=t(82394),o=t(82684),r=t(98464),l=t(70515),u=t(53808),c=t(19183);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var a=25*l.iI,f=2*a,h=72;function p(e,n,t){var i=t.disable,l=t.hidden,c=(t.mainContainerWidth,t.refOther),s=t.resizeOffset,h=void 0===s?0:s,p=t.setWidth,v=t.width,m=t.widthOverride,b=t.widthWindow,g=(0,o.useMemo)((function(){return"".concat(e,"_width")}),[e]),x=(0,o.useMemo)((function(){return"".concat(e,"_hidden")}),[e]),y=(0,u.U2)(x),j=(0,u.U2)(g),C=(0,o.useState)([y,l,!1].find((function(e){return null!=e}))),w=C[0],k=C[1],O=(0,o.useState)(!1),P=O[0],Z=O[1],S=(0,o.useState)(void 0!==j?j:void 0!==v?v:a),I=S[0],_=S[1],F=(0,o.useCallback)((function(e){k(e),(0,u.t8)(x,"function"==typeof e?null==e?void 0:e():e)}),[x]),E=(0,o.useMemo)((function(){var e=void 0!==v&&m?v:I;return void 0!==b&&(e=Math.min(e,b-(f+a))),n.current=d(d({},n.current),{},{widthOverride:m,widthProp:v}),e||a}),[p,m,v,I]),M=(0,o.useCallback)((function(e){if(!i){var t,o,r,l,s,v=Math.max(b-(f+(null!=c&&null!==(t=c.current)&&void 0!==t&&t.disable?0:(null!=c&&null!==(o=c.current)&&void 0!==o&&o.widthOverride?null==c||null===(r=c.current)||void 0===r?void 0:r.widthProp:null==c||null===(l=c.current)||void 0===l?void 0:l.width)||a)),a+f+(null!=c&&null!==(s=c.current)&&void 0!==s&&s.disable?0:a)),m=e+h;m<a?m=a:m>v&&(m=e),e&&(_(m),(0,u.uN)(g,m),p&&p(m)),n.current=d(d({},n.current),{},{disable:i,width:m})}}),[i,g,n,c,h,p,b]),R=(0,r.Z)(b);(0,o.useEffect)((function(){void 0!==b&&void 0!==R&&b!==R&&M(b*(E/R))}),[E,b,R]);var T=(0,r.Z)(v);return(0,o.useEffect)((function(){!i&&m&&T!==v&&M(v)}),[i,M,m,v,T]),{hidden:w,mousedownActive:P,setHidden:F,setMousedownActive:Z,setWidth:M,width:E}}function v(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.beforeResizeOffset,i=n.disableAfter,r=n.disableBefore,l=n.hiddenAfter,u=n.hiddenBefore,s=n.mainContainerRef,d=n.setWidthAfter,a=n.setWidthBefore,h=n.widthAfter,v=n.widthBefore,m=n.widthOverrideAfter,b=n.widthOverrideBefore,g=(0,c.i)().width,x=(0,o.useMemo)((function(){return"layout_after_".concat(e)}),[e]),y=(0,o.useMemo)((function(){return"layout_before_".concat(e)}),[e]),j=s||(0,o.useRef)(null),C=(0,o.useState)(null),w=C[0],k=C[1],O=(0,o.useMemo)((function(){return Math.max(w-f,f)}),[w]),P=(0,o.useRef)({disable:i,widthOverride:m,width:null,widthProp:h}),Z=(0,o.useRef)({disable:r,widthOverride:b,width:null,widthProp:v}),S=p(x,P,{disable:i,hidden:l,mainContainerWidth:O,refOther:Z,setWidth:d,width:h,widthOverride:m,widthWindow:g}),I=S.hidden,_=S.mousedownActive,F=S.setHidden,E=S.setMousedownActive,M=S.setWidth,R=S.width,T=p(y,Z,{disable:r,hidden:u,mainContainerWidth:O,refOther:P,resizeOffset:t,setWidth:a,width:v,widthOverride:b,widthWindow:g}),B=T.hidden,D=T.mousedownActive,U=T.setHidden,L=T.setMousedownActive,N=T.setWidth,A=T.width;return(0,o.useEffect)((function(){Z.current={disable:r,width:A,widthOverride:b,widthProp:v}}),[r,A,b]),(0,o.useEffect)((function(){var e,n;null==j||!j.current||_||D||(null==k||k(null==j||null===(e=j.current)||void 0===e||null===(n=e.getBoundingClientRect())||void 0===n?void 0:n.width))}),[_,D,k,R,A,g]),{hiddenAfter:I,hiddenBefore:B,mainContainerRef:j,mousedownActiveAfter:_,mousedownActiveBefore:D,setHiddenAfter:F,setHiddenBefore:U,setMousedownActiveAfter:E,setMousedownActiveBefore:L,setWidthAfter:M,setWidthBefore:N,widthAfter:R,widthBefore:A}}},35526:function(e,n,t){t.d(n,{Au:function(){return d},I6:function(){return c},Nb:function(){return i},OK:function(){return s},hZ:function(){return f},k2:function(){return a}});var i,o=t(42631),r=t(72473),l=t(70515),u=t(28598),c="".concat(1.5*l.iI,"px"),s=40*l.iI,d=58;!function(e){e[e.FIRST=1]="FIRST",e[e.SECOND=2]="SECOND"}(i||(i={}));var a={autoHide:!0,size:null,widthFitContent:!0},f={afterIconSize:1.5*l.iI,beforeIcon:(0,u.jsx)(r.Search,{}),borderRadius:o.n_,defaultColor:!0,fullWidth:!0,greyBorder:!0,maxWidth:40*l.iI}},80329:function(e,n,t){t.d(n,{j:function(){return i}});var i=(0,t(44152).r)({apiReloads:{}}).useGlobalState},38907:function(e,n,t){var i=t(82684),o=t(5332),r=t(59457),l=t(57653);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.pipelineType,t=e.refreshInterval,u=void 0===t?5e3:t,c=e.revalidateOnFocus,s=(0,r.Z)(o.ZP.kernels.list,{},{refreshInterval:u,revalidateOnFocus:c},{delay:5e3}),d=s.data;return{fetch:s.mutate,kernel:(0,i.useMemo)((function(){var e=null==d?void 0:d.kernels;return(null==e?void 0:e.find((function(e){return e.name===l.a_[n]})))||(null==e?void 0:e[0])}),[null==d?void 0:d.kernels,n])}}},21326:function(e,n,t){t.d(n,{Z:function(){return v}});var i=t(82394),o=t(75582),r=t(82684),l=t(85202),u=t(50724),c=t(70374),s=t(42122),d=t(95924),a=t(28598);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e){var n=e.children,t=e.x,i=e.y;return(0,a.jsx)("div",{style:{left:t,position:"fixed",top:i,zIndex:999},children:n})}function v(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=(0,r.useState)(null),f=t[0],v=t[1],m=(0,r.useState)(void 0),b=m[0],g=m[1];(0,r.useEffect)((function(){(n||"undefined"!=typeof document)&&g(n||("undefined"!=typeof document?document.body:null))}),[n]);var x=(0,r.useMemo)((function(){if(b){var e,n=[];return null===(e=Object.entries(f||{}))||void 0===e||e.forEach((function(e){var t=(0,o.Z)(e,2),i=t[0],r=t[1],l=r.data,d=l.menuItems,f=l.renderMenu,h=r.event,m=h.clientX,b=h.clientY;h.target;n.push((0,a.jsx)(p,{x:m,y:b,children:(0,a.jsxs)(u.Z,{disableEscape:!0,onClickOutside:function(){return v((function(e){return(0,s.gR)(e,[i])}))},open:!0,children:[f&&f(r),!f&&(null==d?void 0:d.length)>=1&&(0,a.jsx)(c.Z,{items:d,open:!0,parentRef:void 0,uuid:"ContextMenu/".concat(i)})]})},i))})),(0,l.createPortal)((0,a.jsx)(a.Fragment,{children:n}),b)}}),[f,b]),y=(0,r.useCallback)((function(n,t){(0,d.j)(n),v((function(o){return h(h({},o),{},(0,i.Z)({},e,{event:n,data:t}))}))}),[e]);return{contextMenu:x,hideContextMenu:(0,r.useCallback)((function(){return v((function(n){return(0,s.gR)(n,[e])}))}),[e]),showContextMenu:y}}}}]);