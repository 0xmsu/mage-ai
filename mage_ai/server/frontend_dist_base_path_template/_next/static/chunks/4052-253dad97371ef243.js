"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4052],{49210:function(e,n,t){var o=t(82394),r=t(26304),i=(t(82684),t(72858)),l=t.n(i),u=t(88494),c=t(28598),a=["value"];function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.value,t=(0,r.Z)(e,a);return(0,c.jsx)(u.T5,d(d({},t),{},{children:(0,c.jsx)(u.wx,{monospace:!0,children:(0,c.jsx)(l(),{html:n})})}))}},83232:function(e,n,t){var o=t(60071),r=t.n(o),i=(t(82684),t(70515)),l=t(28598);n.Z=function(e){var n=e.data,t=e.height,o=void 0===t?60*i.iI:t,u=e.uuid;return(0,l.jsx)("div",{style:{backgroundColor:"#000000",height:o,overflow:"auto",position:"relative"},children:(0,l.jsx)(r(),{alt:"Image ".concat(u?"".concat(u," "):"","from code output"),layout:"fill",src:"data:image/png;base64, ".concat(n)})})}},96991:function(e,n,t){var o=t(75582),r=t(82684),i=t(90299),l=t(97618),u=t(55485),c=t(88494),a=t(316),s=t(28598);n.Z=function(e){var n=e.color,t=e.header,d=e.hideTabs,f=e.outputs,p=e.onTabChange,h=(0,r.useRef)({}),m=(0,r.useMemo)((function(){return f.map((function(e,n){var t=e.uuid;return{index:n,label:function(){return t},uuid:"".concat(t,"_").concat(n)}}))}),[f]),v=(0,r.useState)(null==m?void 0:m[0]),b=v[0],g=v[1],x=(0,r.useMemo)((function(){var e=[];return null==f||f.forEach((function(n,t){var o,i,l=n.render,u=n.uuid,c="".concat(u,"_").concat(t);h.current[c]=(null==h||null===(o=h.current)||void 0===o?void 0:o[c])||(0,r.createRef)();var a=null==h||null===(i=h.current)||void 0===i?void 0:i[c];e.push((0,s.jsx)("div",{className:t>=1?"inactive":null,ref:a,children:l()},c))})),e}),[f]);return(0,s.jsxs)(c.nE,{children:[(0,s.jsxs)(u.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,s.jsx)(l.Z,{flex:1,children:!d&&(0,s.jsx)(i.Z,{allowScroll:!0,onClickTab:function(e){var n;g(e),null===(n=Object.entries((null==h?void 0:h.current)||{}))||void 0===n||n.forEach((function(n){var t=(0,o.Z)(n,2),r=t[0],i=t[1];null!=i&&i.current&&((null==e?void 0:e.uuid)===r?i.current.className=(0,a.xi)(i.current.className||"",["inactive"]):i.current.className=(0,a.bS)(i.current.className||"",["inactive"]))})),p&&(null==p||p(e))},selectedTabUUID:null==b?void 0:b.uuid,tabs:m,underlineColor:n,underlineStyle:!0})}),t]}),x]})}},28256:function(e,n,t){t.d(n,{Z:function(){return L}});var o=t(82394),r=t(26304),i=t(9518),l=t(82684),u=t(15338),c=t(49210),a=t(83232),s=t(96991),d=t(38276),f=t(72858),p=t.n(f),h=t(93859),m=t(55485),v=t(30160),b=t(88494),g=t(70515),x=t(47041),j=t(81728),C=t(42122),y=t(28598);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=function(e){var n=e.borderTop,t=e.containerWidth,o=e.maxHeight,r=e.order,i=e.output,u=e.selected,c=(e.setShapeCallback,e.uuid,i.data),a=i.resource_usage,s=i.sample_data,f=(0,l.useMemo)((function(){var e,n;return null===(e=(null!=i&&i.data&&(0,C.Kn)(null==i?void 0:i.data)?null==i||null===(n=i.data)||void 0===n?void 0:n.shape:null)||(null==i?void 0:i.shape))||void 0===e?void 0:e.filter((function(e){return null!=e}))}),[i]),O=(0,l.useMemo)((function(){return((0,C.Kn)(c)&&"string"!=typeof s&&!Array.isArray(s)?c:null)||((0,C.Kn)(s)&&null!=s&&s.rows&&null!=s&&s.columns?s:null)||{columns:[],rows:[]}}),[c,s]),Z=O.columns,T=O.rows;if(null!=Z&&Z.some((function(e){return""===e})))return(0,y.jsx)(d.Z,{mx:5,my:3,children:(0,y.jsx)(v.ZP,{monospace:!0,warning:!0,children:"Block output table could not be rendered due to empty string headers. Please check your data’s column headers for empty strings."})});if(Array.isArray(T)&&T.length>=1&&T.every((function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e&&(0,j.Yh)(e)}))})))return(0,y.jsx)(d.Z,{pb:g.cd,px:g.cd,children:(0,y.jsx)(b.wx,{monospace:!0,children:T.map((function(e,n){return(0,y.jsx)("div",{children:e.map((function(e,n){return(0,y.jsx)(p(),{html:String(e)},"html-cell-".concat(n))}))},"html-row-".concat(n))}))})});if(null==Z||!Z.length)return(0,y.jsx)(d.Z,{mx:5,my:3,children:(0,y.jsx)(v.ZP,{monospace:!0,warning:!0,children:"Block output table could not be rendered due to missing column headers. Please check your data’s column headers."})});var E=(0,l.useMemo)((function(){var e=[],n=[];if((null==f?void 0:f.length)>=1){var t=(0,j._6)("row",null==f?void 0:f[0]);if((null==f?void 0:f.length)>=2){var o=(0,j._6)("column",null==f?void 0:f[1]);e.push("".concat(t," x ").concat(o))}else e.push(t)}return a&&(void 0!==(null==a?void 0:a.size)&&null!==(null==a?void 0:a.size)&&n.push("Size: ".concat(((null==a?void 0:a.size)/Math.pow(1024,2)).toFixed(2),"MB")),void 0!==(null==a?void 0:a.memory_usage)&&null!==(null==a?void 0:a.memory_usage)&&n.push("Memory: ".concat(((null==a?void 0:a.memory_usage)/Math.pow(1024,2)).toFixed(2),"MB"))),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(v.ZP,{monospace:!0,muted:!0,small:!0,children:null==e?void 0:e.map((function(e,n){return(0,y.jsxs)("span",{children:[n>=1&&(0,y.jsx)(y.Fragment,{children:" / "}),e]},e)}))}),(0,y.jsx)(v.ZP,{monospace:!0,muted:!0,small:!0,children:null==n?void 0:n.map((function(e,n){return(0,y.jsxs)("span",{children:[n>=1&&(0,y.jsx)(y.Fragment,{children:" / "}),e]},e)}))})]})}),[f,a]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.Z,{columns:Z,disableScrolling:!u,maxHeight:o||60*g.iI,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!n,renderColumnHeaderCell:function(e,n,t){var o=e.Header,r=t.index,i=t.key,u=t.props,c=t.style,a=0===(null==o?void 0:o.length)||(0,j.Rh)(o);return(0,l.createElement)("div",k(k({},u),{},{className:"th",key:i,style:k(k({},c),{},{paddingBottom:0,paddingTop:0}),title:r?"Row number":void 0}),(0,y.jsx)(m.ZP,{alignItems:"center",fullHeight:!0,fullWidth:!0,children:(0,y.jsx)(v.ZP,{disabled:!0,monospace:!0,small:!0,children:a?"":o})}))},rows:T,width:t?t-(2+g.cd*g.iI*2+2+x.nn):null},"data-table-".concat(r)),(0,y.jsx)(d.Z,{pb:1,px:g.cd,children:E})]})},T=t(89565),E=t.n(T),P=t(86382),S=t(65927),_=t(48339),I=["color","data","dataType","msgType","progress","value"];function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var R=function(e){var n=e.color,t=e.data,o=e.dataType,i=e.msgType,u=e.progress,c=e.value,a=(0,r.Z)(e,I),s=(0,l.useRef)(null),f=(0,l.useState)(!1),p=f[0],h=f[1],m=(0,l.useState)(u),v=m[0],b=m[1];return(0,l.useEffect)((function(){v&&(b(v),v>=1?s.current=setTimeout((function(){return h(!0)}),3e3):clearTimeout(s.current))}),[v]),i===_.PA.COMM_MSG?(0,y.jsx)("div",{}):_.Gi.PROGRESS===o&&Array.isArray(t)?(0,y.jsx)(y.Fragment,{children:t.map((function(e,n){return(0,y.jsx)("span",{style:{whiteSpace:"pre-wrap",fontFamily:"monospace"},children:(0,y.jsx)(E(),{children:e})},"".concat(n,"-progress"))}))}):(0,y.jsxs)("div",{children:[c&&(0,y.jsx)(d.Z,{mb:p?0:2,children:(0,y.jsx)(P.Z,A({value:c},a))}),!p&&(0,y.jsx)(S.Z,{color:null==n?void 0:n.accent,colorLight:null==n?void 0:n.accentLight,loadingStyle:S.F.DEFAULT,width:"".concat(100*v,"%")})]})},D=t(55283),B=["block","containerWidth","index","onTabChangeCallback","output","disableSpacingBetweenGroups","height","selected","singleOutput"];function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L=function e(n){var t=n.block,o=n.containerWidth,f=n.index,p=n.onTabChangeCallback,h=n.output,m=n.disableSpacingBetweenGroups,b=n.height,x=n.selected,j=n.singleOutput,O=(0,r.Z)(n,B),k=(0,l.useContext)(i.ThemeContext),T=h.data,E=h.msg_type,S=h.multi_output,I=h.outputs,w=h.progress,A=h.text_data,M=h.type,L=h.variable_uuid,U=(0,l.useMemo)((function(){return(0,D.qn)(null==t?void 0:t.type,{blockColor:null==t?void 0:t.color,theme:k})}),[t,k]),G=(0,l.useMemo)((function(){return A||("string"==typeof T?T:"")}),[T,A]),F=(0,l.useMemo)((function(){return null==I?void 0:I.length}),[I]);if((_.Gi.GROUP===M||S||j)&&F>=1){var H=null==I?void 0:I.every((function(e){var n=e.type;return[_.Gi.PROGRESS,_.Gi.PROGRESS_STATUS].includes(n)})),K=(0,y.jsx)(s.Z,{color:null==U?void 0:U.accent,header:_.Gi.GROUP!==M||H?null:(0,y.jsx)(d.Z,{px:g.cd,children:(0,y.jsx)(v.ZP,{color:null==U?void 0:U.accent,monospace:!0,small:!0,children:L})}),hideTabs:H,onTabChange:p,outputs:null==I?void 0:I.map((function(n,r){return{render:function(){var i=n.type;return(0,y.jsxs)(y.Fragment,{children:[!H&&(_.Gi.TABLE!==i||0===f||0===r)&&(0,y.jsx)(u.Z,{medium:!0}),(0,y.jsx)(e,N(N({},O),{},{block:t,containerWidth:o,disableSpacingBetweenGroups:m,height:b,index:f,onTabChangeCallback:p,output:(0,C.gR)(n,["multi_output","outputs"]),selected:x}))]})},uuid:"Output ".concat(r)}}))});return _.Gi.GROUP!==M||m?K:(0,y.jsx)(d.Z,{mt:f>=1?g.cd:0,children:K})}if([_.Gi.PROGRESS,_.Gi.PROGRESS_STATUS].includes(M))return(0,y.jsx)(R,N(N({},O),{},{color:U,data:T,dataType:M,msgType:E,progress:w,value:G}));if(_.Gi.TEXT_HTML===M)return(0,y.jsx)(c.Z,N(N({},O),{},{value:G}));if(_.Gi.TABLE===M)return(0,y.jsx)(Z,{containerWidth:o,maxHeight:b,output:h,selected:x});if(_.Gi.IMAGE_PNG===M)return(0,y.jsx)(a.Z,{data:G});var z,W=null===(z=[T||A])||void 0===z?void 0:z.find((function(e){return e&&(0,C.Kn)(e)}));return _.Gi.OBJECT===M&&W&&(G=JSON.stringify(W,null,2)),(0,y.jsx)(P.Z,N(N({},N(N({},O),{},{first:!0,last:!0})),{},{value:G}))}},86382:function(e,n,t){var o=t(82394),r=t(26304),i=(t(82684),t(89565)),l=t.n(i),u=t(30160),c=t(88494),a=t(42122),s=t(28598),d=["value"];function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.value,t=(0,r.Z)(e,d),o=[];return n&&(o="string"==typeof n?n.split("\\n"):Array.isArray(n)?n.map((function(e){return null==e?void 0:e.text_data})):(0,a.Kn)(n)?[null==n?void 0:n.text_data]:[String(n)]),(0,s.jsx)(c.T5,p(p({},t),{},{children:o.map((function(e,n){return(0,s.jsxs)(u.ZP,{monospace:!0,preWrap:!0,children:[(null==e?void 0:e.length)>=1&&"string"==typeof e&&(0,s.jsx)(l(),{children:e}),!(null!=e&&e.length)&&(0,s.jsx)(s.Fragment,{children:" "})]},n)}))}))}},88494:function(e,n,t){t.d(n,{MB:function(){return h},Nk:function(){return a},T5:function(){return s},_A:function(){return f},a3:function(){return p},nE:function(){return m},wx:function(){return d}});var o=t(9518),r=t(44897),i=t(55283),l=t(42631),u=t(70515),c=t(30160),a=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-n38rkq-0"})([""," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;overflow:hidden;"," "," "," ",""],i.Kf,(function(e){return e.addBottomPadding&&"\n    padding-bottom: ".concat(2*u.tr,"px;\n  ")}),(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).table,";\n  ")}),(function(e){return!e.executedAndIdle&&"\n    border-bottom-left-radius: ".concat(l.n_,"px;\n    border-bottom-right-radius: ").concat(l.n_,"px;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n  ")}),(function(e){return e.showBorderTop&&"\n    border-top-left-radius: ".concat(l.n_,"px;\n    border-top-right-radius: ").concat(l.n_,"px;\n    border-top-style: solid;\n    border-top-width: 2px;\n  ")})),s=o.default.div.withConfig({displayName:"indexstyle__OutputRowStyle",componentId:"sc-n38rkq-1"})([""," "," "," ",""],(function(e){return e.first&&"\n    padding-top: ".concat(u.iI*u.cd,"px;\n  ")}),(function(e){return e.last&&"\n    padding-bottom: ".concat(u.iI*u.cd,"px;\n  ")}),(function(e){return e.contained&&!e.normalPadding&&"\n    padding-left: ".concat(i.oh,"px;\n    padding-right: ").concat(u.iI*u.cd,"px;\n  ")}),(function(e){return e.contained&&e.normalPadding&&"\n    padding-left: ".concat(u.iI*u.cd,"px;\n    padding-right: ").concat(u.iI*u.cd,"px;\n  ")})),d=o.default.div.withConfig({displayName:"indexstyle__HTMLOutputStyle",componentId:"sc-n38rkq-2"})([""," table{"," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;}td,th{padding:0 8px;}a{","}"],c.IH,i.Kf,(function(e){return"\n      color: ".concat((e.theme.interactive||r.Z.interactive).linkPrimary,";\n    ")})),f=o.default.div.withConfig({displayName:"indexstyle__ExtraInfoStyle",componentId:"sc-n38rkq-3"})([""," border-bottom-left-radius:","px;border-bottom-right-radius:","px;border-bottom-style:solid;border-bottom-width:2px;border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;",""],i.Kf,l.n_,l.n_,(function(e){return"\n    background-color: ".concat((e.theme.borders||r.Z.borders).light,";\n  ")})),p=o.default.div.withConfig({displayName:"indexstyle__ExtraInfoContentStyle",componentId:"sc-n38rkq-4"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;"],u.iI,i.oh,u.iI*u.cd,u.iI),h=o.default.div.withConfig({displayName:"indexstyle__ExtraInfoBorderStyle",componentId:"sc-n38rkq-5"})(["height:1px;width:100%;",""],(function(e){return"\n    border-top: 1px solid ".concat((e.theme.borders||r.Z.borders).medium,";\n  ")})),m=o.default.div.withConfig({displayName:"indexstyle__MultiOutputStyle",componentId:"sc-n38rkq-6"})([".inactive{display:none;}"])},50450:function(e,n,t){t.d(n,{Z:function(){return ie}});var o,r=t(82394),i=t(21831),l=t(75582),u=t(82684),c=t(89565),a=t.n(c),s=t(72858),d=t.n(s),f=t(9518),p=t(83455),h=t(84749),m=t(44425),v=t(71180),b=t(39867),g=t(75810),x=t(93859),j=t(24138),C=t(15338),y=t(97618),O=t(55485),k=t(48339),Z=t(96991),T=t(28256),E=t(57653),P=t(35185),S=t(38276),_=t(30160),I=t(12468),w=t(5332),A=t(98464),R=t(72473),D=t(88494),B=t(92709),M=t(89706),N=t(65044);!function(e){e.LOGS="logs",e.DATA="data"}(o||(o={}));var L=t(70515),U=t(11498),G=t(47041),F=t(55283),H=t(41429),K=t(85385),z=t(74052),W=t(81728),Q=t(72619),Y=t(42122),V=t(86735),q=t(86382),X=t(83232),J=t(49210),$=t(28598);function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var te={appearAbove:!0,appearBefore:!0,block:!0,size:null,widthFitContent:!0},oe={basic:!0,iconOnly:!0,noPadding:!0,transparent:!0};function re(e,n){var t=e.alwaysShowExtraInfo,c=e.block,s=e.blockIndex,ee=e.blockMetadata,re=e.buttonTabs,ie=e.children,le=e.childrenBelowTabs,ue=e.collapsed,ce=e.contained,ae=void 0===ce||ce,se=e.dynamicBlock,de=e.dynamicChildBlock,fe=e.hasError,pe=e.hasOutput,he=e.hideExtraInfo,me=e.hideOutput,ve=e.isInProgress,be=e.mainContainerWidth,ge=e.messages,xe=e.messagesAll,je=e.onClickSelectBlock,Ce=e.openSidekickView,ye=e.outputDisplayType,Oe=(e.outputRowNormalPadding,e.pipeline),ke=e.runCount,Ze=e.runEndTime,Te=e.runStartTime,Ee=e.scrollTogether,Pe=e.selected,Se=e.selectedTab,_e=e.setCollapsed,Ie=e.setErrors,we=e.setOutputBlocks,Ae=e.setSelectedOutputBlock,Re=e.setSelectedTab,De=e.showBorderTop,Be=e.sideBySideEnabled,Me=e.sparkEnabled,Ne=(0,u.useContext)(f.ThemeContext),Le=(0,u.useState)(!1),Ue=Le[0],Ge=Le[1];(0,u.useEffect)((function(){Ge(!0)}),[]);var Fe=(0,u.useCallback)((function(){var e=new CustomEvent(B.tK,{detail:{blockIndex:s}});window.dispatchEvent(e)}),[s]);(0,u.useEffect)((function(){Ue&&Be&&Fe()}),[xe,Ue,Ee,Be,Fe]);var He=c||{},Ke=He.color,ze=He.status,We=He.type,Qe=He.uuid,Ye=(0,u.useMemo)((function(){return{blockColor:Ke,blockType:We,dynamicBlock:se,dynamicChildBlock:de,hasError:fe,selected:Pe}}),[Ke,We,se,de,fe,Pe]),Ve=(0,u.useMemo)((function(){return(0,F.qn)(We,{blockColor:Ke,theme:Ne})}),[Ke,We,Ne]),qe=(0,u.useMemo)((function(){return(null==ge?void 0:ge.length)||0}),[ge]),Xe=m.DA.EXECUTED===ze||!ve&&0===ke&&qe>=1||!ve&&ke>=1&&Ze>=Te,Je=(0,u.useState)(),$e=Je[0],en=Je[1],nn=(0,u.useState)({}),tn=nn[0],on=nn[1],rn=(0,u.useMemo)((function(){return Object.keys(tn).length>=2}),[tn]),ln=(0,u.useState)(null),un=ln[0],cn=ln[1],an=(0,u.useMemo)((function(){var e;return rn?(null===(e=Object.values(tn))||void 0===e?void 0:e.length)>=1?un?null==tn?void 0:tn[String(null==un?void 0:un.index)]:null==tn?void 0:tn[0]:void 0:$e}),[rn,un,$e,tn]),sn=(0,u.useState)(),dn=sn[0],fn=sn[1],pn=(0,u.useState)(null),hn=pn[0],mn=pn[1],vn=(0,u.useMemo)((function(){var e,n;return null===(e=new h.Z)||void 0===e||null===(n=e.decodedToken)||void 0===n?void 0:n.token}),[]),bn=(0,p.Db)((function(){return w.ZP.block_outputs.pipelines.downloads.detailAsync(null==Oe?void 0:Oe.uuid,Qe,{token:vn},{onDownloadProgress:function(e){return mn((Number((null==e?void 0:e.loaded)||0)/1e6).toFixed(3))},responseType:U.Eg.BLOB})}),{onSuccess:function(e){return(0,Q.wD)(e,{callback:function(e){(0,z.uS)(e,"".concat(Qe,".").concat(M.Lu.CSV))},onErrorCallback:function(e,n){return null==Ie?void 0:Ie({errors:n,response:e})}})}}),gn=(0,l.Z)(bn,2),xn=gn[0],jn=gn[1].isLoading;(0,u.useEffect)((function(){ve||fn(100)}),[ve]);var Cn=function(e){return Array.isArray(e)?e.join("\n"):e},yn=(0,u.useMemo)((function(){var e;return 1===(null==c||null===(e=c.outputs)||void 0===e?void 0:e.length)}),[c]),On=(0,u.useMemo)((function(){var e=[],n=[],t={};(null==ge?void 0:ge.length)>=1?ge.map((function(o,r){var l,u,c,a=null==o?void 0:o.data,s=[],d=[];a&&Array.isArray(a)&&(null===(c=a)||void 0===c||c.forEach((function(e,n){var o=e&&"string"==typeof e&&(null==e?void 0:e.match(/<RenderOutput>(.*?)<\/RenderOutput>/));if(o&&o[1]&&(0,W.Pb)(o[1])){var l=[],u=JSON.parse(o[1]);Array.isArray(u)?l.push.apply(l,(0,i.Z)(u)):l.push(u),null==l||l.forEach((function(e,o){var i=e.data,l=e.priority,u=e.multi_output,c=e.sample_data,a=e.text_data,d=e.timestamp,f=void 0===d?0:d,p=e.type,h=e.variable_uuid,m=ne(ne({},e),{},{priority:null!=l?[l]:[r,n,o],indexes:[r,n,o]}),v=null==t?void 0:t[h];(!v||(f||0)>((null==v?void 0:v.timestamp)||0))&&(t[h]=m),(0,Y.Kn)(m)&&p&&(h||i||c||a)?u||k.Gi.GROUP===p?s.push(m):s.push(ne(ne({},m),{},{multi_output:!0})):(0,Y.Kn)(m)?s.push(ne(ne({},m),{},{multi_output:!0})):s.push(ne(ne({},m),{},{multi_output:!0,sample_data:{columns:["value"],rows:[[m]]},shape:[1,1],type:k.Gi.TABLE,variable_uuid:"output_".concat(o)}))}))}else d.push(e)})),a=d,n.push.apply(n,s));var f=e.at(-1);if(!k.jU.includes(null==f?void 0:f.type)||(null==f?void 0:f.type)!==o.type||(0,Y.Kn)(Cn(a))||null!==(l=Cn(a))&&void 0!==l&&l.match(N.Lz)||!Cn(a))!k.jU.includes(null==o?void 0:o.type)||(0,Y.Kn)(Cn(a))||null!==(u=Cn(a))&&void 0!==u&&u.match(N.Lz)?e.push(ne({},o)):e.push(ne(ne({},o),{},{data:Cn(a)}));else if(Array.isArray(f.data))f.data.concat(a);else if("string"==typeof f.data){var p=Cn(a)||"";f.data=[f.data,p].join("\n")}})):e.push.apply(e,(0,i.Z)(xe||[]));var o=e.concat(n).filter((function(e){var n=e.variable_uuid,o=e.indexes,r=null==t?void 0:t[n];return!r||o===(null==r?void 0:r.indexes)})).sort((function(e,n){var t,o,r,i,l=null==e?void 0:e.priority,u=null==n?void 0:n.priority;return l&&u?l[0]-u[0]||(null==l||null===(t=l.slice(0,2))||void 0===t?void 0:t.length)-(null==u||null===(o=u.slice(0,2))||void 0===o?void 0:o.length)||l[1]-u[1]||(null==l||null===(r=l.slice(0,3))||void 0===r?void 0:r.length)-(null==u||null===(i=u.slice(0,3))||void 0===i?void 0:i.length)||l[2]-u[2]:0})),r=[],l=[];return null==o||o.forEach((function(e){(0,Y.Kn)(e)&&null!=e&&e.multi_output?l.push(e):r.push(e)})),(null==l?void 0:l.length)>=1&&r.unshift({multi_output:!0,outputs:l}),r}),[ge,xe]),kn=(0,u.useMemo)((function(){return!(null!=ge&&ge.length)&&(null==xe?void 0:xe.length)>=1}),[ge,xe]),Zn=(0,u.useMemo)((function(){return(0,$.jsx)(P.Z,{progress:dn})}),[dn]),Tn=m.tf.DBT===(null==c?void 0:c.type),En=(0,A.Z)(fe);function Pn(e,n){return(0,$.jsx)(J.Z,ne(ne({},n),{},{value:e}))}function Sn(e,n){return(0,$.jsx)(q.Z,ne(ne({},n),{},{value:e}))}(0,u.useEffect)((function(){Tn&&!En&&fe&&Re&&(null==Re||Re(H.Rj))}),[fe,En,Tn,Re]);var _n=(0,u.useMemo)((function(){var e=function e(n,t){var o=t.borderTop,i=t.multiOutputInit,l=t.selected,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.columns,s=n.index,f=n.rows,p=n.shape,h=!(null==c||!c.multi_output);return c&&(0,Y.Kn)(c)&&h?(0,$.jsx)(Z.Z,{color:null==Ve?void 0:Ve.accent,onTabChange:cn,outputs:null==f?void 0:f.map((function(n,t){return{render:function(){var r,i=n||{},u=i.data,c=i.text_data,a=i.type;return r=n?k.Gi.TABLE===a?e(u,{borderTop:o,multiOutputInit:h,selected:l},{uuid:String(t)}):k.Gi.TEXT===a?Sn(c||u,{contained:!0,normalPadding:!0,first:!0,last:!0}):u:(0,$.jsx)("div",{}),(0,$.jsxs)($.Fragment,{children:[(k.Gi.TABLE!==a||!o)&&(0,$.jsx)(C.Z,{medium:!0}),r]})},uuid:null==a?void 0:a[t]}}))}):(p&&(en(p),null!=c&&c.uuid&&on((function(e){return ne(ne({},e),{},(0,r.Z)({},c.uuid,p))}))),(null==a?void 0:a.some((function(e){return""===e})))?(0,$.jsx)(S.Z,{mx:5,my:3,children:(0,$.jsx)(_.ZP,{monospace:!0,warning:!0,children:"Block output table could not be rendered due to empty string headers. Please check your data’s column headers for empty strings."})}):(null==f?void 0:f.length)>=1?i&&null!=f&&f.some((function(e){return e&&(0,W.Yh)(e)}))?(0,$.jsx)(S.Z,{pb:L.cd,px:L.cd,children:(0,$.jsx)(D.wx,{monospace:!0,children:null==f?void 0:f.map((function(e,n){return(0,$.jsx)(d(),{html:e},"html-row-".concat(n))}))})}):(0,$.jsx)(x.Z,{columns:a,disableScrolling:!l,index:s,maxHeight:60*L.iI,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!o,renderColumnHeaderCell:function(e,n,t){var o=e.Header,r=t.index,i=t.key,l=t.props,c=t.style,a=(t.width,0===(null==o?void 0:o.length)||(0,W.Rh)(o));return(0,u.createElement)("div",ne(ne({},l),{},{className:"th",key:i,style:ne(ne({},c),{},{paddingBottom:0,paddingTop:0}),title:r?"Row number":void 0}),(0,$.jsx)(O.ZP,{alignItems:"center",fullHeight:!0,fullWidth:!0,children:(0,$.jsx)(_.ZP,{disabled:!0,monospace:!0,small:!0,children:a?"":o})}))},rows:f,width:be-(2+L.cd*L.iI*2+2+G.nn)},"data-table-".concat(s)):void 0)},n=[],t=[],o=[];return null==On||On.forEach((function(r,l){var u,a,s,d=(null===k.Gi||void 0===k.Gi?void 0:k.Gi.GROUP)===(null==r?void 0:r.type),f=(null==r?void 0:r.multi_output)&&(null==r||null===(u=r.outputs)||void 0===u?void 0:u.length)>=1;if(!(d||f||yn)||"string"==typeof(null==r?void 0:r.data)&&null!=r&&null!==(a=r.data)&&void 0!==a&&a.match(N.Gr)){var p=null,h=null,m=Array.isArray(r);if(kn&&m?(p={columns:["-"],index:0,rows:null==r?void 0:r.map((function(e){return[(0,W.Pb)(e)?JSON.parse(e):e]})),shape:[null==r?void 0:r.length,1]},h=k.Gi.TABLE):"string"==typeof r?(p=r,h=k.Gi.TEXT_PLAIN):(p=null==r?void 0:r.data,h=null==r?void 0:r.type),m||p&&0!==(null===(s=p)||void 0===s?void 0:s.length)||d){var v=[];(Array.isArray(p)?p:[p]).filter((function(e){return e})).forEach((function(e){if(h===k.Gi.TEXT_HTML)v.push(e);else if(e&&"string"==typeof e){var n=e.split("\n");v.push.apply(v,(0,i.Z)(n))}else"object"==typeof v&&v.push(e)}));var b=v.length,g=[];v.forEach((function(e,n){var t=x(e,h,n);t&&g.push((0,$.jsx)("div",{children:t},"code-output-".concat(l,"-").concat(n)))})),g.length>=1&&n.push(g)}}else n.push((0,$.jsx)(T.Z,{block:c,contained:!0,containerWidth:be,first:0===l,index:l,last:l===(null==On?void 0:On.length)-1,normalPadding:!0,output:r,selected:Pe,singleOutput:yn},"output-".concat(l)));function x(n,u,c,a){var s,d,f,p,h=a||{contained:ae,first:0===l&&0===c,last:l===On.length-1&&c===b-1,normalPadding:!0},m=l>=1;if("string"==typeof n&&null!==(s=n)&&void 0!==s&&s.match(N.Gr)){var v=n.split("\n"),g=[];v.forEach((function(e){if(null!=e&&e.match(N.Gr)){var t=e.split(N.Vc),r=t[t.length-1];(0,W.Pb)(r)&&o.push(JSON.parse(r))}else g.push(e);n=g.length>=1?g.join("\n"):null}))}if(null!==n){if("string"==typeof n&&null!==(d=n)&&void 0!==d&&d.match(N.Lz)){var j=n.split(N.gr),y=j[j.length-1],O=y.split("FloatProgress");if(j.length>=2&&(y=O[0]),(0,W.Pb)(y)){var T,E=JSON.parse(y);if((null==E?void 0:E.length)>=1&&Array.isArray(E)&&null!=E&&E.every((function(e){return null==e?void 0:e.multi_output})))p=(0,$.jsx)(Z.Z,{color:null==Ve?void 0:Ve.accent,onTabChange:cn,outputs:null==E?void 0:E.map((function(e,n){return{render:function(){var t=e.type,o=(0,z.o1)((0,Y.gR)(e,["multi_output"]));return(0,$.jsxs)($.Fragment,{children:[(k.Gi.TABLE!==t||0===l)&&(0,$.jsx)(C.Z,{medium:!0}),x(null==o?void 0:o.data,null==o?void 0:o.type,n,{contained:!0,first:!0,last:!0,normalPadding:!0})]})},uuid:"Output ".concat(l)}}))});else if(null!=E&&E[0]&&(0,Y.Kn)(null==E?void 0:E[0])&&k.Gi.TEXT===(null==E||null===(T=E[0])||void 0===T?void 0:T.type)){var P;if(Array.isArray(null==E||null===(P=E[0])||void 0===P?void 0:P.text_data)){var S;!0;var _=null==E?void 0:E.map((function(e){return null==e?void 0:e.text_data})),I=null===(S=(0,V.w6)(Math.max.apply(Math,(0,i.Z)(null==_?void 0:_.map((function(e){return null==e?void 0:e.length}))))))||void 0===S?void 0:S.map((function(e,n){return"col".concat(n)})),w=[null==_?void 0:_.length,null==I?void 0:I.length],A=null==_?void 0:_.map((function(e,n){return n})),R=e({rows:_,columns:I,shape:w,index:A},{borderTop:m,selected:Pe},ne(ne({},E),{},{uuid:String(c)}));t.push(R),p=R}else p=Sn(E,h)}else{var D=E.data,B=E.text_data,M=E.type;if(k.Gi.TABLE===M){if(D){!0;var U=e(D,{borderTop:m,selected:Pe},ne(ne({},E),{},{uuid:String(c)}));t.push(U),Tn||(p=U)}}else k.Gi.IMAGE_PNG===M&&B&&(p=(0,$.jsx)(X.Z,{data:B,height:60*L.iI,uuid:String(c)}))}}}else if(u===k.Gi.TABLE){var G=(0,W.Pb)(n)?JSON.parse(n):n;if(G){!0;var F=e(G,{borderTop:m,selected:Pe},ne(ne({},r),{},{uuid:String(c)}));t.push(F),Tn||(p=F)}}else if(k.jU.includes(u)||k.Gi.TEXT_HTML===u&&(0,Y.Kn)(n)&&null!=r&&r.multi_output){var H,K;if((0,Y.Kn)(n)){if(null!=r&&r.multi_output&&[k.Gi.TEXT,k.Gi.TEXT_HTML].includes(null==r?void 0:r.type)){!0;var Q=n,q=Q.columns,J=Q.rows;p=(0,$.jsx)(Z.Z,{color:null==Ve?void 0:Ve.accent,onTabChange:cn,outputs:null==J?void 0:J.map((function(n,t){var o=n.data,r=n.type;return{render:function(){var n;return k.jU.includes(r)?n=Sn(o,{contained:!0,first:!0,last:!0,normalPadding:!0}):(0,Y.Kn)(o)&&k.Gi.TABLE===r?n=e(o,{borderTop:m,selected:Pe},{uuid:String(t)}):k.Gi.TEXT_HTML===r&&(n=Pn(o,{contained:!0,first:!0,last:!0,normalPadding:!0})),(0,$.jsxs)($.Fragment,{children:[(k.Gi.TABLE!==r||0===l)&&(0,$.jsx)(C.Z,{medium:!0}),n]})},uuid:null==q?void 0:q[t]}}))})}else if(null!==(H=n)&&void 0!==H&&H.data||null!==(K=n)&&void 0!==K&&K.text_data){var ee,te;p=Sn((null===(ee=n)||void 0===ee?void 0:ee.data)||(null===(te=n)||void 0===te?void 0:te.text_data),h)}}else p=Sn(n,h)}else if(u===k.Gi.TEXT_HTML)n&&(p=Pn(n,h));else if(u===k.Gi.IMAGE_PNG&&(null===(f=n)||void 0===f?void 0:f.length)>=1)p=(0,$.jsx)("div",{style:{overflow:"auto",backgroundColor:"white",maxHeight:60*L.iI},children:(0,$.jsx)("img",{alt:"Image ".concat(l," from code output"),src:"data:image/png;base64, ".concat(n)})});else if(u===k.Gi.PROGRESS){var oe=parseInt(n);fn(oe>90?90:oe)}return p}}})),ve&&(null==Oe?void 0:Oe.type)===E.qL.PYSPARK&&!Me&&n.unshift([(0,$.jsx)(D.T5,{contained:!0,children:(0,$.jsx)(S.Z,{mt:1,children:Zn})},"progress_bar")]),{content:n,tableContent:t,testContent:o}}),[c,Ve,On,ae,Tn,ve,be,Oe,Zn,kn,Pe,yn,Me]),In=_n.content,wn=_n.tableContent,An=_n.testContent,Rn=(null==$e?void 0:$e[1])||0,Dn=Rn>30?" (30 out of ".concat(Rn," columns displayed)"):"",Bn=(0,u.useMemo)((function(){var e;if(Tn&&Se||ye){var n=null==Se?void 0:Se.uuid;if(H.$m.uuid===n||o.DATA===ye)(null==wn?void 0:wn.length)>=1?e=wn:ve||(e=(0,$.jsx)(S.Z,{px:2,py:1,children:(0,$.jsx)(_.ZP,{muted:!0,children:fe?"Error, check logs.":"No preview to display yet, try running the block."})}));else if(H.Rj.uuid===n||o.LOGS===ye)(null==In?void 0:In.length)>=1?e=In:ve||(e=(0,$.jsx)(S.Z,{px:2,py:1,children:(0,$.jsx)(_.ZP,{muted:!0,children:fe?"Error, check logs.":"No logs to display yet, try running the block."})}));else if(H.Jt.uuid===n){var t,r=null==ee||null===(t=ee.dbt)||void 0===t?void 0:t.sql;e=r?(0,$.jsx)(g.Z,{autoHeight:!0,language:M.Lu.SQL,padding:2*L.iI,readOnly:!0,value:r,width:"100%"}):null}else if(H.gM.uuid===n){var i,l=null==ee||null===(i=ee.dbt)||void 0===i?void 0:i.lineage;e=l?(0,$.jsx)(j.ZP,{disabled:!0,enablePorts:!1,height:55*L.iI,pannable:Pe,pipeline:ne(ne({},Oe),{},{blocks:l}),zoomable:Pe}):null}}else e=In;return(0,$.jsxs)($.Fragment,{children:[re,le,!me&&e]})}),[ee,re,le,In,fe,me,Tn,ve,ye,Oe,Pe,Se,wn]);return re||fe||pe||kn||ie||t?(0,$.jsx)("div",{ref:n,children:(0,$.jsxs)("div",{onClick:je?function(){return null==je?void 0:je()}:null,style:{paddingTop:Be?F.WC:0},children:[ae&&(0,$.jsxs)(D.Nk,ne(ne({},Ye),{},{addBottomPadding:ve&&(null==Oe?void 0:Oe.type)===E.qL.PYSPARK,blockType:We,dynamicBlock:se,dynamicChildBlock:de,executedAndIdle:Xe,hasError:fe,selected:Pe,showBorderTop:De,children:[ie,!ue&&(null==An?void 0:An.length)>=1&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(S.Z,{py:2,children:(0,$.jsx)(D.T5,{contained:!0,normalPadding:!0,children:An.map((function(e,n){var t=e.error,o=e.message,r=e.stacktrace;return(0,$.jsxs)(S.Z,{mt:n>=1?3:0,children:[(0,$.jsx)(_.ZP,{monospace:!0,preWrap:!0,children:(0,$.jsx)(a(),{children:"".concat(o).concat(t?" "+t:"")})}),null==r?void 0:r.map((function(e){return(0,$.jsx)(_.ZP,{default:!0,monospace:!0,preWrap:!0,small:!0,children:(0,$.jsx)(a(),{children:e})},e)}))]},o)}))})}),(0,$.jsx)(S.Z,{mb:Be||fe?2:0,children:(0,$.jsx)(C.Z,{medium:!0})})]}),!ue&&Bn]})),!ae&&(0,$.jsxs)($.Fragment,{children:[ie,Bn]}),(t||Xe&&!he)&&(0,$.jsxs)(D._A,ne(ne({},Ye),{},{blockType:We,dynamicBlock:se,dynamicChildBlock:de,hasError:fe,selected:Pe,children:[(0,$.jsx)(D.MB,{}),(0,$.jsxs)(O.ZP,{justifyContent:"space-between",children:[(0,$.jsxs)(y.Z,{alignItems:"center",px:1,children:[_e&&(0,$.jsx)(v.ZP,ne(ne({},oe),{},{onClick:function(){return _e(!ue)},children:ue?(0,$.jsxs)(O.ZP,{alignItems:"center",children:[(0,$.jsx)(R.ChevronDown,{muted:!0,size:2*L.iI})," ",(0,$.jsx)(_.ZP,{default:!0,children:"Expand output"})]}):(0,$.jsxs)(O.ZP,{alignItems:"center",children:[(0,$.jsx)(R.ChevronUp,{muted:!0,size:2*L.iI}),an&&(0,$.jsx)(S.Z,{ml:2,children:(0,$.jsx)(_.ZP,{children:"".concat(an[0]," rows x ").concat(an[1]," columns").concat(Dn)})})]})})),!_e&&(0,$.jsx)(O.ZP,{alignItems:"center",children:an&&(0,$.jsx)(S.Z,{pl:1,children:(0,$.jsx)(_.ZP,{children:"".concat(an[0]," rows x ").concat(an[1]," columns").concat(Dn)})})})]}),(0,$.jsx)(D.a3,{children:(0,$.jsxs)(O.ZP,{alignItems:"center",fullWidth:!0,justifyContent:"flex-end",children:[(0,$.jsx)(I.Z,ne(ne({},te),{},{label:ke>=1&&Te?"Last run at ".concat(new Date(Te.valueOf()).toLocaleString()):fe?"Block executed with errors":"Block executed successfully",children:(0,$.jsxs)(O.ZP,{alignItems:"center",children:[ke>=1&&Number(Ze)>Number(Te)&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(_.ZP,{small:!0,children:[(Number(Ze)-Number(Te))/1e3,"s"]}),(0,$.jsx)(S.Z,{mr:1})]}),!fe&&(0,$.jsx)(R.Check,{size:2*L.iI,success:!0}),fe&&(0,$.jsx)(b.Z,{danger:!0,size:2*L.iI,children:(0,$.jsx)(_.ZP,{bold:!0,monospace:!0,small:!0,children:"!"})})]})})),!fe&&!m.Qj.includes(We)&&(0,$.jsx)(S.Z,{pl:2,children:(0,$.jsxs)(O.ZP,{alignItems:"center",children:[(0,$.jsx)(I.Z,ne(ne({},te),{},{label:"Expand table",children:(0,$.jsx)(v.ZP,ne(ne({},oe),{},{onClick:function(){(0,z.OF)(null==Oe?void 0:Oe.uuid,Qe),null==Ce||Ce(K.cH.DATA),null==we||we((function(e){return e.find((function(e){return e.uuid===Qe}))?e:(null==Ae||Ae(c),e.concat(c))}))},children:(0,$.jsx)(R.Expand,{muted:!0,size:1.75*L.iI})}))})),(0,$.jsx)(S.Z,{pl:2}),(0,$.jsx)(I.Z,ne(ne({},te),{},{forceVisible:jn,label:jn?"".concat(hn||0,"mb downloaded..."):"Save output as CSV file",children:(0,$.jsx)(v.ZP,ne(ne({},oe),{},{compact:!0,loading:jn,onClick:function(){mn(null),xn()},children:(0,$.jsx)(R.Save,{muted:!0,size:1.75*L.iI})}))}))]})})]})})]})]}))]})}):null}var ie=u.forwardRef(re)},69632:function(e,n,t){t.d(n,{JX:function(){return c},NJ:function(){return s},au:function(){return u},eQ:function(){return a}});var o=t(9518),r=t(44897),i=t(42631),l=t(70515),u=(l.iI,o.default.div.withConfig({displayName:"indexstyle__HeaderSectionStyle",componentId:"sc-nlaveq-0"})(["",""],(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).content,";\n  ")}))),c=o.default.div.withConfig({displayName:"indexstyle__StreamSectionStyle",componentId:"sc-nlaveq-1"})(["overflow:hidden;"," ",""],(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).content,";\n  ")}),(function(e){return!e.noBorderRadius&&"\n    border-bottom-left-radius: ".concat(i.n_,"px;\n    border-bottom-right-radius: ").concat(i.n_,"px;\n  ")})),a=o.default.div.withConfig({displayName:"indexstyle__EmptyCodeSpace",componentId:"sc-nlaveq-2"})(["",""],(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).codeTextarea,";\n  ")})),s=o.default.div.withConfig({displayName:"indexstyle__CalloutStyle",componentId:"sc-nlaveq-3"})(["border-radius:","px;padding:","px;",""],i.n_,l.cd*l.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).panel,";\n    border: 1px solid ").concat((e.theme.borders||r.Z.borders).light,";\n  ")}))},41429:function(e,n,t){t.d(n,{$m:function(){return r},C:function(){return h},C4:function(){return g},Jt:function(){return l},Rj:function(){return i},SD:function(){return d},Xy:function(){return c},aL:function(){return s},aj:function(){return b},gM:function(){return u},iz:function(){return p},p:function(){return f},qC:function(){return a},vT:function(){return m},zr:function(){return v}});var o=t(70515),r={uuid:"PREVIEW RESULTS"},i={uuid:"LOGS"},l={uuid:"SQL"},u={uuid:"LINEAGE"},c=function(e){var n,t,o=e.metadata,c=[i,l];return(null==o||null===(n=o.dbt)||void 0===n||null===(t=n.block)||void 0===t?void 0:t.snapshot)||(c.unshift(r),c.push(u)),c},a={uuid:"Jobs"},s={uuid:"Output"},d={uuid:"SQLs"},f={uuid:"Stages & Tasks"},p=function(e){return[s,a,f,d]},h=2.5*o.iI,m="CodeBlock_HiddenBlock",v={label:function(){return"CODE"},uuid:"code"},b={label:function(){return"INTERACTIONS"},uuid:"interactions"},g=[v,b]},30352:function(e,n,t){t.d(n,{z:function(){return Yt},Z:function(){return qt}});var o=t(82394),r=t(75582),i=t(21831),l=t(12691),u=t.n(l),c=t(82684),a=t(9518),s=t(10975),d=t(14567),f=t(83455),p=t(46510),h=t(79757),m=t(71180),v=t(55485),b=t(38276),g=t(30160),x=t(55283),j=t(28598);var C=function(e){var n=e.blocks,t=e.onClick,o=(0,c.useContext)(a.ThemeContext);return(0,j.jsx)(v.ZP,{alignItems:"center",children:null==n?void 0:n.map((function(e){var n=e.color,r=e.type,i=e.uuid,l=(0,x.qn)(r,{blockColor:n,theme:o}).accentLight;return(0,j.jsx)(b.Z,{ml:1,mt:1,children:(0,j.jsx)(m.ZP,{backgroundColor:l,compact:!0,onClick:function(){return t(e)},small:!0,children:(0,j.jsx)(g.ZP,{monospace:!0,small:!0,children:i})})},i)}))})},y=t(97618),O=t(26084),k=t(85385),Z=t(86735);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var P=function(e){var n=e.block,t=e.blocks,o=e.openSidekickView,i=e.pipeline,l=(0,c.useMemo)((function(){return(0,Z.HK)(t,(function(e){return e.uuid}))}),[t]),u=(0,c.useMemo)((function(){var e;return null==n||null===(e=n.callback_blocks)||void 0===e?void 0:e.reduce((function(e,n){var t=null==l?void 0:l[n];return t?e.concat(t):e}),[])}),[n,l]),a=(0,c.useMemo)((function(){var e;return null==n||null===(e=n.conditional_blocks)||void 0===e?void 0:e.reduce((function(e,n){var t=null==l?void 0:l[n];return t?e.concat(t):e}),[])}),[n,l]),s=(0,c.useMemo)((function(){var e,t=[];return null===(e=Object.entries((null==i?void 0:i.extensions)||{}))||void 0===e||e.forEach((function(e){var o=(0,r.Z)(e,2),i=o[0],u=o[1].blocks;null==u||u.forEach((function(e){var o=e.upstream_blocks,r=e.uuid;if(null!=o&&o.includes(null==n?void 0:n.uuid)){var u=null==l?void 0:l[r];u&&t.push(E(E({},u),{},{extension_uuid:i}))}}))})),t}),[n,l,i]),d=(0,c.useMemo)((function(){return null==a?void 0:a.length}),[a]),f=(0,c.useMemo)((function(){return null==u?void 0:u.length}),[u]),p=(0,c.useMemo)((function(){return null==s?void 0:s.length}),[s]);return d||f||p?(0,j.jsxs)(b.Z,{pb:d>=1||f>=1||p>=1?1:0,children:[d>=1&&(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(y.Z,{flexDirection:"column",children:[(0,j.jsx)(b.Z,{px:1,children:(0,j.jsx)(g.ZP,{bold:!0,muted:!0,children:"Conditionals"})}),(0,j.jsx)(C,{blocks:a,onClick:function(e){var n=e.uuid;return o(k.cH.ADDON_BLOCKS,!0,{addon:O.Q.CONDITIONAL,blockUUID:n})}})]})}),f>=1&&(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(y.Z,{flexDirection:"column",children:[(0,j.jsx)(b.Z,{px:1,children:(0,j.jsx)(g.ZP,{bold:!0,muted:!0,children:"Callbacks"})}),(0,j.jsx)(C,{blocks:u,onClick:function(e){var n=e.uuid;return o(k.cH.ADDON_BLOCKS,!0,{addon:O.Q.CALLBACK,blockUUID:n})}})]})}),p>=1&&(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(y.Z,{flexDirection:"column",children:[(0,j.jsx)(b.Z,{px:1,children:(0,j.jsx)(g.ZP,{bold:!0,muted:!0,children:"Extensions"})}),(0,j.jsx)(C,{blocks:s,onClick:function(e){var n=e.extension_uuid,t=e.uuid;return o(k.cH.EXTENSIONS,!0,{blockUUID:t,extension:n})}})]})})]}):null},S=t(81769),_=t(44425),I=t(90299),w=t(70652),A=t(39867),R=t(75810),D=t(50450),B=t(70374),M=t(35058),N=t(85108),L=t(70515),U=t(81728);function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var H=function(e){var n=e.addWidget,t=e.block,o=e.left,r=e.rightOffset,l=e.onClickCallback,u=e.open,a=e.parentRef,s=e.runBlock,d=e.topOffset,f=(0,c.useMemo)((function(){return M.CK.map((function(e){var o,r,i={configuration:{chart_type:e},language:t.language,type:_.tf.CHART,upstream_blocks:t?[t.uuid]:null},l=N.x8[e],u=(null==l||null===(o=l.configuration)||void 0===o?void 0:o.call(l,i))||{},c=_.t6.SQL===(null==t?void 0:t.language)?null:(null==l||null===(r=l.content)||void 0===r?void 0:r.call(l,i))||null,a=e;return t&&(a="".concat(t.uuid,"_").concat(a)),{label:function(){return(0,U.vg)(e)},onClick:function(){return n(F(F({},i),{},{configuration:F(F({},i.configuration),u),content:c,name:"".concat(a,"_").concat((0,U.Lo)())}),{onCreateCallback:function(e){t&&_.t6.SQL!==t.language&&([_.DA.EXECUTED,_.DA.UPDATED].includes(t.status)?null==s||s({block:e,code:c,disableReset:!0}):null==s||s({block:t,runDownstream:!0}))}})},uuid:e}}))}),[n,t,s]),p=(0,c.useMemo)((function(){return N._H.map((function(e){var o=e.label,r=F(F({},(0,e.widgetTemplate)({block:t})),{},{language:t.language,type:_.tf.CHART,upstream_blocks:t?[t.uuid]:null});return{label:o,onClick:function(){return n(r,{onCreateCallback:function(e){t&&_.t6.SQL!==t.language&&([_.DA.EXECUTED,_.DA.UPDATED].includes(t.status)?null==s||s({block:e,code:e.content,disableReset:!0}):null==s||s({block:t,runDownstream:!0}))}})},uuid:o()}}))}),[n,t,s]),h=[{isGroupingTitle:!0,label:function(){return"Custom charts"},uuid:"custom_charts"}].concat((0,i.Z)(f));return _.t6.SQL!==t.language&&h.push.apply(h,[{isGroupingTitle:!0,label:function(){return"Templates"},uuid:"chart_templates"}].concat((0,i.Z)(p))),(0,j.jsx)(B.Z,{items:h,left:o,onClickCallback:l,open:u,parentRef:a,rightOffset:r,topOffset:d,uuid:"CommandButtons/add_charts",width:25*L.iI})},K=t(50724),z=t(63403),W=a.default.svg.withConfig({displayName:"Convert__SVGStyle",componentId:"sc-fmw0vr-0"})([""]),Q=function(e){var n=e.fill,t=e.opacity,o=e.size,r=void 0===o?z.C:o,i=e.style,l=e.viewBox,u=void 0===l?"0 0 12 12":l;return(0,j.jsxs)(W,{fill:n,height:r,opacity:t,style:i,viewBox:u,width:r,children:[(0,j.jsx)("path",{clipRule:"evenodd",d:"M2.5 1C1.67157 1 1 1.67157 1 2.5v.0625c0 .27614-.223858.5-.5.5s-.5-.22386-.5-.5V2.5C0 1.11929 1.11929 0 2.5 0h7C10.8807 0 12 1.11929 12 2.5v7c0 1.3807-1.1193 2.5-2.5 2.5h-7C1.11929 12 0 10.8807 0 9.5v-.0625c0-.27614.223858-.5.5-.5s.5.22386.5.5V9.5c0 .8284.67157 1.5 1.5 1.5h7c.8284 0 1.5-.6716 1.5-1.5v-7c0-.82843-.6716-1.5-1.5-1.5h-7z",fill:"url(#paint0_linear_1332_60037)",fillRule:"evenodd"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.05806 3.55806c.24408-.24408.6398-.24408.88388 0l2 2c.24408.24408.24408.6398 0 .88388l-2 2c-.24408.24408-.6398.24408-.88388 0-.24408-.24408-.24408-.6398 0-.88388l.93306-.93306H1C.654822 6.625.375 6.34518.375 6s.279822-.625.625-.625h5.99112l-.93306-.93306c-.24408-.24408-.24408-.6398 0-.88388z",fill:"#fff"}),(0,j.jsx)("defs",{children:(0,j.jsxs)("linearGradient",{id:"paint0_linear_1332_60037",x1:"-.618557",y1:"-.000001",x2:"10.5709",y2:".83113",gradientUnits:"userSpaceOnUse",children:[(0,j.jsx)("stop",{stopColor:"#FFCC19"}),(0,j.jsx)("stop",{offset:".585938",stopColor:"#2ECDF7"}),(0,j.jsx)("stop",{offset:"1",stopColor:"#9E7BFF"})]})})]})},Y=t(46732),V=t(49130),q=t(7267),X=t(48670),J=t(65956),$=t(4190),ee=t(12468),ne=t(5332),te=t(44897),oe=t(48339),re=t(72473),ie=t(41429),le=t(39643),ue=t(57653),ce=t(61709),ae=t(58325),se=t(72619),de=t(23780);function fe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function pe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?fe(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var he=function(e){var n=e.addNewBlock,t=e.addWidget,o=e.block,i=e.blockContent,l=e.blocks,u=e.deleteBlock,s=e.executionState,d=e.fetchFileTree,p=e.fetchPipeline,h=e.hideExtraButtons,C=e.interruptKernel,y=e.isEditingBlock,O=e.openSidekickView,T=e.pipeline,E=e.project,P=e.runBlock,S=e.setBlockContent,I=e.setIsEditingBlock,w=e.savePipelineContent,R=e.setErrors,D=e.setOutputCollapsed,M=e.showConfigureProjectModal,N=(0,de.VI)(null,{},[],{uuid:"CommandButtons/".concat(null==o?void 0:o.uuid)}),U=(0,r.Z)(N,1)[0],G=o.all_upstream_blocks_executed,F=void 0===G||G,z=o.color,W=o.language,fe=(o.metadata,o.type),he=o.uuid,me=(0,c.useRef)(null),ve=(0,c.useRef)(null),be=(0,c.useRef)(null),ge=(0,c.useRef)(null),xe=(0,c.useRef)(null),je=null==T?void 0:T.type,Ce=(0,c.useState)(!1),ye=Ce[0],Oe=Ce[1],ke=(0,c.useState)(!1),Ze=ke[0],Te=ke[1],Ee=(0,c.useState)(!1),Pe=Ee[0],Se=Ee[1],_e=(0,c.useState)(!1),Ie=_e[0],we=_e[1],Ae=(0,c.useState)(!1),Re=Ae[0],De=Ae[1],Be=(0,c.useContext)(a.ThemeContext),Me=oe.uF.IDLE!==s,Ne=(0,x.qn)(fe,{blockColor:z,theme:Be}).accent,Le=(0,c.useMemo)((function(){return je===ue.qL.STREAMING}),[je]),Ue=(0,c.useMemo)((function(){return je===ue.qL.INTEGRATION}),[je]),Ge=(0,c.useMemo)((function(){return(0,ce.Ts)(o,l,"CommandButtons",n).map((function(e){return pe(pe({},e),{},{onClick:function(){return w().then((function(){return e.onClick()}))}})}))}),[n,o,l,w]),Fe=(0,c.useMemo)((function(){return(0,Z.HK)(l,(function(e){return e.uuid}))}),[l]),He=(0,c.useMemo)((function(){return _.tf.DBT===(null==o?void 0:o.type)}),[o]),Ke=(0,c.useMemo)((function(){return _.tf.MARKDOWN===(null==o?void 0:o.type)}),[o]),ze=(0,f.Db)(ne.ZP.pipelines.useUpdate(null==T?void 0:T.uuid),{onSuccess:function(e){return(0,se.wD)(e,{callback:function(){p()},onErrorCallback:function(e,n){return R({errors:n,response:e})}})}}),We=(0,r.Z)(ze,2),Qe=We[0],Ye=We[1].isLoading,Ve=(0,f.Db)(ne.ZP.llms.useCreate(),{onSuccess:function(e){return(0,se.wD)(e,{callback:function(e){var n=e.llm;null!=n&&n.response&&S&&(null==S||S(null==n?void 0:n.response))},onErrorCallback:function(e,n){return U({errors:n,response:e})}})}}),qe=(0,r.Z)(Ve,2),Xe=qe[0],Je=(qe[1].isLoading,(0,c.useMemo)((function(){var e=!(null!=E&&E.openai_api_key),n=function(e){null==M||M({header:(0,j.jsx)(b.Z,{mb:L.HN,children:(0,j.jsxs)(J.Z,{children:[(0,j.jsx)(g.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate blocks using AI."}),(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(g.ZP,{warning:!0,children:["Read ",(0,j.jsx)(X.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI’s documentation"})," to get your API key."]})})]})}),onSaveSuccess:function(n){null!=n&&n.openai_api_key&&Qe({pipeline:{llm:e}})}})},t={request:{block_uuid:null==o?void 0:o.uuid,pipeline_uuid:null==T?void 0:T.uuid}};return[{label:function(){return"Document block (beta)"},onClick:function(){t.use_case=q.z.GENERATE_DOC_FOR_BLOCK,e?n(t):Qe({pipeline:{llm:t}})},uuid:"Document block"},{label:function(){return"Document pipeline and all blocks (beta)"},onClick:function(){t.use_case=q.z.GENERATE_DOC_FOR_PIPELINE,e?n(t):Qe({pipeline:{llm:t}})},uuid:"Document pipeline and all blocks"},{label:function(){return"Add comments in code (beta)"},onClick:function(){e?n(t):Xe({llm:{request:{block_code:i},use_case:q.z.GENERATE_COMMENT_FOR_CODE}})},uuid:"Add comments in code"}]}),[o,i,Xe,T,E,M,Qe]));return(0,j.jsxs)(v.ZP,{alignItems:"center",children:[oe.uF.QUEUED===s&&(0,j.jsx)($.Z,{color:(Be||te.Z).content.active,type:"cylon"}),oe.uF.BUSY===s&&(0,j.jsx)($.Z,{color:(Be||te.Z).content.active}),P&&!Me&&!Le&&(0,j.jsxs)(j.Fragment,{children:[!He&&(0,j.jsx)(ee.Z,{appearBefore:!0,default:!0,label:(0,j.jsxs)(g.ZP,{children:["Run block    ",(0,j.jsx)(V.Z,{inline:!0,keyTextGroups:[[(0,ae.V5)()?le.RJ:le.hE,le.Lz]],monospace:!0,uuidForKey:he})]}),size:3*L.iI,widthFitContent:!0,children:(0,j.jsx)(m.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){F?P({block:o}):Se(!0)},children:(0,j.jsx)(A.Z,{color:Ne,size:3*L.iI,children:(0,j.jsx)(re.PlayButtonFilled,{black:!0,size:1.5*L.iI})})})}),He&&(0,j.jsx)(m.ZP,{backgroundColor:Ne,beforeIcon:(0,j.jsx)(re.PlayButtonFilled,{size:1.5*L.iI}),compact:!0,onClick:function(){F?P({block:o}):Se(!0)},small:!0,children:W===_.t6.YAML?"Run command":"Compile & preview"}),(0,j.jsx)(K.Z,{disableEscape:!0,onClickOutside:function(){return Se(!1)},open:Pe,children:(0,j.jsx)(B.Z,{items:[{label:function(){return"Execute block"},onClick:function(){return P({block:o})},uuid:"execute_block"},{label:function(){return"Execute with upstream blocks"},onClick:function(){return P({block:o,runUpstream:!0})},uuid:"execute_upstream"}],onClickCallback:function(){return Se(!1)},open:Pe,parentRef:be,rightOffset:13.25*L.iI,topOffset:4.5*L.iI,uuid:"execute_actions",width:25*L.iI})})]}),Me&&(0,j.jsx)(b.Z,{ml:L.cd,children:(0,j.jsx)(ee.Z,{appearBefore:!0,default:!0,label:(0,j.jsxs)(g.ZP,{children:["Interrupt kernel    ",(0,j.jsx)(V.Z,{inline:!0,keyTextGroups:[[le.kA],[le.kA]],monospace:!0,uuidForKey:he})]}),size:ie.C,widthFitContent:!0,children:(0,j.jsx)(m.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return C()},children:(0,j.jsx)(A.Z,{borderSize:1.5,size:ie.C,children:(0,j.jsx)(re.Close,{size:1*L.iI})})})})}),!h&&_.tf.SCRATCHPAD===o.type&&!Le&&(0,j.jsx)(b.Z,{ml:L.cd,children:(0,j.jsx)(Y.Z,{items:Ge,onClickCallback:function(){return Te(!1)},onClickOutside:function(){return Te(!1)},open:Ze,parentRef:ve,rightOffset:0,topOffset:4,uuid:"CommandButtons/convert_block",children:(0,j.jsx)(ee.Z,{appearBefore:!0,default:!0,label:(0,j.jsx)(g.ZP,{children:"Convert block"}),size:ie.C,widthFitContent:!0,children:(0,j.jsx)(m.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return Te(!Ze)},ref:ve,children:(0,j.jsx)(Q,{size:ie.C})})})})}),!h&&!(_.vn.includes(o.type)&&(_.tf.DBT!==o.type||_.t6.YAML!==(null==o?void 0:o.language))&&!Le&&!Ue)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{ml:L.cd,ref:me,children:(0,j.jsx)(ee.Z,{appearBefore:!0,default:!0,label:"Add chart",size:2.25*L.iI,widthFitContent:!0,children:(0,j.jsx)(m.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return Oe((function(e){return!e}))},children:(0,j.jsx)(re.Charts,{size:2.25*L.iI})})})}),t&&(0,j.jsx)(K.Z,{disableEscape:!0,onClickOutside:function(){return Oe(!1)},open:ye,children:(0,j.jsx)(H,{addWidget:t,block:o,onClickCallback:function(){return Oe(!1)},open:ye,parentRef:me,rightOffset:9*L.iI,runBlock:P,topOffset:2*L.iI})})]}),!h&&Ke&&(0,j.jsx)(b.Z,{ml:L.cd,children:(0,j.jsx)(ee.Z,{appearBefore:!0,default:!0,label:y?"Close editor":"Edit",size:ie.C,widthFitContent:!0,children:(0,j.jsx)(m.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return I((function(e){return!e}))},children:y?(0,j.jsx)(re.Check,{size:ie.C,success:!0}):(0,j.jsx)(re.Edit,{size:ie.C})})})}),!h&&_.tf.GLOBAL_DATA_PRODUCT!==(null==o?void 0:o.type)&&(0,j.jsx)("div",{ref:xe,children:(0,j.jsxs)(b.Z,{ml:L.cd,children:[Ye&&(0,j.jsx)($.Z,{inverted:!0,small:!0}),!Ye&&(0,j.jsx)(ee.Z,{appearBefore:!0,default:!0,label:(0,j.jsx)(g.ZP,{children:"AI actions"}),size:ie.C,widthFitContent:!0,children:(0,j.jsx)(m.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return De((function(e){return!e}))},children:(0,j.jsx)(re.AISparkle,{default:!0,size:ie.C})})})]})}),!h&&(0,j.jsx)(K.Z,{disableEscape:!0,onClickOutside:function(){return De(!1)},open:Re,children:(0,j.jsx)(B.Z,{items:Je,onClickCallback:function(){return De(!1)},open:Re,parentRef:xe,rightOffset:4.75*L.iI,topOffset:2*L.iI,uuid:"FileHeaderMenu/AI_actions"})}),!h&&(0,j.jsx)(b.Z,{ml:L.cd,children:(0,j.jsx)(ee.Z,{appearBefore:!0,default:!0,label:"View and edit settings for this block",size:ie.C,widthFitContent:!0,children:(0,j.jsx)(m.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return null==O?void 0:O(k.cH.BLOCK_SETTINGS)},children:(0,j.jsx)(re.SettingsWithKnobs,{default:!0,size:ie.C})})})}),!h&&(0,j.jsx)("div",{ref:ge,children:(0,j.jsx)(b.Z,{ml:L.cd,children:(0,j.jsx)(ee.Z,{appearBefore:!0,default:!0,label:(0,j.jsx)(g.ZP,{children:"More actions"}),size:ie.C,widthFitContent:!0,children:(0,j.jsx)(m.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return we((function(e){return!e}))},children:(0,j.jsx)(A.Z,{borderSize:1.5,default:!0,size:ie.C,children:(0,j.jsx)(re.Ellipsis,{default:!0,size:L.iI})})})})})}),!h&&(0,j.jsx)(K.Z,{disableEscape:!0,onClickOutside:function(){return we(!1)},open:Ie,children:(0,j.jsx)(B.Z,{items:(0,ce.J8)(o,P,u,D,Le||Ue,{addNewBlock:n,blocksMapping:Fe,fetchFileTree:d,fetchPipeline:p,openSidekickView:O,project:E,savePipelineContent:w,updatePipeline:Qe}),onClickCallback:function(){return we(!1)},open:Ie,parentRef:ge,rightOffset:4.75*L.iI,topOffset:2*L.iI,uuid:"FileHeaderMenu/file_items"})})]})},me=t(15338),ve=t(85854),be=t(99236),ge=t(75499),xe=t(69632),je=t(37443),Ce=t(61599),ye=t(53405);function Oe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function ke(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Oe(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ze,Te=function(e){var n=e.block,t=e.blockContent,o=e.blocksMapping,r=(e.children,e.codeEditor),i=e.callbackEl,l=e.hasElementsBelow,u=e.onChangeBlock,a=(e.openSidekickView,e.setContent),s=e.showDataIntegrationModal,d=(n.catalog,n.language),f=n.metadata,p=n.type,h=n.upstream_blocks,C=n.uuid,O=((null==f?void 0:f.data_integration)||{}).name,k=(0,c.useMemo)((function(){return(0,ye.Uc)(n,{getAll:!0})}),[n]),T=(0,c.useMemo)((function(){return null==k?void 0:k.filter(ye.Z5)}),[k]),E=(0,c.useMemo)((function(){return(null==k?void 0:k.length)||0}),[k]),P=(0,c.useMemo)((function(){return(null==T?void 0:T.length)||0}),[T]),S=_.tf.DATA_LOADER===p,I=S?"source":"destination",w=(0,c.useMemo)((function(){var e=[1,1,1,null],o=[{uuid:"Stream"},{center:!0,uuid:"Columns"},{center:!0,uuid:"Sync method"},{uuid:"Parallel"}];return S||(e=(0,Z.Hk)(1,1,e),o=(0,Z.Hk)({uuid:"Table name"},1,o)),(0,j.jsx)(ge.Z,{columnFlex:e,columns:o,rows:null==T?void 0:T.map((function(e){var o,r,i,l=e||{},c=l.bookmark_properties,f=l.destination_table,p=l.replication_method,h=l.run_in_parallel,m=(l.tap_stream_id,(0,ye.M$)(e)),x=(0,ye.Qu)(e),C=(0,ye.WD)(e),y=(0,ye.JN)(e),O=y.allColumns,k=y.selectedColumns,T=(null===(o=Object.keys(O||[]))||void 0===o?void 0:o.length)||0,E=(null===(r=Object.keys(k||[]))||void 0===r?void 0:r.length)||0,P=_.t6.YAML===d&&!E,I=(0,j.jsxs)(X.Z,{danger:P,monospace:!0,onClick:function(){return s({block:ke(ke({},n),{},{content:t}),defaultMainNavigationTab:m,defaultMainNavigationTabSub:x,defaultSubTab:P?je.tw.SETTINGS:je.tw.OVERVIEW,onChangeBlock:u,setContent:a})},preventDefault:!0,sameColorAsText:!P,children:[m," ",P&&(0,j.jsx)(g.ZP,{inline:!0,default:!0,monospace:!0,children:"will fail if no columns selected"})]},"".concat(C,"-stream"));i=E>=1||_.t6.PYTHON===d?(0,j.jsxs)(g.ZP,{center:!0,default:!0,monospace:!0,children:[E," ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,children:"/"})," ",T]}):(0,j.jsx)(g.ZP,{center:!0,danger:!0,children:"No columns selected"});var w=[I,(0,j.jsx)(X.Z,{danger:P,monospace:!0,onClick:function(){return s({block:ke(ke({},n),{},{content:t}),defaultMainNavigationTab:m,defaultMainNavigationTabSub:x,defaultSubTab:je.tw.SETTINGS,onChangeBlock:u,setContent:a})},preventDefault:!0,sameColorAsText:!P,children:i},"".concat(C,"-columns")),(0,j.jsxs)(v.ZP,{alignItems:"center",justifyContent:"center",children:[(0,j.jsx)(g.ZP,{center:!0,default:!0,children:p&&(0,U.vg)(p)}),Ce._B.INCREMENTAL===p&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:1}),!(null!=c&&c.length)&&(0,j.jsx)(g.ZP,{danger:!0,xsmall:!0,children:"No bookmark properties set"}),(null==c?void 0:c.length)>=1&&(null==c?void 0:c.map((function(e,n){return(0,j.jsxs)(g.ZP,{inline:!0,monospace:!0,muted:!0,xsmall:!0,children:[n>=1&&", ",e]},e)})))]})]},"".concat(C,"-replicationMethod")),(0,j.jsx)(v.ZP,{justifyContent:"flex-end",children:h?(0,j.jsx)(re.Check,{size:2*L.iI,success:!0}):(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,children:"-"})},"".concat(C,"-runInParallel"))];return S||(w=(0,Z.Hk)((0,j.jsx)(g.ZP,{default:!0,monospace:!0,children:f||m},"".concat(C,"-tableName")),1,w)),w}))})}),[n,t,d,S,a,s,T]),A=(0,c.useMemo)((function(){var e,t;return(0,ye.Wi)(null==n||null===(e=n.upstream_blocks)||void 0===e?void 0:e.map((function(e){return null==o?void 0:o[e]})),null==n||null===(t=n.configuration)||void 0===t?void 0:t.data_integration)}),[n,o]);return(0,j.jsxs)(j.Fragment,{children:[_.t6.YAML===d&&(0,j.jsxs)(xe.au,{children:[(0,j.jsx)(b.Z,{p:L.cd,children:(0,j.jsxs)(v.ZP,{alignItems:"flex-start",justifyContent:"space-between",children:[(0,j.jsxs)(y.Z,{flex:1,flexDirection:"column",children:[(0,j.jsx)(g.ZP,{bold:!0,monospace:!0,muted:!0,small:!0,uppercase:!0,children:I}),(0,j.jsx)(ve.Z,{default:!0,children:O})]}),(0,j.jsxs)(m.ZP,{compact:!0,onClick:function(){return s({block:ke(ke({},n),{},{content:t}),defaultMainNavigationTab:je.uK.CONFIGURATION,onChangeBlock:u,setContent:a})},secondary:!0,children:["Configure ",I]})]})}),(0,j.jsx)(me.Z,{light:!0}),(null==A?void 0:A.length)>=1&&(0,j.jsx)(be.Z,{inputsBlocks:A})]}),_.t6.PYTHON===d&&(0,j.jsxs)(xe.au,{children:[(0,j.jsx)(b.Z,{p:L.cd,children:(0,j.jsxs)(v.ZP,{alignItems:"flex-start",justifyContent:"space-between",children:[(0,j.jsxs)(y.Z,{flex:1,flexDirection:"column",children:[(0,j.jsx)(g.ZP,{bold:!0,monospace:!0,muted:!0,small:!0,uppercase:!0,children:I}),(0,j.jsx)(ve.Z,{default:!0,children:O})]}),(0,j.jsxs)(m.ZP,{compact:!0,onClick:function(){return s({block:ke(ke({},n),{},{content:t}),defaultMainNavigationTab:je.uK.CONFIGURATION,onChangeBlock:u,setContent:a})},secondary:!0,children:["Configure ",I]})]})}),(0,j.jsx)(me.Z,{light:!0}),(null==h?void 0:h.length)>=1&&(0,j.jsx)(b.Z,{p:L.cd,children:(0,j.jsxs)(v.ZP,{alignItems:"flex-start",justifyContent:"space-between",children:[(0,j.jsxs)(y.Z,{flex:4,flexDirection:"column",children:[(0,j.jsx)(g.ZP,{bold:!0,monospace:!0,muted:!0,small:!0,uppercase:!0,children:"Inputs"}),(0,j.jsxs)(b.Z,{mt:1,children:[(null==A?void 0:A.length)>=1&&(0,j.jsx)(g.ZP,{default:!0,children:"The output of these upstream blocks are used as positional arguments for decorated functions."}),!(null!=A&&A.length)&&(0,j.jsxs)(g.ZP,{default:!0,children:["There are currently no positional arguments for decorated functions.",(0,j.jsx)("br",{}),"To use the output of 1 or more upstream blocks as positional arguments for decorated functions, add and configure 1 or more inputs."]})]})]}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(y.Z,{flex:1,justifyContent:"flex-end",children:(0,j.jsx)(m.ZP,{compact:!0,onClick:function(){return s({block:ke(ke({},n),{},{content:t}),defaultMainNavigationTab:je.uK.CONFIGURATION,defaultSubTab:je.tw.UPSTREAM_BLOCK_SETTINGS,onChangeBlock:u,setContent:a})},secondary:!0,children:(null==A?void 0:A.length)>=1?"Configure inputs":"Add inputs"})})]})}),(null==A?void 0:A.length)>=1&&(0,j.jsx)(be.Z,{inputsBlocks:A})]}),(0,j.jsxs)(xe.JX,{noBorderRadius:l,children:[(0,j.jsx)(b.Z,{p:L.cd,children:(0,j.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[P>=1&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(y.Z,{flex:1,flexDirection:"column",children:(0,j.jsxs)(g.ZP,{bold:!0,default:!0,large:!0,children:[P," ",(0,j.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,muted:!0,children:"/"})," ",E," ",(0,U._6)("stream",E,!1,!0)," selected"]})}),(0,j.jsx)(b.Z,{mr:1})]}),(0,j.jsxs)(m.ZP,{beforeIcon:!P&&(0,j.jsx)(re.Settings,{size:2*L.iI}),compact:P>=1,onClick:function(){return s({block:ke(ke({},n),{},{content:t}),defaultMainNavigationTab:je.uK.STREAMS,onChangeBlock:u,setContent:a})},primary:!P,secondary:P>=1,children:[P>=1&&"Edit streams",!P&&"Set up streams"]})]})}),P>=1&&w,P>=1&&(0,j.jsx)(b.Z,{mb:L.cd})]}),_.t6.PYTHON===d&&(0,j.jsxs)(j.Fragment,{children:[P>=1&&(0,j.jsx)(xe.au,{children:(0,j.jsx)(b.Z,{pb:L.cd,px:L.cd,children:(0,j.jsx)(xe.NJ,{children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(y.Z,{children:(0,j.jsx)(re.AlertTriangle,{size:2*L.iI,warning:!0})}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsxs)(g.ZP,{muted:!0,children:["The decorated function ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,default:!0,children:"@selected_streams"})," and ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,default:!0,children:"@catalog"})," will override any stream settings configured for ",(0,j.jsx)(g.ZP,{bold:!0,color:(0,x.qn)(null==n?void 0:n.type,{blockColor:null==n?void 0:n.color}).accent,inline:!0,monospace:!0,children:C}),"."]})]})})})}),(0,j.jsx)(xe.eQ,{children:(0,j.jsx)(b.Z,{pb:L.cd})}),r,i]})]})};!function(e){e.APPEND="append",e.FAIL="fail",e.REPLACE="replace"}(Ze||(Ze={}));var Ee,Pe=[Ze.APPEND,Ze.FAIL,Ze.REPLACE];function Se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function _e(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Se(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ie(e,n){var t,o=e.block,i=e.blocks,l=e.onClick,u=e.onDrop,f=o.type,p=(0,s.c)((function(){return{collect:function(e){return{isDragging:!!e.isDragging()}},item:o,type:ie.vT}}),[o]),m=(0,r.Z)(p,3),C=m[0],O=m[1],k=(m[2],(0,d.L)((function(){return{accept:ie.vT,drop:function(e){return null==u?void 0:u(o,e)}}}),[o])),Z=(0,r.Z)(k,2)[1],T=(0,c.useContext)(a.ThemeContext),E=(0,x.qn)(f,{blockColor:o.color,theme:T}).accent,P=(0,ye.cU)([o],i)[0],S=P.dynamic,I=P.dynamicUpstreamBlock,w=P.reduceOutput,R=P.reduceOutputUpstreamBlock,D=(0,c.useMemo)((function(){return(0,ce._o)({block:o,dynamic:S,dynamicUpstreamBlock:I,reduceOutput:w,reduceOutputUpstreamBlock:R})}),[o,S,I,w,R]).borderColorShareProps,B=(0,c.useMemo)((function(){return _.tf.DBT===(null==o?void 0:o.type)}),[o]);return(0,j.jsx)(b.Z,{pb:1,ref:Z,children:(0,j.jsx)(x.PY,_e(_e({},_e(_e({},D),C)),{},{ref:O,children:(0,j.jsx)(X.Z,{noHoverUnderline:!0,noOutline:!0,onClick:function(){return l()},preventDefault:!0,ref:n,children:(0,j.jsx)(b.Z,{p:1,children:(0,j.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsxs)(y.Z,{alignItems:"center",flex:1,children:[(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(h.Z,{monospace:!0,children:_.dO[o.language]}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(A.Z,{color:E,size:1.5*L.iI,square:!0}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(g.ZP,{color:E,monospace:!0,children:null===(t=B?_.tf.DBT:_.V4[o.type])||void 0===t?void 0:t.toUpperCase()})]}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(re.FileFill,{size:1.5*L.iI}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,children:null==o?void 0:o.uuid})]}),(0,j.jsx)(ee.Z,{appearAbove:!0,appearBefore:!0,block:!0,label:"Show ".concat(null==o?void 0:o.uuid," block"),size:2*L.iI,widthFitContent:!0,children:(0,j.jsx)(re.PreviewOpen,{muted:!0,size:2*L.iI})})]})})})}))})}!function(e){e.BIGQUERY="bigquery",e.CLICKHOUSE="clickhouse",e.DRUID="druid",e.MYSQL="mysql",e.POSTGRES="postgres",e.REDSHIFT="redshift",e.SNOWFLAKE="snowflake",e.TRINO="trino"}(Ee||(Ee={}));var we=c.forwardRef(Ie),Ae=t(56747),Re=t(82359),De=t(44085),Be=t(74521);var Me=function(e){var n,t=e.executionStates,o=(e.isInProgress,(null==t||null===(n=t[0])||void 0===n?void 0:n.spark)||{jobs:null,sqls:null,stages:null}),r=o.jobs,i=(o.sqls,o.stages),l=(0,c.useMemo)((function(){return(i||[]).reduce((function(e,n){var t=null==n?void 0:n.application;return(null==t?void 0:t.calculated_id)in e||(e[null==t?void 0:t.calculated_id]={}),e[null==t?void 0:t.calculated_id][null==n?void 0:n.stage_id]=n,e}),{})}),[i]),u=(0,c.useMemo)((function(){return(0,j.jsx)(Be.Z,{disableStageExpansion:!0,jobs:r,stagesMapping:l})}),[r,l]);return(0,j.jsx)(j.Fragment,{children:u})},Ne=L.iI/2,Le=a.default.div.withConfig({displayName:"indexstyle__ProgressDotsStyle",componentId:"sc-5dfsks-0"})(["border-top-width:","px;border-top-style:dotted;height:","px;",""],Ne,Ne,(function(e){return"\n    border-top-color: ".concat(e.success?(e.theme||te.Z).accent.positive:(e.theme||te.Z).content.muted,";\n    width: ").concat(e.progress,"%;\n  ")})),Ue=t(88422);var Ge=function(e){var n,t=e.children,o=e.executionStates,r=e.isInProgress,i=(null==o||null===(n=o[0])||void 0===n?void 0:n.spark)||{jobs:null,sqls:null,stages:null},l=i.jobs,u=(i.sqls,i.stages),a=(0,c.useMemo)((function(){var e=0,n=0,t=0,o=0;null==l||l.forEach((function(t){t.num_completed_stages;var o=t.status;e+=Ue.CN.SUCCEEDED===o?1:0,n+=1}));var r=0,i=0;return null==u||u.forEach((function(e){var n=e.num_complete_tasks,l=e.num_tasks,u=e.status;Ue.Dd.SKIPPED!==u&&(t+=Ue.Dd.COMPLETE===u?1:0,o+=1,r+=n||0,i+=l||0)})),{jobsCountCompleted:e,jobsCount:n,stagesCount:o,stagesCountCompleted:t,tasksCount:i,tasksCountCompleted:r}}),[l,u]),s=a.jobsCountCompleted,d=a.jobsCount,f=a.stagesCount,p=a.stagesCountCompleted,h=a.tasksCount,m=a.tasksCountCompleted,x=(0,c.useMemo)((function(){return d?Math.min(r?90:1,s/d):0}),[r,d,s]),C=(0,c.useMemo)((function(){return f?Math.min(x<1?90:1,p/f):0}),[x,f,p]),y=(0,c.useMemo)((function(){return h?Math.min(x<1?90:1,m/h):0}),[x,h,m]);return r||d?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(b.Z,{p:L.cd,children:[(0,j.jsx)(b.Z,{mb:1,children:(0,j.jsxs)(v.ZP,{alignContent:"center",justifyContent:"space-between",children:[(0,j.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:"Jobs"}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsxs)(g.ZP,{default:!0,monospace:!0,small:!0,children:[s," / ",d," (",Math.round(100*x),"%)"]})]})}),(0,j.jsxs)(v.ZP,{children:[(0,j.jsx)(Le,{progress:100*x,success:!0}),x>0&&x<1&&(0,j.jsx)("div",{style:{width:L.iI/2}}),(0,j.jsx)(Le,{progress:100*(1-x)})]})]}),(0,j.jsxs)(b.Z,{px:L.cd,pb:L.cd,children:[(0,j.jsx)(b.Z,{mb:1,children:(0,j.jsxs)(v.ZP,{alignContent:"center",justifyContent:"space-between",children:[(0,j.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:"Stages"}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsxs)(g.ZP,{default:!0,monospace:!0,small:!0,children:[p," / ",f," (",Math.round(100*C),"%)"]})]})}),(0,j.jsxs)(v.ZP,{children:[(0,j.jsx)(Le,{progress:100*C,success:!0}),C>0&&C<1&&(0,j.jsx)("div",{style:{width:L.iI/2}}),(0,j.jsx)(Le,{progress:100*(1-C)})]})]}),(0,j.jsxs)(b.Z,{px:L.cd,pb:L.cd,children:[(0,j.jsx)(b.Z,{mb:1,children:(0,j.jsxs)(v.ZP,{alignContent:"center",justifyContent:"space-between",children:[(0,j.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:"Tasks"}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsxs)(g.ZP,{default:!0,monospace:!0,small:!0,children:[m," / ",h," (",Math.round(100*y),"%)"]})]})}),(0,j.jsxs)(v.ZP,{children:[(0,j.jsx)(Le,{progress:100*y,success:!0}),y>0&&y<1&&(0,j.jsx)("div",{style:{width:L.iI/2}}),(0,j.jsx)(Le,{progress:100*(1-y)})]})]}),t]}):null},Fe=t(93004);var He=function(e){var n,t=e.disableGraph,o=e.executionStates,r=(e.isInProgress,e.overrideScrollForGraph),i=((null==o||null===(n=o[0])||void 0===n?void 0:n.spark)||{sqls:[]}).sqls,l=(0,c.useMemo)((function(){return(0,j.jsx)(Fe.Z,{disableGraph:t,disableJobExpansion:!0,overrideScrollForGraph:r,showSparkGraph:!0,sqls:i})}),[t,i]);return(0,j.jsx)(j.Fragment,{children:l})},Ke=t(71417);var ze=function(e){var n,t=e.executionStates,o=(e.isInProgress,((null==t||null===(n=t[0])||void 0===n?void 0:n.spark)||{stages:null}).stages),r=(0,c.useMemo)((function(){return(0,j.jsx)(Ke.Z,{stages:o,tasksContained:!0})}),[o]);return(0,j.jsx)(j.Fragment,{children:r})},We=t(17488),Qe=t(95924);function Ye(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function Ve(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ye(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ye(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qe=function(e){var n=e.block,t=e.blockConfiguration,r=e.blockRefs,i=e.blocks,l=e.updateBlockConfiguration,u=(0,c.useContext)(a.ThemeContext),s=_.t6.R===(null==n?void 0:n.language),d=_.t6.SQL===(null==n?void 0:n.language),f=null==i?void 0:i.find((function(e){var n=e.language;return _.t6.PYTHON===n})),p=(0,c.useMemo)((function(){var e=[null];return d&&f?e.push.apply(e,[null,1]):e.push(1),e}),[f,d]),h=(0,c.useMemo)((function(){var e=[{tooltipMessage:null,uuid:"Variable"},{tooltipMessage:null,uuid:"Block"}];return d&&f&&e.push({tooltipMessage:"Customize the full table name that this block gets created in. Include database, schema, and table name where applicable.",uuid:"Table name"}),e}),[f,d]),m=(0,c.useMemo)((function(){return null==i?void 0:i.map((function(e,n){var i,c=e.color,a=e.language,p=e.type,h=e.uuid,m=(0,x.qn)(p,{blockColor:c,theme:u}).accent,v=_.t6.PYTHON===a;i=d?"{{ df_".concat(n+1," }}"):s?"df".concat(n+1):"data".concat(n>=1?"_".concat(n+1):null);var b=[(0,j.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:i},"variable-".concat(h)),(0,j.jsx)(X.Z,{color:m,onClick:function(){var e,n,t=null==r||null===(e=r.current)||void 0===e?void 0:e["".concat(p,"s/").concat(h,".py")];null==t||null===(n=t.current)||void 0===n||n.scrollIntoView()},preventDefault:!0,small:!0,children:(0,j.jsx)(g.ZP,{color:m,monospace:!0,small:!0,children:h})},"block-".concat(h))];if(d){var C="table-name-input-".concat(h),y=(null==t?void 0:t[M.Yf])||{},O=(null==y?void 0:y[h])||{};v?b.push((0,j.jsx)(We.Z,{borderless:!0,compact:!0,monospace:!0,onChange:function(e){var n=e.target.value;l((0,o.Z)({},M.Yf,Ve(Ve({},y),{},(0,o.Z)({},h,Ve(Ve({},O),{},(0,o.Z)({},M.aZ,n))))))},onClick:Qe.j,placeholder:"[database_optional].[schema_optional].[table]",small:!0,value:(null==O?void 0:O[M.aZ])||""},C)):f&&b.push((0,j.jsx)(g.ZP,{italic:!0,muted:!0,small:!0,children:"Table name is defined in upstream block."},C))}return b}))}),[f,t,r,i,s,d,u,l]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(ge.Z,{columnFlex:p,columns:h,compact:!0,noBorder:!0,rows:m,uuid:"CodeBlock/UpstreamBlockSettings/".concat(null==n?void 0:n.uuid)})})},Xe=t(84820),Je=t(91835),$e=t(27277),en=t(92677),nn=t(68562),tn=t(42631),on=2.5*L.iI,rn=a.default.div.withConfig({displayName:"indexstyle__EditorWrapperStyle",componentId:"sc-1hwnytz-0"})(["position:relative;"]),ln=a.default.div.withConfig({displayName:"indexstyle__ButtonStyle",componentId:"sc-1hwnytz-1"})(["height:","px;position:absolute;left:","px;width:","px;z-index:7;"],on,L.iI/2,on),un=a.default.div.withConfig({displayName:"indexstyle__InputStyle",componentId:"sc-1hwnytz-2"})(["border-radius:","px;display:none;left:","px;padding-left:","px;padding-right:","px;position:absolute;z-index:100;",""],tn.g5,x.oh,1*L.iI,2*L.iI+on,(function(e){return"\n    background-color: ".concat((e.theme||te.Z).background.dashboard,";\n    border: ").concat(tn.mP,"px solid ").concat(null==e?void 0:e.color,";\n  ")})),cn=a.default.div.withConfig({displayName:"indexstyle__TextInputFocusAreaStyle",componentId:"sc-1hwnytz-3"})(["width:100%;&:hover{cursor:text;}"]),an=a.default.div.withConfig({displayName:"indexstyle__CloseStyle",componentId:"sc-1hwnytz-4"})(["position:absolute;right:","px;top:50%;transform:translateY(-50%);"],1*L.iI),sn=t(38118),dn=t(53808),fn=t(87432),pn=t(42041),hn=t(44688),mn=t(19183);function vn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function bn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?vn(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var gn=2*tn.mP+2*L.iI+x.oh;var xn=function(e){var n=e.autocompleteProviders,t=e.block,o=e.content,i=e.height,l=e.onChange,u=e.onContentSizeChangeCallback,a=e.onDidChangeCursorPosition,s=e.onMountCallback,d=e.pipeline,p=e.placeholder,h=e.project,m=e.selected,C=e.setSelected,y=e.setTextareaFocused,O=e.shortcuts,k=e.showConfigureProjectModal,Z=e.textareaFocused,T=e.theme,E=e.updatePipeline;(0,fn.L1)()&&console.log("EditorV2 render",null==t?void 0:t.uuid,Number(new Date));var P=(0,mn.i)().width,S="CodeBlockEditorV2/".concat(null==t?void 0:t.uuid,"/editor/button/AI"),_=(0,de.VI)(null,{},[],{uuid:S}),I=(0,r.Z)(_,1)[0],w=(0,c.useState)(!1),A=w[0],D=w[1],M=(0,c.useState)(!1),N=M[0],U=M[1],G=(0,dn.U2)(dn.HW,[]),F=(0,c.useRef)(null),H=(0,c.useRef)(null),z=(0,c.useRef)(null),W=(0,c.useRef)(null),Q=(0,c.useRef)(null),Y=(0,c.useRef)(null),$=(0,c.useRef)(null),ee=(0,c.useRef)(null),te=t.color,oe=t.language,ie=t.type,ue=(0,x.qn)(ie,{blockColor:te,theme:T}),ce=(0,c.useCallback)((function(){H.current.style.opacity=1,ee.current.style.display="none"}),[]),ae=(0,c.useCallback)((function(){H.current.style.opacity=0,ee.current.style.display="block"}),[]),fe=(0,c.useCallback)((function(e){var n=(null==o?void 0:o.split("\n"))||[],t=null==Q?void 0:Q.current,r=null==n?void 0:n.slice(0,t-1),i=null==n?void 0:n.slice(t,null==n?void 0:n.length),u=r.concat([e]).concat(i).join("\n");setTimeout((function(){var e;null==z||null===(e=z.current)||void 0===e||e.setPosition({column:1,lineNumber:t})}),2),l(u)}),[o]),pe=(0,f.Db)(ne.ZP.llms.useCreate(),{onSuccess:function(e){return(0,se.wD)(e,{callback:function(e){var n,o,r,i=e.llm;"string"==typeof(null==i?void 0:i.response)?o=null==i?void 0:i.response:o=null==i||null===(r=i.response)||void 0===r?void 0:r.code;(0,dn.t8)(dn.HW,null===(n=[{block:{uuid:null==t?void 0:t.uuid},code:o,description:$.current,language:oe,timestamp:Number(new Date)}].concat(G&&Array.isArray(G)?G:[]))||void 0===n?void 0:n.slice(0,40)),fe(o),Y.current.value="",Y.current.blur(),$.current="",C(!0),y(!0),ce()},onErrorCallback:function(e,n){return I({errors:n,response:e})}})}}),he=(0,r.Z)(pe,2),me=he[0],ve=he[1].isLoading,be=(0,c.useCallback)((function(){me({llm:{request:{block_description:$.current,code_language:oe},use_case:q.z.GENERATE_CODE}})}),[me]),ge=(0,f.Db)(ne.ZP.llms.useCreate(),{onSuccess:function(e){return(0,se.wD)(e,{callback:function(e){e.llm},onErrorCallback:function(e,n){return I({errors:n,response:e})}})}}),xe=(0,r.Z)(ge,2),je=xe[0],Ce=xe[1].isLoading,ye=(0,c.useMemo)((function(){var e=!(null!=h&&h.openai_api_key),n=function(e){null==k||k({header:(0,j.jsx)(b.Z,{mb:L.HN,children:(0,j.jsxs)(J.Z,{children:[(0,j.jsx)(g.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate blocks using AI."}),(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(g.ZP,{warning:!0,children:["Read ",(0,j.jsx)(X.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI’s documentation"})," to get your API key."]})})]})}),onSaveSuccess:function(n){null!=n&&n.openai_api_key&&E({pipeline:{llm:e}})}})},r={request:{block_uuid:null==t?void 0:t.uuid,pipeline_uuid:null==d?void 0:d.uuid}};return[{label:function(){return"Document block (beta)"},onClick:function(){r.use_case=q.z.GENERATE_DOC_FOR_BLOCK,e?n(r):E({pipeline:{llm:r}})},uuid:"Document block"},{label:function(){return"Document pipeline and all blocks (beta)"},onClick:function(){r.use_case=q.z.GENERATE_DOC_FOR_PIPELINE,e?n(r):E({pipeline:{llm:r}})},uuid:"Document pipeline and all blocks"},{label:function(){return"Add comments in code (beta)"},onClick:function(){e?n(r):je({llm:{request:{block_code:o},use_case:q.z.GENERATE_COMMENT_FOR_CODE}})},uuid:"Add comments in code"}]}),[t,o,je,d,h,k,E]),Oe=(0,c.useMemo)((function(){return(0,j.jsx)(cn,{onClick:function(){var e;return null==Y||null===(e=Y.current)||void 0===e?void 0:e.focus()}})}),[]),ke=(0,c.useMemo)((function(){var e=[];return null==G||G.forEach((function(n){var t;e.push({itemObject:n,searchQueries:[null==n||null===(t=n.block)||void 0===t?void 0:t.uuid,null==n?void 0:n.code,null==n?void 0:n.description,null==n?void 0:n.language],value:"".concat(null==n?void 0:n.description,"/").concat(null==n?void 0:n.timestamp)})})),e}),[G]),Ze=(0,c.useMemo)((function(){var e,n;return(0,j.jsxs)(un,{color:null==ue?void 0:ue.accent,ref:ee,children:[(0,j.jsx)(an,{children:(0,j.jsx)(nn.ZP,{noBackground:!0,noPadding:!0,onClick:function(e){(0,Qe.j)(e),ce()},uuid:"close-menu",children:(0,j.jsx)(re.PanelCollapseRight,{default:!0,size:on})})}),Oe,(0,j.jsx)(We.Z,{beforeIcon:(0,j.jsx)(V.Z,{addPlusSignBetweenKeys:!0,keyTextGroups:[[le.hE,le.zw]]}),buttonAfter:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(en.Z,{children:[(0,j.jsx)(nn.ZP,{backgroundColor:null==ue?void 0:ue.accent,bold:!0,loading:ve,onClick:function(e){(0,Qe.j)(e),be()},pill:!0,uuid:"generate-code",children:"Generate code"}),(0,j.jsx)(nn.ZP,{backgroundColor:null==ue?void 0:ue.accentLight,bold:!0,loading:Ce,onClick:function(e){(0,Qe.j)(e),U(!0)},pill:!0,uuid:"document-code",children:"Document code"})]}),(0,j.jsx)(K.Z,{disableEscape:!0,onClickOutside:function(){return U(!1)},open:N,children:(0,j.jsx)(B.Z,{items:ye,onClickCallback:function(){return U(!1)},open:N,parentRef:F,rightOffset:4.75*L.iI,topOffset:2*L.iI,uuid:"FileHeaderMenu/AI_actions"})})]}),fullWidth:!0,monospace:!0,noBackground:!0,noBorder:!0,noBorderRadiusBottom:!0,noBorderRadiusTop:!0,onKeyDown:function(e){var n;le.vP===e.keyCode?((0,Qe.j)(e),ce()):le.Uq===e.keyCode&&(null===(n=$.current)||void 0===n?void 0:n.length)>=1&&((0,Qe.j)(e),be())},onBlur:function(){return setTimeout((function(){return D(!1)}),150)},onChange:function(e){$.current=e.target.value},onFocus:function(){return D(!0)},paddingLeft:10*L.iI,paddingRight:32*L.iI,paddingVertical:1.5*L.iI,placeholder:"e.g. Read files from disk asynchronously",ref:Y}),Oe,(0,j.jsx)(sn.rS,{maxHeight:80*L.iI,topOffset:(null==ee||null===(e=ee.current)||void 0===e?void 0:e.getBoundingClientRect().height)-1,width:"".concat((null==ee||null===(n=ee.current)||void 0===n?void 0:n.getBoundingClientRect().width)-3*L.iI,"px"),children:(0,j.jsx)($e.Z,{itemGroups:[{items:A?ke:[],renderItem:function(e,n){var t=e.itemObject;return(0,j.jsx)(sn.gI,bn(bn({},n),{},{onClick:function(e){var t;(0,Qe.j)(e),null==n||null===(t=n.onClick)||void 0===t||t.call(n,e)},children:(0,j.jsxs)(v.ZP,{flexDirection:"column",children:[(0,j.jsx)(g.ZP,{breakSpaces:!0,default:!0,monospace:!0,xsmall:!0,children:null==t?void 0:t.code}),(null==t?void 0:t.description)&&(0,j.jsx)("div",{style:{marginTop:2},children:(0,j.jsx)(g.ZP,{breakSpaces:!0,monospace:!0,muted:!0,xsmall:!0,children:null==t?void 0:t.description})})]})}))}}],maxResults:10,onSelectItem:function(e){var n=e.itemObject;fe(null==n?void 0:n.code)},searchQuery:$.current,uuid:"".concat(S,"/AutocompleteDropdown")})})]})}),[ke,ue,me,A,ve,oe]),Te=(0,c.useMemo)((function(){return(0,j.jsx)(R.Z,{autoHeight:!0,autocompleteProviders:n,block:t,editorRef:z,height:i,language:oe,onChange:function(e){null==l||l(e)},onContentSizeChangeCallback:u,onDidChangeCursorPosition:function(e){var n,t;a&&(null==a||a(e));var o=null==e?void 0:e.editor,r=null==e||null===(n=e.position)||void 0===n?void 0:n.lineNumber;Q.current=r;var i=(null==o?void 0:o.getContentHeight())/(null==o||null===(t=o.getModel())||void 0===t?void 0:t.getLineCount()),l=r*i;if(null!=H&&H.current&&(H.current.style.top="".concat(l-i-on/2,"px")),null!=ee&&ee.current){var u,c,s;ee.current.style.top="".concat(l,"px");var d=((null==W||null===(u=W.current)||void 0===u||null===(c=u.getBoundingClientRect)||void 0===c||null===(s=c.call(u))||void 0===s?void 0:s.width)||0)-gn;ee.current.style.width="".concat(d,"px")}},onMountCallback:function(e,n){s&&(null==s||s(e,n)),setTimeout((function(){var e,n,t,o=((null==W||null===(e=W.current)||void 0===e||null===(n=e.getBoundingClientRect)||void 0===n||null===(t=n.call(e))||void 0===t?void 0:t.width)||0)-gn;ee.current.style.width="".concat(o,"px")}),1)},placeholder:p,ref:W,selected:m,setSelected:C,setTextareaFocused:y,shortcuts:O,textareaFocused:Z,value:o,width:"100%"})}),[n,t,o,i,oe,l,u,a,s,p,m,C,y,O,Z]),Ee=(0,hn.y)(),Pe=(Ee.disableGlobalKeyboardShortcuts,Ee.registerOnKeyDown),Se=Ee.unregisterOnKeyDown;return(0,c.useEffect)((function(){return function(){Se(S)}}),[Se,S]),Pe(S,(function(e,n,t){null!=h&&h.openai_api_key&&m&&(0,pn.y)([le.PQ,le.cP],n)&&ae()}),[h,m]),(0,c.useEffect)((function(){setTimeout((function(){var e,n,t,o=((null==W||null===(e=W.current)||void 0===e||null===(n=e.getBoundingClientRect)||void 0===n||null===(t=n.call(e))||void 0===t?void 0:t.width)||0)-gn;ee.current.style.width="".concat(o,"px")}),1)}),[P]),(0,j.jsxs)(rn,{children:[!(null==h||!h.openai_api_key)&&(0,j.jsx)(ln,{ref:H,children:(0,j.jsx)(nn.ZP,{noBackground:!0,noPadding:!0,onClick:function(e){m&&((0,Qe.j)(e),ae())},uuid:S,children:(0,j.jsx)(re.AISparkle,{size:on,warning:!0})})}),Ze,Te]})},jn=t(17717),Cn=t(16910),yn=t(87418),On=t(65927),kn=t(32929),Zn=t(47041),Tn=2*L.iI,En=1.5*L.iI,Pn=a.default.div.withConfig({displayName:"indexstyle__HeaderWrapperStyle",componentId:"sc-k2ohx5-0"})([""," ",""],(function(e){return e.subheaderVisible&&"\n    &:hover {\n      .chevron-down-exit-done {\n        transform: translate(0, 0);\n        transition: all 200ms;\n      }\n      .chevron-down-enter-active {\n        transform: translate(0, ".concat(-.75*L.iI,"px);\n        transition: all 200ms;\n      }\n      .chevron-down-enter-done,\n      .chevron-down-enter-done-visible {\n        transform: translate(0, ").concat(-.75*L.iI,"px);\n        transition: all 300ms;\n      }\n      .chevron-down-exit {\n        transform: translate(0, 0);\n        transition: all 300ms;\n      }\n    }\n  ")}),(function(e){return!e.subheaderVisible&&"\n    &:hover {\n      .chevron-down-exit-done {\n        transform: translate(0, 0);\n        transition: all 200ms;\n      }\n      .chevron-down-enter-active {\n        transform: translate(0, ".concat(.75*L.iI,"px);\n        transition: all 200ms;\n      }\n      .chevron-down-enter-done,\n      .chevron-down-enter-done-visible {\n        transform: translate(0, ").concat(.75*L.iI,"px);\n        transition: all 300ms;\n      }\n      .chevron-down-exit {\n        transform: translate(0, 0);\n        transition: all 300ms;\n      }\n    }\n  ")})),Sn=a.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-k2ohx5-1"})(["align-items:center;border-top-left-radius:","px;border-top-right-radius:","px;display:flex;justify-content:space-between;padding:","px;",""],tn.n_,tn.n_,1*L.iI,(function(e){return"\n    background-color: ".concat((e.theme||te.Z).background.dashboard,";\n  ")})),_n=a.default.div.withConfig({displayName:"indexstyle__InfoStyle",componentId:"sc-k2ohx5-2"})([""," align-items:center;display:flex;overflow:auto;"],(0,Zn.y$)()),In=a.default.div.withConfig({displayName:"indexstyle__SubheaderButtonStyle",componentId:"sc-k2ohx5-3"})(["bottom:-","px;left:0;margin-left:auto;margin-right:auto;position:absolute;right:0;width:","px;z-index:11;"],2.75*L.iI,Tn),wn=a.default.div.withConfig({displayName:"indexstyle__SubheaderStyle",componentId:"sc-k2ohx5-4"})(["position:relative;z-index:10;"]),An=a.default.div.withConfig({displayName:"indexstyle__SubheaderMenuStyle",componentId:"sc-k2ohx5-5"})(["padding-bottom:","px;padding-top:","px;"],L.iI/2,L.iI/2),Rn=a.default.div.withConfig({displayName:"indexstyle__TagStyle",componentId:"sc-k2ohx5-6"})(["align-items:center;border-radius:","px;display:flex;padding:2px ","px;margin-right:","px;",""],tn.BG,1*L.iI,1*L.iI,(function(e){return"\n    background-color: ".concat(e.backgroundColor||(e.theme||te.Z).background.chartBlock,";\n  ")}));function Dn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function Bn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Dn(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Mn(e,n){var t=e.block,o=e.buttons,r=e.executionState,i=e.menuGroups,l=e.selected,u=e.selectedHeaderTab,a=e.setSelectedHeaderTab,s=(e.setSideMenuVisible,e.setSubheaderVisible),d=(e.sideMenuVisible,e.subheaderVisible),f=e.subheaderVisibleDefault,p=e.subtitle,h=e.tabs,m=e.theme,C=e.title,y=t.color,O=t.language,k=(t.status,t.type),Z=t.uuid;(0,c.useEffect)((function(){s(!!f&&(null==f?void 0:f(t)))}),[]);var T=(0,c.useMemo)((function(){return{active:oe.uF.IDLE!==r,running:oe.uF.BUSY===r,waiting:oe.uF.QUEUED===r}}),[r]),E=T.active,P=void 0!==E&&E,S=T.running,w=void 0!==S&&S,R=T.waiting,D=void 0!==R&&R,B=(0,x.qn)(k,{blockColor:y,theme:m}),M=kn.iK[k],N=(0,c.useMemo)((function(){var e,n=[],t=null===(e=C||Z)||void 0===e?void 0:e.split(jn.sep),o=(null==t?void 0:t.length)||0;return null==t||t.forEach((function(e,t){t>=1&&n.push((0,j.jsx)("div",{style:{paddingLeft:L.iI/4,paddingRight:L.iI/4},children:(0,j.jsx)(g.ZP,{noWrapping:!0,muted:!0,children:"/"})},"".concat(e,"-spacing-").concat(t))),n.push((0,j.jsx)(g.ZP,{muted:t<o-1,noWrapping:!0,weightStyle:4,children:e},"".concat(e,"-text-").concat(t)))})),n}),[C,Z]),U=(0,c.useMemo)((function(){var e=[],n=[];return null==o||o.forEach((function(o,r){var i=o.Icon,s=o.color,d=o.description,f=o.disabled,p=o.icon,h=o.keyTextGroups,m=o.keyTextsPosition,v=o.keyboardShortcutValidation,g=o.label,x=o.loading,C=o.onClick,y=o.uuid,O=o.visible,k=f&&(null==f?void 0:f({active:P,running:w,waiting:D})),T=(p||i)&&!g,E=p?c.cloneElement(p,Bn(Bn({},(null==p?void 0:p.props)||{}),k?{color:null,disabled:k}:{})):i&&(0,j.jsx)(i,{disabled:k,fill:k?null:s,size:Tn}),S="KeyboardShortcutButton/".concat(Z,"/").concat(y,"/").concat(r),_=(0,j.jsxs)(nn.ZP,{addPlusSignBetweenKeys:!0,backgroundColor:k?null:s,compact:!0,disabled:k,keyTextGroups:h,keyTextsPosition:m,keyboardShortcutValidation:v?function(e,n){return null==v?void 0:v(e,n,{block:t,selected:l})}:null,loading:x,noBackground:T,borderless:T,noPadding:T,onClick:function(){C&&(null==C||C({selectedHeaderTab:u,setSelectedHeaderTab:a}))},outline:!0,uuid:"CodeBlockV2/Header/KeyboardShortcutButton/".concat(Z,"/").concat(y,"/").concat(r),children:[E,E&&g&&(0,j.jsx)(b.Z,{mr:1}),g&&(null==g?void 0:g())]},S);d&&(_=(0,j.jsx)("div",{style:{position:"relative"},children:(0,j.jsx)(ee.Z,{block:!0,label:d,size:null,visibleDelay:300,widthFitContent:!0,children:_})},S)),!O||null!=O&&O({active:P,running:w,waiting:D})?(n.push(_),n.push((0,j.jsx)("div",{style:{marginRight:12}},"spacing/".concat(Z,"/").concat(y,"/").concat(r)))):e.push(_)})),{buttonsDropdown:e,buttonsVisible:n}}),[P,o,w,l,Z,D]),G=(U.buttonsDropdown,U.buttonsVisible),F=(0,c.useMemo)((function(){return null==i?void 0:i.map((function e(n){var t,o,r=null==n?void 0:n.onClick;(r&&(n.onClick=function(){return null==r?void 0:r({selectedHeaderTab:u,setSelectedHeaderTab:a})}),(null==n||null===(t=n.items)||void 0===t?void 0:t.length)>=1)&&(n.items=null==n||null===(o=n.items)||void 0===o?void 0:o.map(e));return n}))}),[i,a]),H=(0,c.useMemo)((function(){return(0,ce.MS)(t)}),[t]),K=(0,c.useMemo)((function(){if(!(null!=F&&F.length||null!=H&&H.length))return null;var e=(0,j.jsx)(yn.Z,{defaultTextContent:!0,menuGroups:F,rightOffset:0});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(null==h?void 0:h.length)>=1?(0,j.jsx)(I.Z,{allowScroll:!0,onClickTab:function(e){null==a||a(e)},selectedTabUUID:null==u?void 0:u.uuid,tabs:h,underlineColor:null==B?void 0:B.accent,underlineStyle:!0}):(0,j.jsx)("div",{}),(null==h?void 0:h.length)>=1?e:(0,j.jsx)(An,{children:e})]}),(null==H?void 0:H.length)>=1&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(me.Z,{light:!0}),(0,j.jsx)(An,{children:(0,j.jsxs)(v.ZP,{alignItems:"center",fullWidth:!0,justifyContent:"space-between",children:[(0,j.jsx)("div",{}),(0,j.jsx)(v.ZP,{alignItems:"center",justifyContent:"flex-end",children:null==H?void 0:H.map((function(e){var n=e.description,t=e.title;return(0,j.jsx)(ee.Z,{appearBefore:!0,block:!0,label:n||t,size:null,visibleDelay:300,widthFitContent:!0,children:(0,j.jsx)(Rn,{backgroundColor:null==B?void 0:B.accentLight,children:(0,j.jsx)(g.ZP,{monospace:!0,small:!0,children:t})})},t)}))})]})})]})]})}),[B,F,u,a,h,H]);return(0,c.useEffect)((function(){null!=h&&h.length&&!u&&(null==a||a(h[0]))}),[]),(0,j.jsxs)(Pn,{ref:n,style:{position:"relative"},subheaderVisible:d,children:[(0,j.jsxs)(Sn,{children:[(0,j.jsxs)(v.ZP,{alignItems:"center",children:[G,D&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(On.Z,{color:null==B?void 0:B.accent,colorLight:null==B?void 0:B.accentLight,loadingStyle:On.F.BLOCKS}),(0,j.jsx)(b.Z,{mr:L.cd})]})]}),(0,j.jsxs)(_n,{children:[(0,j.jsxs)(v.ZP,{flexDirection:"column",children:[(0,j.jsx)(v.ZP,{alignItems:"center",flexDirection:"row",justifyContent:"flex-end",children:N}),p&&(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,noWrapping:!0,rightAligned:!0,xsmall:!0,children:p})]}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(ee.Z,{appearBefore:!0,block:!0,label:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,children:_.LE[O]}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(g.ZP,{color:null==B?void 0:B.accent,inline:!0,monospace:!0,children:_.V4[k]})]}),size:null,visibleDelay:300,widthFitContent:!0,children:(0,j.jsx)(A.Z,{color:null==B?void 0:B.accent,size:4*L.iI,square:!0,children:(0,j.jsx)(M,{active:!0,size:Tn})})})]})]}),(null==i?void 0:i.length)>=1&&(0,j.jsx)(In,{children:(0,j.jsx)(Cn.Z,{classNames:"chevron-down",in:!0,timeout:400,children:(0,j.jsx)(nn.ZP,{className:"chevron-down-enter-done-visible",noBackground:!0,borderless:!0,noPadding:!0,onClick:function(){s(!d)},uuid:"KeyboardShortcutButton/".concat(Z,"/subheader/menu/button"),children:(0,j.jsxs)(b.Z,{py:1,children:[d&&(0,j.jsx)(re.ChevronUpV2,{active:!0,size:2.5*L.iI}),!d&&(0,j.jsx)(re.ChevronDownV2,{fill:null==B?void 0:B.accent,size:2.5*L.iI})]})})})}),w&&(0,j.jsx)("div",{style:{position:"absolute",width:"100%"},children:(0,j.jsx)(On.Z,{width:"100%"})}),(null==i?void 0:i.length)>=1&&d&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(me.Z,{light:!0}),(0,j.jsx)(wn,{children:K})]})]})}var Nn=c.forwardRef(Mn),Ln=t(93859),Un=t(23531),Gn=t(39457);var Fn=function(e){var n=e.allContentCleaned,t=e.contentAll,o=e.contentNoErrors,r=e.contentWithErrors,i=e.errorsCleaned,l=e.infoCleaned,u=(0,c.useState)(0),a=u[0],s=u[1];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{p:L.cd,children:(0,j.jsxs)(v.ZP,{justifyContent:"space-between",children:[(0,j.jsxs)(v.ZP,{children:[(0,j.jsx)(w.Z,{label:"All logs",checked:0===a,onClick:function(){return s((function(e){return 0}))}}),(0,j.jsx)(b.Z,{mr:2}),(0,j.jsx)(w.Z,{label:"Errors",checked:1===a,onClick:function(){return s((function(e){return 1===e?0:1}))}}),(0,j.jsx)(b.Z,{mr:2}),(0,j.jsx)(w.Z,{label:"Info",checked:2===a,onClick:function(){return s((function(e){return 2===e?0:2}))}})]}),(0,j.jsx)(v.ZP,{children:(null==n?void 0:n.length)>=1&&(0,j.jsx)(v.ZP,{children:(0,j.jsx)(Gn.Z,{copiedText:0===a?null==n?void 0:n.join("\n"):1===a?null==i?void 0:i.join("\n"):null==l?void 0:l.join("\n"),monospace:!0,withCopyIcon:!0,children:(0,j.jsxs)(m.ZP,{beforeIcon:(0,j.jsx)(re.Copy,{inverted:!0}),compact:!0,onClick:function(){return!0},small:!0,warning:!0,children:["Copy ",0===a?"all":1===a?"error":"info"," logs to clipboard"]})})})})]})}),0===a&&t,1===a&&r,2===a&&o]})},Hn=t(89565),Kn=t.n(Hn),zn=t(72858),Wn=t.n(zn),Qn=t(84749),Yn=t(88494),Vn=t(89706),qn=t(65044),Xn=t(11498),Jn=t(74052);function $n(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function et(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$n(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$n(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var nt={appearAbove:!0,appearBefore:!0,block:!0,size:null,widthFitContent:!0},tt={basic:!0,iconOnly:!0,noPadding:!0,transparent:!0};function ot(e){e.alwaysShowExtraInfo;var n,t,o=e.block,l=(e.blockIndex,e.blockMetadata,e.buttonTabs,e.children,e.childrenBelowTabs,e.collapsed),u=e.contained,a=void 0===u||u,s=e.dynamicBlock,d=e.dynamicChildBlock,p=e.hasError,h=(e.hasOutput,e.hideExtraInfo,e.hideOutput,e.isInProgress,e.mainContainerWidth),x=e.messages,C=e.messagesAll,O=(e.onClickSelectBlock,e.openSidekickView),Z=(e.outputDisplayType,e.outputRowNormalPadding),T=e.pipeline,E=e.runCount,P=e.runEndTime,S=e.runStartTime,I=(e.scrollTogether,e.selected),w=(e.selectedTab,e.setCollapsed),R=e.setErrors,D=e.setOutputBlocks,B=e.setSelectedOutputBlock,M=(e.setSelectedTab,e.showBorderTop,e.sideBySideEnabled),N=(e.sparkEnabled,(0,c.useRef)(null)),G=N.current,F=o||{},H=F.color,K=(F.status,F.type),z=F.uuid,W=(0,c.useState)(null),Q=W[0],Y=W[1],V=null===(n=new Qn.Z)||void 0===n||null===(t=n.decodedToken)||void 0===t?void 0:t.token,q=(0,f.Db)((function(){return ne.ZP.block_outputs.pipelines.downloads.detailAsync(null==T?void 0:T.uuid,z,{token:V},{onDownloadProgress:function(e){return Y((Number((null==e?void 0:e.loaded)||0)/1e6).toFixed(3))},responseType:Xn.Eg.BLOB})}),{onSuccess:function(e){return(0,se.wD)(e,{callback:function(e){(0,Jn.uS)(e,"".concat(z,".").concat(Vn.Lu.CSV))},onErrorCallback:function(e,n){return null==R?void 0:R({errors:n,response:e})}})}}),X=(0,r.Z)(q,2),J=X[0],$=X[1].isLoading,te=(0,c.useCallback)((function(e){return Array.isArray(e)?e.join("\n"):e}),[]),ie=(0,c.useMemo)((function(){return(null==x?void 0:x.length)>=1?x.reduce((function(e,n){var t=e.at(-1);if(oe.jU.includes(null==t?void 0:t.type)&&(null==t?void 0:t.type)===n.type&&!te(null==n?void 0:n.data).match(qn.Lz)){if(Array.isArray(t.data))t.data.concat(n.data);else if("string"==typeof t.data){var o=te(n.data)||"";t.data=[t.data,o].join("\n")}}else oe.jU.includes(null==n?void 0:n.type)&&!te(null==n?void 0:n.data).match(qn.Lz)?e.push(et(et({},n),{},{data:te(n.data)})):e.push(et({},n));return e}),[]):C||[]}),[te,x,C]),le=(0,c.useMemo)((function(){return!(null!=x&&x.length)&&(null==C?void 0:C.length)>=1}),[x,C]),ue=(0,c.useCallback)((function(e,n){var t=e.columns,o=e.index,r=e.rows,i=e.shape,l=n.borderTop,u=n.selected;return i&&(N.current=i),{borderTop:l,columnHeadersContainEmptyString:null==t?void 0:t.some((function(e){return""===e})),columns:t,index:o,mainContainerWidth:h,rows:r,selected:u,width:h-(2+L.cd*L.iI*2+2+Zn.nn)}}),[h]),ce=(0,c.useMemo)((function(){var e=[],n=[],t=[];return null==ie||ie.forEach((function(o,r){var l,u,c,s=Array.isArray(o);if(le&&s?(u={columns:["-"],index:0,rows:null==o?void 0:o.map((function(e){return[(0,U.Pb)(e)?JSON.parse(e):e]})),shape:[null==o?void 0:o.length,1]},c=oe.Gi.TABLE):"string"==typeof o?(u=o,c=oe.Gi.TEXT_PLAIN):(u=null==o?void 0:o.data,c=null==o?void 0:o.type),s||u&&0!==(null===(l=u)||void 0===l?void 0:l.length)){var d=[];d=(d=Array.isArray(u)?u:[u]).filter((function(e){return e}));var f=[];d.forEach((function(e){if(c===oe.Gi.TEXT_HTML)f.push(e);else if(e&&"string"==typeof e){var n=e.split("\n");f.push.apply(f,(0,i.Z)(n))}else"object"==typeof f&&f.push(e)}));var p=f.length,h=[];f.forEach((function(e,o){var i,l,u={contained:a,first:0===r&&0===o,last:r===ie.length-1&&o===p-1,normalPadding:Z,sideBySideEnabled:M},s=r>=1;if("string"==typeof e&&e.match(qn.Gr)){var d=e.split("\n"),f=[];d.forEach((function(n){if(n.match(qn.Gr)){var o=n.split(qn.Vc),r=o[o.length-1];(0,U.Pb)(r)&&t.push(JSON.parse(r))}else f.push(n);e=f.length>=1?f.join("\n"):null}))}if(null!==e){if("string"==typeof e&&e.match(qn.Lz)){var m=e.split(qn.gr),v=m[m.length-1],b=v.split("FloatProgress");if(m.length>=2&&(v=b[0]),(0,U.Pb)(v)){var x=JSON.parse(v),C=x.data,y=x.type;if(oe.Gi.TABLE===y){var O=ue(C,{borderTop:s,selected:I});n.push(O)}}}else if(c===oe.Gi.TABLE){var k=ue((0,U.Pb)(e)?JSON.parse(e):e,{borderTop:s,selected:I});n.push(k)}else if(oe.jU.includes(c)){var T,E=null===(T=e)||void 0===T?void 0:T.split("\\n");l=(0,j.jsx)(Yn.T5,et(et({},u),{},{children:E.map((function(e){return(0,j.jsxs)(g.ZP,{monospace:!0,preWrap:!0,children:[(null==e?void 0:e.length)>=1&&(0,j.jsx)(Kn(),{children:e}),!(null!=e&&e.length)&&(0,j.jsx)(j.Fragment,{children:" "})]},e)}))}))}else c===oe.Gi.TEXT_HTML?e&&(l=(0,j.jsx)(Yn.T5,et(et({},u),{},{children:(0,j.jsx)(Yn.wx,{monospace:!0,children:(0,j.jsx)(Wn(),{html:e})})}))):c===oe.Gi.IMAGE_PNG&&(null===(i=e)||void 0===i?void 0:i.length)>=1&&(l=(0,j.jsx)("div",{style:{backgroundColor:"white"},children:(0,j.jsx)("img",{alt:"Image ".concat(r," from code output"),src:"data:image/png;base64, ".concat(e)})}));l&&h.push((0,j.jsx)("div",{children:l},"code-output-".concat(r,"-").concat(o)))}})),h.length>=1&&e.push(h)}})),{tableContentData:n,testMessages:t,textContent:e}}),[ie,ue,Z,le,M]),ae=ce.tableContentData,de=ce.testMessages,fe=ce.textContent,pe={blockColor:H,blockType:K,dynamicBlock:s,dynamicChildBlock:d,hasError:p,selected:I},he=(null==G?void 0:G[1])||0,me=he>30?" (30 out of ".concat(he," columns displayed)"):"";return{extraInfo:(0,j.jsxs)(Yn._A,et(et({},pe),{},{blockType:K,dynamicBlock:s,dynamicChildBlock:d,hasError:p,selected:I,children:[(0,j.jsx)(Yn.MB,{}),(0,j.jsxs)(v.ZP,{justifyContent:"space-between",children:[(0,j.jsxs)(y.Z,{alignItems:"center",px:1,children:[w&&(0,j.jsx)(m.ZP,et(et({},tt),{},{onClick:function(){return w(!l)},children:l?(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(re.ChevronDown,{muted:!0,size:2*L.iI})," ",(0,j.jsx)(g.ZP,{default:!0,children:"Expand output"})]}):(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(re.ChevronUp,{muted:!0,size:2*L.iI}),G&&(0,j.jsx)(b.Z,{ml:2,children:(0,j.jsx)(g.ZP,{children:"".concat(G[0]," rows x ").concat(G[1]," columns").concat(me)})})]})})),!w&&(0,j.jsx)(v.ZP,{alignItems:"center",children:G&&(0,j.jsx)(b.Z,{pl:1,children:(0,j.jsx)(g.ZP,{children:"".concat(G[0]," rows x ").concat(G[1]," columns").concat(me)})})})]}),(0,j.jsx)(Yn.a3,{children:(0,j.jsxs)(v.ZP,{alignItems:"center",fullWidth:!0,justifyContent:"flex-end",children:[(0,j.jsx)(ee.Z,et(et({},nt),{},{label:E>=1&&S?"Last run at ".concat(new Date(S.valueOf()).toLocaleString()):p?"Block executed with errors":"Block executed successfully",children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[E>=1&&Number(P)>Number(S)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(g.ZP,{small:!0,children:[(Number(P)-Number(S))/1e3,"s"]}),(0,j.jsx)(b.Z,{mr:1})]}),!p&&(0,j.jsx)(re.Check,{size:2*L.iI,success:!0}),p&&(0,j.jsx)(A.Z,{danger:!0,size:2*L.iI,children:(0,j.jsx)(g.ZP,{bold:!0,monospace:!0,small:!0,children:"!"})})]})})),!p&&!_.Qj.includes(K)&&(0,j.jsx)(b.Z,{pl:2,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(ee.Z,et(et({},nt),{},{label:"Expand table",children:(0,j.jsx)(m.ZP,et(et({},tt),{},{onClick:function(){(0,Jn.OF)(null==T?void 0:T.uuid,z),null==O||O(k.cH.DATA),null==D||D((function(e){return e.find((function(e){return e.uuid===z}))?e:(null==B||B(o),e.concat(o))}))},children:(0,j.jsx)(re.Expand,{muted:!0,size:1.75*L.iI})}))})),(0,j.jsx)(b.Z,{pl:2}),(0,j.jsx)(ee.Z,et(et({},nt),{},{forceVisible:$,label:$?"".concat(Q||0,"mb downloaded..."):"Save output as CSV file",children:(0,j.jsx)(m.ZP,et(et({},tt),{},{compact:!0,loading:$,onClick:function(){Y(null),J()},children:(0,j.jsx)(re.Save,{muted:!0,size:1.75*L.iI})}))}))]})})]})})]})]})),tableContentData:ae,testMessages:de,textContent:fe}}function rt(e){var n=e.configuration;return null!=n&&n[M.eW]?null!=n&&n[M.Mv]?void 0:{displayMessage:"dbt profile target is missing from block’s configuration. Please click the configuration tab and select a profile target."}:{displayMessage:"dbt project name is missing from block’s configuration. Please click the configuration tab and select a project."}}var it,lt,ut={inputFlex:1,large:!1},ct={compact:!0,monospace:!0};!function(e){e.CODE="code",e.CONFIGURATION="configuration",e.LINEAGE="lineage",e.OVERVIEW="overview"}(it||(it={})),function(e){e.LOGS="execution logs",e.OUTPUT="output data"}(lt||(lt={}));var at=a.default.div.withConfig({displayName:"indexstyle__SubheaderMenuStyle",componentId:"sc-qef3pm-0"})([""," border-left-style:solid;border-left-width:","px;border-right-style:solid;border-right-width:","px;",""],x.Kf,tn.mP,tn.mP,(function(e){return"\n    background-color: ".concat((e.theme||te.Z).background.dashboard,";\n    top: ").concat(e.top+tn.mP,"px;\n  ")})),st=a.default.div.withConfig({displayName:"indexstyle__WrapperStyle",componentId:"sc-qef3pm-1"})([""," border-left-style:solid;border-left-width:","px;border-right-style:solid;border-right-width:","px;min-height:","px;overflow:hidden;"," ",""],x.Kf,tn.mP,tn.mP,5*L.iI,(function(e){return"\n    background-color: ".concat((e.theme||te.Z).background.codeArea,";\n  ")}),(function(e){return e.borderBottom&&"\n    border-bottom-left-radius: ".concat(tn.n_,"px;\n    border-bottom-right-radius: ").concat(tn.n_,"px;\n    border-bottom-style: solid;\n    border-bottom-width: ").concat(tn.mP,"px;\n  ")}));function dt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function ft(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?dt(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var pt=function(e){var n=e.block,t=e.blockIndex,r=(e.blockOutputRef,e.blocks),i=e.collapsed,l=e.errorMessages,u=e.executionState,a=e.headerRef,s=e.isHidden,d=e.mainContainerWidth,f=e.menuGroups,p=e.messages,h=e.openSidekickView,m=e.pipeline,b=e.runCount,g=e.runEndTime,C=e.runStartTime,y=e.runningBlocks,O=e.scrollTogether,k=e.selected,Z=e.selectedOutputTabs,T=e.setErrors,E=e.setOutputBlocks,P=e.setSelectedOutputBlock,S=e.setSelectedOutputTabs,_=e.sideBySideEnabled,w=e.subheaderVisible,A=e.tabs,R=e.theme,D=(0,c.useState)(0),B=D[0],M=D[1],N=(0,c.useRef)(null);(0,c.useEffect)((function(){setTimeout((function(){var e,n;return M(null==a||null===(e=a.current)||void 0===e||null===(n=e.getBoundingClientRect())||void 0===n?void 0:n.height)}),1)}),[w]),(0,c.useEffect)((function(){if(null!=A&&A.length&&!Z){A[0];null==S||S((function(){var e;return null==A||null===(e=A.slice(0,2))||void 0===e?void 0:e.reduce((function(e,n){return ft(ft({},e),{},(0,o.Z)({},null==n?void 0:n.uuid,n))}),{})}))}}),[]);var G=(0,x.qn)(null==n?void 0:n.type,{blockColor:null==n?void 0:n.color,theme:R}),F=(0,c.useMemo)((function(){return(0,ce.h5)(p,l)}),[l,p]),H=function(e,n){var t,o=[],r=[],i=[],l=(0,ce.h5)(e,n);null==l||l.forEach((function(e){null!=e&&e.error?(i.push(e),o.push(null==e?void 0:e.error)):(r.push(e),o.push(null==e?void 0:e.data))}));var u=null==i?void 0:i.reduce((function(e,n){var t=n.error;return e.concat(t)}),[]),c=null==u?void 0:u.map((function(e){return(0,U.Si)((0,U.c0)(e))})),a=null==r?void 0:r.reduce((function(e,n){var t=n.data;return Array.isArray(t)&&null!=t&&t.every((function(e){return"string"==typeof e}))?e.concat(t):e}),[]),s=null==a?void 0:a.map((function(e){return(0,U.Si)((0,U.c0)(e))}));return{allContentCleaned:null==o||null===(t=o.reduce((function(e,n){return Array.isArray(n)&&null!=n&&n.every((function(e){return"string"==typeof e}))?e.concat(n):e}),[]))||void 0===t?void 0:t.map((function(e){return(0,U.Si)((0,U.c0)(e))})),errors:u,errorsCleaned:c,info:a,infoCleaned:s,withError:i,withoutError:r}}(F,l),K=H.allContentCleaned,z=(H.errors,H.errorsCleaned),W=(H.info,H.infoCleaned),Q=H.withError,Y=H.withoutError,V=(0,ce.oI)(F),q=V.hasError,X=V.hasOutput,J=(0,c.useMemo)((function(){return X||(null==p?void 0:p.length)>=1}),[X,p]);(0,c.useEffect)((function(){q&&!(lt.LOGS in(Z||{}))&&(null==S||S((function(e){return ft(ft({},e),{},(0,o.Z)({},lt.LOGS,{uuid:lt.LOGS}))})))}),[q]);var $=!(null==y||!y.find((function(e){return e.uuid===(null==n?void 0:n.uuid)})))||(null==p?void 0:p.length)>=1&&oe.uF.IDLE!==u,ee=(0,ye.cU)([n],r)[0].reduceOutputUpstreamBlock,ne=(0,c.useMemo)((function(){return(0,ce._o)({block:n,dynamic:(0,ye.vV)(n),dynamicUpstreamBlock:(0,ye.be)(n),hasError:q,reduceOutput:(0,ye.kW)(n),reduceOutputUpstreamBlock:ee,selected:k})}),[n,q,k]),te=ne.borderColorShareProps,re=(ne.tags,(0,c.useMemo)((function(){return(null==f?void 0:f.length)>=1&&(0,j.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(null==A?void 0:A.length)>=1?(0,j.jsx)(I.Z,{allowScroll:!0,onClickTab:function(e){null==S||S((function(n){var t,o=ft({},n||{});o&&(null==e?void 0:e.uuid)in o?(null===(t=Object.keys(o))||void 0===t?void 0:t.length)>=2&&delete o[null==e?void 0:e.uuid]:o[null==e?void 0:e.uuid]=e;return o}))},selectedTabUUIDs:Z,tabs:A,underlineColor:null==G?void 0:G.accent,underlineStyle:!0}):(0,j.jsx)("div",{}),(null==A?void 0:A.length)>=1?(0,j.jsx)(yn.Z,{defaultTextContent:!0,menuGroups:f,rightOffset:0}):(0,j.jsx)(at,{children:(0,j.jsx)(yn.Z,{defaultTextContent:!0,menuGroups:f,rightOffset:0})})]})}),[G,f,Z,S,A])),ie=(0,c.useMemo)((function(){return ft(ft({},te),{},{alwaysShowExtraInfo:!0,block:n,blockIndex:t,collapsed:i,hasOutput:J,isInProgress:$,mainContainerWidth:d,messages:F,messagesAll:p,openSidekickView:h,outputRowNormalPadding:!0,pipeline:m,runCount:b,runEndTime:g,runStartTime:C,scrollTogether:O,selected:k&&(!s||!_),setErrors:T,setOutputBlocks:E,setSelectedOutputBlock:P,showBorderTop:_,sideBySideEnabled:_})}),[n,t,te,i,J,s,$,d,p,F,h,m,b,g,C,O,k,T,E,P,_,_]),le=ot(ie),ue=le.extraInfo,ae=le.tableContentData,se=(le.testMessages,le.textContent),de=ot(ft(ft({},ie),{},{messages:(null==Q?void 0:Q.length)>=1?Q:[]})).textContent,fe=ot(ft(ft({},ie),{},{messages:(null==Y?void 0:Y.length)>=1?Y:[]})).textContent,pe=(0,c.useMemo)((function(){var e=[];return lt.OUTPUT in(Z||{})&&(null==ae?void 0:ae.length)>=1&&e.push(null==ae?void 0:ae.map((function(e){return{render:function(n){n.numberOfColumns;var t,o,r=n.columnWidth;n.width;return(0,j.jsx)(Ln.Z,{columns:(null==e?void 0:e.columns)||[],disableScrolling:!k,index:null==e?void 0:e.index,maxHeight:(null==se?void 0:se.length)>=1&&(null==N||null===(t=N.current)||void 0===t||null===(o=t.getBoundingClientRect())||void 0===o?void 0:o.height)||60*L.iI,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!(null!=e&&e.borderTop),rows:(null==e?void 0:e.rows)||[],width:r},"data-table-".concat(null==e?void 0:e.index))}}}))),lt.LOGS in(Z||{})&&e.push([{render:function(){var e;return(0,j.jsxs)("div",{ref:N,style:{width:"100%"},children:[1===(null===(e=Object.keys(Z||{}))||void 0===e?void 0:e.length)&&(0,j.jsx)(me.Z,{light:!0}),(0,j.jsx)(Fn,{allContentCleaned:K,contentAll:se,contentNoErrors:fe,contentWithErrors:de,errorsCleaned:z,infoCleaned:W})]})}}]),e}),[k,Z,ae,se,de,fe]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(at,ft(ft({},te),{},{top:B,children:[(0,j.jsx)(me.Z,{light:!0}),re]})),(0,j.jsx)(st,ft(ft({borderBottom:!ue},te),{},{children:(0,j.jsx)(Un.Z,{columnsOfItems:pe,dividerBackgroundColor:null==G?void 0:G.accentLight,dividerBackgroundColorHover:null==G?void 0:G.accent,uuid:"".concat(null==m?void 0:m.uuid,"_").concat(null==n?void 0:n.uuid),width:d-(2*L.cd*L.iI+2*tn.mP+Zn.nn)})})),ue]})},ht=a.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1rm42ok-0"})(["display:flex;position:relative;width:100%;",""],(function(e){return"\n    background-color: ".concat((e.theme||te.Z).background.dashboard,";\n  ")})),mt=a.default.div.withConfig({displayName:"indexstyle__MenuStyle",componentId:"sc-1rm42ok-1"})(["min-width:","px;"],40*L.iI),vt=a.default.div.withConfig({displayName:"indexstyle__EditorStyle",componentId:"sc-1rm42ok-2"})(["padding-bottom:","px;padding-top:","px;position:relative;"," ",""],L.cd*L.iI,L.cd*L.iI,(function(e){return"\n    background-color: ".concat((e.theme||te.Z).background.codeTextarea,";\n  ")}),(function(e){return!e.solo&&"\n    max-width: 100%;\n    width: 100%;\n  "}));var bt=function(e){var n=e.children,t=e.renderTabContent,o=e.selectedHeaderTab,r=e.sideMenuVisible,i=(0,c.useMemo)((function(){var e=r?n:(0,j.jsx)(vt,{solo:!0,children:n});return t&&o?t(o,e):e}),[n,t,o,r]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ht,{children:r&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(mt,{children:(0,j.jsx)(v.ZP,{flexDirection:"column",children:(0,j.jsx)(b.Z,{p:L.cd,children:(0,j.jsx)(g.ZP,{children:"Space for a menu"})})})}),(0,j.jsx)(vt,{children:i})]})}),!r&&i]})},gt=t(88543);function xt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function jt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?xt(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ct=function(e){var n,t,r,i,l,u,a=e.block,s=e.dbtConfigurationOptions,d=(e.pipeline,e.savePipelineContent),f=(0,c.useState)(a),p=f[0],h=f[1],x=(0,c.useState)({}),C=x[0],y=x[1],O=(0,c.useMemo)((function(){var e;return null==s||null===(e=s.find((function(e){var n,t,o=e.option;return(null==p||null===(n=p.configuration)||void 0===n?void 0:n[M.eW])===(null==o||null===(t=o.project)||void 0===t?void 0:t.uuid)})))||void 0===e?void 0:e.option}),[p,s]),k=(0,c.useMemo)((function(){var e;return null===(e=(0,Z.YC)(s||[],(function(e){var n=e.project;return null==n?void 0:n.uuid})))||void 0===e?void 0:e.map((function(e){var n=e.option;return null==n?void 0:n.project}))}),[s]),T=(0,c.useMemo)((function(){return(null==O?void 0:O.profiles)||[]}),[O]),E=(0,c.useMemo)((function(){return null==s?void 0:s.reduce((function(e,n){var t=n.option;return e.concat((null==t?void 0:t.profiles)||[])}),[])}),[s]),P=(0,c.useMemo)((function(){return null==T?void 0:T.find((function(e){var n;return e.full_path===(null==p||null===(n=p.configuration)||void 0===n?void 0:n[M.yY])}))}),[p,T]),S=(0,c.useMemo)((function(){return(null==P?void 0:P.targets)||[]}),[P]),I=(0,c.useMemo)((function(){return null==s?void 0:s.reduce((function(e,n){var t,o=n.option;return e.concat((null==o||null===(t=o.profiles)||void 0===t?void 0:t.reduce((function(e,n){return e.concat(n.targets)}),[]))||[])}),[])}),[s]),A=(0,c.useMemo)((function(){return null==S?void 0:S.find((function(e){var n;return(null==p||null===(n=p.configuration)||void 0===n?void 0:n[M.Mv])===e}))}),[null==p?void 0:p.configuration,S]);(0,c.useEffect)((function(){var e,n,t,r=null==p||null===(e=p.configuration)||void 0===e?void 0:e[M.eW];(null!=O&&O.project||null==k||!k.find((function(e){return e.uuid===r})))&&r&&y((function(e){var n;return jt(jt({},e),{},(0,o.Z)({},M.eW,r!==(null==O||null===(n=O.project)||void 0===n?void 0:n.uuid)))}));var i=null==p||null===(n=p.configuration)||void 0===n?void 0:n[M.yY];(i&&!P||(P||null==E||!E.find((function(e){return(null==e?void 0:e.full_path)===i})))&&i)&&y((function(e){return jt(jt({},e),{},(0,o.Z)({},M.yY,i!==(null==P?void 0:P.full_path)||i&&!P))}));var l=null==p||null===(t=p.configuration)||void 0===t?void 0:t[M.Mv];(l&&!A||(A||null==I||!I.find((function(e){return e===l})))&&l)&&y((function(e){return jt(jt({},e),{},(0,o.Z)({},M.Mv,l!==A||l&&!A))}))}),[p,P,E,O,k,A,I]);var R=(0,c.useMemo)((function(){var e,n="selectInput",t=jt(jt({},ct),{},{onChange:function(e){return h((function(n){return jt(jt({},n),{},{configuration:jt(jt({},(null==n?void 0:n.configuration)||{}),{},(0,o.Z)({},M.eW,e.target.value))})}))},options:null,placeholder:null,value:null==p||null===(e=p.configuration)||void 0===e?void 0:e[M.eW]});return null!=C&&C[M.eW]?(n="textInput",t=jt(jt({},t),{},{placeholder:"relative_path/from/root_project"})):t=jt(jt({},t),{},{options:[{label:"",value:""}].concat(null==k?void 0:k.map((function(e){var n=e.uuid;return{label:n,value:n}}))),placeholder:"Select project"}),(0,o.Z)({},n,t)}),[p,C,k]),D=(0,c.useMemo)((function(){var e,n="selectInput",t=jt(jt({},ct),{},{onChange:function(e){return h((function(n){return jt(jt({},n),{},{configuration:jt(jt({},(null==n?void 0:n.configuration)||{}),{},(0,o.Z)({},M.yY,e.target.value))})}))},options:null,placeholder:null,value:null==p||null===(e=p.configuration)||void 0===e?void 0:e[M.yY]});return null!=C&&C[M.yY]?(n="textInput",t=jt(jt({},t),{},{placeholder:"relative_path/from/root_project/profiles.yml"})):t=jt(jt({},t),{},{options:[{label:"",value:""}].concat(null==T?void 0:T.map((function(e){var n=e.full_path,t=e.targets;return{label:"".concat(n," (").concat((0,U._6)("target",(null==t?void 0:t.length)||0),")"),value:n}}))),placeholder:"Select profile"}),(0,o.Z)({},n,t)}),[p,C,T]),B=(0,c.useMemo)((function(){var e,n="selectInput",t=jt(jt({},ct),{},{onChange:function(e){return h((function(n){return jt(jt({},n),{},{configuration:jt(jt({},(null==n?void 0:n.configuration)||{}),{},(0,o.Z)({},M.Mv,e.target.value))})}))},options:null,placeholder:null,value:null==p||null===(e=p.configuration)||void 0===e?void 0:e[M.Mv]});return null!=C&&C[M.Mv]?(n="textInput",t=jt(jt({},t),{},{placeholder:"e.g. dev"})):t=jt(jt({},t),{},{options:[{label:"",value:""}].concat(null==S?void 0:S.map((function(e){return{label:e,value:e}}))),placeholder:"Select target"}),(0,o.Z)({},n,t)}),[p,C,S]);return(0,j.jsxs)(b.Z,{p:L.cd,children:[(0,j.jsxs)(gt.Z,{title:"Configuration",children:[(0,j.jsx)(gt.S,jt(jt({},ut),{},{description:(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(w.Z,{checked:!(null==C||!C[M.eW]),onClick:function(){y((function(e){return jt(jt({},e),{},(0,o.Z)({},M.eW,!(null!=C&&C[M.eW])))}))}}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsxs)(g.ZP,{inline:!0,muted:!0,small:!0,children:["Manually enter the full path from the root directory of the current project, to the dbt project directory that contains the ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"dbt_project.yml"})," file. Interpolate environment variables, runtime variables, etc. using the following syntax:",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"{{ env_var('NAME') }}"})," or ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"{{ variables('NAME') }}"})]})]})}),invalid:!(null!=p&&null!==(n=p.configuration)&&void 0!==n&&n[M.eW]),title:"Project"},R)),(0,j.jsx)(gt.S,jt(jt({},ut),{},{description:(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(w.Z,{checked:!(null==C||!C[M.yY]),onClick:function(){y((function(e){return jt(jt({},e),{},(0,o.Z)({},M.yY,!(null!=C&&C[M.yY])))}))}}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsxs)(g.ZP,{inline:!0,muted:!0,small:!0,children:["Manually enter the full path with the filename ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"profiles.yml"}),"from the root directory of the current project, to the dbt project directory that contains the ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"profiles.yml"})," file. Interpolate environment variables, runtime variables, etc. using the following syntax:",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"{{ env_var('NAME') }}"})," or ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"{{ variables('NAME') }}"})]})]})}),invalid:!(null!=p&&null!==(t=p.configuration)&&void 0!==t&&t[M.yY]),title:"Profile"},D)),(0,j.jsx)(gt.S,jt(jt({},ut),{},{description:(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(w.Z,{checked:!(null==C||!C[M.Mv]),onClick:function(){y((function(e){return jt(jt({},e),{},(0,o.Z)({},M.Mv,!(null!=C&&C[M.Mv])))}))}}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsxs)(g.ZP,{inline:!0,muted:!0,small:!0,children:["Manually enter the target name from the ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"dbt_project.yml"})," file. Interpolate environment variables, runtime variables, etc. using the following syntax:",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"{{ env_var('NAME') }}"})," or ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"{{ variables('NAME') }}"})]})]})}),invalid:!(null!=p&&null!==(r=p.configuration)&&void 0!==r&&r[M.Mv]),title:"Target"},B)),(0,j.jsx)(gt.S,jt(jt({},ut),{},{description:"Limit the number of rows that are fetched when compiling and previewing.",textInput:jt(jt({},ct),{},{fullWidth:!0,onChange:function(e){return h((function(n){return jt(jt({},n),{},{configuration:jt(jt({},(null==n?void 0:n.configuration)||{}),{},(0,o.Z)({},M.mW,e.target.value))})}))},placeholder:"e.g. 1000",type:"number",value:null==p||null===(i=p.configuration)||void 0===i?void 0:i[M.mW]}),title:"Preview query result limit"})),_.t6.YAML===(null==a?void 0:a.language)&&(0,j.jsx)(gt.S,jt(jt({},ut),{},{description:"Enter which dbt command to run.",textInput:jt(jt({},ct),{},{fullWidth:!0,onChange:function(e){return h((function(n){var t;return jt(jt({},n),{},{configuration:jt(jt({},(null==n?void 0:n.configuration)||{}),{},(0,o.Z)({},M.Pi,jt(jt({},null===(t=(null==n?void 0:n.configuration)||{})||void 0===t?void 0:t[M.Pi]),{},(0,o.Z)({},M.pA,e.target.value))))})}))},placeholder:"e.g. run, seed",value:null==p||null===(l=p.configuration)||void 0===l||null===(u=l[M.Pi])||void 0===u?void 0:u[M.pA]}),title:"dbt command"}))]}),(0,j.jsx)(b.Z,{mt:L.cd,children:(0,j.jsx)(v.ZP,{justifyContent:"flex-end",children:(0,j.jsx)(m.ZP,{onClick:function(){d({block:{configuration:null==p?void 0:p.configuration,uuid:null==a?void 0:a.uuid}})},primary:!0,children:"Save configuration"})})})]})},yt=t(83905),Ot=t(24138);var kt,Zt=function(e){var n,t,o,r=e.block,i=(null==r?void 0:r.configuration)||{},l=(null==i?void 0:i.file_path)||(null==i||null===(n=i.file_source)||void 0===n?void 0:n.path),u={item_type:yt.N.DBT,project_path:null==i?void 0:i[M.eW]},c=ne.ZP.cache_items.detail(encodeURIComponent(l),u,{pauseFetch:!(null!=i&&null!==(t=i[M.eW])&&void 0!==t&&t.length)}).data,a=null==c?void 0:c.cache_item,s=(null==a||null===(o=a.item)||void 0===o?void 0:o.upstream_blocks)||[];return(0,j.jsx)(j.Fragment,{children:(null==s?void 0:s.length)>=1&&(0,j.jsx)(Ot.ZP,{disabled:!0,enablePorts:!1,height:80*L.iI,pannable:!0,pipeline:{blocks:s,uuid:null},zoomable:!0})})};!function(e){e.BUILD="build",e.EXECUTE="execute",e.EXECUTE_CANCEL="execute_cancel",e.RUN="run",e.RUN_UPSTREAM="run_upstream",e.TEST="test"}(kt||(kt={}));var Tt=t(37529),Et=t(74401);function Pt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function St(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Pt(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _t={default:!0,size:En};function It(e){var n,t,r,i,l,u=e.addNewBlock,c=e.allowCodeBlockShortcuts,a=e.block,s=e.codeCollapsed,d=e.dbtConfigurationOptions,f=e.deleteBlock,p=e.disableShortcuts,h=(e.executionState,e.hideRunButton),m=e.interruptKernel,C=e.openSidekickView,y=e.outputCollapsed,Z=e.pipeline,T=e.runBlockAndTrack,E=e.savePipelineContent,P=e.scrollTogether,S=e.setCodeCollapsed,I=e.setErrors,w=e.setHiddenBlocks,R=e.setOutputCollapsed,D=e.setScrollTogether,B=e.setSideBySideEnabled,M=e.sideBySideEnabled,N=e.theme,L=e.updatePipeline,U=a.color,G=a.configuration,F=a.replicated_block,H=a.type,K=a.uuid,z=G||{},W=z.dynamic,Q=z.reduce_output,Y=(0,x.qn)(H,{blockColor:U,theme:N}),q=null==G||null===(n=G.file_source)||void 0===n?void 0:n.project_path,X=K;q&&(null!==(i=X=null===(r=X)||void 0===r?void 0:r.replace(q,""))&&void 0!==i&&i.startsWith(jn.sep)&&(X=null===(l=X)||void 0===l?void 0:l.slice(1)));var J=null,$=(null==G?void 0:G.file_path)||(null==G||null===(t=G.file_source)||void 0===t?void 0:t.path);function ee(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{setSelectedHeaderTab:null}).setSelectedHeaderTab,n=rt(a);return!n||(e&&(n.links=[{closeAfterClick:!0,label:"Continue dbt configuration",onClick:function(){return null==e?void 0:e(null==ne?void 0:ne.find((function(e){return it.CONFIGURATION===e.uuid})))}}]),I(n),!1)}$&&(0,Et.Ho)($)!==X&&(J=$);var ne=function(e){var n=e.block;return[{uuid:it.CODE},{icon:rt(n)?(0,j.jsx)(re.AlertTriangle,{danger:!0}):null,uuid:it.CONFIGURATION},{uuid:it.LINEAGE}]}({block:a}),te=function(e){return e.block,[{uuid:lt.OUTPUT},{uuid:lt.LOGS}]}({block:a}),oe=c||!p,ie={color:null==Y?void 0:Y.accent,description:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(V.Z,{addPlusSignBetweenKeys:!0,keyTextGroups:[[le.RJ,le.Lz]]}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(g.ZP,{muted:!0,children:"Compile SQL and excute query for sample data."})]}),disabled:function(e){return e.active},icon:(0,j.jsx)(re.PlayButtonFilled,{size:Tn}),keyTextsPosition:nn.Yo.LEFT,keyboardShortcutValidation:oe?function(e,n,t){e.keyHistory;var o=e.keyMapping;return t.selected&&((0,pn.y)([le.zX,le.Uq],o)||(0,pn.y)([le.PQ,le.Uq],o))}:null,label:function(){return"Preview"},onClick:function(e){ee(e)&&T({block:a})},uuid:kt.EXECUTE},ue={color:null==Y?void 0:Y.accent,description:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(V.Z,{addPlusSignBetweenKeys:!0,keyTextGroups:[[le.kA],[le.kA]]}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(g.ZP,{muted:!0,children:"Interrupt kernel and cancel execution"})]}),icon:(0,j.jsx)(A.Z,{borderOnly:!0,danger:!0,size:1.5*Tn,children:(0,j.jsx)(re.Close,{danger:!0,size:.75*Tn})}),keyTextsPosition:nn.Yo.RIGHT,keyboardShortcutValidation:oe?function(e,n,t){var o=e.keyHistory;return t.selected&&o[0]===le.xD&&o[1]===le.xD}:null,onClick:m,uuid:kt.EXECUTE_CANCEL,visible:function(e){return e.active}},ce={Icon:re.Callback,description:"Run model",disabled:function(e){return e.active},label:function(){return"Run"},onClick:function(e){ee(e)&&T({block:a,runSettings:{run_model:!0}})},uuid:kt.RUN},ae={Icon:re.Monitor,description:"Test model",disabled:function(e){return e.active},label:function(){return"Test"},onClick:function(e){ee(e)&&T({block:a,runSettings:{test_model:!0}})},uuid:kt.TEST},se={Icon:re.BlocksCombined,description:"Build model",disabled:function(e){return e.active},label:function(){return"Build"},onClick:function(e){ee(e)&&T({block:a,runSettings:{build_model:!0}})},uuid:kt.BUILD},de=[{uuid:"Execute",items:[{beforeIcon:(0,j.jsx)(re.TreeWithArrowsUp,St({},_t)),uuid:"Run all upstream blocks then execute",onClick:function(e){ee(e)&&T({block:a,runUpstream:!0})}},{beforeIcon:(0,j.jsx)(re.TreeWithArrowsUp,St({},_t)),uuid:"Run incomplete upstream blocks then execute",onClick:function(e){ee(e)&&T({block:a,runIncompleteUpstream:!0})}},{beforeIcon:(0,j.jsx)(re.TreeWithArrowsDown,St({},_t)),uuid:"Execute then run downstream blocks",onClick:function(e){ee(e)&&T({block:a,runDownstream:!0})}},{beforeIcon:(0,j.jsx)(re.Monitor,St({},_t)),label:function(){return(0,j.jsxs)(g.ZP,{children:["Run ",(0,j.jsx)(g.ZP,{color:null==Y?void 0:Y.accent,inline:!0,monospace:!0,children:"@tests"})," defined in block"]})},leftAligned:!0,uuid:"Run @tests defined in block",onClick:function(e){ee(e)&&T({block:a,runTests:!0})}}]},{uuid:"Enhance",items:[{isGroupingTitle:!0,uuid:"Dynamic"},{beforeIcon:(0,j.jsx)(re.TreeWithArrowsDown,St({success:W},_t)),disabled:W,uuid:"Set block as dynamic",onClick:function(){return E({block:St(St({},a),{},{configuration:St(St({},G),{},{dynamic:!0})})})}},{beforeIcon:(0,j.jsx)(re.Close,St({disabled:!W},_t)),disabled:!W,uuid:"Disable block as dynamic",onClick:function(){return E({block:St(St({},a),{},{configuration:St(St({},G),{},{dynamic:!1})})})}},{beforeIcon:(0,j.jsx)(re.Filter,St({success:Q},_t)),uuid:"Reduce output",disabled:Q,onClick:function(){return E({block:St(St({},a),{},{configuration:St(St({},G),{},{reduce_output:!0})})})}},{beforeIcon:(0,j.jsx)(re.Close,St({disabled:!Q},_t)),uuid:"Don’t reduce output",disabled:!Q,onClick:function(){return E({block:St(St({},a),{},{configuration:St(St({},G),{},{reduce_output:!1})})})}}]},{uuid:"Blocks",items:[{beforeIcon:(0,j.jsx)(re.TreeWithArrowsUp,St({},_t)),uuid:"Add upstream models",tooltip:function(){return"Add upstream models for this model to the pipeline."},onClick:function(){return L({pipeline:{add_upstream_for_block_uuid:K}})}},{beforeIcon:(0,j.jsx)(re.Conditional,St({},_t)),uuid:"Add conditional",onClick:function(){return C(k.cH.ADDON_BLOCKS,!0,{addon:O.Q.CONDITIONAL,blockUUID:null==a?void 0:a.uuid})}},{beforeIcon:(0,j.jsx)(re.Callback,St({},_t)),uuid:"Add callback",onClick:function(){return C(k.cH.ADDON_BLOCKS,!0,{addon:O.Q.CALLBACK,blockUUID:null==a?void 0:a.uuid})}},{beforeIcon:(0,j.jsx)(re.PowerUps,St({},_t)),uuid:"Add power up",onClick:function(){return C(k.cH.EXTENSIONS,!0)}},{beforeIcon:(0,j.jsx)(re.Interactions,St({},_t)),uuid:"Add/Edit interactions",onClick:function(){return C(k.cH.INTERACTIONS,!0)}},{beforeIcon:(0,j.jsx)(re.Charts,St({},_t)),uuid:"Add charts",onClick:function(){return C(k.cH.CHARTS,!0)}}]},{uuid:"Edit",items:[{beforeIcon:(0,j.jsx)(re.Alphabet,St({},_t)),uuid:"Change name",onClick:function(){return C(k.cH.BLOCK_SETTINGS,!0)}},{beforeIcon:(0,j.jsx)(re.Edit,St({},_t)),uuid:"Change color",onClick:function(){return C(k.cH.BLOCK_SETTINGS,!0)}},{beforeIcon:(0,j.jsx)(re.SettingsWithKnobs,St({},_t)),uuid:"All settings",onClick:function(){return C(k.cH.BLOCK_SETTINGS,!0)}},{beforeIcon:(0,j.jsx)(re.BatchSquaresStacked,St({disabled:!!F},_t)),uuid:"Replicate block",disabled:!!F,onClick:function(){return u({replicated_block:K})}},{beforeIcon:(0,j.jsx)(re.Trash,St({},_t)),uuid:"Delete block",onClick:function(){f(a)}}]},{uuid:"View",items:[{beforeIcon:(0,j.jsx)(re.VisibleEye,St({},_t)),uuid:"Hide block",onClick:function(){w((function(e){return St(St({},e),{},(0,o.Z)({},K,a))}))}},{disabled:s,beforeIcon:(0,j.jsx)(re.ChevronUp,St({disabled:s},_t)),uuid:"Collapse code",onClick:function(){return S(!0)}},{disabled:!s,beforeIcon:(0,j.jsx)(re.ChevronDown,St({disabled:!s},_t)),uuid:"Expand code",onClick:function(){return S(!1)}},{disabled:y,beforeIcon:(0,j.jsx)(re.ChevronUp,St({disabled:y},_t)),uuid:"Collapse output",onClick:function(){return R(!0)}},{disabled:!y,beforeIcon:(0,j.jsx)(re.ChevronDown,St({disabled:!y},_t)),uuid:"Expand output",onClick:function(){return R(!1)}},{isGroupingTitle:!0,uuid:"Split view"},{disabled:!M,beforeIcon:(0,j.jsx)(re.LayoutStacked,St({disabled:!M},_t)),uuid:"Show output below block",onClick:function(){return B(!1)}},{disabled:M,beforeIcon:(0,j.jsx)(re.LayoutSplit,St({success:M,disabled:M},_t)),uuid:"Show output next to code (beta)",onClick:function(){return B(!0)}},{disabled:!M||P,beforeIcon:(0,j.jsx)(re.LayoutSplit,St({success:P,disabled:!M||P},_t)),uuid:"Scroll output alongside code (beta)",onClick:function(){return D(!0)}}]},{uuid:"Support",items:[{beforeIcon:(0,j.jsx)(re.Chat,St({},_t)),uuid:"Live chat 24/7",linkProps:{href:"https://mage.ai/chat",openNewWindow:!0}},{beforeIcon:(0,j.jsx)(re.DocumentIcon,St({},_t)),uuid:"Developer documentation",linkProps:{href:"https://docs.mage.ai",openNewWindow:!0}}]}],fe=[{uuid:"Explore data",items:[{beforeIcon:(0,j.jsx)(re.DocumentIcon,St({},_t)),uuid:"Play with data in a scratchpad",onClick:function(){return u({content:'"""\nNOTE: Scratchpad blocks are used only for experimentation and testing out code.\nThe code written here will not be executed as part of the pipeline.\n"""\nfrom mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable(\''.concat(Z.uuid,"', '").concat(a.uuid,"', 'output_0')\n"),language:_.t6.PYTHON,type:_.tf.SCRATCHPAD})}},{beforeIcon:(0,j.jsx)(re.Charts,St({},_t)),uuid:"Visualize output data",onClick:function(){return C(k.cH.CHARTS,!0)}}]}];return{editor:{shortcuts:h&&oe?[]:[function(e,n){return(0,Tt.Q)(e,(function(){ee()&&T({block:a,code:n.getValue()})}))}]},header:{buttons:[ie,ce,ae,se,ue],menuGroups:de,subheaderVisibleDefault:function(e){return null==e||!e.status||_.DA.NOT_EXECUTED===(null==e?void 0:e.status)||(!!rt(e)||void 0)},subtitle:J,tabs:ne,title:X},headerTabContent:{renderTabContent:function(e,n){return it.CONFIGURATION===(null==e?void 0:e.uuid)?(0,j.jsx)(Ct,{block:a,dbtConfigurationOptions:d,pipeline:Z,savePipelineContent:E}):it.LINEAGE===(null==e?void 0:e.uuid)?(0,j.jsx)(Zt,{block:a}):n}},output:{menuGroups:fe,tabs:te}}}var wt=t(77417);function At(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function Rt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?At(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):At(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Dt=t(98464),Bt=t(19698),Mt=t(71471),Nt=t(98777),Lt=t(84438),Ut=t(92709),Gt=t(38399),Ft=t(22286),Ht=t(44375),Kt=t(15752),zt=t(42122);function Wt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function Qt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Wt(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Yt=1e3;function Vt(e,n){var t,l,C=e.addNewBlock,O=e.addNewBlockMenuOpenIdx,T=e.addWidget,E=e.allBlocks,B=e.allowCodeBlockShortcuts,N=e.autocompleteItems,G=e.block,F=e.blockIdx,H=e.blockInteractions,K=e.blockOutputRef,z=e.blockRefs,W=e.blockTemplates,Q=e.blocks,V=void 0===Q?[]:Q,q=e.children,J=e.codeEditorMappingRef,te=e.containerRef,ae=e.cursorHeight1,de=e.cursorHeight2,fe=e.cursorHeight3,pe=e.dataProviders,ve=e.dbtConfigurationOptions,be=e.defaultValue,ge=void 0===be?"":be,xe=e.deleteBlock,je=e.disableDrag,Ce=e.disableShortcuts,Oe=e.executionState,ke=e.extraContent,Se=e.fetchFileTree,_e=e.fetchPipeline,Ie=e.globalDataProducts,Be=e.height,Ne=e.hideExtraCommandButtons,Le=e.hideExtraConfiguration,Ue=e.hideHeaderInteractiveInformation,Fe=e.hideOutputOnExecution,Ke=e.hideRunButton,Ye=e.interactionsMapping,Ve=e.interruptKernel,$e=e.isHidden,en=e.mainContainerRect,nn=e.mainContainerRef,tn=e.mainContainerWidth,on=e.messages,rn=void 0===on?[]:on,ln=e.noDivider,un=e.onCallbackChange,cn=e.onChange,an=e.onClickAddSingleDBTModel,sn=e.onDrop,fn=e.onMountCallback,mn=e.openSidekickView,vn=e.pipeline,bn=e.project,gn=e.runBlock,jn=e.runningBlocks,Cn=e.savePipelineContent,yn=e.scrollTogether,On=e.selected,kn=e.setAddNewBlockMenuOpenIdx,Tn=e.setAnyInputFocused,En=e.setCreatingNewDBTModel,Pn=e.setEditingBlock,Sn=e.setErrors,_n=e.setHiddenBlocks,In=(e.setMountedBlocks,e.setOutputBlocks),wn=e.setSelected,An=e.setSelectedBlock,Rn=e.setSelectedOutputBlock,Dn=e.setTextareaFocused,Bn=e.setScrollTogether,Mn=e.setSideBySideEnabled,Ln=e.showBlockBrowserModal,Un=e.showBrowseTemplates,Gn=e.showConfigureProjectModal,Fn=e.showDataIntegrationModal,Hn=e.showGlobalDataProducts,Kn=e.showUpdateBlockModal,zn=e.sideBySideEnabled,Wn=e.textareaFocused,Qn=e.updatePipeline,Vn=e.widgets,qn=e.windowWidth,Xn=(0,c.useContext)(a.ThemeContext),$n=(0,c.useRef)(null),et=(0,c.useRef)(null),nt=(0,c.useRef)(null),tt=(0,c.useRef)(null),ot=(0,wt.Z)(),rt=ot.featureEnabled,it=ot.featureUUIDs,lt=ot.sparkEnabled,ut=(0,Bt.Z)().status,ct=(0,c.useMemo)((function(){return null==rt?void 0:rt(it.DBT_V2)}),[rt,it]),at=(0,c.useState)(!1),st=at[0],dt=at[1],ft=(0,c.useState)(0),ht=ft[0],mt=ft[1],vt=(0,c.useState)(!1),gt=vt[0],xt=vt[1],jt=(0,c.useCallback)((function(){var e=new CustomEvent(Ut.$e,{detail:{blockIndex:F}});window.dispatchEvent(e)}),[F]),Ct=(0,c.useCallback)((function(){var e=new CustomEvent(Ut.tK,{detail:{blockIndex:F}});window.dispatchEvent(e)}),[F]),yt=(0,c.useCallback)((function(e){_n&&(null==_n||_n(e),clearTimeout(tt.current),tt.current=setTimeout((function(){Ct(),jt()}),Nt.e+1))}),[jt,Ct,_n]);(0,c.useEffect)((function(){var e=function(e){var n,t=null==nt||null===(n=nt.current)||void 0===n?void 0:n.getBoundingClientRect();t&&(null==e?void 0:e.clientX)>=(null==t?void 0:t.x)&&(null==e?void 0:e.clientX)<=(null==t?void 0:t.x)+(null==t?void 0:t.width)&&(null==e?void 0:e.clientY)>=(null==t?void 0:t.y)&&(null==e?void 0:e.clientY)<=(null==t?void 0:t.y)+(null==t?void 0:t.height)&&(clearTimeout(tt.current),tt.current=setTimeout(Ct,Nt.e+1))};return st&&window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[Ct,st]),(0,c.useEffect)((function(){gt&&zn&&jt()}),[gt,yn,zn,jt]);var Ot=(0,c.useMemo)((function(){var e;return!(null==bn||null===(e=bn.features)||void 0===e||!e[Re.d.INTERACTIONS])}),[null==bn?void 0:bn.features]),kt=(0,c.useCallback)((function(e){var n,t,o,r,l=e.columnScrolling,u=e.refCursor,c=e.refCursorContainer,a=e.refsMappings,s=null==V?void 0:V.map((function(e){var n=(0,Jn.zv)(e);return Math.max.apply(Math,(0,i.Z)(a.map((function(e){var t,o,r,i=null==e||null===(t=e.current)||void 0===t?void 0:t[n];return(null==i||null===(o=i.current)||void 0===o||null===(r=o.getBoundingClientRect())||void 0===r?void 0:r.height)||0}))))})),d=(0,Z.Sm)(s||[]),f=null==c||null===(n=c.current)||void 0===n?void 0:n.getBoundingClientRect(),p=null==u||null===(t=u.current)||void 0===t||null===(o=t.getBoundingClientRect)||void 0===o?void 0:o.call(t),h=(null==f?void 0:f.y)+(null==p?void 0:p.height),m=100*((0===(null==p?void 0:p.height)?0:(null==p?void 0:p.y)+(null==p?void 0:p.height))-h)/((null==f?void 0:f.height)-(null==p?void 0:p.height))/100,v=(0,ce.IT)(s,d,null==en?void 0:en.height)||0,b=(null==f?void 0:f.y)-Math.max(0,m*(1-v))*d+(0,Z.Sm)((null===(r=s||[])||void 0===r?void 0:r.slice(0,F))||[]);if(yn)null!=$n&&$n.current&&($n.current.style.top="".concat(b,"px")),null!=et&&et.current&&(et.current.style.top="".concat(b,"px"));else{var g=0===l?$n:et;null!=g&&g.current&&(g.current.style.top="".concat(b,"px"))}}),[V,F,en,$n,et,yn]);(0,c.useEffect)((function(){var e=function(e){var n=e.detail;kt(n)};return zn&&window.addEventListener(Ut.m$,e),function(){window.removeEventListener(Ut.m$,e)}}),[kt,zn]);var Zt=G||{},Et=Zt.callback_content,Pt=Zt.configuration,St=void 0===Pt?{}:Pt,_t=Zt.color,At=Zt.error,Wt=Zt.has_callback,Vt=Zt.language,qt=Zt.name,Xt=Zt.pipelines,Jt=Zt.replicated_block,$t=Zt.type,eo=Zt.upstream_blocks,no=void 0===eo?[]:eo,to=Zt.uuid,oo=(0,c.useMemo)((function(){return St}),[St]),ro=(0,c.useMemo)((function(){var e;return(null===(e=Object.values(Xt||{}))||void 0===e?void 0:e.length)||1}),[Xt]),io=(0,c.useMemo)((function(){return null==oo?void 0:oo.global_data_product}),[oo]),lo=(0,c.useMemo)((function(){return(0,Z.HK)(Ie||[],(function(e){return e.uuid}))}),[Ie]),uo=(0,c.useState)(!1),co=uo[0],ao=uo[1],so=(0,c.useState)(null),fo=so[0],po=so[1],ho=(0,c.useState)(!1),mo=ho[0],vo=ho[1],bo=(0,c.useState)(!1),go=bo[0],xo=bo[1],jo=(0,c.useRef)(ge),Co=null==jo?void 0:jo.current,yo=(0,c.useCallback)((function(e){var n;jo.current=e;var t,o=(0,Jn.zv)({type:null==G?void 0:G.type,uuid:null==G?void 0:G.uuid}),i=null==J||null===(n=J.current)||void 0===n?void 0:n[o];i&&(null===(t=Object.entries(i||{}))||void 0===t||t.forEach((function(n){var t=(0,r.Z)(n,2);t[0];t[1].setValue(e)})))}),[null==G?void 0:G.type,null==G?void 0:G.uuid,J]),Oo=(0,c.useState)(null),ko=Oo[0],Zo=Oo[1],To=(0,c.useState)(ie.C4[0].uuid),Eo=To[0],Po=To[1],So=(0,c.useState)(null),_o=So[0],Io=So[1],wo=vn||{},Ao=wo.type,Ro=wo.uuid,Do=(0,c.useMemo)((function(){return ue.qL.STREAMING===Ao}),[Ao]),Bo=(0,c.useMemo)((function(){return _.tf.DBT===$t}),[$t]),Mo=_.t6.SQL===Vt,No=_.t6.R===Vt,Lo=_.tf.MARKDOWN===$t,Uo=(0,c.useMemo)((function(){return(0,ye.jO)(G,vn)}),[G,vn]),Go=oo[M.mW];Mo&&void 0===Go&&(Go=Yt);var Fo=(0,c.useState)(Qt(Qt({},oo),{},(t={},(0,o.Z)(t,M.cH,oo[M.cH]),(0,o.Z)(t,M.Sv,oo[M.Sv]),(0,o.Z)(t,M.sc,oo[M.sc]),(0,o.Z)(t,M.BD,oo[M.BD]),(0,o.Z)(t,M.m$,oo[M.m$]),(0,o.Z)(t,M.Pi,oo[M.Pi]||{}),(0,o.Z)(t,M.Mv,oo[M.Mv]),(0,o.Z)(t,M.eW,oo[M.eW]),(0,o.Z)(t,M.nq,oo[M.nq]||Ze.APPEND),(0,o.Z)(t,M.mW,Go),(0,o.Z)(t,M.bk,oo[M.bk]),(0,o.Z)(t,M.Mi,!!oo[M.Mi]),(0,o.Z)(t,M.H2,!!oo[M.H2]),t))),Ho=Fo[0],Ko=Fo[1],zo=(0,c.useState)(null),Wo=zo[0],Qo=zo[1],Yo=(0,c.useState)(Lo),Vo=Yo[0],qo=Yo[1],Xo=(0,c.useState)(!1),Jo=Xo[0],$o=Xo[1],er=(0,c.useState)(0),nr=er[0],tr=er[1],or=(0,c.useState)(null),rr=or[0],ir=or[1],lr=(0,c.useState)(null),ur=lr[0],cr=lr[1],ar=(0,c.useState)(rn),sr=ar[0],dr=ar[1],fr=(0,c.useState)(null),pr=fr[0],hr=fr[1],mr=(0,c.useCallback)((function(e){Ct(),null==wn||wn(!!e),hr(e)}),[Ct,wn,hr]);(0,c.useEffect)((function(){pr||(st?mr((0,ie.iz)(G)[0]):Bo&&mr((0,ie.Xy)(G)[0]))}),[G,Bo,pr,mr,st]);var vr=(0,c.useCallback)((function(e){qo(e),setTimeout((function(){return jt()}),1)}),[jt,qo]),br=(0,s.c)((function(){return{collect:function(e){return{isDragging:!!e.isDragging()}},item:G,type:ie.vT}}),[G]),gr=(0,r.Z)(br,2),xr=gr[0],jr=gr[1],Cr=(0,d.L)((function(){return{accept:ie.vT,drop:function(e){return null==sn?void 0:sn(G,e)}}}),[G]),yr=(0,r.Z)(Cr,2)[1],Or=(0,c.useMemo)((function(){return(0,Z.HK)(ve||[],(function(e){return e.uuid}))}),[ve]),kr=(0,c.useMemo)((function(){return null==Ho?void 0:Ho[M.eW]}),[Ho]),Zr=(0,c.useMemo)((function(){var e;if(!ve)return[Or[kr]||{target:null,targets:[]}];var n=1===(null==ve?void 0:ve.length)?null==ve?void 0:ve[0]:null==ve?void 0:ve.find((function(e){var n=e.uuid;return kr===n}));return(null==n||null===(e=n.option)||void 0===e?void 0:e.profiles)||[]}),[ve,kr,Or]),Tr=(0,c.useMemo)((function(){var e;return(0,Z.Nb)(null===(e=Zr||[])||void 0===e?void 0:e.reduce((function(e,n){var t=n.targets;return e.concat(t||[])}),[]))}),[Zr]),Er=(0,c.useMemo)((function(){return Ho[M.Mv]}),[Ho]),Pr=kr?null!=Zr&&null!==(l=Zr[0])&&void 0!==l&&l.target?(0,Z.sE)(Tr,(function(e){var n;return e===(null==Zr||null===(n=Zr[0])||void 0===n?void 0:n.target)})):"Select target":"Select project first",Sr=(0,c.useState)(Er&&!(null!=Tr&&Tr.includes(Er))),_r=Sr[0],Ir=Sr[1],wr=(0,c.useState)(null),Ar=wr[0],Rr=wr[1];(0,c.useEffect)((function(){Et!==Ar&&Rr(Et)}),[Ar,Et]);var Dr=(0,Dt.Z)(G);(0,c.useEffect)((function(){if(JSON.stringify(G)!=JSON.stringify(Dr)){var e,n=(0,Jn.Rt)([G]).messages,t=null==n||null===(e=n[$t])||void 0===e?void 0:e[to];(null==t?void 0:t.length)>=1&&dr(t)}}),[G,$t,to,Dr,dr]);var Br=(0,Dt.Z)(rn);(0,c.useEffect)((function(){void 0!==rn&&rn.length!==(null==Br?void 0:Br.length)&&dr(rn)}),[rn,Br,dr]);var Mr=(0,c.useMemo)((function(){var e=new Set;return null==pe||pe.forEach((function(n){var t=n.profiles;e=new Set([].concat((0,i.Z)(e),(0,i.Z)(t)))})),(0,i.Z)(e)}),[pe]),Nr=(0,c.useMemo)((function(){return(0,ce.CD)(Ro,to)}),[Ro,to]),Lr=(0,c.useMemo)((function(){return(0,ce.H6)(Ro,to)}),[Ro,to]);(0,c.useEffect)((function(){xo((0,dn.U2)(Nr,!1)),$o((0,dn.U2)(Lr,!1))}),[Nr,Lr]);var Ur=(0,c.useRef)(null),Gr=(0,c.useMemo)((function(){return(0,Z.HK)(V,(function(e){return e.uuid}))}),[V]),Fr=(0,c.useMemo)((function(){return!(null==Vn||!Vn.find((function(e){return e.upstream_blocks.includes(to)})))}),[to,Vn]),Hr=(0,c.useCallback)((function(e){var n=e.bypassOffScreen,t=e.columnIndex,o=e.rect,r=e.y;if(n||(null==o?void 0:o.y)>=(null==en?void 0:en.y)+(null==en?void 0:en.height)||(null==o?void 0:o.y)<=(null==en?void 0:en.y)){var i=new CustomEvent(Ut.Wf,{detail:{blockIndex:F,columnIndex:t,lockScroll:!0,y:r}});window.dispatchEvent(i)}}),[F,en]),Kr=!(null==jn||!jn.find((function(e){return e.uuid===to})))||(null==sr?void 0:sr.length)>=1&&Oe!==oe.uF.IDLE;(0,c.useEffect)((function(){dt(lt&&!Do&&!Uo&&_.t6.PYTHON===Vt&&(ue.qL.PYSPARK===(null==vn?void 0:vn.type)||!(null!=bn&&bn.emr_config)))}),[Vt,Uo,Do,vn,bn,lt]);var zr=ne.ZP.execution_states.list({block_uuid:void 0!==to?to:null,pipeline_uuid:void 0!==Ro?Ro:null},{refreshInterval:On&&Kr?1e3:5e3,revalidateOnFocus:!0},{pauseFetch:!On&&ht>=1||!st}),Wr=zr.data,Qr=zr.mutate,Yr=(0,c.useCallback)((function(e){var n,t,o;zn&&Hr(Qt({bypassOffScreen:yn,columnIndex:yn?2:1},(null==e?void 0:e.syncColumnPositions)||{rect:null==et||null===(n=et.current)||void 0===n?void 0:n.getBoundingClientRect(),y:null==$n||null===(t=$n.current)||void 0===t||null===(o=t.getBoundingClientRect())||void 0===o?void 0:o.y}));var i=e||{},l=i.block,u=i.code,c=i.disableReset,a=i.runDownstream,s=i.runIncompleteUpstream,d=i.runSettings,f=i.runUpstream,p=i.runTests,h=i.variables,m=p;if(null==m){var v=(l||{}).type;m=[_.tf.DATA_LOADER,_.tf.DATA_EXPORTER,_.tf.TRANSFORMER].includes(v)}Bo&&ie.Rj!==pr&&mr(ie.Rj);var b=Qt({},h||_o);(null==H?void 0:H.length)>=1&&(null==H||H.forEach((function(e){var n=e.uuid,t=null==Ye?void 0:Ye[n];Object.entries((null==t?void 0:t.variables)||{}).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],o=n[1].types;b&&t in b&&(b[t]=(0,Ft.M)(b[t],o))}))}))),null==gn||gn({block:l,code:u||Co,runDownstream:a||Fr,runIncompleteUpstream:s||!1,runSettings:d,runTests:m||!1,runUpstream:f||!1,variables:b},{skipUpdating:(null==Ho?void 0:Ho[M.H2])||(null==Ho?void 0:Ho[M.Mi])||[_.tf.SCRATCHPAD].includes($t)}),c||(tr(1+Number(nr)),ir(null),$o(!!Fe)),st&&Qr()}),[H,$t,Co,Ho,Hr,Qr,Fr,Fe,Ye,Bo,$n,et,gn,nr,yn,pr,tr,ir,mr,zn,st,_o]),Vr=(0,c.useState)(null),qr=Vr[0],Xr=Vr[1];(0,c.useEffect)((function(){Wr&&(mt((function(e){return e+1})),Xr((null==Wr?void 0:Wr.execution_states)||[]))}),[Wr,Xr,mt]),(0,c.useEffect)((function(){null!==qr&&(clearTimeout(tt.current),tt.current=setTimeout(Ct,1))}),[qr,Ct,pr]),(0,c.useEffect)((function(){Kr&&cr(Number(new Date))}),[Kr,cr]);var Jr=(0,Dt.Z)(Oe);(0,c.useEffect)((function(){Oe===oe.uF.IDLE&&Oe!==Jr&&ir(Number(new Date))}),[Oe,Jr,ir]);var $r=(0,Mt.Z)({containerRef:nn}).onDidChangeCursorPosition,ei=(0,c.useMemo)((function(){return(0,ce.h5)(sr,Wo)}),[Wo,sr]),ni=(0,ce.oI)(ei),ti=ni.hasError,oi=ni.hasOutput,ri=(0,c.useMemo)((function(){return oi||(null==sr?void 0:sr.length)>=1}),[oi,sr]),ii=(0,x.qn)($t,{blockColor:_t,theme:Xn}).accent,li=(null==no?void 0:no.length)||0,ui=(0,ye.cU)([G],V)[0],ci=ui.dynamic,ai=ui.dynamicUpstreamBlock,si=ui.reduceOutput,di=ui.reduceOutputUpstreamBlock,fi=(0,c.useMemo)((function(){return(0,ce._o)({block:G,dynamic:ci,dynamicUpstreamBlock:ai,hasError:ti,reduceOutput:si,reduceOutputUpstreamBlock:di,selected:On})}),[G,ci,ai,ti,si,di,On]),pi=fi.borderColorShareProps,hi=fi.tags,mi=(0,c.useCallback)((function(){On||(null==Tn||Tn(!1),null==wn||wn(!0))}),[On,Tn,wn]),vi=ne.ZP.blocks.pipelines.detail(Ro,ie.gM.uuid===(null==pr?void 0:pr.uuid)||ie.Jt.uuid===(null==pr?void 0:pr.uuid)?encodeURIComponent(to):null,{_format:"dbt"},{revalidateOnFocus:!0}),bi=vi.data,gi=vi.mutate,xi=(0,c.useMemo)((function(){var e;return(null==bi||null===(e=bi.block)||void 0===e?void 0:e.metadata)||{}}),[bi]),ji=(0,f.Db)(ne.ZP.blocks.pipelines.useUpdate(encodeURIComponent(Ro),encodeURIComponent(to)),{onError:function(e){var n=(0,se.qQ)(e).messages;Qo(n)},onSuccess:function(e){return(0,se.wD)(e,{callback:function(e){_e(),Se&&(null==Se||Se()),yo(Co),null!=e&&e.block&&An(null==e?void 0:e.block)},onErrorCallback:function(e,n){return Sn({errors:n,response:e})}})}}),Ci=(0,r.Z)(ji,1)[0];(0,c.useEffect)((function(){var e;return ur&&(e=setInterval((function(){return Zo(Number(new Date))}),1e3)),ko&&!Kr&&clearInterval(e),function(){return clearInterval(e)}}),[ko,Kr,ur]);var yi=(0,c.useCallback)((function(e){var n,t=(n={},(0,o.Z)(n,_.tf.CUSTOM,Object.values(_.Lq).reduce((function(n,t){return(null==e?void 0:e.color)!==t&&n.push({label:function(){return(0,j.jsx)(y.Z,{alignItems:"center",children:(0,j.jsxs)(g.ZP,{noWrapping:!0,children:["Change color to"," ",(0,j.jsx)(g.ZP,{color:(0,x.qn)(_.tf.CUSTOM,{blockColor:t}).accent,inline:!0,children:t})]})})},onClick:function(){Ci({block:Qt(Qt({},e),{},{color:t})})},uuid:t}),n}),[])),(0,o.Z)(n,_.tf.SCRATCHPAD,(0,i.Z)((0,ce.Ts)(e,V,"".concat(null==e?void 0:e.type,"/").concat(null==e?void 0:e.uuid,"/block_menu/scratchpad"),C)).map((function(e){return Qt(Qt({},e),{},{onClick:function(){return Cn().then((function(){return e.onClick()}))}})}))),n);return t[e.type]}),[C,V,Cn,Ci]),Oi=(0,c.useMemo)((function(){return Jt&&(null==Gr?void 0:Gr[Jt])}),[Gr,Jt]),ki=(0,c.useMemo)((function(){return!go&&![_.tf.CALLBACK,_.tf.CONDITIONAL,_.tf.EXTENSION].includes($t)&&(0,j.jsx)(P,{block:G,blocks:E,openSidekickView:mn,pipeline:vn})}),[E,G,$t,go,mn,vn]),Zi=(0,c.useCallback)((function(e){xe(e),$o(!1)}),[xe,$o]),Ti=(0,c.useCallback)((function(e){yo(e),null==cn||cn(e)}),[cn,yo]),Ei=(0,c.useCallback)((function(){return zn?function(){return jt()}:null}),[jt,zn]),Pi=(0,c.useCallback)((function(e){zn&&xt(!0),fn&&(null==fn||fn(e))}),[fn,xt,zn]),Si=(0,c.useCallback)((function(e){var n,t,o;return Yr(Qt(Qt({},e),{},{syncColumnPositions:Qt(Qt({},(null==e?void 0:e.syncColumnPositions)||{}),{},{rect:null==$n||null===(n=$n.current)||void 0===n?void 0:n.getBoundingClientRect(),y:null==et||null===(t=et.current)||void 0===t||null===(o=t.getBoundingClientRect())||void 0===o?void 0:o.y})}))}),[Yr]),_i=(0,c.useMemo)((function(){return{blockIndex:F,blockOutputRef:K,collapsed:Jo,errorMessages:Wo,isHidden:$e,mainContainerWidth:tn,messages:sr,runCount:nr,runEndTime:rr,runStartTime:ur,runningBlocks:jn,setOutputBlocks:In,setSelectedOutputBlock:Rn}}),[F,K,Jo,Wo,$e,tn,sr,nr,rr,ur,jn,In,Rn]),Ii=function(e){var n=(0,Je.Z)({},e),t=(0,c.useRef)(null),o=(0,c.useState)(null),r=o[0],i=o[1],l=(0,c.useState)(null),u=l[0],a=l[1],s=(0,c.useState)(!1),d=s[0],f=s[1],p=(0,c.useState)(null),h=p[0],m=p[1],v=n.autocompleteProviders,b=n.block,g=n.blocks,x=n.content,C=n.executionState,y=n.height,O=n.interruptKernel,k=n.onChange,Z=n.onContentSizeChangeCallback,T=n.onDidChangeCursorPosition,E=n.onMountCallback,P=n.openSidekickView,S=n.outputProps,I=n.pipeline,w=n.placeholder,A=n.runBlockAndTrack,R=(n.savePipelineContent,n.scrollTogether),D=n.selected,B=n.setErrors,M=n.setSelected,N=n.setTextareaFocused,L=n.showConfigureProjectModal,U=n.sideBySideEnabled,G=n.status,F=n.textareaFocused,H=n.theme,K=n.updatePipeline,z=S||{},W=z.blockIndex,Q=z.blockOutputRef,Y=z.collapsed,V=z.errorMessages,q=z.isHidden,X=z.mainContainerWidth,J=z.messages,$=z.runCount,ee=z.runEndTime,ne=z.runStartTime,te=z.runningBlocks,oe=z.setOutputBlocks,re=z.setSelectedOutputBlock,ie=(0,wt.Z)(),le=ie.featureEnabled,ce=ie.featureUUIDs,ae=ie.project,se=(0,c.useMemo)((function(){return[ue.qL.PYTHON,ue.qL.PYSPARK].includes(null==I?void 0:I.type)&&(null==le?void 0:le(null==ce?void 0:ce.DBT_V2))}),[le,ce,I]),de=(b||{type:null}).type,fe=(0,c.useMemo)((function(){return se?_.tf.DBT===de?It(n):void 0:null}),[se,n,de]),pe=(0,c.useMemo)((function(){return se&&null!=fe&&fe.editor?(0,j.jsx)(xn,Rt({autocompleteProviders:v,block:b,content:x,height:y,onChange:k,onContentSizeChangeCallback:Z,onDidChangeCursorPosition:T,onMountCallback:E,pipeline:I,placeholder:w,project:ae,runBlockAndTrack:A,selected:D,setSelected:M,setTextareaFocused:N,sideMenuVisible:d,showConfigureProjectModal:L,textareaFocused:F,theme:H,updatePipeline:K},(null==fe?void 0:fe.editor)||{})):null}),[v,b,fe,x,se,y,k,Z,T,E,I,w,ae,A,D,M,N,d,L,F,H,K]);return{editor:(0,c.useMemo)((function(){var e;return pe?(0,j.jsx)(bt,{renderTabContent:null==fe||null===(e=fe.headerTabContent)||void 0===e?void 0:e.renderTabContent,selectedHeaderTab:r,sideMenuVisible:d,children:pe}):null}),[fe,pe,r,d]),header:(0,c.useMemo)((function(){return se?null!=fe&&fe.header?(0,j.jsx)(Nn,Rt({block:b,executionState:C,interruptKernel:O,ref:t,selected:D,selectedHeaderTab:r,setSelectedHeaderTab:i,setSideMenuVisible:f,setSubheaderVisible:m,sideMenuVisible:d,status:G,subheaderVisible:h,theme:H},(null==fe?void 0:fe.header)||{})):void 0:null}),[b,fe,se,C,O,D,r,i,f,m,d,G,h,H]),output:(0,c.useMemo)((function(){return se?null!=fe&&fe.output?(0,j.jsx)(pt,Rt({block:b,blockIndex:W,blockOutputRef:Q,blocks:g,collapsed:Y,errorMessages:V,executionState:C,headerRef:t,isHidden:q,mainContainerWidth:X,messages:J,openSidekickView:P,pipeline:I,runCount:$,runEndTime:ee,runStartTime:ne,runningBlocks:te,scrollTogether:R,selected:D,selectedOutputTabs:u,setErrors:B,setOutputBlocks:oe,setSelectedOutputBlock:re,setSelectedOutputTabs:a,sideBySideEnabled:U,subheaderVisible:h,theme:H},(null==fe?void 0:fe.output)||{})):void 0:null}),[b,W,Q,g,fe,Y,se,V,C,q,X,J,P,I,$,ee,ne,te,R,D,u,B,oe,re,a,U,h,H])}}({addNewBlock:C,allowCodeBlockShortcuts:B,autocompleteProviders:fo,block:G,blocks:V,codeCollapsed:go,content:Co,dbtConfigurationOptions:ve,deleteBlock:Zi,disableShortcuts:Ce,executionState:Oe,height:Be,hideRunButton:Ke,interruptKernel:Ve,onChange:Ti,onContentSizeChangeCallback:Ei,onDidChangeCursorPosition:$r,onMountCallback:Pi,openSidekickView:mn,outputCollapsed:Jo,outputProps:_i,pipeline:vn,placeholder:Bo&&_.t6.YAML===Vt?"e.g. --select ".concat(kr||"project","/models --exclude ").concat(kr||"project","/models/some_dir"):"Start typing here...",runBlockAndTrack:Si,savePipelineContent:Cn,scrollTogether:yn,selected:On,setCodeCollapsed:xo,setErrors:Sn,setHiddenBlocks:yt,setOutputCollapsed:$o,setScrollTogether:Bn,setSelected:wn,setSideBySideEnabled:Mn,setTextareaFocused:Dn,showConfigureProjectModal:Gn,sideBySideEnabled:zn,status:ut,textareaFocused:Wn,theme:Xn,updatePipeline:Qn}),wi=Ii.editor,Ai=Ii.header,Ri=Ii.output,Di="CodeBlock/".concat(to),Bi=(0,hn.y)(),Mi=Bi.registerOnKeyDown,Ni=Bi.unregisterOnKeyDown;(0,c.useEffect)((function(){return function(){Ni(Di)}}),[Ni,Di]),Mi(Di,(function(e,n){Ce&&!B||ct&&Ai||On&&!Ke&&((0,pn.y)([le.zX,le.Uq],n)||(0,pn.y)([le.PQ,le.Uq],n)?Yr({block:G}):(0,pn.y)([le.XR,le.Uq],n)&&C&&(e.preventDefault(),C({language:Vt,type:$t,upstream_blocks:[to]}),Yr({block:G})))}),[C,G,Ai,ct,Ke,Yr,On,Ci]);var Li=(0,c.useMemo)((function(){if(_.tf.GLOBAL_DATA_PRODUCT===$t){var e=null==lo?void 0:lo[null==io?void 0:io.uuid];return(0,j.jsxs)(x.y9,{noMargin:!0,children:[(0,j.jsxs)(b.Z,{mb:L.cd,mt:1,children:[(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"UUID"}),(0,j.jsx)(g.ZP,{monospace:!0,children:null==e?void 0:e.uuid})]}),(0,j.jsxs)(b.Z,{mb:L.cd,children:[(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:(0,U.kC)((null==e?void 0:e.object_type)||"")}),(0,j.jsx)(u(),{as:"/pipelines/".concat(null==e?void 0:e.object_uuid,"/edit"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,j.jsx)(X.Z,{monospace:!0,openNewWindow:!0,children:null==e?void 0:e.object_uuid})})]}),(0,j.jsxs)(b.Z,{pb:1,children:[(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"Override global data product settings"}),(0,j.jsx)(X.Z,{monospace:!0,onClick:function(){return mn(k.cH.BLOCK_SETTINGS)},children:"Customize block settings"})]})]})}if(ct&&wi)return wi;var n,t;if(!Uo||_.t6.PYTHON===Vt){var o=!!Jt;n=(0,j.jsx)(R.Z,{autoHeight:!0,autocompleteProviders:o?null:fo,block:G,height:Be,language:Vt,onChange:o?null:function(e){yo(e),null==cn||cn(e)},onContentSizeChangeCallback:zn?function(){return jt()}:null,onDidChangeCursorPosition:o?null:$r,onMountCallback:function(e){zn&&xt(!0),fn&&(null==fn||fn(e))},placeholder:o?null:Bo&&_.t6.YAML===Vt?"e.g. --select ".concat(kr||"project","/models --exclude ").concat(kr||"project","/models/some_dir"):"Start typing here...",readOnly:o,selected:o?null:On,setSelected:o?null:wn,setTextareaFocused:o?null:Dn,shortcuts:Ke||o?[]:[function(e,n){return(0,Tt.Q)(e,(function(){Ke||Yr({block:G,code:n.getValue()})}))}],textareaFocused:o?null:Wn,uuid:"".concat(null==G?void 0:G.uuid,"/").concat(null==G?void 0:G.type),value:o?null==G?void 0:G.content:Co,width:"100%"}),t=Wt&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(me.Z,{}),(0,j.jsxs)(b.Z,{mt:1,children:[(0,j.jsxs)(x.y9,{normalPadding:!0,children:[(0,j.jsx)(g.ZP,{small:!0,children:"Callback block: define @on_success or @on_failure callbacks for this block."}),(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:["kwargs",(0,j.jsxs)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:[" ","→"," "]}),"global variables"]})]}),(0,j.jsx)(R.Z,{autoHeight:!0,autocompleteProviders:fo,language:"python",onChange:function(e){Rr(e),null==un||un(e)},onDidChangeCursorPosition:$r,placeholder:"Start typing here...",selected:On,setSelected:wn,setTextareaFocused:Dn,textareaFocused:Wn,value:Ar,width:"100%"})]})]})}return Uo?(0,j.jsx)(Te,{block:G,blockContent:Co,blocksMapping:Gr,callbackEl:t,codeEditor:n,hasElementsBelow:(null==sr?void 0:sr.length)>=1||!!ki,onChangeBlock:function(e){return Ci({block:e})},openSidekickView:mn,savePipelineContent:Cn,setContent:yo,showDataIntegrationModal:Fn}):(0,j.jsxs)(b.Z,{py:Uo?0:L.cd,children:[n,t]})}),[fo,G,jt,Bo,Cn,Fn,Ci,ki,Vt,$t,Gr,Ar,wi,ct,Co,kr,io,lo,Wt,Be,Ke,Uo,sr,un,cn,$r,fn,mn,Jt,Yr,On,yo,xt,wn,Dn,zn,Wn]);(0,c.useEffect)((function(){N&&po({python:(0,Xe.Z)({autocompleteItems:N,block:G,blocks:V,pipeline:vn})})}),[N,G,V,vn]);var Ui=(0,c.useMemo)((function(){var e;return Bo?e=(0,j.jsx)(I.Z,{onClickTab:function(e){mr(e),ie.gM.uuid!==e.uuid&&ie.Jt.uuid!==e.uuid||gi()},selectedTabUUID:null==pr?void 0:pr.uuid,tabs:(0,ie.Xy)(G),underlineColor:(0,x.qn)(_.tf.DBT,{theme:Xn}).accent,underlineStyle:!0}):st&&![_.tf.CALLBACK,_.tf.CONDITIONAL,_.tf.EXTENSION].includes($t)&&(e=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(I.Z,{onClickTab:function(e){mr(e)},selectedTabUUID:null==pr?void 0:pr.uuid,tabs:(0,ie.iz)(G),underlineColor:ii,underlineStyle:!0}),(0,j.jsx)(me.Z,{medium:!0})]})),e?(0,j.jsx)(x.HS,{children:e}):null}),[G,$t,ii,gi,Bo,pr,st,Xn,mr]),Gi=(0,c.useMemo)((function(){if(Kr&&ko&&ko>ur){var e=(0,j.jsxs)(g.ZP,{muted:!0,children:["".concat(Math.round((ko-ur)/1e3)),"s"]});return Uo&&_.t6.PYTHON!==Vt?(0,j.jsx)(Yn.Nk,{children:(0,j.jsx)(b.Z,{p:1,children:e})}):(0,j.jsx)(x.HC,{children:e})}return null}),[Vt,ko,Uo,Kr,ur]),Fi=(0,c.useMemo)((function(){var e,n,t;oe.uF.QUEUED===Oe&&(e=(0,j.jsx)($.Z,{color:null==Xn||null===(n=Xn.content)||void 0===n?void 0:n.active,type:"cylon"}));oe.uF.BUSY===Oe&&(e=(0,j.jsx)($.Z,{color:null==Xn||null===(t=Xn.content)||void 0===t?void 0:t.active}));var r,i=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{childrenBelowTabs:null,hideOutput:!1},t=n.childrenBelowTabs,r=n.hideOutput;return(0,j.jsx)(D.Z,Qt(Qt({},pi),{},{block:G,blockIndex:F,blockMetadata:xi,buttonTabs:st?null:Ui,childrenBelowTabs:t,collapsed:Jo,hasOutput:ri,hideOutput:r,isInProgress:Kr,mainContainerWidth:tn,messages:ei,messagesAll:sr,onClickSelectBlock:zn?$e&&yt?function(){return yt((function(e){return Qt(Qt({},e),{},(0,o.Z)({},to,!$e))}))}:mi:null,openSidekickView:mn,outputRowNormalPadding:!0,pipeline:vn,ref:K,runCount:nr,runEndTime:rr,runStartTime:ur,scrollTogether:yn,selected:On&&(!$e||!zn),selectedTab:pr,setCollapsed:zn?null:function(e){$o((function(){return(0,dn.t8)(Lr,e),e}))},setErrors:Sn,setOutputBlocks:In,setSelectedOutputBlock:Rn,setSelectedTab:mr,showBorderTop:zn,sideBySideEnabled:zn,sparkEnabled:st,children:zn&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{px:L.cd,py:1,children:(0,j.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsx)(X.Z,{color:ii,monospace:!0,onClick:function(){var e,n,t;Hr({bypassOffScreen:!0,columnIndex:0,rect:null==$n||null===(e=$n.current)||void 0===e?void 0:e.getBoundingClientRect(),y:null==et||null===(n=et.current)||void 0===n||null===(t=n.getBoundingClientRect())||void 0===t?void 0:t.y})},preventDefault:!0,children:null==G?void 0:G.uuid}),(0,j.jsx)(b.Z,{mr:L.cd}),e,!e&&(0,j.jsx)(m.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){var e,n,t;return Yr({block:G,syncColumnPositions:{rect:null==$n||null===(e=$n.current)||void 0===e?void 0:e.getBoundingClientRect(),y:null==et||null===(n=et.current)||void 0===n||null===(t=n.getBoundingClientRect())||void 0===t?void 0:t.y}})},children:(0,j.jsx)(A.Z,{color:ii,size:3*L.iI,children:(0,j.jsx)(re.PlayButtonFilled,{black:!0,size:1.5*L.iI})})})]})}),ri&&(0,j.jsx)(me.Z,{medium:!0})]})}))},l=ie.aL.uuid===(null==pr?void 0:pr.uuid);return ct&&Ri?Ri:st&&![_.tf.CALLBACK,_.tf.CONDITIONAL,_.tf.EXTENSION].includes(null==G?void 0:G.type)?(l?r=(0,j.jsx)(Ge,{executionStates:qr,isInProgress:Kr}):ie.qC.uuid===(null==pr?void 0:pr.uuid)?r=(0,j.jsx)(Me,{executionStates:qr,isInProgress:Kr}):ie.p.uuid===(null==pr?void 0:pr.uuid)?r=(0,j.jsx)(ze,{executionStates:qr}):ie.SD.uuid===(null==pr?void 0:pr.uuid)&&(r=(0,j.jsx)(He,{disableGraph:!On,executionStates:qr,overrideScrollForGraph:On})),zn?i({childrenBelowTabs:!$e&&(0,j.jsxs)(j.Fragment,{children:[Ui,(0,j.jsx)(me.Z,{medium:!0}),(0,j.jsx)("div",{ref:nt,children:r})]}),hideOutput:!l||$e}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(x.jv,Qt(Qt({},pi),{},{className:On&&Wn?"selected":null,hideBorderBottom:l&&ri,lightBackground:!0,noPadding:!0,children:[Ui,(0,j.jsx)(me.Z,{light:!0}),r]})),l&&i()]})):i()}),[G,qr,F,xi,K,pi,Ui,Ri,ct,ii,Hr,Oe,ri,$e,Kr,tn,sr,ei,mi,mn,Jo,Lr,vn,mr,$n,et,Yr,nr,to,rr,ur,Xn,yn,On,pr,Sn,yt,In,$o,Rn,zn,st,Wn]),Hi=(0,c.useCallback)((function(){return vo(!1)}),[]),Ki=(0,c.useRef)(null),zi=(0,c.useCallback)((function(e){clearTimeout(Ki.current),Ko((function(n){return Qt(Qt({},n),e)})),Ki.current=setTimeout((function(){var n=Qt(Qt({},Ho),e);(void 0!==n[M.cH]&&"undefined"!==n[M.sc]||"undefined"!==n[M.Mi]||"undefined"!==n[M.H2]||void 0!==n[M.Mv]||void 0!==n[M.eW]||void 0!==n[M.mW])&&Cn({block:{configuration:n,uuid:to}})}),1e3)}),[to,Ho,Cn]),Wi=Lt.zJ.BIGQUERY===Ho[M.cH]||Lt.zJ.SNOWFLAKE===Ho[M.cH],Qi=(0,c.useMemo)((function(){return(null==V?void 0:V.length)||0}),[V]),Yi=(0,c.useMemo)((function(){return Co?(0,j.jsx)(Ae.Z,{children:Co}):(0,j.jsx)(b.Z,{px:1,children:(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,children:"Double-click to edit"})})}),[Co]);(0,c.useEffect)((function(){Lo&&Vo&&!On&&vr(!1)}),[Vo,Lo,On,vr]);var Vi=(0,c.useMemo)((function(){return(0,j.jsx)(We.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){Tn(!1)}),300)},onChange:function(e){Tn(!0),zi((0,o.Z)({},M.mW,+e.target.value)),e.preventDefault()},onClick:Qe.j,onFocus:function(){Tn(!0)},small:!0,type:"number",value:Ho[M.mW]||"",width:11*L.iI})}),[Ho,Tn,zi]),qi=(0,c.useMemo)((function(){return ae>=1}),[ae]),Xi=(0,c.useMemo)((function(){return de>=1}),[de]),Ji=(0,c.useMemo)((function(){return fe>=1}),[fe]),$i=(0,c.useMemo)((function(){var e=3*x.IN;return yn?Ji&&(e+=Zn.nn):(qi&&(e+=Zn.nn),Xi&&(e+=Zn.nn)),(tn-e)/2}),[qi,Xi,Ji,tn,yn]),el=(0,c.useMemo)((function(){var e;if(Ot)return zn&&(e=0,yn?Ji&&(e=18):(qi&&(e+=18),Xi&&(e+=2))),null==H?void 0:H.map((function(n,t){return(0,j.jsx)("div",{children:(0,j.jsx)(S.Z,{blockInteraction:n,contained:!0,containerRef:zn?$n:te,containerWidth:zn?$i:tn,interaction:null==Ye?void 0:Ye[null==n?void 0:n.uuid],setVariables:Io,showVariableUUID:!0,variables:_o,widthOffset:e})},"".concat(null==n?void 0:n.uuid,"-").concat(t))}))}),[H,qi,Xi,Ji,te,Ye,Ot,tn,yn,Io,zn,_o,$i]);(0,c.useEffect)((function(){(0,Kt.h)()}),[el,Eo,_o]);var nl,tl=(0,c.useMemo)((function(){return Ot&&null!=H&&H.length?(0,j.jsx)(x.HS,{children:(0,j.jsx)(b.Z,{px:L.cd,children:(0,j.jsx)(I.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return Po(n)},selectedTabUUID:Eo,tabs:ie.C4,underlineColor:(0,x.qn)(null==G?void 0:G.type,{blockColor:null==G?void 0:G.color,theme:Xn}).accent,underlineStyle:!0})})}):null}),[G,H,Ot,Eo,Po,Xn]),ol=(0,c.useMemo)((function(){if(!Ot)return null;var e=[],n={};if(null==H||H.forEach((function(t){var o=t.uuid,r=null==Ye?void 0:Ye[o],i=null==r?void 0:r.variables;Object.keys(i||{}).forEach((function(t){null!=n&&n[t]||(e.push(t),n[t]=!0)}))})),null==e||!e.length)return null;var t=(null==e?void 0:e.length)||0;return(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"Interaction variables:"}),(0,j.jsx)(b.Z,{mr:L.cd}),null==e?void 0:e.map((function(e,n){return(0,j.jsx)(b.Z,{mr:1,children:(0,j.jsxs)(g.ZP,{default:!0,monospace:!0,small:!0,children:[e,t>=2&&n<t-1&&(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:","})]})},e)}))]})}),[H,Ye,Ot]),rl=(0,c.useCallback)((function(e,n){return(0,j.jsx)(p.Z,{addNewBlock:function(n){var t=n.content,o=n.configuration,r=(0,ce.eY)(e,n),i=(0,ce.fA)(vn,e,n).map((function(e){var n=Qt({},Gr[e]||{}),t=n.upstream_blocks;return t&&(n.upstream_blocks=t.filter((function(e){return e!==to}))),n}));return[_.tf.DATA_LOADER,_.tf.TRANSFORMER].includes($t)&&_.tf.SCRATCHPAD===n.type&&(t="from mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable('".concat(Ro,"', '").concat(to,"', 'output_0')")),t=(0,Gt.X7)(n,t),_.t6.SQL===Vt&&(o=Qt(Qt({},(0,zt.GL)(oo,[M.cH,M.Sv,M.sc,M.BD,M.nq])),o)),_.t6.SQL===n.language&&(t=(0,Gt.SF)(t)),C(Qt(Qt({},n),{},{configuration:o,content:t,upstream_blocks:r}),i)},blockIdx:n,blockTemplates:W,compact:!0,hideCustom:Do,hideDbt:Do,onClickAddSingleDBTModel:an,pipeline:vn,project:bn,setAddNewBlockMenuOpenIdx:kn,setCreatingNewDBTModel:En,showBlockBrowserModal:Ln,showBrowseTemplates:Un,showConfigureProjectModal:Gn,showGlobalDataProducts:Hn})}),[oo,C,Vt,W,$t,to,Gr,Do,an,vn,Ro,bn,kn,Ln,En,Un,Gn,Hn]);if($e)nl=(0,j.jsx)(we,{block:G,blocks:V,onClick:function(){return yt((function(e){return Qt(Qt({},e),{},(0,o.Z)({},to,!$e))}))}});else{var il,ll,ul,cl=function(e){return(0,j.jsx)(x.nz,Qt(Qt({},Qt(Qt({},pi),xr)),{},{className:"code-block-header-sticky",noSticky:zn,onClick:function(){return mi()},ref:je?null:jr,zIndex:zn?null:Qi+1-(F||0),children:e}))};nl=(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{style:{position:"relative"},children:[ct&&Ai&&cl(Ai),(!ct||!Ai)&&cl((0,j.jsx)(b.Z,{py:1,children:(0,j.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsx)(b.Z,{pr:1}),(0,j.jsxs)(y.Z,{alignItems:"center",flex:1,children:[(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(h.Z,{monospace:!0,children:_.tf.GLOBAL_DATA_PRODUCT===(null==G?void 0:G.type)?"GDP":_.dO[Vt]}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(A.Z,{color:ii,size:1.5*L.iI,square:!0}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(Y.Z,{items:yi(G),onClickCallback:Hi,onClickOutside:Hi,open:mo,parentRef:Ur,uuid:"".concat(null==G?void 0:G.type,"/").concat(null==G?void 0:G.uuid,"/CodeBlock/block_menu"),children:(0,j.jsx)(g.ZP,{color:ii,monospace:!0,noWrapping:!0,children:null===(il=Bo?_.tf.DBT:_.V4[$t])||void 0===il?void 0:il.toUpperCase()})}),!Ue&&[_.tf.CUSTOM,_.tf.SCRATCHPAD].includes($t)&&(0,j.jsxs)(j.Fragment,{children:[" ",(0,j.jsx)(m.ZP,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return vo(!0)},transparent:!0,children:(0,j.jsx)(re.ArrowDown,{muted:!0})})]})]}),!Ue&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(re.FileFill,{size:1.5*L.iI}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsxs)(v.ZP,{alignItems:"center",children:[Bo&&_.t6.YAML!==Vt&&(0,j.jsx)(ee.Z,{block:!0,label:(0,Ht.$1)(G,{fullPath:!0}),size:null,children:(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,children:(0,Ht.$1)(G)})}),(!Bo||_.t6.YAML===Vt)&&(0,j.jsx)(X.Z,{default:!0,monospace:!0,noWrapping:!0,onClick:function(){return Kn(G,qt)},preventDefault:!0,sameColorAsText:!0,children:to})]}),!_.iZ.includes($t)&&tn>800&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(ee.Z,{appearBefore:!0,block:!0,label:"\n                              ".concat((0,U._6)("parent block",li),". ").concat(0===li?"Click to select 1 or more blocks to depend on.":"Edit parent blocks.","\n                            "),size:null,widthFitContent:li>=1,children:(0,j.jsx)(m.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){wn(!0),Pn({upstreamBlocks:{block:G,values:null==no?void 0:no.map((function(e){return{uuid:e}}))}})},children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[0===li&&(0,j.jsx)(re.ParentEmpty,{size:3*L.iI}),li>=1&&(0,j.jsx)(re.ParentLinked,{size:3*L.iI}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsxs)(g.ZP,{default:!0,monospace:li>=1,noWrapping:!0,small:!0,underline:0===li,children:[0===li&&"Edit parents",li>=1&&(0,U._6)("parent",li)]})]})})})]}),ro>=2&&tn>725&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(ee.Z,{block:!0,label:"This block is used in ".concat(ro," pipelines."),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(re.DiamondShared,{size:14}),(0,j.jsx)(b.Z,{ml:1}),(0,j.jsxs)(X.Z,{default:!0,monospace:!0,noWrapping:!0,onClick:function(){return mn(k.cH.BLOCK_SETTINGS)},preventDefault:!0,small:!0,children:[ro," pipelines"]})]})})]})]})]}),gn&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{pr:L.cd}),(0,j.jsx)(he,{addNewBlock:C,addWidget:T,block:G,blockContent:Co,blocks:V,deleteBlock:xe,executionState:Oe,fetchFileTree:Se,fetchPipeline:_e,hideExtraButtons:Ne,interruptKernel:Ve,isEditingBlock:Vo,openSidekickView:mn,pipeline:vn,project:bn,runBlock:Ke?null:Yr,savePipelineContent:Cn,setBlockContent:function(e){yo(e),null==cn||cn(e)},setErrors:Sn,setIsEditingBlock:vr,setOutputCollapsed:$o,showConfigureProjectModal:Gn})]}),!zn&&!Ne&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{pr:L.cd}),(0,j.jsx)(m.ZP,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){xo((function(e){return(0,dn.t8)(Nr,!e),!e})),go||$o((function(){return(0,dn.t8)(Lr,!0),!0}))},transparent:!0,children:go?(0,j.jsx)(re.ChevronDown,{muted:!0,size:2*L.iI}):(0,j.jsx)(re.ChevronUp,{muted:!0,size:2*L.iI})})]}),(0,j.jsx)(y.Z,{children:(0,j.jsx)("div",{style:{height:1,width:L.iI}})})]})})),(0,j.jsx)(x.Nk,{onClick:function(){return mi()},children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(x.jv,Qt(Qt({},pi),{},{className:On&&Wn?"selected":null,hideBorderBottom:!zn&&(!!Ui||ri),lightBackground:Lo&&!Vo,noPadding:!0,onClick:mi,onDoubleClick:function(){Lo&&!Vo&&vr(!0)},children:[(0,j.jsx)(x.PB,{}),(!ct||!Ai)&&hi.length>=1&&(0,j.jsx)(x.HS,{children:(0,j.jsx)(b.Z,{p:1,children:(0,j.jsx)(v.ZP,{children:null==hi?void 0:hi.map((function(e,n){var t=e.description,o=e.title;return(0,j.jsx)(b.Z,{ml:n>=1?1:0,children:(0,j.jsx)(ee.Z,{block:!0,description:t,size:null,widthFitContent:!0,children:(0,j.jsx)(h.Z,{children:o})})},o)}))})})}),(!ct||!Ai)&&!Le&&Bo&&!go&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mt:1}),(0,j.jsx)(x.y9,{noMargin:!0,normalPadding:!0,children:(0,j.jsxs)(b.Z,{pb:1,children:[(0,j.jsx)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,j.jsxs)(y.Z,{alignItems:"center",children:[_.t6.YAML===Vt&&(0,j.jsx)(De.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){Tn(!1)}),300)},onChange:function(e){var n;zi((n={},(0,o.Z)(n,M.Mv,""),(0,o.Z)(n,M.eW,e.target.value),n)),e.preventDefault()},onClick:Qe.j,onFocus:function(){Tn(!0)},placeholder:"Project",small:!0,value:Ho[M.eW]||"",children:Object.keys(Or||{}).map((function(e){return(0,j.jsx)("option",{value:e,children:e},e)}))}),_.t6.YAML!==Vt&&(0,j.jsx)(g.ZP,{monospace:!0,small:!0,children:kr}),(0,j.jsx)(b.Z,{mr:2}),(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"Target"}),(0,j.jsx)("span",{children:" "}),!_r&&(0,j.jsx)(De.Z,{compact:!0,disabled:!kr,monospace:!0,onBlur:function(){return setTimeout((function(){Tn(!1)}),300)},onChange:function(e){zi((0,o.Z)({},M.Mv,e.target.value)),e.preventDefault()},onClick:Qe.j,onFocus:function(){Tn(!0)},placeholder:Pr,small:!0,value:Er||"",children:null==Tr?void 0:Tr.map((function(e){return(0,j.jsx)("option",{value:e,children:e},e)}))}),_r&&(0,j.jsx)(We.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){Tn(!1)}),300)},onChange:function(e){zi((0,o.Z)({},M.Mv,e.target.value)),e.preventDefault()},onClick:Qe.j,onFocus:function(){Tn(!0)},placeholder:kr?(null==Zr||null===(ll=Zr[0])||void 0===ll?void 0:ll.target)||"Enter target":"Select project first",small:!0,value:Er||"",width:21*L.iI}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsx)(ee.Z,{block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["Manually type the name of the target you want to use in the profile.",(0,j.jsx)("br",{}),"Interpolate environment variables and global variables using the following syntax:",(0,j.jsx)("br",{}),(0,j.jsx)(g.ZP,{default:!0,inline:!0,monospace:!0,children:"{{ env_var('NAME') }}"})," ","or"," ",(0,j.jsx)(g.ZP,{default:!0,inline:!0,monospace:!0,children:"{{ variables('NAME') }}"})]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(w.Z,{checked:_r,label:(0,j.jsx)(g.ZP,{muted:!0,small:!0,children:"Manually enter target"}),onClick:function(e){(0,Qe.j)(e),Ir(!_r),_r&&zi((0,o.Z)({},M.Mv,null))}}),(0,j.jsx)("span",{children:" "}),(0,j.jsx)(re.Info,{muted:!0})]})})})]})}),_.t6.YAML===Vt&&(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsxs)(y.Z,{alignItems:"center",flex:1,children:[(0,j.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:"dbt"}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(We.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){Tn(!1)}),300)},onChange:function(e){zi((0,o.Z)({},M.Pi,Qt(Qt({},null==Ho?void 0:Ho[M.Pi]),{},(0,o.Z)({},M.pA,e.target.value)))),e.preventDefault()},onClick:Qe.j,onFocus:function(){Tn(!0)},placeholder:"command",small:!0,value:(null==Ho||null===(ul=Ho[M.Pi])||void 0===ul?void 0:ul[M.pA])||"",width:10*L.iI}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(g.ZP,{monospace:!0,small:!0,children:"[type your --select and --exclude syntax below]"}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:["(paths start from"," ",(null==Ho?void 0:Ho[M.eW])||"project"," ","folder)"]})]}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(g.ZP,{muted:!0,small:!0,children:(0,j.jsx)(X.Z,{href:"https://docs.getdbt.com/reference/node-selection/syntax#examples",openNewWindow:!0,small:!0,children:"Examples"})}),(0,j.jsx)(b.Z,{mr:1})]})})]})})]}),!Le&&Mo&&!go&&!Bo&&(0,j.jsx)(x.y9,{normalPadding:!0,children:(0,j.jsxs)(v.ZP,{flexWrap:"wrap",children:[(0,j.jsxs)(v.ZP,{style:{marginTop:"8px"},children:[(0,j.jsx)(De.Z,{compact:!0,label:"Connection",onChange:function(e){return zi((0,o.Z)({},M.cH,e.target.value))},onClick:Qe.j,small:!0,value:Ho[M.cH],children:null==pe?void 0:pe.map((function(e){var n=e.id,t=e.value;return(0,j.jsx)("option",{value:t,children:n},n)}))}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(De.Z,{compact:!0,label:"Profile",onChange:function(e){return zi((0,o.Z)({},M.sc,e.target.value))},onClick:Qe.j,small:!0,value:Ho[M.sc],children:null==Mr?void 0:Mr.map((function(e){return(0,j.jsx)("option",{value:e,children:e},e)}))}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsx)(ee.Z,{block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["If checked, you’ll have to write your own custom",(0,j.jsx)("br",{}),"CREATE TABLE commands and INSERT commands.",(0,j.jsx)("br",{}),"Separate your commands using a semi-colon:"," ",(0,j.jsx)(g.ZP,{default:!0,inline:!0,monospace:!0,children:";"})]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(w.Z,{checked:Ho[M.Mi],label:(0,j.jsx)(g.ZP,{muted:!0,small:!0,children:"Use raw SQL"}),onClick:function(e){(0,Qe.j)(e),zi((0,o.Z)({},M.Mi,!Ho[M.Mi]))}}),(0,j.jsx)("span",{children:" "}),(0,j.jsx)(re.Info,{muted:!0})]})})}),(null==Ho?void 0:Ho[M.Mi])&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsx)(ee.Z,{block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["By default, Mage will preprocess your query",(0,j.jsx)("br",{}),"commands. Toggle this feature to disable",(0,j.jsx)("br",{}),"preprocessing"]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(w.Z,{checked:null==Ho?void 0:Ho[M.H2],label:(0,j.jsx)(g.ZP,{muted:!0,small:!0,children:"Disable query preprocessing"}),onClick:function(e){(0,Qe.j)(e),zi((0,o.Z)({},M.H2,!(null!=Ho&&Ho[M.H2])))}}),(0,j.jsx)("span",{children:" "}),(0,j.jsx)(re.Info,{muted:!0})]})})})]}),!Ho[M.Mi]&&(0,j.jsxs)(j.Fragment,{children:[Wi&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsx)(We.Z,{compact:!0,label:"Database",monospace:!0,onBlur:function(){return setTimeout((function(){Tn(!1)}),300)},onChange:function(e){zi((0,o.Z)({},M.Sv,e.target.value)),e.preventDefault()},onClick:Qe.j,onFocus:function(){Tn(!0)},small:!0,value:Ho[M.Sv],width:10*L.iI})})]}),(0,j.jsx)(b.Z,{mr:1}),![Ee.CLICKHOUSE,Ee.MYSQL].includes(Ho[M.cH])&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ee.Z,{block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["Schema that is used when creating a table and inserting values.",(0,j.jsx)("br",{}),"This field is required."]}),size:null,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsx)(We.Z,{compact:!0,label:"Schema",monospace:!0,onBlur:function(){return setTimeout((function(){Tn(!1)}),300)},onChange:function(e){zi((0,o.Z)({},M.BD,e.target.value)),e.preventDefault()},onClick:Qe.j,onFocus:function(){Tn(!0)},small:!0,value:Ho[M.BD],width:10*L.iI})})}),(0,j.jsx)(b.Z,{mr:1})]}),(0,j.jsx)(ee.Z,{block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["This value will be used as the table name.",(0,j.jsx)("br",{}),"If blank, the default table name will be:",(0,j.jsx)("br",{}),(0,j.jsxs)(g.ZP,{inline:!0,monospace:!0,children:[Ro,"_",to]}),(0,j.jsx)("br",{}),"This field is optional."]}),size:null,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsx)(We.Z,{compact:!0,label:"Table (optional)",monospace:!0,onBlur:function(){return setTimeout((function(){Tn(!1)}),300)},onChange:function(e){zi((0,o.Z)({},M.m$,e.target.value)),e.preventDefault()},onClick:Qe.j,onFocus:function(){Tn(!0)},small:!0,value:Ho[M.m$],width:20*L.iI})})})]}),(0,j.jsx)(b.Z,{mr:1})]}),!Ho[M.Mi]&&(0,j.jsxs)(v.ZP,{alignItems:"center",style:{marginTop:"8px"},children:[(0,j.jsx)(ee.Z,{block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["Limit the number of results that are returned",(0,j.jsx)("br",{}),"when running this block in the notebook.",(0,j.jsx)("br",{}),"This limit won’t affect the number of results",(0,j.jsx)("br",{}),"returned when running the pipeline end-to-end."]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(re.Info,{muted:!0}),(0,j.jsx)("span",{children:" "}),(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"Limit"}),(0,j.jsx)("span",{children:" "})]})}),Vi,(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(ee.Z,{autoWidth:!0,block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["How do you want to handle existing data with the same",Wi?" database,":""," schema, and table name?",(0,j.jsx)("br",{}),(0,j.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,children:"Append"}),": add rows to the existing table.",(0,j.jsx)("br",{}),(0,j.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,children:"Replace"}),": delete the existing data.",(0,j.jsx)("br",{}),(0,j.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,children:"Fail"}),": raise an error during execution."]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(re.Info,{muted:!0}),(0,j.jsx)("span",{children:" "}),(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"Write policy:"}),(0,j.jsx)("span",{children:" "}),(0,j.jsx)(De.Z,{compact:!0,label:"strategy",onChange:function(e){return zi((0,o.Z)({},M.nq,e.target.value))},onClick:Qe.j,small:!0,value:Ho[M.nq],children:null==Pe?void 0:Pe.map((function(e){return(0,j.jsx)("option",{value:e,children:(0,U.kC)(e)},e)}))})]})}),(0,j.jsx)(b.Z,{mr:1})]}),(null==Ho?void 0:Ho[M.cH])===Ee.TRINO&&no.length>=1&&(0,j.jsxs)(v.ZP,{alignItems:"center",style:{marginTop:"8px"},children:[(0,j.jsx)(ee.Z,{appearBefore:!0,block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["If checked, upstream blocks that aren’t SQL blocks",(0,j.jsx)("br",{}),"will have their data exported into a table that is",(0,j.jsx)("br",{}),"uniquely named upon each block run. For example,",(0,j.jsx)("br",{}),(0,j.jsx)(g.ZP,{default:!0,inline:!0,monospace:!0,children:"[pipeline_uuid]_[block_uuid]_[unique_timestamp]"}),"."]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(w.Z,{checked:Ho[M.bk],label:(0,j.jsx)(g.ZP,{muted:!0,small:!0,children:"Unique upstream table names"}),onClick:function(e){(0,Qe.j)(e),zi((0,o.Z)({},M.bk,!Ho[M.bk]))}}),(0,j.jsx)("span",{children:" "}),(0,j.jsx)(re.Info,{muted:!0})]})}),(0,j.jsx)(b.Z,{mr:1})]})]})}),(!ct||!Ai)&&tl,no.length>=1&&!go&&(_.f2.includes($t)||Bo&&_.t6.YAML===Vt)&&!Do&&!Uo&&(!Eo||Eo===ie.zr.uuid)&&(0,j.jsxs)(x.y9,{noMargin:!0,normalPadding:!0,children:[Bo&&_.t6.YAML===Vt&&(0,j.jsxs)(b.Z,{py:1,children:[(0,j.jsxs)(g.ZP,{muted:!0,small:!0,children:["Positional order of upstream block outputs for"," ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"block_output"})," ","function:"]}),(0,j.jsx)(v.ZP,{children:no.reduce((function(e,n,t){var o=Gr[n],r=(0,x.qn)(null==o?void 0:o.type,{blockColor:null==o?void 0:o.color,theme:Xn}).accent;e.push((0,j.jsx)(X.Z,{color:r,onClick:function(){var e,n,t=null==z||null===(e=z.current)||void 0===e?void 0:e["".concat(null==o?void 0:o.type,"s/").concat(null==o?void 0:o.uuid,".py")];null==t||null===(n=t.current)||void 0===n||n.scrollIntoView()},preventDefault:!0,small:!0,children:(0,j.jsx)(g.ZP,{color:r,inline:!0,monospace:!0,small:!0,children:n})},n));var i=(null==no?void 0:no.length)||0;return i>=2&&t<i-1&&e.push((0,j.jsx)(g.ZP,{inline:!0,muted:!0,small:!0,children:",  "},"".concat(n,"-comma"))),e}),[])})]}),!Bo&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:1,pt:1,children:(0,j.jsxs)(g.ZP,{muted:!0,small:!0,children:[!Mo&&"Positional arguments for ".concat(No?"":"decorated ","function:"),Mo&&(0,j.jsxs)(j.Fragment,{children:["The interpolated tables below are available in queries from upstream blocks.",(0,j.jsx)("br",{}),"Example:"," ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,small:!0,children:"SELECT * FROM {{ df_1 }}"})," ","to insert all rows from"," ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,small:!0,children:null==no?void 0:no[0]})," ","into a table."]})]})}),(0,j.jsxs)(b.Z,{my:1,children:[!Mo&&!No&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:[_.tf.DATA_EXPORTER===$t&&"@data_exporter",_.tf.DATA_LOADER===$t&&"@data_loader",_.tf.TRANSFORMER===$t&&"@transformer",_.tf.CUSTOM===$t&&"@custom"]}),(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:["def"," ",(_.tf.DATA_EXPORTER===$t?"export_data":_.tf.DATA_LOADER===$t&&"load_data")||_.tf.TRANSFORMER===$t&&"transform"||_.tf.CUSTOM===$t&&"transform_custom","(",no.map((function(e,n){return n>=1?"data_".concat(n+1):"data"})).join(", "),"):"]})]}),No&&(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:[_.tf.DATA_EXPORTER===$t?"export_data":_.tf.TRANSFORMER===$t&&"transform"," ← function(",no.map((function(e,n){return"df_".concat(n+1)})).join(", "),"):"]})}),Mo&&(null==no?void 0:no.length)>=1&&(0,j.jsx)(qe,{block:G,blockConfiguration:Ho,blockRefs:z,blocks:null==no?void 0:no.map((function(e){return null==Gr?void 0:Gr[e]})),updateBlockConfiguration:zi}),!Mo&&no.map((function(e,n){var t=Gr[e],o=(0,x.qn)(null==t?void 0:t.type,{blockColor:null==t?void 0:t.color,theme:Xn}).accent,r="{{ df_".concat(n+1," }}");return(0,j.jsxs)("div",{children:[!Mo&&!No&&(0,j.jsxs)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:["    data",n>=1?"_".concat(n+1):null]}),Mo&&(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:r}),No&&(0,j.jsxs)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:["    ","df".concat(n+1)]})," ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"→"})," ",(0,j.jsx)(X.Z,{color:o,onClick:function(){var e,n,o=null==z||null===(e=z.current)||void 0===e?void 0:e["".concat(null==t?void 0:t.type,"s/").concat(null==t?void 0:t.uuid,".py")];null==o||null===(n=o.current)||void 0===n||n.scrollIntoView()},preventDefault:!0,small:!0,children:(0,j.jsx)(g.ZP,{color:o,inline:!0,monospace:!0,small:!0,children:e})})]},e)}))]})]})]}),(!Eo||!(null!=H&&H.length)||Eo===ie.zr.uuid)&&!go&&ol&&(0,j.jsx)(x.HS,{darkBorder:!0,noBackground:!0,children:(0,j.jsx)(b.Z,{p:1,children:ol})}),ie.aj.uuid===Eo&&(null==H?void 0:H.length)>=1&&!go&&(0,j.jsx)(j.Fragment,{children:el}),!At&&(!Eo||!(null!=H&&H.length)||ie.zr.uuid===Eo)&&(0,j.jsx)(j.Fragment,{children:go?(0,j.jsx)(b.Z,{p:1,children:(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,children:["(",(0,U._6)("line",null==Co?void 0:Co.split(/\r\n|\r|\n/).length)," collapsed)"]})}):!Lo||Vo?(0,j.jsxs)(j.Fragment,{children:[Oi&&!Uo&&(0,j.jsx)(b.Z,{px:1,py:L.cd,children:(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:["Code is replicated from"," ",(0,j.jsx)(X.Z,{color:(0,x.qn)(null==Oi?void 0:Oi.type,{blockColor:null==Oi?void 0:Oi.color,theme:Xn}).accent,onClick:function(e){var n,t;(0,Qe.j)(e);var o=null==z||null===(n=z.current)||void 0===n?void 0:n["".concat(null==Oi?void 0:Oi.type,"s/").concat(null==Oi?void 0:Oi.uuid,".py")];null==o||null===(t=o.current)||void 0===t||t.scrollIntoView()},preventDefault:!0,small:!0,children:(0,j.jsx)(g.ZP,{color:(0,x.qn)(null==Oi?void 0:Oi.type,{blockColor:null==Oi?void 0:Oi.color,theme:Xn}).accent,inline:!0,monospace:!0,small:!0,children:null==Oi?void 0:Oi.uuid})})," ","and read-only"]})})}),Li]}):Yi}),ke&&c.cloneElement(ke,{runBlockAndTrack:Yr}),At&&(0,j.jsxs)(b.Z,{p:L.cd,children:[(0,j.jsx)(g.ZP,{bold:!0,danger:!0,children:null==At?void 0:At.error}),(0,j.jsx)(g.ZP,{muted:!0,children:null==At?void 0:At.message})]}),!(Uo&&_.t6.PYTHON!==Vt)&&Gi,Uo&&_.t6.PYTHON!==Vt&&Gi,ki]})),!zn&&Fi]})})]})})}var al=(0,c.useMemo)((function(){return(0,j.jsx)(x.Ig,{ref:n,children:(0,j.jsx)("div",{ref:yr,style:{zIndex:F===O?Qi+9:null},children:(0,j.jsxs)("div",{style:{paddingTop:zn&&0===F?x.WC:0,position:"relative"},children:[zn&&F>=1&&(0,j.jsxs)(x.gE,{additionalZIndex:Qi-F,bottom:0,height:x.WC,onMouseEnter:function(){return ao(!0)},onMouseLeave:function(){ao(!1),null==kn||kn(null)},children:[co&&C&&(0,j.jsx)(b.Z,{mx:2,style:{width:"100%"},children:rl(null==V?void 0:V[F-1],F-1)}),(0,j.jsx)(x.t1,{className:"block-divider-inner"})]}),nl,!zn&&!ln&&(0,j.jsxs)(x.gE,{additionalZIndex:Qi-F,onMouseEnter:function(){return ao(!0)},onMouseLeave:function(){ao(!1),null==kn||kn(null)},children:[co&&C&&(0,j.jsx)(b.Z,{mt:2,mx:2,style:{width:"100%"},children:rl(G,F)}),(0,j.jsx)(x.t1,{className:"block-divider-inner"})]}),q]})})})}),[C,O,co,G,F,Qi,rl,V,yr,n,q,nl,ln,kn,zn]),sl=(0,c.useMemo)((function(){var e=en||{},n=(e.height,e.x),t=(e.width,e.y),o=n+x.IN;return qi&&!yn&&(o+=Zn.nn),(0,j.jsx)(x.j1,{left:o,ref:$n,top:t,width:$i,children:al})}),[al,qi,en,yn,$i]),dl=(0,c.useMemo)((function(){return((null==V?void 0:V.length)||0)-F}),[F,V]),fl=(0,c.useMemo)((function(){var e=en||{},n=(e.height,e.x),t=e.width,o=e.y,r=qn+x.IN-(n+t);return yn?Ji&&(r+=x.IN):Xi&&(r+=x.IN),(0,j.jsx)(x.j1,{ref:et,right:r,top:o,width:$i,zIndex:dl,children:Fi})}),[Fi,Xi,Ji,en,$i,qn,dl,yn]);return zn?(0,j.jsxs)(x.fk,{zIndex:On?dl:co?2*dl:null,children:[sl,fl]}):al}var qt=c.forwardRef(Vt)},84820:function(e,n,t){t.d(n,{Z:function(){return v}});var o,r=t(21831),i=t(44425),l=t(82394),u=t(75582),c=t(17717);!function(e){e.DATA_EXPORTER="data_exporter",e.DATA_LOADER="data_loader",e.MAGE_LIBRARY="mage_library",e.TRANSFORMER="transformer",e.USER_LIBRARY="user_library"}(o||(o={}));var a=t(89209);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=t(86735);function p(e,n){var t=e;t.includes("__init__")||t.push("__init__");var o,r=t.length;return(0,f.w6)(r).forEach((function(e,i){if(o)return o;var l=t.slice(0,r-i).join(c.sep);o=n["".concat(l,".py")]})),o}function h(e,n,t){var o,r,i;return((null===(o=t.outputs)||void 0===o||null===(r=o[0])||void 0===r||null===(i=r.sample_data)||void 0===i?void 0:i.columns)||[]).map((function(t){return{label:"".concat(t," column"),kind:e.languages.CompletionItemKind.Variable,insertText:"'".concat(t,"'"),range:n}}))}function m(e,n){var t=e.word.split(""),o=new RegExp(t.reduce((function(e,n,o){var r=t[o+1],i=r?"^".concat(r):"";return e+"".concat(n,"[w ").concat(i,"]*")}),""));return n.reduce((function(e,n){return n.label.match(o)?e.concat(n):e}),[])}function v(e){var n=e.autocompleteItems,t=e.block,l=e.blocks,s=e.pipeline,v=t.type,b=t.upstream_blocks,g=(0,f.HK)(n,(function(e){return e.id}));return function(t){return function(x,j){var C=[],y=x.getValueInRange({endColumn:j.column,endLineNumber:j.lineNumber,startColumn:1,startLineNumber:1}),O=x.getWordUntilPosition(j),k=O.endColumn,Z=O.startColumn,T={endColumn:k,endLineNumber:j.lineNumber,startColumn:Z,startLineNumber:j.lineNumber},E=function(e,n,t){var o=(0,a.Yn)(e),r=(0,a.M4)(e,n),i=o.find((function(e){var n=e.variableName;return r.match(new RegExp(n))}));if(i){var l=i.assignmentValue,u=(0,a.S0)(e)[l];if(u){var c,s=p(u.split(" as ")[0].replace("from ","").replace("import ","").split(" ").reduce((function(e,n){return n.trim()?e.concat(n):e}),[]).join(".").split("."),t),d=(0,a.rW)(u,l);return null==s||null===(c=s.methods_for_class)||void 0===c?void 0:c[d]}}return[]}(y,T,g);if((null==E?void 0:E.length)>=1){var P=m(O,E.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Method,label:e,range:T}})));if(P.length>=1)return{suggestions:P}}var S=function(e,n,t){var o=(0,a.M4)(e,n);if(o=o.match(/([\w_]+)./)){var r=(0,a.S0)(e)[o[1]];if(r){var i=p(r.split(" as ")[0].replace("from ","").replace("import ","").split(" ").reduce((function(e,n){return n.trim()?e.concat(n):e}),[]).join(".").split("."),t);if(null!=i&&i.functions)return null==i?void 0:i.functions}}return[]}(y,T,g);if((null==S?void 0:S.length)>=1){var _=m(O,S.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Function,label:e,range:T}})));if(_.length>=1)return{suggestions:_}}if((null==b?void 0:b.length)>=1){var I=new RegExp("\n@".concat(v));y.match(I)&&C.push.apply(C,(0,r.Z)(m(O,function(e,n,t){var o=t.block,r=t.blocks,i=o.upstream_blocks,l=(0,f.HK)(r,(function(e){return e.uuid}));return i.map((function(t,o){var r=l[t].type,i=0===o?"output_0":"args[".concat(o-1,"]");return{label:"df ".concat(t," ").concat(r," block"),kind:e.languages.CompletionItemKind.Variable,documentation:"Variable for ".concat(r," ").concat(t," data."),insertText:i,range:n}}))}(t,T,e))))}if(O.word.match(/i|f/)){var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,l=(arguments.length>2?arguments[2]:void 0).word,s=new Set,f={};e.forEach((function(e){var n=e.group,t=e.id,r=e.imports;if([o.MAGE_LIBRARY,o.USER_LIBRARY].includes(n)){var i=t;i.match(/__init__.py/)&&(i=i.replace(/\/__init__.py/,"")),i=i.split(".py")[0].replaceAll(c.sep,"."),f[i]=e}var l=t.replace(".py","").replace("/__init__","").split(c.sep);if(1===l.length)s.add("import ".concat(l[0]));else if(l.length>=2){var u=l.slice(0,l.length-1).join(".");s.add("from ".concat(u," import ").concat(l[l.length-1]))}r.forEach((function(e){return s.add(e)}))}));var p,h="i"===l,m=h?"import":"f"===l?"from":"",v=(0,a.M4)(n,i);if(h&&v.match(/from/)&&(p=v.match(/from ([A-Za-z0-9_.]+) /)[1]),p&&f[p]){var b=f[p],g=b.classes,x=b.constants,j=b.files,C=b.functions,y=[];return[[x,t.languages.CompletionItemKind.Constant],[g,t.languages.CompletionItemKind.Class],[C,t.languages.CompletionItemKind.Function]].forEach((function(e){var n=(0,u.Z)(e,2),t=n[0],o=n[1];t.forEach((function(e){y.push({filterText:"import ".concat(e),insertText:"import ".concat(e),kind:o,label:e,range:i})}))})),j.forEach((function(e){var n=e.split(c.sep),o=n[n.length-1].split(".py")[0];y.push({filterText:"import ".concat(o),insertText:"import ".concat(o),kind:t.languages.CompletionItemKind.Variable,label:o,range:i})})),y}return(0,r.Z)(s).map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.File,label:e,range:i}})).concat(Object.entries(f).map((function(e){var n=(0,u.Z)(e,2),o=n[0];return n[1],{filterText:"".concat(m," ").concat(o),insertText:"".concat(m," ").concat(o," "),kind:t.languages.CompletionItemKind.File,label:"".concat(o),range:d({},i)}})))}(n,y,O,t,T,e);C.push.apply(C,(0,r.Z)(w))}if(i.tf.CHART===v||i.tf.SCRATCHPAD===v){var A=[];if(i.tf.CHART===v?b.forEach((function(e,n){A.push({block:l.find((function(n){var t=n.uuid;return e===t})),matchIndex:0,variableName:"df_".concat(n+1)})})):i.tf.SCRATCHPAD===v&&function(e,n){return e.map((function(e){return{block:e,regex:new RegExp("([\\w_]+)[ ]*=[ ]*get_variable\\('".concat(n.uuid,"', '").concat(e.uuid,"', 'output_0'\\)"),"g")}}))}(l,s).forEach((function(e){var n=e.block,t=e.regex,o=y.matchAll(t);(0,r.Z)(o).forEach((function(e){var t=null==e?void 0:e.index,o=null==e?void 0:e[1];o&&A.push({block:n,matchIndex:t,variableName:o})}))})),A.length>=1){var R,D=null===(R=y.split("\n")[j.lineNumber-1])||void 0===R?void 0:R.slice(0,O.startColumn-1);if(D){var B=[];if(A.forEach((function(e){var n=e.block,o=e.matchIndex,r=e.variableName,i=new RegExp("".concat(r,"\\["));D.match(i)&&B.push({items:h(t,T,n),matchIndex:o})})),B.length>=1)return{suggestions:m(O,(0,f.YC)(B,"matchIndex",{ascending:!1})[0].items)}}}1===Z&&(i.tf.CHART===v?C.push.apply(C,(0,r.Z)(m(O,b.map((function(e,n){var o="df_".concat(n+1);return{label:"".concat(o," ").concat(e," block"),kind:t.languages.CompletionItemKind.Snippet,insertText:o,range:T}}))))):i.tf.SCRATCHPAD===v&&C.push.apply(C,(0,r.Z)(m(O,function(e,n,t){var o=t.block,r=t.blocks,l=t.pipeline;return r.reduce((function(t,r){var u=r.type,c=r.uuid;return o.uuid!==c&&[i.tf.DATA_LOADER,i.tf.TRANSFORMER].includes(u)?t.concat({label:"df ".concat(c," ").concat(u," block"),kind:e.languages.CompletionItemKind.Snippet,documentation:"Get the data from ".concat(u," block ").concat(c,"."),insertText:"from mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable('".concat(l.uuid,"', '").concat(c,"', 'output_0')\n"),range:n}):t}),[])}(t,T,e)))))}var M=new Set;l.concat({content:y}).forEach((function(e){var n=e.content;(0,r.Z)(n.matchAll("([A-Za-z_0-9]+)","g")).forEach((function(e){return M.add(e[1])}))}));var N=(0,r.Z)(M);if(N.length){var L=N.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Variable,label:e,range:T}}));C.push.apply(C,(0,r.Z)(m(O,L)))}return{suggestions:C}}}}},71471:function(e,n,t){t.d(n,{Z:function(){return r}});var o=t(89678);function r(e){var n=e.containerRef,t=e.contained;return{onDidChangeCursorPosition:function(e){var r=e.editorRect,i=e.position.lineNumberTop;if(null!=n&&n.current){var l,u=(null==n||null===(l=n.current)||void 0===l?void 0:l.getBoundingClientRect()).height,c=r.top;if(t){var a,s,d=null==n||null===(a=n.current)||void 0===a?void 0:a.scrollTop,f=i+o.aU-(u+d);if(f>0)null==n||null===(s=n.current)||void 0===s||s.scrollBy(0,f);else if(d>i){var p;null==n||null===(p=n.current)||void 0===p||p.scrollBy(0,i-d)}}else if(c+i>u){var h=n.current.scrollTop+(i-u+c);n.current.scrollTo(0,h)}else if(i+c<o.aU){var m=n.current.scrollTop+(i+c-o.aU);n.current.scrollTo(0,m)}}}}}},32929:function(e,n,t){t.d(n,{A2:function(){return m},dP:function(){return v},hS:function(){return x},iK:function(){return b},n9:function(){return h},qy:function(){return g}});var o,r=t(26304),i=t(82394),l=t(44425),u=t(72473),c=t(57653),a=t(55283),s=["uuid"],d=["uuid"];function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var h={uuid:"Blocks"},m={uuid:"Pipelines"},v=[h,m],b=(o={},(0,i.Z)(o,l.tf.CALLBACK,u.Callback),(0,i.Z)(o,l.tf.CHART,u.Charts),(0,i.Z)(o,l.tf.CONDITIONAL,u.Conditional),(0,i.Z)(o,l.tf.CUSTOM,u.BlockGeneric),(0,i.Z)(o,l.tf.DATA_EXPORTER,u.CircleWithArrowUp),(0,i.Z)(o,l.tf.DATA_LOADER,u.CubeWithArrowDown),(0,i.Z)(o,l.tf.DBT,u.DBT),(0,i.Z)(o,l.tf.EXTENSION,u.Lightning),(0,i.Z)(o,l.tf.MARKDOWN,u.File),(0,i.Z)(o,l.tf.SENSOR,u.Sensor),(0,i.Z)(o,l.tf.TRANSFORMER,u.FrameBoxSelection),o),g=[{Icon:u.TemplateShapes,uuid:"All templates"}].concat([{uuid:l.tf.DATA_LOADER},{uuid:l.tf.TRANSFORMER},{selectedIconProps:{inverted:!0},uuid:l.tf.DATA_EXPORTER},{uuid:l.tf.SENSOR},{selectedIconProps:{inverted:!0},uuid:l.tf.CUSTOM},{uuid:l.tf.CHART},{selectedIconProps:{inverted:!0},uuid:l.tf.CALLBACK},{selectedIconProps:{inverted:!0},uuid:l.tf.CONDITIONAL},{uuid:l.tf.EXTENSION},{selectedBackgroundColor:null,uuid:l.tf.DBT},{selectedIconProps:{inverted:!0},uuid:l.tf.MARKDOWN}].map((function(e){var n=e.uuid,t=(0,r.Z)(e,s);return p({Icon:b[n],filterTemplates:function(e){return null==e?void 0:e.filter((function(e){return e.block_type===n}))},label:function(){return l.V4[n]},selectedBackgroundColor:function(e){return(0,a.qn)(n,{theme:e}).accent},uuid:n},t)}))),x=[{Icon:u.TemplateShapes,uuid:"All templates"}].concat([{Icon:u.BatchPipeline,uuid:c.qL.PYTHON},{Icon:u.IntegrationPipeline,uuid:c.qL.INTEGRATION},{Icon:u.StreamingPipeline,uuid:c.qL.STREAMING}].map((function(e){var n=e.uuid,t=(0,r.Z)(e,d);return p({filterTemplates:function(e){return null==e?void 0:e.filter((function(e){var t;return(null==e||null===(t=e.pipeline)||void 0===t?void 0:t.type)===n}))},label:function(){return c.G7[n]},uuid:n},t)})))},99236:function(e,n,t){var o=t(55485),r=t(75499),i=t(30160),l=t(72473),u=t(55283),c=t(28598);n.Z=function(e){var n=e.inputsBlocks;return(0,c.jsx)(r.Z,{columnFlex:[null,1,null,1,null],columns:[{uuid:"Position"},{uuid:"Block"},{center:!0,uuid:"Catalog"},{center:!0,uuid:"Streams"},{rightAligned:!0,uuid:"Argument shape"}],rows:null==n?void 0:n.map((function(e,n){var t=e.block,r=t.color,a=t.type,s=t.uuid,d=e.input,f=d.catalog,p=d.streams,h=(null==p?void 0:p.length)>=1,m=(0,u.qn)(a,{blockColor:r}).accent;return[(0,c.jsx)(i.ZP,{default:!0,monospace:!0,children:n},"position-".concat(s)),(0,c.jsx)(i.ZP,{color:m,monospace:!0,children:s},"block-".concat(s)),(0,c.jsx)(o.ZP,{justifyContent:"center",children:f?(0,c.jsx)(l.Check,{success:!0}):(0,c.jsx)(l.Close,{muted:!0})},"catalog-".concat(s)),(0,c.jsxs)(o.ZP,{justifyContent:"center",children:[!h&&(0,c.jsx)(l.Close,{muted:!0},"catalog-".concat(s)),h&&null!=p&&p.includes(s)?(0,c.jsx)(l.Check,{success:!0}):(0,c.jsx)(i.ZP,{center:!0,default:!0,monospace:!0,small:!0,children:null==p?void 0:p.join(", ")})]},"selected-streams-".concat(s)),(0,c.jsxs)(i.ZP,{default:!0,monospace:!0,rightAligned:!0,children:[f&&!h&&"Dict",!f&&h&&"Union[Dict, pd.DataFrame]",f&&h&&"Tuple[Union[Dict, pd.DataFrame], Dict]"]},"shape-".concat(s))]}))})}},37443:function(e,n,t){t.d(n,{C0:function(){return h},Pf:function(){return f},TD:function(){return d},mU:function(){return s},oI:function(){return l},tw:function(){return a},uK:function(){return u}});var o,r,i,l,u,c=t(82394);!function(e){e.CHECKBOX="checkbox",e.CUSTOM="custom",e.SELECT="select",e.TOGGLE="toggle"}(l||(l={})),function(e){e.CONFIGURATION="configuration",e.OVERVIEW="overview",e.STREAMS="streams",e.SYNC="sync"}(u||(u={}));var a,s=(o={},(0,c.Z)(o,u.CONFIGURATION,u.CONFIGURATION),(0,c.Z)(o,u.OVERVIEW,u.OVERVIEW),(0,c.Z)(o,u.STREAMS,u.STREAMS),(0,c.Z)(o,u.SYNC,u.SYNC),o),d=(r={},(0,c.Z)(r,u.CONFIGURATION,"Configuration"),(0,c.Z)(r,u.OVERVIEW,"Overview"),(0,c.Z)(r,u.STREAMS,"Streams"),(0,c.Z)(r,u.SYNC,"Sync"),r);!function(e){e.BOOKMARKS="bookmarks",e.CREDENTIALS="credentials",e.OVERVIEW="overview",e.SAMPLE_DATA="sample_data",e.SETTINGS="settings",e.STREAM_CONFLICTS="stream_conflicts",e.UPSTREAM_BLOCK_SETTINGS="upstream_block_settings"}(a||(a={}));var f=(i={},(0,c.Z)(i,u.CONFIGURATION,[{label:function(){return"Credentials"},uuid:a.CREDENTIALS},{label:function(){return"Upstream block settings"},uuid:a.UPSTREAM_BLOCK_SETTINGS}]),(0,c.Z)(i,u.SYNC,[{label:function(){return"Bookmarks"},uuid:a.BOOKMARKS}]),(0,c.Z)(i,u.STREAMS,[]),(0,c.Z)(i,u.OVERVIEW,[]),i),p={label:function(){return"Schema property conflicts"},uuid:a.STREAM_CONFLICTS};function h(e){var n=[{label:function(){return"Overview"},uuid:a.OVERVIEW},{label:function(){return"Schema properties"},uuid:a.SETTINGS}];return null!=e&&e.addStreamConflicts&&n.push(p),n.push({label:function(){return"Sample data"},uuid:a.SAMPLE_DATA}),n}},87418:function(e,n,t){var o=t(82394),r=t(82684),i=t(71180),l=t(50724),u=t(55485),c=t(70374),a=t(30160),s=t(72473),d=t(39643),f=t(26419),p=t(58325),h=t(44688),m=t(28598);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.children,t=e.defaultTextContent,o=e.fileVersionsVisible,v=e.menuGroups,g=e.onSave,x=e.rightOffset,j=e.setFilesVersionsVisible,C=(0,r.useState)(null),y=C[0],O=C[1],k=(0,r.useRef)({}),Z=(0,r.useRef)(null),T=(0,r.useRef)(null),E=(0,r.useMemo)((function(){return[{disabled:!g,keyTextGroups:[[(0,p.V5)()?d.RJ:d.hE,d.SS]],label:function(){return"Save"},onClick:function(){return g?g():null},uuid:"save"}]}),[g]),P=(0,r.useMemo)((function(){return[{label:function(){return o?"Hide versions":"Show versions"},onClick:function(){return null==j?void 0:j(!o)},uuid:"versions"}]}),[o,j]),S="FileHeaderMenu/index",_=(0,h.y)(),I=_.registerOnKeyDown,w=_.unregisterOnKeyDown;return(0,r.useEffect)((function(){return function(){w(S)}}),[w,S]),I(S,(function(e,n){null!==y&&(n[d.QK]?O((function(e){return 0===e?2:e-1})):n[d.DY]&&O((function(e){return 2===e?0:e+1})))}),[y,O]),(0,m.jsx)(l.Z,{onClickOutside:function(){return O(null)},open:!0,style:{height:"100%",position:"relative",zIndex:2},children:(0,m.jsxs)(u.ZP,{alignItems:"center",fullHeight:!0,fullWidth:!0,children:[!v&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{style:{position:"relative"},children:[(0,m.jsx)(i.ZP,b(b({},f.a),{},{noBackground:0!==y,onClick:function(){return O((function(e){return 0===e?null:0}))},onMouseEnter:function(){return O((function(e){return null!==e?0:null}))},ref:Z,children:(0,m.jsx)(a.ZP,{noWrapping:!0,children:"File"})})),(0,m.jsx)(c.Z,{items:E,onClickCallback:function(){return O(null)},open:0===y,parentRef:Z,uuid:"FileHeaderMenu/file"})]}),(0,m.jsxs)("div",{style:{position:"relative"},children:[(0,m.jsx)(i.ZP,b(b({},f.a),{},{noBackground:1!==y,onClick:function(){return O((function(e){return 1===e?null:1}))},onMouseEnter:function(){return O((function(e){return null!==e?1:null}))},ref:T,children:(0,m.jsx)(a.ZP,{noWrapping:!0,children:"Edit"})})),(0,m.jsx)(c.Z,{items:P,onClickCallback:function(){return O(null)},open:1===y,parentRef:T,uuid:"FileHeaderMenu/edit"})]}),(0,m.jsx)("div",{style:{position:"relative"},children:(0,m.jsx)(i.ZP,b(b({},f.a),{},{beforeIcon:(0,m.jsx)(s.File,{muted:!o}),noBackground:!o,onClick:function(){return null==j?void 0:j(!o)},children:(0,m.jsx)(a.ZP,{noWrapping:!0,children:o?"Hide file versions":"Show file versions"})}))})]}),v&&(null==v?void 0:v.map((function(e,n){var o,l=e.items,u=e.label,s=e.uuid,d=(null==k||null===(o=k.current)||void 0===o?void 0:o[s])||(0,r.createRef)();return k.current[s]=d,(0,m.jsxs)("div",{style:{position:"relative"},children:[(0,m.jsx)(i.ZP,b(b({},f.a),{},{noBackground:y!==n,onClick:function(){return O((function(e){return e===n?null:n}))},onMouseEnter:function(){return O((function(e){return null!==e?n:null}))},ref:d,children:(0,m.jsx)(a.ZP,{default:t,noWrapping:!0,children:u?null==u?void 0:u():s})})),(0,m.jsx)(c.Z,{items:l,onClickCallback:function(){return O(null)},open:y===n,parentRef:d,rightOffset:x,uuid:"FileHeaderMenu/".concat(s,"/").concat(n)})]},s)}))),n]})})}},23531:function(e,n,t){t.d(n,{Z:function(){return h}});var o=t(82684),r=t(53808),i=t(55485),l=t(9518),u=t(44897),c=(t(2842),t(91437)),a=t(47041),s=l.default.div.withConfig({displayName:"indexstyle__ColumnStyle",componentId:"sc-qieo1u-0"})([""," align-items:stretch;display:flex;"," "," ",""],a.w5,(function(e){return"\n    width: ".concat(e.width,"px;\n  ")}),(function(e){return!e.height&&"\n    height: 100%;\n  "}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n    overflow: auto;\n  ")})),d=l.default.div.withConfig({displayName:"indexstyle__VerticalDividerStyle",componentId:"sc-qieo1u-1"})([""," position:relative;width:","px;z-index:5;",""],(0,c.eR)(),2,(function(e){return"\n    background-color: ".concat((null==e?void 0:e.backgroundColor)||(e.theme||u.Z).borders.medium2,";\n\n    // &:hover {\n    //   background-color: ").concat((null==e?void 0:e.backgroundColorHover)||(null==e?void 0:e.backgroundColor)||(e.theme||u.Z).content.active,";\n    // }\n  ")})),f=t(19183),p=t(28598);var h=function(e){e.dividerBackgroundColor,e.dividerBackgroundColorHover;var n=e.columnsOfItems,t=e.fullHeight,l=e.heightOffset,u=e.uuid,c=e.width,h=(0,f.i)().height,m=(0,o.useMemo)((function(){return h-(l||0)}),[l,h]),v=(0,o.useState)((0,r.U2)("".concat(r.kh,"_").concat(u),{})),b=v[0],g=(v[1],(0,o.useState)(null)),x=(g[0],g[1],(0,o.useRef)({})),j=(0,o.useRef)({}),C=(0,o.useRef)({}),y=((0,o.useRef)(null),(0,o.useState)(null)),O=(y[0],y[1],(0,o.useMemo)((function(){return(null==n?void 0:n.length)||0}),[n])),k=(0,o.useMemo)((function(){return c-2*(O-1)}),[O,c]),Z=(0,o.useMemo)((function(){var e=[];return null==n||n.forEach((function(n,r){var i=k/O,l=null==b?void 0:b[r];if(null==l||isNaN(l)||(i=l*k),r>=1&&r<=O-1){var u="vertical-divider-".concat(r);u in C.current||(C.current[u]=(0,o.createRef)());var c=C.current[u];e.push((0,p.jsx)(d,{ref:c},u))}var f=[];null==n||n.forEach((function(e,n){var r="column-{colNumber}-item-{idx}";r in x.current||(x.current[r]=(0,o.createRef)());var l=x.current[r];f.push((0,p.jsx)("div",{ref:l,style:{width:"100%"},children:null==e?void 0:e.render({columnWidth:t?i-a.nn:i,numberOfColumns:O,width:k})},r))}));var h="column-".concat(r);h in j.current||(j.current[h]=(0,o.createRef)());var v=j.current[h];e.push((0,p.jsx)(s,{height:t?m:null,ref:v,width:i,children:f},h))})),e}),[b,n,t,m,O,k]);return(0,p.jsx)(i.ZP,{flexDirection:"row",children:Z})}},75634:function(e,n,t){t.d(n,{W4:function(){return d},Wx:function(){return s},ZG:function(){return a}});var o=t(9518),r=t(44897),i=t(44425),l=t(42631),u=t(70515),c=t(55283),a=u.cd*u.iI,s=o.default.div.withConfig({displayName:"indexstyle__IconContainerStyle",componentId:"sc-oyfjzc-0"})(["align-items:center;border-radius:","px;border:1px solid transparent;display:flex;justify-content:center;"," "," "," "," "," "," "," "," "," ",""],l.BG,(function(e){return e.border&&"\n    border: 1px dotted ".concat((e.theme.content||r.Z.content).active,";\n  ")}),(function(e){return e.grey&&"\n    background-color: ".concat((0,c.qn)(i.tf.SCRATCHPAD,e).accent,";\n  ")}),(function(e){return e.blue&&"\n    background-color: ".concat((0,c.qn)(i.tf.DATA_LOADER,e).accent,";\n  ")}),(function(e){return e.purple&&"\n    background-color: ".concat((0,c.qn)(i.tf.TRANSFORMER,e).accent,";\n  ")}),(function(e){return e.sky&&"\n    background-color: ".concat((0,c.qn)(i.tf.MARKDOWN,e).accent,";\n  ")}),(function(e){return e.teal&&"\n    background-color: ".concat((0,c.qn)(i.tf.EXTENSION,e).accent,";\n  ")}),(function(e){return e.rose&&"\n    background-color: ".concat((0,c.qn)(i.tf.CALLBACK,e).accent,";\n  ")}),(function(e){return e.yellow&&"\n    background-color: ".concat((0,c.qn)(i.tf.DATA_EXPORTER,e).accent,";\n  ")}),(function(e){return!e.compact&&"\n    height: ".concat(a+u.iI/2,"px;\n    width: ").concat(a+u.iI/2,"px;\n  ")}),(function(e){return e.compact&&"\n    height: ".concat(a/2+u.iI,"px;\n    width: ").concat(a/2+u.iI,"px;\n  ")})),d=o.default.div.withConfig({displayName:"indexstyle__ButtonWrapper",componentId:"sc-oyfjzc-1"})(["position:relative;margin-bottom:","px;margin-right:","px;",""],u.iI,u.iI,(function(e){return e.increasedZIndex&&"\n    z-index: 3;\n  "}))},46510:function(e,n,t){t.d(n,{Z:function(){return be}});var o=t(82394),r=t(21831),i=t(82684),l=t(75582),u=t(83455),c=t(27277),a=t(2548),s=t(71180),d=t(46732),f=t(28598);var p=function(e){var n=e.fill,t=void 0===n?"white":n,o=e.size;return(0,f.jsxs)("svg",{fill:"none",height:o,viewBox:"0 0 20 21",width:o,xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("g",{clipPath:"url(#clip0_11802_82284)",children:(0,f.jsx)("path",{clipRule:"evenodd",d:"M10 20.0024C15.5228 20.0024 20 15.5253 20 10.0024C20 4.47959 15.5228 0.00244141 10 0.00244141C4.47715 0.00244141 0 4.47959 0 10.0024C0 15.5253 4.47715 20.0024 10 20.0024ZM10 18.5024C11.5782 18.5024 13.0559 18.0723 14.3224 17.323C14.3144 17.3061 14.307 17.2888 14.3002 17.2712L11.5045 10.0024H8.49587L5.70021 17.2712C5.69339 17.2889 5.68596 17.3062 5.67796 17.3231C6.94434 18.0724 8.42195 18.5024 10 18.5024ZM11.6336 6.15938L15.5784 16.416C17.3685 14.8577 18.5 12.5622 18.5 10.0024C18.5 5.30802 14.6944 1.50244 10 1.50244C5.30558 1.50244 1.5 5.30802 1.5 10.0024C1.5 12.5623 2.63162 14.8579 4.4219 16.4163L8.36685 6.15939C8.94212 4.66367 11.0583 4.66367 11.6336 6.15938Z",fill:t,fillRule:"evenodd"})}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_11802_82284",children:(0,f.jsx)("rect",{fill:t,height:"20",transform:"translate(0 0.00244141)",width:"20"})})})]})},h=t(91835),m=t(45373),v=t(63403),b=t(72473);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j=function(e){var n=(0,h.Z)({},e),t=(null==n?void 0:n.size)||v.C,o=(0,b.build)([{clipRule:"evenodd",d:"M15.4697 1.47202C16.3149 0.62684 17.6852 0.62684 18.5304 1.47202C19.3756 2.3172 19.3756 3.6875 18.5304 4.53268L10.7445 12.3186C10.5002 12.5629 10.1891 12.7294 9.85027 12.7972L9.11804 12.9436C7.89353 13.1885 6.81392 12.1089 7.05882 10.8844L7.20527 10.1522C7.27302 9.81337 7.43954 9.50222 7.68384 9.25792L15.4697 1.47202ZM17.4697 2.53268C17.2104 2.27329 16.7898 2.27329 16.5304 2.53268L14.7522 4.31085L15.6916 5.25019L17.4697 3.47202C17.7291 3.21263 17.7291 2.79207 17.4697 2.53268ZM14.6309 6.31085L13.6916 5.37151L8.7445 10.3186C8.7096 10.3535 8.68582 10.3979 8.67614 10.4463L8.52969 11.1786C8.4947 11.3535 8.64893 11.5077 8.82386 11.4727L9.5561 11.3263C9.60449 11.3166 9.64894 11.2928 9.68384 11.2579L14.6309 6.31085Z",fillRule:"evenodd"},{clipRule:"evenodd",d:"M2.12221 16.4212C1.89178 16.7635 1.42775 16.8555 1.08405 16.6264C0.739408 16.3966 0.646278 15.931 0.876042 15.5863L1.50008 16.0023C0.876042 15.5863 0.87632 15.5859 0.876609 15.5855L0.877248 15.5845L0.878742 15.5823L0.882593 15.5766L0.893746 15.5605C0.902714 15.5476 0.914758 15.5306 0.929868 15.51C0.96007 15.4687 1.00264 15.4126 1.05749 15.345C1.16699 15.2102 1.32669 15.0283 1.53609 14.8278C1.95274 14.4289 2.58034 13.9427 3.41428 13.6164C5.14688 12.9384 7.5533 13.0314 10.475 15.4219C13.0533 17.5314 14.8969 17.4384 16.0393 16.9914C16.6428 16.7552 17.109 16.3976 17.4267 16.0934C17.5845 15.9424 17.7021 15.8078 17.7782 15.7142C17.8161 15.6675 17.8434 15.6313 17.8598 15.6089C17.868 15.5977 17.8735 15.5899 17.8762 15.586C17.8769 15.585 17.8774 15.5843 17.8777 15.5838L17.877 15.5849C18.1069 15.2409 18.5717 15.1487 18.9161 15.3783C19.2608 15.6081 19.3539 16.0737 19.1241 16.4184L18.5001 16.0023C19.1241 16.4184 19.1238 16.4188 19.1236 16.4192L19.1229 16.4202L19.1214 16.4224L19.1176 16.4281L19.1064 16.4442C19.0974 16.4571 19.0854 16.4741 19.0703 16.4947C19.0401 16.536 18.9975 16.5921 18.9427 16.6597C18.8332 16.7945 18.6735 16.9764 18.4641 17.1769C18.0474 17.5758 17.4198 18.062 16.5859 18.3883C14.8533 19.0663 12.4469 18.9733 9.52515 16.5828C6.94686 14.4733 5.10328 14.5663 3.96088 15.0133C3.35732 15.2495 2.89117 15.6071 2.57345 15.9113C2.41566 16.0623 2.29802 16.1969 2.22197 16.2905C2.18405 16.3372 2.15679 16.3734 2.14036 16.3958C2.13215 16.407 2.12668 16.4148 2.12396 16.4187C2.12332 16.4196 2.12254 16.4207 2.12221 16.4212ZM2.12221 16.4212C2.1222 16.4212 2.12221 16.4212 2.12221 16.4212V16.4212Z",fillRule:"evenodd"}],{viewBox:"0 0 20 21"});return(0,f.jsxs)(m.ZP,x(x({},n),{},{size:t,viewBox:null,children:[(0,f.jsx)("g",{clipPath:"url(#clip0_11826_796)",id:"Type / Scratchpad",children:(0,f.jsx)("g",{id:"Vector",children:o(x(x({},n),{},{size:t}))})}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_11826_796",children:(0,f.jsx)("rect",{fill:"white",height:"20",transform:"translate(0 0.00244141)",width:"20"})})})]}))},C=t(38276),y=t(12468),O=t(44425),k=t(32929),Z="items_more",T="templates/list",E="templates/new",P=[O.tf.CUSTOM,O.tf.MARKDOWN],S=[O.tf.DATA_LOADER,O.tf.TRANSFORMER,O.tf.DATA_EXPORTER,O.tf.CUSTOM,O.tf.DBT,O.tf.SENSOR,O.tf.GLOBAL_DATA_PRODUCT,O.tf.MARKDOWN,T,E],_=t(38118),I=t(13803),w=t(81728),A=t(55283),R=t(38399),D=t(42122);function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var N,L=function(e){var n=e.addNewBlock,t=e.blockIdx,r=e.blockTemplatesByBlockType,u=e.buttonMenuOpenIndex,c=e.closeButtonMenu,a=e.compact,h=e.design,m=e.itemsDBT,v=e.pipelineType,g=e.setAddNewBlockMenuOpenIdx,x=e.setButtonMenuOpenIndex,B=(e.showBlockBrowserModal,e.showBrowseTemplates),N=e.showGlobalDataProducts,L=[(0,i.useRef)(null),(0,i.useRef)(null),(0,i.useRef)(null),(0,i.useRef)(null),(0,i.useRef)(null),(0,i.useRef)(null),(0,i.useRef)(null)],U=(0,i.useCallback)((function(e){return null==g?void 0:g((function(n){return null===n||u!==e?t:null}))}),[t,u,g]),G=(0,i.useMemo)((function(){var e,t;return null===(e=(0,R.hr)(n,O.tf.DATA_LOADER,v,{blockTemplatesByBlockType:r,v2:!0}))||void 0===e||null===(t=e.find((function(e){return e.uuid==="".concat(O.tf.DATA_LOADER,"/").concat(O.t6.PYTHON)})))||void 0===t?void 0:t.items}),[n,r,v]),F=(0,i.useMemo)((function(){var e,t;return null===(e=(0,R.hr)(n,O.tf.DATA_LOADER,v,{blockTemplatesByBlockType:r,dataIntegrationType:I.O.SOURCES,v2:!0}))||void 0===e||null===(t=e.find((function(e){return e.uuid==="".concat(O.tf.DATA_LOADER,"/").concat(I.O.SOURCES)})))||void 0===t?void 0:t.items}),[n,r,v]),H=(0,i.useMemo)((function(){var e,t;return null===(e=(0,R.hr)(n,O.tf.DATA_EXPORTER,v,{blockTemplatesByBlockType:r,v2:!0}))||void 0===e||null===(t=e.find((function(e){return e.uuid==="".concat(O.tf.DATA_EXPORTER,"/").concat(O.t6.PYTHON)})))||void 0===t?void 0:t.items}),[n,r,v]),K=(0,i.useMemo)((function(){var e,t;return null===(e=(0,R.hr)(n,O.tf.DATA_EXPORTER,v,{blockTemplatesByBlockType:r,dataIntegrationType:I.O.DESTINATIONS,v2:!0}))||void 0===e||null===(t=e.find((function(e){return e.uuid==="".concat(O.tf.DATA_EXPORTER,"/").concat(I.O.DESTINATIONS)})))||void 0===t?void 0:t.items}),[n,r,v]),z=(0,i.useMemo)((function(){var e,t;return null===(e=(0,R.hr)(n,O.tf.TRANSFORMER,v,{blockTemplatesByBlockType:r,v2:!0}))||void 0===e||null===(t=e.find((function(e){return e.uuid==="".concat(O.tf.TRANSFORMER,"/").concat(O.t6.PYTHON)})))||void 0===t?void 0:t.items}),[n,r,v]),W=(0,i.useMemo)((function(){var e,t;return null===(e=(0,R.hr)(n,O.tf.SENSOR,v,{blockTemplatesByBlockType:r,v2:!0}))||void 0===e||null===(t=e.find((function(e){return e.uuid==="".concat(O.tf.SENSOR,"/").concat(O.t6.PYTHON)})))||void 0===t?void 0:t.items}),[n,r,v]),Q=(0,i.useCallback)((function(e){return[{isGroupingTitle:!0,label:function(){return"SQL"},uuid:"".concat(O.t6.SQL,"/").concat(e,"/group")},{label:function(){return"Base template (generic)"},onClick:function(){n({language:O.t6.SQL,type:e})},uuid:"".concat(O.t6.SQL,"/").concat(e,"/Base template (generic)")},{isGroupingTitle:!0,label:function(){return"R"},uuid:"".concat(O.t6.R,"/").concat(e,"/group")},{label:function(){return"Base template (generic)"},onClick:function(){n({language:O.t6.R,type:e})},uuid:"".concat(O.t6.R,"/").concat(e,"/Base template (generic)")}]}),[n]),Y=(0,i.useMemo)((function(){var e=[{isGroupingTitle:!0,label:function(){return"Python"},uuid:"".concat(O.t6.PYTHON).concat(O.tf.DATA_LOADER,"/group")}].concat(G).concat(Q(O.tf.DATA_LOADER));return F&&e.push.apply(e,[{isGroupingTitle:!0,label:function(){return"Data integrations"},uuid:[O.tf.DATA_LOADER,I.I.DATA_INTEGRATION,"group"].join("/")},{items:F,label:function(){return(0,w.kC)(I.O.SOURCES)},uuid:[O.tf.DATA_LOADER,I.I.DATA_INTEGRATION,I.O.SOURCES].join("/")}]),e}),[Q,G,F]),V=(0,i.useMemo)((function(){var e=[{isGroupingTitle:!0,label:function(){return"Python"},uuid:"".concat(O.t6.PYTHON).concat(O.tf.DATA_EXPORTER,"/group")}].concat(H).concat(Q(O.tf.DATA_EXPORTER));return K&&e.push.apply(e,[{isGroupingTitle:!0,label:function(){return"Data integrations"},uuid:"".concat(O.tf.DATA_EXPORTER,"/").concat(I.I.DATA_INTEGRATION,"/group")},{items:K,label:function(){return(0,w.kC)(I.O.DESTINATIONS)},uuid:"".concat(O.tf.DATA_EXPORTER,"/").concat(I.I.DATA_INTEGRATION,"/").concat(I.O.DESTINATIONS)}]),e}),[Q,H,K]),q=(0,i.useMemo)((function(){return[{beforeIcon:(0,f.jsx)(b.BlockGeneric,{default:!0,size:_.ZG}),label:function(){return"Python block"},onClick:function(){n({language:O.t6.PYTHON,type:O.tf.CUSTOM})},uuid:"Python"},{beforeIcon:(0,f.jsx)(b.BlockGeneric,{default:!0,size:_.ZG}),label:function(){return"SQL block"},onClick:function(){n({language:O.t6.SQL,type:O.tf.CUSTOM})},uuid:"SQL"},{beforeIcon:(0,f.jsx)(b.BlockGeneric,{default:!0,size:_.ZG}),label:function(){return"R block"},onClick:function(){n({language:O.t6.R,type:O.tf.CUSTOM})},uuid:"R"},{beforeIcon:(0,f.jsx)(j,{default:!0,size:_.ZG}),label:function(){return"Scratchpad"},onClick:function(){n({language:O.t6.PYTHON,type:O.tf.SCRATCHPAD})},uuid:"scratchpad"}]}),[n]),X=(0,i.useMemo)((function(){var e,n,t,o,r,i,l=[Z],u=null==h||null===(e=h.pages)||void 0===e||null===(n=e.pipelines)||void 0===n||null===(t=n.edit)||void 0===t||null===(o=t.buttons)||void 0===o||null===(r=o.block)||void 0===r||null===(i=r.add)||void 0===i?void 0:i.items;return u?l.concat(u):l.concat(P)}),[h]),J=(0,i.useMemo)((function(){var e,n,t,o,r,i,l=[],u=null==h||null===(e=h.pages)||void 0===e||null===(n=e.pipelines)||void 0===n||null===(t=n.edit)||void 0===t||null===(o=t.buttons)||void 0===o||null===(r=o.block)||void 0===r||null===(i=r.add)||void 0===i?void 0:i.items_more;return u?l.concat(u):l.concat(S.filter((function(e){return!X.includes(e)})))}),[h,X]),$=(0,i.useCallback)((function(e){var t,r,i=e.index;return Object.entries((r={},(0,o.Z)(r,O.tf.CUSTOM,{Icon:b.BlockBlank,items:q,tooltip:function(){return"Add a blank custom block or scratchpad block"}}),(0,o.Z)(r,O.tf.DATA_EXPORTER,{Icon:b.CircleWithArrowUp,items:V,label:function(){return O.V4[O.tf.DATA_EXPORTER]},uuid:"".concat(O.tf.DATA_EXPORTER,"/").concat(O.t6.PYTHON)}),(0,o.Z)(r,O.tf.SENSOR,{Icon:b.Sensor,items:[{isGroupingTitle:!0,label:function(){return"Python"},uuid:"".concat(O.t6.PYTHON).concat(O.tf.SENSOR,"/group")}].concat(W),label:function(){return O.V4[O.tf.SENSOR]},uuid:"".concat(O.tf.SENSOR,"/").concat(O.t6.PYTHON)}),(0,o.Z)(r,O.tf.DATA_LOADER,{Icon:b.CubeWithArrowDown,items:Y,label:function(){return O.V4[O.tf.DATA_LOADER]},uuid:"".concat(O.tf.DATA_LOADER,"/").concat(O.t6.PYTHON)}),(0,o.Z)(r,O.tf.DBT,{Icon:b.DBT,items:m,label:function(){return"dbt"}}),(0,o.Z)(r,O.tf.GLOBAL_DATA_PRODUCT,{Icon:b.HexagonAll,onClick:function(){return N({addNewBlock:n})}}),(0,o.Z)(r,O.tf.MARKDOWN,{Icon:p,onClick:function(e){null==e||e.preventDefault(),n({language:O.t6.MARKDOWN,type:O.tf.MARKDOWN})},tooltip:function(){return"Add a markdown block for documentation"}}),(0,o.Z)(r,O.tf.TRANSFORMER,{Icon:b.FrameBoxSelection,items:[{isGroupingTitle:!0,label:function(){return"Python"},uuid:[O.t6.PYTHON,O.tf.TRANSFORMER,"group"].join("/")}].concat(z).concat(Q(O.tf.TRANSFORMER)),label:function(){return O.V4[O.tf.TRANSFORMER]},uuid:[O.t6.PYTHON,O.tf.TRANSFORMER].join("/")}),(0,o.Z)(r,Z,{Icon:b.TemplateShapes,buildItems:function(){return null==J?void 0:J.map((function(e,n){var t=$({index:100*n})[e],o=t.Icon;if(o){var r,i=[T,E].includes(e),l=null===(r=(0,A.qn)(e))||void 0===r?void 0:r.accent;t.beforeIcon=(0,f.jsx)(o,{default:i,fill:i?null:l,size:_.ZG})}return(0,D.gR)(t,t.beforeIcon?["Icon"]:[])}))},customSubmenuHeights:(t={},(0,o.Z)(t,[O.tf.DATA_EXPORTER,I.I.DATA_INTEGRATION,I.O.DESTINATIONS].join("/"),504),(0,o.Z)(t,[O.tf.DATA_LOADER,I.I.DATA_INTEGRATION,I.O.SOURCES].join("/"),504),t),label:function(){return"All blocks"},tooltip:function(){return"Add a block from a template"}}),(0,o.Z)(r,T,{Icon:b.TemplateShapes,label:function(){return"Browse templates"},onClick:function(){return B({addNewBlock:n})}}),(0,o.Z)(r,E,{Icon:b.ArrowsAdjustingFrameSquare,label:function(){return"Create new template"},onClick:function(){return B({addNew:!0,addNewBlock:n})}}),r)).reduce((function(e,n){var t=(0,l.Z)(n,2),r=t[0],u=t[1];return M(M({},e),{},(0,o.Z)({},r,M({Icon:k.iK[r],index:i,label:function(){return O.V4[r]},onClick:function(e){null==e||e.preventDefault(),x((function(e){return e===i?null:i})),U(i)},uuid:(null==u?void 0:u.uuid)||r},u)))}),{})}),[n,V,Y,U,q,m,J,W,z,x,B,N]),ee=(0,i.useCallback)((function(e){var n=e.Icon,t=e.beforeIcon,o=e.buildItems,r=e.customSubmenuHeights,i=e.index,l=e.items,p=e.label,h=e.onClick,m=e.tooltip,v=e.uuid,b=(0,f.jsx)(s.ZP,{beforeIcon:t||n&&(0,f.jsx)(n,{secondary:i===u,size:_.ZG}),noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(e){null==h||h(e)},children:(null==p?void 0:p())||v});return(0,f.jsx)(_.W4,{compact:a,increasedZIndex:i===u,children:(0,f.jsx)(d.Z,{customSubmenuHeights:r,disableKeyboardShortcuts:!0,items:(null==o?void 0:o())||l,onClickCallback:c,open:i===u,parentRef:L[i],uuid:v,children:m?(0,f.jsx)(y.Z,{block:!0,label:m&&"function"==typeof m?m():m,size:null,widthFitContent:!0,children:b}):b})},v)}),[u,c,a]);return(0,f.jsx)(f.Fragment,{children:null==X?void 0:X.reduce((function(e,n,t){return e.concat([ee($({index:t})[n]),(0,f.jsx)(C.Z,{mr:3},"spacing-".concat(n,"-").concat(t))])}),[])})},U=t(50724),G=t(97618),F=t(55485),H=t(49130),K=t(48670),z=t(65956);!function(e){e.BLOCK_ACTION_OBJECTS="block_action_objects"}(N||(N={}));var W=t(30160),Q=t(17488),Y=t(5332),V=t(58401),q=t(39643),X=t(78419),J=t(70515),$=t(53808),ee=t(72619),ne=t(95924),te=t(23780),oe=t(44688);function re(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function ie(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?re(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var le=function(e){var n,t=e.addNewBlock,o=e.blockIdx,r=e.blockTemplatesByBlockType,s=e.compact,d=e.focused,p=e.itemsDBT,h=e.pipelineType,m=e.project,v=e.searchTextInputRef,g=e.setAddNewBlockMenuOpenIdx,x=e.setFocused,j=e.showBrowseTemplates,y=e.showConfigureProjectModal,Z=e.showGlobalDataProducts,T=(0,i.useRef)(null),E=(0,i.useRef)(null),P=void 0!==v?v:E,S=(0,V.Z)().design,I=(0,i.useMemo)((function(){return"AddNewBlocksV2/".concat(o)}),[o]),w=(0,te.VI)(null,{},[],{uuid:"AddNewBlocksV2/".concat(o)}),R=(0,l.Z)(w,1)[0],D=(0,i.useState)(null),B=D[0],M=D[1],re=(0,i.useCallback)((function(){return M(null)}),[]),le=(0,i.useState)(!1),ue=le[0],ce=le[1],ae=(0,i.useState)(null),se=ae[0],de=ae[1],fe=(0,i.useState)(null),pe=fe[0],he=fe[1],me=(0,i.useState)(null),ve=me[0],be=me[1],ge=(0,i.useCallback)((function(e){be(e),(0,$.t8)(X.Ch,e)}),[]);(0,i.useEffect)((function(){if(null===ve){var e=(0,$.U2)(X.Ch,!1);ge(e)}}),[ge,ve]);var xe=(0,i.useMemo)((function(){return void 0!==d?d:ue}),[d,ue]),je=(0,i.useCallback)((function(e){return void 0!==x?x(e):ce(e)}),[x,ce]),Ce=(0,oe.y)(),ye=Ce.registerOnKeyDown,Oe=Ce.unregisterOnKeyDown;(0,i.useEffect)((function(){return function(){return Oe(I)}}),[Oe,I]),null==ye||ye(I,(function(e,n){var t;xe&&(n[q.vP]&&(je(!1),null==P||null===(t=P.current)||void 0===t||t.blur()))}),[xe]);var ke=(0,u.Db)(Y.ZP.search_results.useCreate(),{onSuccess:function(e){return(0,ee.wD)(e,{callback:function(e){var n=e.search_result;he(n)},onErrorCallback:function(e,n){return R({errors:n,response:e})}})}}),Ze=(0,l.Z)(ke,1)[0],Te=(0,i.useCallback)((function(e){clearTimeout(T.current);var n=e.target.value;de(n),n?T.current=setTimeout((function(){Ze({search_result:{pipeline_type:h,query:n,type:N.BLOCK_ACTION_OBJECTS}})}),300):he(null)}),[Ze,h,T]),Ee=(0,i.useMemo)((function(){return(null==pe?void 0:pe.results)||[]}),[pe]),Pe=(0,i.useMemo)((function(){var e=null==pe?void 0:pe.uuid,n=null==Ee?void 0:Ee.map((function(n){return{itemObject:n,searchQueries:[e],value:null==n?void 0:n.uuid}}));if(e){var t={itemObject:{description:e,object_type:a.L.GENERATE_BLOCK,title:"Generate block using AI (beta)"},searchQueries:[e],value:"generate_block"};ve?n.push(t):n.unshift(t)}return n}),[Ee,pe,ve]),Se=(0,i.useMemo)((function(){return(0,f.jsx)(_.NV,{compact:s,onClick:function(){var e;return null==P||null===(e=P.current)||void 0===e?void 0:e.focus()}})}),[s,P]),_e=(0,i.useMemo)((function(){return!(null==m||!m.openai_api_key)}),[m]);return(0,f.jsx)(U.Z,{onClickOutside:re,open:!0,children:(0,f.jsx)(_.Nk,{compact:s,focused:xe,children:(0,f.jsxs)(F.ZP,{alignItems:"center",children:[(0,f.jsx)(G.Z,{children:(0,f.jsx)(L,{addNewBlock:t,blockIdx:o,blockTemplatesByBlockType:r,buttonMenuOpenIndex:B,closeButtonMenu:re,compact:s,design:S,itemsDBT:p,pipelineType:h,setAddNewBlockMenuOpenIdx:g,setButtonMenuOpenIndex:M,showBrowseTemplates:j,showGlobalDataProducts:Z})}),(0,f.jsx)(_.HL,{}),(0,f.jsx)(C.Z,{mr:3}),(0,f.jsx)(G.Z,{flex:1,children:(0,f.jsxs)(_.eS,{children:[Se,(0,f.jsxs)(F.ZP,{alignItems:"center",fullWidth:!0,children:[(0,f.jsx)(Q.Z,{fullWidth:!0,noBackground:!0,noBorder:!0,noBorderRadiusBottom:!0,noBorderRadiusTop:!0,onBlur:function(){return setTimeout((function(){return je(!1)}),150)},onChange:Te,onFocus:function(){return je(!0)},paddingHorizontal:0,paddingVertical:0,placeholder:"Search for a block...",ref:P,value:se||""}),(0,f.jsx)(H.Z,{addPlusSignBetweenKeys:!0,disabled:!0,keyTextGroups:[[q.RJ,q.ZS]]})]}),Se,(0,f.jsx)(_.rS,{topOffset:(null==P||null===(n=P.current)||void 0===n?void 0:n.getBoundingClientRect().height)+(s?1.5*J.iI:2.5*J.iI),children:(0,f.jsx)(c.Z,{eventProperties:{eventParameters:{item_type:"block_search"}},itemGroups:[{items:xe?Pe:[],renderItem:function(e,n){var t=e.itemObject,o=t.block_type,r=t.description,i=t.language,l=t.object_type,u=t.title,c={fill:(0,A.qn)(o).accent,size:_.ZG},s=k.iK[o],d=a.L.GENERATE_BLOCK===l;d&&(s=b.AISparkle,c.default=!1,c.fill=null,c.warning=!0);var p="".concat(u).concat(r?": "+r:"").slice(0,80);return(0,f.jsxs)(_.gI,ie(ie({},n),{},{onClick:function(e){var t;(0,ne.j)(e),null==n||null===(t=n.onClick)||void 0===t||t.call(n,e)},children:[(0,f.jsxs)(G.Z,{alignItems:"center",flex:1,children:[s&&(0,f.jsx)(s,ie({default:!(null!=c&&c.fill)},c)),(0,f.jsx)(C.Z,{mr:2}),(0,f.jsx)(W.ZP,{default:!0,overflowWrap:!0,textOverflow:!0,children:p})]}),(0,f.jsx)(C.Z,{mr:1}),(0,f.jsx)(W.ZP,{monospace:!0,muted:!0,uppercase:!0,children:d?"AI":O.dO[i]}),(0,f.jsx)(C.Z,{mr:1}),a.L.BLOCK_FILE===l&&(0,f.jsx)(b.File,{muted:!0,size:_.ZG}),a.L.CUSTOM_BLOCK_TEMPLATE===l&&(0,f.jsx)(b.TemplateShapes,{muted:!0,size:_.ZG}),a.L.MAGE_TEMPLATE===l&&(0,f.jsx)(b.BlockCubePolygon,{muted:!0,size:_.ZG}),d&&_e&&(0,f.jsx)(b.AISparkle,{muted:!0,size:_.ZG}),d&&!_e&&(0,f.jsx)(b.AlertTriangle,{muted:!0,size:_.ZG})]}))}}],onSelectItem:function(e){var n=e.itemObject,o=n.object_type;a.L.GENERATE_BLOCK!==o||_e?(t({block_action_object:n,require_unique_name:!1}),de(null),he(null)):null==y||y({cancelButtonText:"Set this up later",header:(0,f.jsx)(C.Z,{mb:J.HN,children:(0,f.jsxs)(z.Z,{children:[(0,f.jsx)(W.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate blocks using AI."}),(0,f.jsx)(C.Z,{mt:1,children:(0,f.jsxs)(W.ZP,{warning:!0,children:["Read ",(0,f.jsx)(K.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI’s documentation"})," to get your API key."]})})]})}),onCancel:function(){ge(!0)},onSaveSuccess:function(e){null!=e&&e.openai_api_key&&(t({block_action_object:n}),de(null),he(null))}})},uuid:I})})]})})]})})})};var ue=function(e){var n=e.size;return(0,f.jsx)("svg",{fill:"none",height:n,preserveAspectRatio:"xMidYMid",viewBox:"0 0 256 256",width:n,xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{d:"M245.121138,10.6473813 C251.139129,16.4340053 255.074133,24.0723342 256,32.4050489 C256,35.8769778 255.074133,38.1917867 252.990862,42.5895822 C250.907876,46.9873778 225.215147,91.4286933 217.57696,103.696213 C213.179164,110.871609 210.864356,119.435947 210.864356,127.768462 C210.864356,136.3328 213.179164,144.6656 217.57696,151.840996 C225.215147,164.108516 250.907876,208.781084 252.990862,213.179164 C255.074133,217.57696 256,219.659947 256,223.131876 C255.074133,231.464676 251.370667,239.103147 245.352676,244.658347 C239.565938,250.676338 231.927751,254.611342 223.826489,255.305671 C220.35456,255.305671 218.039751,254.379804 213.873493,252.296533 C209.706951,250.213262 164.340053,225.215147 152.072249,217.57696 C151.146382,217.113884 150.220516,216.419556 149.063396,215.95648 L88.4195556,180.079502 C89.8082133,191.652693 94.9006222,202.763093 103.233138,210.864356 C104.853618,212.484551 106.473813,213.873493 108.325547,215.262151 C106.936604,215.95648 105.316409,216.651093 103.927751,217.57696 C91.6599467,225.215147 46.9873778,250.907876 42.5895822,252.990862 C38.1917867,255.074133 36.1085156,256 32.4050489,256 C24.0723342,255.074133 16.4340053,251.370667 10.8788338,245.352676 C4.86075733,239.565938 0.925858133,231.927751 0,223.594951 C0.231464676,220.123022 1.1573248,216.651093 3.00905244,213.641956 C5.09223822,209.24416 30.7848533,164.571307 38.42304,152.303787 C42.82112,145.128391 45.1356444,136.795591 45.1356444,128.231538 C45.1356444,119.6672 42.82112,111.3344 38.42304,104.159004 C30.7848533,91.4286933 4.86075733,46.75584 3.00905244,42.3580444 C1.1573248,39.3489067 0.231464676,35.8769778 0,32.4050489 C0.925858133,24.0723342 4.62930489,16.4340053 10.6473813,10.6473813 C16.4340053,4.62930489 24.0723342,0.925858133 32.4050489,0 C35.8769778,0.231464676 39.3489067,1.1573248 42.5895822,3.00905244 C46.2930489,4.62930489 78.9293511,23.6094009 96.28928,33.7939911 L100.224284,36.1085156 C101.612942,37.0343822 102.770347,37.7287111 103.696213,38.1917867 L105.547947,39.3489067 L167.348907,75.9204978 C165.960249,62.0324978 158.784853,49.3019022 147.674453,40.7378489 C149.063396,40.04352 150.683591,39.3489067 152.072249,38.42304 C164.340053,30.7848533 209.012622,4.86075733 213.410418,3.00905244 C216.419556,1.1573248 219.891484,0.231464676 223.594951,0 C231.696213,0.925858133 239.334684,4.62930489 245.121138,10.6473813 Z M131.240391,144.434062 L144.434062,131.240391 C146.285796,129.388658 146.285796,126.611342 144.434062,124.759609 L131.240391,111.565938 C129.388658,109.714204 126.611342,109.714204 124.759609,111.565938 L111.565938,124.759609 C109.714204,126.611342 109.714204,129.388658 111.565938,131.240391 L124.759609,144.434062 C126.379804,146.054258 129.388658,146.054258 131.240391,144.434062 Z",fill:"#FF694A"})})},ce=t(68562),ae=t(57653),se=t(82359),de=t(77417),fe=t(8454),pe=t(75634),he=t(5677);function me(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function ve(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?me(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):me(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var be=function(e){var n=e.addNewBlock,t=e.blockIdx,o=e.blockTemplates,l=e.compact,u=e.focusedAddNewBlockSearch,c=e.hideCustom,a=e.hideDataExporter,s=(e.hideDataLoader,e.hideDbt),p=e.hideMarkdown,h=e.hideScratchpad,m=e.hideSensor,v=e.hideTransformer,g=e.hideTransformerDataSources,x=e.onClickAddSingleDBTModel,j=e.pipeline,C=e.project,k=e.searchTextInputRef,Z=e.setAddNewBlockMenuOpenIdx,T=e.setCreatingNewDBTModel,E=e.setFocusedAddNewBlockSearch,P=e.showBlockBrowserModal,S=e.showBrowseTemplates,_=e.showConfigureProjectModal,I=e.showGlobalDataProducts,w=(0,de.Z)(),A=w.featureEnabled,D=w.featureUUIDs,B=(0,i.useState)(null),M=B[0],N=B[1],L=(0,i.useRef)(null),G=(0,i.useRef)(null),H=(0,i.useRef)(null),K=(0,i.useRef)(null),z=(0,i.useRef)(null),W=(0,i.useRef)(null),Q=(0,i.useRef)(null),Y={compact:l,inline:!0},V=null==j?void 0:j.type,q=V===ae.qL.STREAMING,X=l?pe.ZG/2:pe.ZG,$=25*J.iI,ee=(0,i.useMemo)((function(){return(0,R.q_)(he.c1,fe.qs.COLUMN,n)}),[n]),ne=(0,i.useMemo)((function(){return(0,R.q_)(he.Wt,fe.qs.ROW,n)}),[n]),te=(0,i.useMemo)((function(){var e=[{label:function(){return"Generic (no template)"},onClick:function(){n({language:O.t6.PYTHON,type:O.tf.TRANSFORMER})},uuid:"generic_transformer_action"},{bold:!0,items:ne,label:function(){return"Row actions"},uuid:"row_actions_grouping"},{isGroupingTitle:!0,label:function(){return"Column actions"},uuid:"column_actions_grouping"}].concat((0,r.Z)(ee));return g||e.splice(1,0,{bold:!0,items:(0,R.hr)(n,O.tf.TRANSFORMER,V),label:function(){return"Data sources"},uuid:"data_sources_grouping"}),e}),[n,ee,g,V,ne]),oe=(0,i.useCallback)((function(){return N(null)}),[]),re=(0,i.useCallback)((function(e){return null==Z?void 0:Z((function(n){return null===n||M!==e?t:null}))}),[t,M,Z]),ie=ae.qL.PYSPARK===V,me=(0,i.useMemo)((function(){return(0,R.oM)(o,n,{"data_integrations/destinations/base":!0,"data_integrations/sources/base":!0})}),[n,o]),be=(0,i.useMemo)((function(){return(0,R.hr)(n,O.tf.DATA_LOADER,V,{blockTemplatesByBlockType:me,showBrowseTemplates:S})}),[n,me,V,S]),ge=(0,i.useMemo)((function(){return(0,R.hr)(n,O.tf.DATA_EXPORTER,V,{blockTemplatesByBlockType:me,showBrowseTemplates:S})}),[n,me,V,S]),xe=(0,i.useMemo)((function(){return ie||ae.qL.INTEGRATION===V?te:q?[{items:(0,R.hr)(n,O.tf.TRANSFORMER,V),label:function(){return"Python"},uuid:"transformers/python"}].concat((0,r.Z)((0,R.hr)(n,O.tf.TRANSFORMER,V,{blockTemplatesByBlockType:me,onlyCustomTemplate:!0,showBrowseTemplates:S}))):[{items:te,label:function(){return"Python"},uuid:"transformers/python_all"}].concat((0,r.Z)((0,R.qs)(n,O.tf.TRANSFORMER)),(0,r.Z)((0,R.hr)(n,O.tf.TRANSFORMER,V,{blockTemplatesByBlockType:me,onlyCustomTemplate:!0,showBrowseTemplates:S})))}),[n,te,me,ie,q,V,S]),je=(0,i.useMemo)((function(){return[{label:function(){return"Single model or snapshot (from file)"},onClick:function(){null!=A&&A(D.DBT_V2)?P({blockIndex:t}):null==x||x(t)},uuid:"dbt/single_model"},{label:function(){return"All models (w/ optional exclusion)"},onClick:function(){return n({configuration:{dbt:{command:"run"}},language:O.t6.YAML,type:O.tf.DBT})},uuid:"dbt/all_models"},{label:function(){return"Generic dbt command"},onClick:function(){return n({configuration:{dbt:{command:"run"}},language:O.t6.YAML,type:O.tf.DBT})},uuid:"dbt/generic_command"},{isGroupingTitle:!0,label:function(){return"Create new models"},uuid:"dbt/new_model/group"},{disabled:!0,label:function(){return"Use the file browser to create new SQL files"},uuid:"dbt/new_model"}]}),[n,t,A,D,x,T,P]);return(0,i.useMemo)((function(){var e;return ae.qL.PYTHON===V&&!ie&&(null==C||null===(e=C.features)||void 0===e?void 0:e[se.d.ADD_NEW_BLOCK_V2])}),[ie,V,C])?(0,f.jsx)(le,{addNewBlock:n,blockIdx:t,blockTemplatesByBlockType:me,compact:l,focused:u,itemsDBT:je,pipelineType:V,project:C,searchTextInputRef:k,setAddNewBlockMenuOpenIdx:Z,setFocused:E,showBrowseTemplates:S,showConfigureProjectModal:_,showGlobalDataProducts:I}):(0,f.jsx)(F.ZP,{flexWrap:"wrap",inline:!0,children:(0,f.jsx)(U.Z,{onClickOutside:oe,open:!0,children:(0,f.jsxs)(F.ZP,{flexWrap:"wrap",children:[!a&&(0,f.jsx)(pe.W4,{increasedZIndex:0===M,children:(0,f.jsx)(d.Z,{disableKeyboardShortcuts:!0,items:be,onClickCallback:oe,open:0===M,parentRef:L,uuid:"data_loader_button",children:(0,f.jsx)(ce.ZP,ve(ve({},Y),{},{beforeElement:(0,f.jsx)(pe.Wx,{blue:!0,compact:l,children:(0,f.jsx)(b.Add,{size:X})}),onClick:function(e){e.preventDefault(),N((function(e){return 0===e?null:0})),re(0)},uuid:"AddNewBlocks/Data_loader",children:"Data loader"}))})}),!v&&(0,f.jsx)(pe.W4,{increasedZIndex:1===M,children:(0,f.jsx)(d.Z,{disableKeyboardShortcuts:!0,items:xe,onClickCallback:oe,open:1===M,parentRef:G,uuid:"transformer_button",children:(0,f.jsx)(ce.ZP,ve(ve({},Y),{},{beforeElement:(0,f.jsx)(pe.Wx,{compact:l,purple:!0,children:(0,f.jsx)(b.Add,{size:X})}),onClick:function(e){e.preventDefault(),N((function(e){return 1===e?null:1})),re(1)},uuid:"AddNewBlocks/Transformer",children:"Transformer"}))})}),!a&&(0,f.jsx)(pe.W4,{increasedZIndex:2===M,children:(0,f.jsx)(d.Z,{disableKeyboardShortcuts:!0,items:ge,onClickCallback:oe,open:2===M,parentRef:H,uuid:"data_exporter_button",children:(0,f.jsx)(ce.ZP,ve(ve({},Y),{},{beforeElement:(0,f.jsx)(pe.Wx,{compact:l,yellow:!0,children:(0,f.jsx)(b.Add,{inverted:!0,size:X})}),onClick:function(e){e.preventDefault(),N((function(e){return 2===e?null:2})),re(2)},uuid:"AddNewBlocks/Data_exporter",children:"Data exporter"}))})}),!s&&(0,f.jsx)(pe.W4,{increasedZIndex:3===M,children:(0,f.jsx)(d.Z,{disableKeyboardShortcuts:!0,items:[].concat((0,r.Z)(je),(0,r.Z)((0,R.hr)(n,O.tf.DBT,V,{blockTemplatesByBlockType:me,onlyCustomTemplate:!0,showBrowseTemplates:S}))),onClickCallback:oe,open:3===M,parentRef:K,uuid:"dbt_button",children:(0,f.jsx)(ce.ZP,ve(ve({},Y),{},{beforeElement:(0,f.jsx)(ue,{size:pe.ZG*(l?.75:1.25)}),onClick:function(e){e.preventDefault(),N((function(e){return 3===e?null:3})),re(3)},uuid:"AddNewBlocks/DBT",children:"DBT model"}))})}),!c&&(0,f.jsx)(pe.W4,{increasedZIndex:4===M,children:(0,f.jsx)(d.Z,{disableKeyboardShortcuts:!0,items:[{items:(0,R.Bd)(n,O.tf.CUSTOM,O.t6.PYTHON),label:function(){return"Python"},uuid:"custom_block_python"},{items:(0,R.Bd)(n,O.tf.CUSTOM,O.t6.SQL),label:function(){return"SQL"},uuid:"custom_block_sql"}].concat((0,r.Z)((0,R.hr)(n,O.tf.CUSTOM,V,{blockTemplatesByBlockType:me,onlyCustomTemplate:!0,showBrowseTemplates:S}))),onClickCallback:oe,open:4===M,parentRef:z,uuid:"custom_block_button",children:(0,f.jsx)(y.Z,{block:!0,label:"Add a custom code block with a designated color.",maxWidth:$,size:null,children:(0,f.jsx)(ce.ZP,ve(ve({},Y),{},{beforeElement:(0,f.jsx)(pe.Wx,{compact:l,grey:!0,children:(0,f.jsx)(b.Add,{inverted:!0,size:X})}),onClick:function(e){e.preventDefault(),N((function(e){return 4===e?null:4})),re(4)},uuid:"AddNewBlocks/Scratchpad",children:"Custom"}))})})}),!h&&(0,f.jsx)(pe.W4,{children:(0,f.jsx)(y.Z,{block:!0,label:"Write experimental code that doesn’t get executed when you run your pipeline.",maxWidth:$,size:null,children:(0,f.jsx)(ce.ZP,ve(ve({},Y),{},{beforeElement:(0,f.jsx)(pe.Wx,{border:!0,compact:l,children:(0,f.jsx)(b.Add,{size:X})}),onClick:function(e){e.preventDefault(),n({type:O.tf.SCRATCHPAD})},uuid:"AddNewBlocks/Scratchpad",children:"Scratchpad"}))})}),!h&&(0,f.jsx)(pe.W4,{children:(0,f.jsx)(y.Z,{block:!0,label:"Add a global data product block",maxWidth:$,size:null,children:(0,f.jsx)(ce.ZP,ve(ve({},Y),{},{beforeElement:(0,f.jsx)(pe.Wx,{compact:l,children:(0,f.jsx)(b.HexagonAll,{size:X})}),onClick:function(e){e.preventDefault(),I({addNewBlock:n})},uuid:"AddNewBlocks/GlobalDataProducts",children:"Global data product"}))})}),!q&&!m&&(0,f.jsx)(pe.W4,{increasedZIndex:6===M,children:(0,f.jsx)(d.Z,{disableKeyboardShortcuts:!0,items:[].concat((0,r.Z)((0,R.hr)(n,O.tf.SENSOR,V)),(0,r.Z)((0,R.hr)(n,O.tf.SENSOR,V,{blockTemplatesByBlockType:me,onlyCustomTemplate:!0,showBrowseTemplates:S}))),onClickCallback:oe,open:6===M,parentRef:W,uuid:"sensor_button",children:(0,f.jsx)(ce.ZP,ve(ve({},Y),{},{beforeElement:(0,f.jsx)(pe.Wx,{compact:l,children:(0,f.jsx)(b.Sensor,{pink:!0,size:pe.ZG*(l?.75:1.25)})}),onClick:function(e){e.preventDefault(),N((function(e){return 6===e?null:6})),re(6)},uuid:"AddNewBlocks/Sensor",children:"Sensor"}))})}),!p&&(0,f.jsx)(pe.W4,{increasedZIndex:7===M,children:(0,f.jsx)(d.Z,{disableKeyboardShortcuts:!0,items:[{label:function(){return"Generic (no template)"},onClick:function(){n({language:O.t6.MARKDOWN,type:O.tf.MARKDOWN})},uuid:"generic_markdown"}].concat((0,r.Z)((0,R.hr)(n,O.tf.MARKDOWN,V,{blockTemplatesByBlockType:me,onlyCustomTemplate:!0,showBrowseTemplates:S}))),onClickCallback:oe,open:7===M,parentRef:Q,uuid:"markdown_button",children:(0,f.jsx)(ce.ZP,ve(ve({},Y),{},{beforeElement:(0,f.jsx)(pe.Wx,{compact:l,sky:!0,children:(0,f.jsx)(b.Add,{inverted:!0,size:X})}),onClick:function(e){e.preventDefault(),N((function(e){return 7===e?null:7})),re(7)},uuid:"AddNewBlocks/Markdown",children:"Markdown"}))})})]})})})}},38399:function(e,n,t){t.d(n,{Bd:function(){return Z},SF:function(){return T},X7:function(){return E},hr:function(){return y},oM:function(){return C},q_:function(){return k},qs:function(){return j}});var o=t(21831),r=t(82394),i=t(55485),l=t(30160),u=t(5677),c=t(72473),a=t(44425),s=t(84438),d=t(57653),f=t(81728),p=t(55283),h=t(86735),m=t(28598);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}var b=function(e,n,t){var o=t===d.qL.STREAMING&&(e===a.tf.DATA_LOADER||e===a.tf.DATA_EXPORTER);return(function(e){var n;return e===d.qL.STREAMING?(n={},(0,r.Z)(n,a.tf.DATA_LOADER,[s.ZP.GENERIC,s.ZP.ACTIVEMQ,s.ZP.AMAZON_SQS,s.ZP.AZURE_EVENT_HUB,s.ZP.GOOGLE_CLOUD_PUBSUB,s.ZP.INFLUXDB,s.ZP.KAFKA,s.ZP.NATS,s.ZP.KINESIS,s.ZP.RABBITMQ,s.ZP.MONGODB]),(0,r.Z)(n,a.tf.DATA_EXPORTER,[s.ZP.GENERIC,s.ZP.ACTIVEMQ,s.ZP.AZURE_DATA_LAKE,s.ZP.BIGQUERY,s.ZP.CLICKHOUSE,s.ZP.DUCKDB,s.ZP.DUMMY,s.ZP.ELASTICSEARCH,s.ZP.GOOGLE_CLOUD_PUBSUB,s.ZP.GOOGLE_CLOUD_STORAGE,s.ZP.INFLUXDB,s.ZP.S3,s.ZP.KAFKA,s.ZP.KINESIS,s.ZP.MONGODB,s.ZP.MSSQL,s.ZP.MYSQL,s.ZP.OPENSEARCH,s.ZP.ORACLEDB,s.ZP.POSTGRES,s.ZP.RABBITMQ,s.ZP.REDSHIFT,s.ZP.SNOWFLAKE,s.ZP.TRINO]),(0,r.Z)(n,a.tf.TRANSFORMER,[s.ZP.GENERIC]),n):s.cp}(t)[e]||[]).map((function(t){return{indent:e===a.tf.TRANSFORMER,label:function(){return s.MV[t]},onClick:function(){n({config:{data_source:t===s.ZP.GENERIC?null:t},language:o&&t!==s.ZP.GENERIC?a.t6.YAML:a.t6.PYTHON,type:e})},uuid:"".concat(e,"/").concat(t)}}))};function g(e,n){return{label:function(){return"SQL"},onClick:function(){return e({language:a.t6.SQL,type:n})},uuid:"".concat(n,"/sql")}}function x(e,n){return{label:function(){return"R"},onClick:function(){return e({language:a.t6.R,type:n})},uuid:"".concat(n,"/r")}}var j=function(e,n){return[g(e,n),x(e,n)]};function C(e,n,t){var o={};return null==e||e.forEach((function(e){var i=e.block_type,l=e.configuration,u=e.defaults,c=e.description,a=e.groups,s=e.language,d=e.name,f=e.path,p=e.template_type,h=e.template_variables;o[i]||(o[i]={}),o[i][s]||(o[i][s]={items:[],label:function(){return s},uuid:"".concat(i,"/").concat(s)});var m={label:function(){return d},onClick:function(){return n({config:{template_path:f,template_type:p,template_variables:h},configuration:l,defaults:u,language:s,type:i})},uuid:"".concat(f,"/").concat(d)};if(null!=t&&t[f]||(m.tooltip=function(){return c}),(null==a?void 0:a.length)>=1){var b=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},o[i][s]),g=[null],x=[b];a.forEach((function(e,n){var t="".concat(i,"/").concat(s,"/").concat(a.slice(0,n+1).join("/")),o=x[n],r=o.items.findIndex((function(e){var n=e.uuid;return t===n})),l=r>=0?o.items[r]:null;l||(l={items:[],label:function(){return e},uuid:t}),g.push(r),x.push(l)})),g.push(-1),x.push(m);var j=x.length;o[i][s]=x.reduce((function(e,n,t){var o=j-t,r=x[o-2],i=x[o-1],l=g[o-1];return r?(l>=0?r.items[l]=i:r.items.push(i),r):i}),{})}else o[i][s].items.push(m)})),o}var y=function(e,n,t,o){var r=o||{},i=r.blockTemplatesByBlockType,l=r.dataIntegrationType,u=r.languages,c=r.onlyCustomTemplate,s=r.showBrowseTemplates,f={};null!=o&&o.v2||(f=Object.fromEntries(a.Ut.map((function(n){return[n,b(n,e,t)]}))));var p={label:function(){return"Custom template"},onClick:function(){return s({addNewBlock:e,blockType:n,language:a.t6.SQL})},uuid:"".concat(n,"/custom_template")};if(c)return[p];if(t===d.qL.PYSPARK||t===d.qL.STREAMING)return f[n];if(l&&null!=o&&o.v2){var m,v,j=(null==i||null===(m=i[n])||void 0===m||null===(v=m[l])||void 0===v?void 0:v.items)||[];return[{items:(0,h.YC)(j,(function(e){return(0,e.label)()})),uuid:"".concat(n,"/").concat(l)}]}var C,y,O=(null==i||null===(C=i[n])||void 0===C||null===(y=C[a.t6.PYTHON])||void 0===y?void 0:y.items)||[],k=[{items:(0,h.YC)((f[n]||[]).concat(O),(function(e){return(0,e.label)()})),label:function(){return"Python"},uuid:"".concat(n,"/").concat(a.t6.PYTHON)}];return(!u||null!=u&&u.includes(a.t6.SQL))&&k.push(g(e,n)),(!u||null!=u&&u.includes(a.t6.R))&&k.push(x(e,n)),![a.tf.MARKDOWN,a.tf.SCRATCHPAD].includes(n)&&s&&k.push(p),k};function O(e,n,t){return e.map((function(e){return{indent:!0,label:function(){return u.NX[n][e]},onClick:function(){t({config:{action_type:e,axis:n},language:a.t6.PYTHON,type:a.tf.TRANSFORMER})},uuid:"".concat(n,"_").concat(e)}})).sort((function(e,n){return e.label().localeCompare(n.label())}))}function k(e,n,t){var r=[];return e.forEach((function(e){if(e!==u._G.MISC)r.push({indent:!0,items:O(u.d9[n][e],n,t),label:function(){return e},uuid:"".concat(n,"_grouping_").concat((0,f.RA)(e))});else{var i=O(u.d9[n][e],n,t);r.push.apply(r,(0,o.Z)(i))}})),r}var Z=function(e,n,t){return Object.values(a.Lq).map((function(o){return{label:function(){return(0,m.jsxs)(i.ZP,{alignItems:"center",children:[(0,m.jsx)(c.Add,{fill:(0,p.qn)(a.tf.CUSTOM,{blockColor:o}).accent,size:16})," ",(0,m.jsx)(l.ZP,{children:(0,f.kC)(o)})]})},leftAligned:!0,onClick:function(){e({color:o,language:t,type:n})},uuid:"".concat(t,"_").concat(o)}}))},T=function(e){return"-- Docs: https://docs.mage.ai/guides/sql-blocks\n"+(e||"")};function E(e,n){var t=n;return a.tf.SCRATCHPAD===e.type&&(t='"""\nNOTE: Scratchpad blocks are used only for experimentation and testing out code.\nThe code written here will not be executed as part of the pipeline.\n"""\n'+(n||"")),t}},38118:function(e,n,t){t.d(n,{HL:function(){return d},NV:function(){return p},Nk:function(){return s},W4:function(){return f},ZG:function(){return a},eS:function(){return h},gI:function(){return v},rS:function(){return m}});var o=t(9518),r=t(44897),i=t(42631),l=t(70515),u=t(47041),c=t(91437),a=l.cd*l.iI,s=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1mqygp5-0"})([""," border-radius:","px;"," "," "," "," ",""],(0,c.eR)(),i.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).dashboard,";\n    box-shadow: ").concat((e.theme.shadow||r.Z.shadow).frame,";\n  ")}),(function(e){return!e.focused&&"\n    border: 1px solid ".concat((e.theme.interactive||r.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.focused&&"\n    border: 1px solid ".concat((e.theme.interactive||r.Z.interactive).hoverBorder,";\n  ")}),(function(e){return!e.compact&&"\n    padding-left: ".concat(2.5*l.iI,"px;\n    padding-right: ").concat(2.5*l.iI,"px;\n  ")}),(function(e){return e.compact&&"\n    padding-left: ".concat(1.5*l.iI,"px;\n    padding-right: ").concat(1.5*l.iI,"px;\n  ")})),d=o.default.div.withConfig({displayName:"indexstyle__DividerStyle",componentId:"sc-1mqygp5-1"})(["height:","px;width:1px;",""],a,(function(e){return"\n    background-color: ".concat((e.theme.interactive||r.Z.interactive).defaultBorder,";\n  ")})),f=o.default.div.withConfig({displayName:"indexstyle__ButtonWrapper",componentId:"sc-1mqygp5-2"})(["position:relative;"," "," ",""],(function(e){return e.increasedZIndex&&"\n    z-index: 3;\n  "}),(function(e){return!e.compact&&"\n    margin-bottom: ".concat(2.5*l.iI,"px;\n    margin-top: ").concat(2.5*l.iI,"px;\n  ")}),(function(e){return e.compact&&"\n    margin-bottom: ".concat(1.5*l.iI,"px;\n    margin-top: ").concat(1.5*l.iI,"px;\n  ")})),p=o.default.div.withConfig({displayName:"indexstyle__TextInputFocusAreaStyle",componentId:"sc-1mqygp5-3"})(["width:100%;&:hover{cursor:text;}"," ",""],(function(e){return!e.compact&&"\n    height: ".concat(2.5*l.iI,"px;\n  ")}),(function(e){return e.compact&&"\n    height: ".concat(1.5*l.iI,"px;\n  ")})),h=o.default.div.withConfig({displayName:"indexstyle__SearchStyle",componentId:"sc-1mqygp5-4"})(["position:relative;width:100%;"]),m=o.default.div.withConfig({displayName:"indexstyle__DropdownStyle",componentId:"sc-1mqygp5-5"})([""," border-radius:","px;overflow:auto;position:absolute;z-index:5;"," ",""],u.w5,i.BG,(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).popup,";\n    box-shadow: ").concat((e.theme.shadow||r.Z.shadow).window,";\n    max-height: ").concat((null==e?void 0:e.maxHeight)||40*l.iI,"px;\n    width: ").concat(e.width||"100%",";\n  ")}),(function(e){return e.topOffset&&"\n    top: ".concat(e.topOffset,"px;\n  ")})),v=o.default.div.withConfig({displayName:"indexstyle__RowStyle",componentId:"sc-1mqygp5-6"})(["align-items:center;display:flex;justify-content:space-between;padding:","px ","px;position:relative;z-index:2;&:hover{cursor:pointer;}",""],1.5*l.iI,2.5*l.iI,(function(e){return e.highlighted&&"\n    background-color: ".concat((e.theme.interactive||r.Z.interactive).hoverBackground,";\n  ")}))},15752:function(e,n,t){t.d(n,{F:function(){return i},h:function(){return r}});var o=t(92709);function r(){var e=new CustomEvent(o.Qj);window.dispatchEvent(e)}function i(e){var n=new CustomEvent(o.Em,{detail:{block:e}});window.dispatchEvent(n)}},26419:function(e,n,t){t.d(n,{a:function(){return o}});var o={compact:!0,highlightOnHoverAlt:!0,noBorder:!0,padding:"4px 12px"}},92709:function(e,n,t){t.d(n,{$e:function(){return a},Em:function(){return f},IY:function(){return l},Jf:function(){return i},LR:function(){return r},NR:function(){return u},Qj:function(){return d},Wf:function(){return p},b7:function(){return o},m$:function(){return s},tK:function(){return c}});var o="edit",r="[ERR_BLOCK_EXISTS]",i={uuid:"All files"},l={uuid:"Current blocks"},u=[i,l],c="CUSTOM_EVENT_BLOCK_OUTPUT_CHANGED",a="CUSTOM_EVENT_CODE_BLOCK_CHANGED",s="CUSTOM_EVENT_COLUMN_SCROLLER_CURSOR_MOVED",d="CUSTOM_EVENT_COLUMN_SCROLLER_RESET",f="CUSTOM_EVENT_COLUMN_SCROLLER_SCROLL_TO_BLOCK",p="CUSTOM_EVENT_SYNC_COLUMN_POSITIONS"},74052:function(e,n,t){t.d(n,{Dp:function(){return Z},J8:function(){return w},OF:function(){return T},Q9:function(){return P},Rt:function(){return y},Rz:function(){return _},h8:function(){return E},k1:function(){return O},o1:function(){return C},uS:function(){return S},zv:function(){return I}});var o=t(21831),r=t(82394),i=t(17717),l=t(92083),u=t.n(l),c=t(44425),a=t(89706),s=t(48339),d=t(30352),f=t(53808),p=t(81728),h=t(3917),m=t(61709),v=t(86735),b=t(70320),g=t(42122);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function C(e){var n,t;if("object"==typeof e){var o=e||{},r=o.sample_data,i=o.shape,l=o.text_data;t=null==e?void 0:e.type,r?n=j({shape:i,type:t},r):l&&(0,p.Pb)(l)?(n=JSON.parse(l),t=s.Gi.TABLE,(0,g.Qr)(n)&&(n=null,t=s.Gi.TEXT)):n=l}else t=s.Gi.TEXT,n={data:String(e),type:t};return j(j({},e),{},{data:n,type:t})}function y(e){var n={},t={};return null==e||e.forEach((function(e){var r=e.content,i=e.outputs,l=e.type,u=e.uuid;(null==i?void 0:i.length)>=1&&(null==i?void 0:i.some((function(e){return s.Gi.GROUP===(null==e?void 0:e.type)||!(null==e||!e.multi_output)})))?n[u]=i:(null==i?void 0:i.length)>=1&&(n[u]=function(e){var n,t,r,i,l=[],u=!1,c=null;if(e.forEach((function(n){var t,o=C(n),r=o.data,i=o.type;u=u||(null==n?void 0:n.multi_output),c=!r&&!c&&(null==e?void 0:e.length)>=2?null:c||i,s.Gi.TEXT_PLAIN===(null==n?void 0:n.type)&&(null==n||null===(t=n.text_data)||void 0===t?void 0:t.length)>=1?l.push(j(j({},n),{},{data:null==n?void 0:n.text_data})):(r||1===(null==e?void 0:e.length))&&l.push(j(j({},n),{},{data:r,type:i}))})),console.log("outputsFinal",l),s.Gi.TEXT_PLAIN===c)return l;if(u)l=[{data:{columns:null==e?void 0:e.map((function(e,n){return(null==e?void 0:e.variable_uuid)||"output_".concat(n)})),index:null==e?void 0:e.map((function(e,n){return n})),shape:[(null==e?void 0:e.length)||0,1],rows:l},multi_output:!0,type:c}];else if(s.Gi.TABLE===c&&(null===(n=l)||void 0===n?void 0:n.length)>=2&&null!==(t=l)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&null!==(i=r.data)&&void 0!==i&&i.text_data){var a,d=null===(a=l)||void 0===a?void 0:a.map((function(e){return e.data}));if((null==d?void 0:d.length)>=1){var f,p=null===(f=(0,v.w6)(Math.max.apply(Math,(0,o.Z)(null==d?void 0:d.map((function(e){return null==e?void 0:e.length}))))))||void 0===f?void 0:f.map((function(e,n){return"col".concat(n)})),h=[null==d?void 0:d.length,null==p?void 0:p.length],m=null==d?void 0:d.map((function(e,n){return n}));l=[{data:{rows:d,columns:p,shape:h,index:m},type:c}]}}return l}(i)),t[l]||(t[l]={}),t[l][u]=r})),{content:t,messages:n}}function O(e,n,t){e.forEach((function(e){(0,f.t8)("".concat(t,"/").concat(e.uuid,"/codeCollapsed"),(0,f.Od)("".concat(n,"/").concat(e.uuid,"/codeCollapsed"))),(0,f.t8)("".concat(t,"/").concat(e.uuid,"/outputCollapsed"),(0,f.Od)("".concat(n,"/").concat(e.uuid,"/outputCollapsed")))}))}function k(e){return"".concat(e,"/").concat(f.kP)}function Z(e){return(0,f.U2)(k(e),[])}function T(e,n){var t=Z(e);t.includes(n)||(0,f.t8)(k(e),[].concat((0,o.Z)(t),[n]))}function E(e,n){var t=Z(e).filter((function(e){return e!==n}));(0,f.t8)(k(e),t)}function P(e,n){var t=(0,v.HK)(n,(function(e){return e.uuid}));return e.map((function(e){return t[e]})).filter((function(e){return!!e}))}var S=function(e,n){var t=window.URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download=n,document.body.appendChild(o),o.click(),o.remove()};function _(e,n){var t,o=(0,b.qB)(),r=null==n?void 0:n.isPipelineUpdating,i=null==n?void 0:n.pipelineContentTouched,l=null==n?void 0:n.pipelineLastSaved;if(i)t="Unsaved changes";else if(r)t="Saving changes...";else if(l){var c=u()().utc().unix();if(null!=n&&n.displayRelative&&c-l<3600){var a=u().unix(c-(c-l)).utc().fromNow();t="Saved ".concat(a)}else{var s=(0,h.JX)(l/1e3);null!=e&&e.updated_at&&(s=(0,h.XG)((0,h.d$)(null==e?void 0:e.updated_at,{includeSeconds:!0,utcFormat:!0}),o)),t="Last saved ".concat(s)}}else if(null!=n&&n.showLastUpdatedTimestamp){var d=(0,h.EP)(u()(null==n?void 0:n.showLastUpdatedTimestamp),o);t="Last saved ".concat(d)}else t="All changes saved";return t}function I(e){var n=e.type,t=e.uuid;return"".concat(n,"s/").concat(t,".py")}function w(e){var n=e.blockIndex,t=e.blocks,o=e.filePath,r=e.isNewBlock,l=e.name,u=e.repoPathRelativeRoot;"".concat(u).concat(i.sep).concat(a.aZ.DBT).concat(i.sep);if(r){var s=(0,p.RA)(l||(0,p.Y6)()),f=".".concat(a.Lu.SQL);s.endsWith(f)&&(s=s.slice(0,-4))}var h={configuration:{file_path:o,file_source:{path:o},limit:d.z},language:c.t6.SQL,name:(0,p.wE)(o),type:c.tf.DBT};r&&(h.content="--Docs: https://docs.mage.ai/dbt/sources\n");var v=t[null==n?t.length-1:n],b=v?(0,m.eY)(v,h):[];return j(j({},h),{},{upstream_blocks:b})}},26084:function(e,n,t){var o;t.d(n,{Q:function(){return o}}),function(e){e.CALLBACK="callbacks",e.CONDITIONAL="conditionals"}(o||(o={}))},2548:function(e,n,t){var o;t.d(n,{L:function(){return o}}),function(e){e.BLOCK_FILE="block_file",e.CUSTOM_BLOCK_TEMPLATE="custom_block_template",e.GENERATE_BLOCK="generate_block",e.MAGE_TEMPLATE="mage_template"}(o||(o={}))},13803:function(e,n,t){var o,r;t.d(n,{I:function(){return r},O:function(){return o}}),function(e){e.DESTINATIONS="destinations",e.SOURCES="sources"}(o||(o={})),function(e){e.DATA_INTEGRATION="data_integration"}(r||(r={}))},83905:function(e,n,t){var o;t.d(n,{N:function(){return o}}),function(e){e.DBT="dbt"}(o||(o={}))},84438:function(e,n,t){t.d(n,{MV:function(){return c},cp:function(){return a},zJ:function(){return i}});var o,r,i,l=t(82394),u=t(44425);!function(e){e.ACTIVEMQ="activemq",e.AMAZON_SQS="amazon_sqs",e.API="api",e.AZURE_BLOB_STORAGE="azure_blob_storage",e.AZURE_DATA_LAKE="azure_data_lake",e.AZURE_EVENT_HUB="azure_event_hub",e.BIGQUERY="bigquery",e.CLICKHOUSE="clickhouse",e.DRUID="druid",e.DUCKDB="duckdb",e.DUMMY="dummy",e.ELASTICSEARCH="elasticsearch",e.FILE="file",e.GENERIC="generic",e.GOOGLE_CLOUD_PUBSUB="google_cloud_pubsub",e.GOOGLE_CLOUD_STORAGE="google_cloud_storage",e.GOOGLE_SHEETS="google_sheets",e.INFLUXDB="influxdb",e.KAFKA="kafka",e.KINESIS="kinesis",e.MONGODB="mongodb",e.MSSQL="mssql",e.MYSQL="mysql",e.NATS="nats",e.OPENSEARCH="opensearch",e.ORACLEDB="oracledb",e.PINOT="pinot",e.POSTGRES="postgres",e.RABBITMQ="rabbitmq",e.REDSHIFT="redshift",e.S3="s3",e.SNOWFLAKE="snowflake",e.TRINO="trino"}(i||(i={}));var c=(o={},(0,l.Z)(o,i.ACTIVEMQ,"ActiveMQ"),(0,l.Z)(o,i.AMAZON_SQS,"Amazon SQS"),(0,l.Z)(o,i.API,"API"),(0,l.Z)(o,i.AZURE_BLOB_STORAGE,"Azure Blob Storage"),(0,l.Z)(o,i.AZURE_DATA_LAKE,"Azure Data Lake"),(0,l.Z)(o,i.AZURE_EVENT_HUB,"Azure Event Hub"),(0,l.Z)(o,i.BIGQUERY,"Google BigQuery"),(0,l.Z)(o,i.CLICKHOUSE,"ClickHouse"),(0,l.Z)(o,i.DRUID,"Druid"),(0,l.Z)(o,i.DUCKDB,"DuckDB"),(0,l.Z)(o,i.DUMMY,"Dummy"),(0,l.Z)(o,i.ELASTICSEARCH,"ElasticSearch"),(0,l.Z)(o,i.FILE,"Local file"),(0,l.Z)(o,i.GENERIC,"Generic (no template)"),(0,l.Z)(o,i.GOOGLE_CLOUD_PUBSUB,"Google Cloud PubSub"),(0,l.Z)(o,i.GOOGLE_CLOUD_STORAGE,"Google Cloud Storage"),(0,l.Z)(o,i.GOOGLE_SHEETS,"Google Sheets"),(0,l.Z)(o,i.INFLUXDB,"InfluxDB"),(0,l.Z)(o,i.KAFKA,"Kafka"),(0,l.Z)(o,i.KINESIS,"Kinesis"),(0,l.Z)(o,i.MONGODB,"MongoDB"),(0,l.Z)(o,i.MSSQL,"Microsoft SQL Server"),(0,l.Z)(o,i.MYSQL,"MySQL"),(0,l.Z)(o,i.NATS,"NATS"),(0,l.Z)(o,i.OPENSEARCH,"OpenSearch"),(0,l.Z)(o,i.ORACLEDB,"OracleDB"),(0,l.Z)(o,i.PINOT,"Pinot"),(0,l.Z)(o,i.POSTGRES,"PostgreSQL"),(0,l.Z)(o,i.RABBITMQ,"RabbitMQ"),(0,l.Z)(o,i.REDSHIFT,"Amazon Redshift"),(0,l.Z)(o,i.S3,"Amazon S3"),(0,l.Z)(o,i.SNOWFLAKE,"Snowflake"),(0,l.Z)(o,i.TRINO,"Trino"),o),a=(r={},(0,l.Z)(r,u.tf.DATA_LOADER,[i.GENERIC,i.FILE,i.API,i.AZURE_BLOB_STORAGE,i.BIGQUERY,i.DRUID,i.GOOGLE_CLOUD_STORAGE,i.GOOGLE_SHEETS,i.MYSQL,i.ORACLEDB,i.PINOT,i.POSTGRES,i.REDSHIFT,i.S3,i.SNOWFLAKE,i.MONGODB]),(0,l.Z)(r,u.tf.DATA_EXPORTER,[i.GENERIC,i.FILE,i.S3,i.AZURE_BLOB_STORAGE,i.GOOGLE_CLOUD_STORAGE,i.GOOGLE_SHEETS,i.REDSHIFT,i.BIGQUERY,i.SNOWFLAKE,i.MYSQL,i.POSTGRES]),(0,l.Z)(r,u.tf.TRANSFORMER,[i.REDSHIFT,i.BIGQUERY,i.SNOWFLAKE,i.POSTGRES]),(0,l.Z)(r,u.tf.SENSOR,[i.GENERIC,i.S3,i.GOOGLE_CLOUD_STORAGE,i.REDSHIFT,i.BIGQUERY,i.SNOWFLAKE,i.MYSQL,i.POSTGRES]),r);n.ZP=i},89706:function(e,n,t){t.d(n,{BB:function(){return m},I1:function(){return y},JD:function(){return E},KA:function(){return P},Lu:function(){return a},PF:function(){return k},QX:function(){return f},_n:function(){return O},aZ:function(){return c},bL:function(){return x},d2:function(){return C},dT:function(){return s},n6:function(){return v},nB:function(){return T},oy:function(){return Z},tE:function(){return b},xF:function(){return j}});var o,r,i,l,u,c,a,s,d,f,p=t(82394),h=t(44425);!function(e){e.DBT="dbt"}(c||(c={})),function(e){e.CSV="csv",e.JINJA="jinja",e.JSON="json",e.MD="md",e.PY="py",e.R="r",e.SH="sh",e.SQL="sql",e.TXT="txt",e.YAML="yaml",e.YML="yml"}(a||(a={})),function(e){e.INIT_PY="__init__.py",e.METADATA_YAML="metadata.yaml",e.REQS_TXT="requirements.txt"}(s||(s={})),function(e){e.EXCLUDE_DIR_PATTERN="exclude_dir_pattern",e.EXCLUDE_PATTERN="exclude_pattern",e.PATTERN="pattern"}(d||(d={})),function(e){e.ALL_FILES="all_files",e.UNUSED_BLOCK_FILES="unused_block_files"}(f||(f={}));var m=(o={},(0,p.Z)(o,d.EXCLUDE_PATTERN,"a^"),(0,p.Z)(o,d.EXCLUDE_DIR_PATTERN,"a^"),o),v=[a.PY,a.SQL],b=[a.MD,a.PY,a.R,a.SQL,a.YAML],g=[a.JSON,a.MD,a.PY,a.R,a.SH,a.SQL,a.TXT,a.YAML,a.YML],x=(r={},(0,p.Z)(r,a.PY,0),(0,p.Z)(r,a.SQL,1),(0,p.Z)(r,a.R,2),(0,p.Z)(r,a.YAML,3),(0,p.Z)(r,a.YML,3),(0,p.Z)(r,a.MD,4),(0,p.Z)(r,a.TXT,5),(0,p.Z)(r,a.JSON,6),(0,p.Z)(r,a.CSV,7),(0,p.Z)(r,a.SH,8),r),j=new RegExp(g.map((function(e){return".".concat(e,"$")})).join("|")),C=new RegExp([a.CSV,a.JINJA,a.JSON,a.MD,a.PY,a.R,a.SH,a.SQL,a.TXT,a.YAML,a.YML].map((function(e){return".".concat(e,"$")})).join("|")),y=new RegExp(["__init__.py","metadata.yaml","interactions.yaml",".DS_Store"].join("|")),O=new RegExp(["compiled","__pycache__"].join("|")),k="charts",Z="pipelines",T=(i={},(0,p.Z)(i,a.MD,h.t6.MARKDOWN),(0,p.Z)(i,a.JSON,a.JSON),(0,p.Z)(i,a.PY,h.t6.PYTHON),(0,p.Z)(i,a.R,h.t6.R),(0,p.Z)(i,a.SQL,h.t6.SQL),(0,p.Z)(i,a.TXT,"text"),(0,p.Z)(i,a.YAML,h.t6.YAML),(0,p.Z)(i,a.YML,h.t6.YAML),i),E=(l={},(0,p.Z)(l,h.t6.MARKDOWN,a.MD),(0,p.Z)(l,h.t6.PYTHON,a.PY),(0,p.Z)(l,h.t6.R,a.R),(0,p.Z)(l,h.t6.SQL,a.SQL),(0,p.Z)(l,h.t6.YAML,a.YAML),(0,p.Z)(l,"text",a.TXT),l),P=(u={},(0,p.Z)(u,a.CSV,"Comma-separated values"),(0,p.Z)(u,a.JSON,"JSON"),(0,p.Z)(u,a.MD,"Markdown"),(0,p.Z)(u,a.PY,"Python"),(0,p.Z)(u,a.R,"R"),(0,p.Z)(u,a.SH,"Shell script"),(0,p.Z)(u,a.SQL,"SQL"),(0,p.Z)(u,a.TXT,"Text"),(0,p.Z)(u,a.YAML,"YAML"),(0,p.Z)(u,a.YML,"YAML"),u)},7267:function(e,n,t){var o;t.d(n,{z:function(){return o}}),function(e){e.GENERATE_BLOCK_WITH_DESCRIPTION="generate_block_with_description",e.GENERATE_CODE="generate_code",e.GENERATE_COMMENT_FOR_CODE="generate_comment_for_code",e.GENERATE_DOC_FOR_BLOCK="generate_doc_for_block",e.GENERATE_DOC_FOR_PIPELINE="generate_doc_for_pipeline",e.GENERATE_PIPELINE_WITH_DESCRIPTION="generate_pipeline_with_description"}(o||(o={}))},5677:function(e,n,t){t.d(n,{NX:function(){return m},Wt:function(){return h},_G:function(){return c},c1:function(){return p},d9:function(){return f}});var o,r,i,l,u,c,a=t(82394),s=t(8454),d=(s.Q0.AVERAGE,s.Q0.CLEAN_COLUMN_NAME,s.Q0.COUNT,s.Q0.COUNT_DISTINCT,s.Q0.CUSTOM,s.Q0.DIFF,s.Q0.FIRST,s.Q0.FIX_SYNTAX_ERRORS,s.Q0.IMPUTE,s.Q0.LAST,s.Q0.MAX,s.Q0.MEDIAN,s.Q0.MIN,s.Q0.NORMALIZE,s.Q0.REFORMAT,s.Q0.REMOVE,s.Q0.REMOVE_OUTLIERS,s.Q0.SELECT,s.Q0.SHIFT_DOWN,s.Q0.SHIFT_UP,s.Q0.STANDARDIZE,s.Q0.SUM,[s.Q0.DROP_DUPLICATE,s.Q0.FILTER,s.Q0.SORT,s.Q0.REMOVE]);!function(e){e.AGGREGATE="Aggregate",e.FORMATTING="Formatting",e.COLUMN_REMOVAL="Column removal",e.SHIFT_ROWS="Shift rows in a column",e.MISC="Miscellaneous",e.FEATURE_SCALING="Feature Scaling"}(c||(c={}));var f=(r={},(0,a.Z)(r,s.qs.COLUMN,(o={},(0,a.Z)(o,c.AGGREGATE,[s.Q0.AVERAGE,s.Q0.COUNT,s.Q0.COUNT_DISTINCT,s.Q0.FIRST,s.Q0.LAST,s.Q0.MAX,s.Q0.MEDIAN,s.Q0.MIN,s.Q0.SUM]),(0,a.Z)(o,c.FORMATTING,[s.Q0.CLEAN_COLUMN_NAME,s.Q0.FIX_SYNTAX_ERRORS,s.Q0.REFORMAT]),(0,a.Z)(o,c.COLUMN_REMOVAL,[s.Q0.REMOVE,s.Q0.SELECT]),(0,a.Z)(o,c.SHIFT_ROWS,[s.Q0.SHIFT_DOWN,s.Q0.SHIFT_UP]),(0,a.Z)(o,c.MISC,[s.Q0.DIFF,s.Q0.IMPUTE,s.Q0.REMOVE_OUTLIERS]),(0,a.Z)(o,c.FEATURE_SCALING,[s.Q0.NORMALIZE,s.Q0.STANDARDIZE]),o)),(0,a.Z)(r,s.qs.ROW,(0,a.Z)({},c.MISC,[].concat(d))),r),p=Object.keys(f[s.qs.COLUMN]),h=[c.MISC],m=(u={},(0,a.Z)(u,s.qs.COLUMN,(i={},(0,a.Z)(i,s.Q0.ADD,"Add column"),(0,a.Z)(i,s.Q0.AVERAGE,"Aggregate by average value"),(0,a.Z)(i,s.Q0.CLEAN_COLUMN_NAME,"Clean column name"),(0,a.Z)(i,s.Q0.COUNT_DISTINCT,"Aggregate by distinct count"),(0,a.Z)(i,s.Q0.COUNT,"Aggregate by total count"),(0,a.Z)(i,s.Q0.DIFF,"Difference"),(0,a.Z)(i,s.Q0.FIRST,"Aggregate by first value"),(0,a.Z)(i,s.Q0.FIX_SYNTAX_ERRORS,"Fix syntax errors"),(0,a.Z)(i,s.Q0.IMPUTE,"Fill in missing values"),(0,a.Z)(i,s.Q0.NORMALIZE,"Normalize Data"),(0,a.Z)(i,s.Q0.STANDARDIZE,"Standardize Data"),(0,a.Z)(i,s.Q0.LAST,"Aggregate by last value"),(0,a.Z)(i,s.Q0.MAX,"Aggregate by maximum value"),(0,a.Z)(i,s.Q0.MEDIAN,"Aggregate by median value"),(0,a.Z)(i,s.Q0.MIN,"Aggregate by mininum value"),(0,a.Z)(i,s.Q0.REFORMAT,"Reformat"),(0,a.Z)(i,s.Q0.REMOVE_OUTLIERS,"Remove outliers"),(0,a.Z)(i,s.Q0.REMOVE,"Remove column(s)"),(0,a.Z)(i,s.Q0.SELECT,"Keep columns"),(0,a.Z)(i,s.Q0.SHIFT_DOWN,"Shift rows down in a column"),(0,a.Z)(i,s.Q0.SHIFT_UP,"Shift rows up in a column"),(0,a.Z)(i,s.Q0.SUM,"Aggregate by sum of values"),i)),(0,a.Z)(u,s.qs.ROW,(l={},(0,a.Z)(l,s.Q0.DROP_DUPLICATE,"Drop duplicates"),(0,a.Z)(l,s.Q0.FILTER,"Filter"),(0,a.Z)(l,s.Q0.SORT,"Sort"),(0,a.Z)(l,s.Q0.REMOVE,"Remove rows"),l)),u)},56747:function(e,n,t){t.d(n,{Z:function(){return j}});var o=t(20433),r=t(28729),i=t(85223),l=t(61312),u=t(85854),c=t(48670),a=t(30160),s=t(44897),d=t(9518),f=t(95363),p=t(70515),h=t(42631),m=t(61896),v=t(47041),b="0.75em",g=d.default.div.withConfig({displayName:"indexstyle__MarkdownContainer",componentId:"sc-j72mol-0"})(["font-family:",";margin:0 ","px;overflow:auto;"," "," p{margin:0.5em 0;}blockquote{margin:"," 0;padding:","px 0;","}blockquote:before{content:'';font-size:","px;line-height:0.1em;margin-right:0.25em;vertical-align:-0.4em;}blockquote p{display:inline;}pre{border-radius:","px;white-space:pre;margin:"," 0;padding:","px;overflow-x:auto;"," "," span{padding:0;}}ul,ol{margin-bottom:",";padding-left:","px;}li{","}li > input[type='checkbox']{pointer-events:none;}table{"," margin:",";thead{font-family:",";","}th,td{padding:","px ","px;","}}"],f.ry,p.iI,v.w5,(function(e){return"\n    color: ".concat((e.theme||s.Z).content.active,";\n  ")}),b,p.iI,(function(e){return"\n      border-left: ".concat(.5*p.iI,"px solid ").concat((e.theme||s.Z).content.active,";\n    ")}),3*p.l4,h.BG,b,p.iI,v.w5,(function(e){return"\n      background-color: ".concat((e.theme||s.Z).interactive.defaultBorder,";\n    ")}),b,3*p.iI,m.iD,m.iD,b,f.nF,(function(e){return"\n        border-bottom: ".concat(h.YF,"px solid ").concat((e.theme||s.Z).content.active,";\n      ")}),.5*p.iI,.75*p.iI,(function(e){return"\n        border: ".concat(h.YF,"px solid ").concat((e.theme||s.Z).content.muted,";\n      ")})),x=t(28598);var j=function(e){var n=e.children;return(0,x.jsx)(g,{children:(0,x.jsx)(o.D,{components:{a:function(e){var n=e.children,t=e.href;return(0,x.jsx)(c.Z,{href:t,inline:!0,openNewWindow:!0,primary:!0,children:n})},code:function(e){var n=e.children;return(0,x.jsx)(a.ZP,{backgroundColor:s.Z.interactive.defaultBorder,inline:!0,monospace:!0,pre:!0,style:{fontSize:"13px"},children:n})},em:function(e){var n=e.children;return(0,x.jsx)(a.ZP,{inline:!0,italic:!0,children:n})},h1:function(e){var n=e.children;return(0,x.jsx)(u.Z,{level:1,children:n})},h2:function(e){var n=e.children;return(0,x.jsx)(u.Z,{level:2,children:n})},h3:function(e){var n=e.children;return(0,x.jsx)(u.Z,{level:3,children:n})},h4:function(e){var n=e.children;return(0,x.jsx)(u.Z,{level:4,children:n})},h5:function(e){var n=e.children;return(0,x.jsx)(u.Z,{level:5,children:n})},p:function(e){var n=e.children;return(0,x.jsx)(a.ZP,{children:n})},strong:function(e){var n=e.children;return(0,x.jsx)(a.ZP,{bold:!0,inline:!0,children:n})}},rehypePlugins:[r.Z,i.Z],remarkPlugins:[l.Z],children:n})})}},92677:function(e,n,t){var o=t(82684),r=t(9518),i=t(97618),l=t(55485),u=t(28598),c=r.default.div.withConfig({displayName:"ButtonGroup__ButtonGroupStyle",componentId:"sc-15vbmc8-0"})([""]),a=r.default.div.withConfig({displayName:"ButtonGroup__VerticalDivider",componentId:"sc-15vbmc8-1"})(["width:1px;"]);n.Z=function(e){var n=e.children,t=e.divider,r=o.Children.toArray(n).length;return(0,u.jsx)(c,{children:(0,u.jsx)(l.ZP,{children:o.Children.map(n,(function(e,n){return e&&(0,u.jsxs)(i.Z,{children:[n>=1&&t&&(0,u.jsx)(a,{}),o.cloneElement(e,{borderRadiusLeft:r>=2&&0===n,borderRadiusRight:r>=2&&n===r-1,halfPaddingLeft:r>=2&&0!==n,halfPaddingRight:r>=2&&n!==r-1,noBorder:r>=2&&n>0&&n<r-1,noBorderRight:r>=2&&n!==r-1})]},"button-group-child-".concat(n))}))})})}},316:function(e,n,t){t.d(n,{bS:function(){return s},w5:function(){return f},xi:function(){return d}});var o=t(82394),r=t(77837),i=t(38860),l=t.n(i);function u(e){return new Promise((function(n){return setTimeout(n,e)}))}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){var t,o,r,i=null===(t=e||"")||void 0===t||null===(o=t.split(" "))||void 0===o?void 0:o.filter((function(e){return!(null!=n&&n.includes(e))}));return null===(r=n||[])||void 0===r?void 0:r.concat(i).join(" ")}function d(e,n){var t,o,r;return null===(r=(null===(t=e||"")||void 0===t||null===(o=t.split(" "))||void 0===o?void 0:o.filter((function(e){return"function"==typeof n?!n(e):!(null!=n&&n.includes(e))})))||[])||void 0===r?void 0:r.join(" ")}function f(e){function n(){return n=(0,r.Z)(l().mark((function n(t,i){var c,s,d,f,p,h=arguments;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=h.length>2&&void 0!==h[2]?h[2]:{},s=Array.isArray(i),d=s?i:[i],f={},n.next=6,Promise.all(null==d?void 0:d.map(function(){var e=(0,r.Z)(l().mark((function e(n,t){var o,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=(null==c?void 0:c.tries)||1,r=0;case 2:if(!(r<o)){e.next=13;break}if(null==n||!n.current){e.next=8;break}return f[t]=null==n?void 0:n.current,e.abrupt("break",13);case 8:return e.next=10,u((null==c?void 0:c.delay)||1e3);case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 6:p=Object.values(f||{}),e((function(e){return a(a({},e),{},(0,o.Z)({},t,s?p:null==p?void 0:p[0]))}));case 8:case"end":return n.stop()}}),n)}))),n.apply(this,arguments)}return function(e,t){return n.apply(this,arguments)}}},74401:function(e,n,t){t.d(n,{Ho:function(){return c},WL:function(){return l},a9:function(){return u},mD:function(){return a},o$:function(){return d},y:function(){return s}});var o=t(17717),r=t(89706),i=t(44425);function l(e,n){var t,r,i=n||{repo_path_root:null,repo_path_relative_root:null},l=i.repo_path_root,u=i.repo_path_relative_root,c=e;(null!=e&&e.startsWith(l)?c=null==e?void 0:e.replace(l,u):null!=e&&e.startsWith(u)||(c=[u,e].join(o.sep)),null!==(t=c)&&void 0!==t&&t.startsWith(o.sep))&&(c=null===(r=c)||void 0===r?void 0:r.slice(1));return c}function u(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?null:null==e?void 0:e.name);if(null!=e&&e.parent){var t=[e.parent.name];return(null==n?void 0:n.length)>=1&&t.push(n),u(e.parent,t.join(o.sep))}return null!=e&&e.path?null==e?void 0:e.path:n}function c(e){return e.replace(/\.[^/.]+$/,"")}function a(e){var n=null==e?void 0:e.match(r.d2);return(null==n?void 0:n.length)>=1?n[0].replace(".",""):null}function s(e){var n=["\\.".concat(r.Lu.MD),"\\.".concat(r.Lu.PY),"\\.".concat(r.Lu.R),"\\.".concat(r.Lu.SQL),"\\.".concat(r.Lu.YAML),"\\.".concat(r.Lu.YML)].join("|"),t=new RegExp("".concat(n,"$")),o=e.match(t);return(null==o?void 0:o.length)>=1?o[0].replace(".",""):null}function d(e,n){var t=s(e);return!(["__init__.py"].includes(e)||i.tf.DBT===n&&[r.Lu.YAML,r.Lu.YML].includes(t))}},53405:function(e,n,t){t.d(n,{$C:function(){return O},AP:function(){return N},I1:function(){return o},JN:function(){return Y},KN:function(){return M},Kq:function(){return z},M$:function(){return g},MB:function(){return y},Nf:function(){return R},Qu:function(){return x},RP:function(){return A},UA:function(){return E},Uc:function(){return T},VZ:function(){return U},WD:function(){return j},WE:function(){return W},Wi:function(){return Q},XE:function(){return k},Z5:function(){return Z},bX:function(){return K},be:function(){return q},cU:function(){return v},eH:function(){return P},iN:function(){return H},ig:function(){return _},jC:function(){return B},jO:function(){return b},kW:function(){return X},p$:function(){return I},qf:function(){return w},qx:function(){return L},th:function(){return F},vV:function(){return V},wx:function(){return G},zB:function(){return S}});var o,r=t(75582),i=t(82394),l=t(21831),u=t(82684),c=t(44425),a=t(57653),s=t(61599),d=t(86735),f=t(42122);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function m(e,n){return function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeAllNodes:!1},r=(0,d.HK)(t,(function(e){return e.uuid})),i=(o||{}).includeAllNodes,l=[];return function t(o){if(o){var u=(o[n]||[]).reduce((function(n,t){return e.uuid===t?n:n.concat(r[t])}),[]);(0===u.length||i&&e.uuid!==o.uuid)&&l.push(o),u.forEach((function(e){t(e)}))}}(e),l}(e,"upstream_blocks",n,{includeAllNodes:!0})}function v(e,n){return(0,u.useMemo)((function(){return e.map((function(t){var o=function(e,n){var t=m(e,n),o=t.filter((function(n){var t=n.configuration,o=n.uuid;return(null==t?void 0:t.dynamic)&&o!==(null==e?void 0:e.uuid)})),r=t.filter((function(n){var t=n.configuration,o=n.uuid;return(null==t?void 0:t.reduce_output)&&o!==(null==e?void 0:e.uuid)}));return{dynamicUpstreamBlock:o[0],dynamicUpstreamBlocks:o,reduceOutputUpstreamBlock:r[0],reduceOutputUpstreamBlocks:r}}(t,n),r=o.dynamicUpstreamBlock,i=o.dynamicUpstreamBlocks,l=o.reduceOutputUpstreamBlock,u=o.reduceOutputUpstreamBlocks,c=(t||{}).configuration||{},a=c.dynamic,s=c.reduce_output;return{block:t,blocksToUse:e,dynamic:!!a,dynamicUpstreamBlock:r,dynamicUpstreamBlocks:i,reduceOutput:!!s,reduceOutputUpstreamBlock:l,reduceOutputUpstreamBlocks:u}}))}),[n,null==n?void 0:n.map((function(e){var n=e.configuration;return null==n?void 0:n.dynamic})),null==n?void 0:n.map((function(e){var n=e.configuration;return null==n?void 0:n.reduce_output})),null==n?void 0:n.map((function(e){return e.upstream_blocks}))])}function b(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=e||{},o=t.configuration,r=t.language,i=t.type,l=(o||{}).data_integration,u=[c.tf.DATA_LOADER,c.tf.DATA_EXPORTER].includes(i);if(a.qL.PYTHON===(null==n?void 0:n.type)&&u){if(c.t6.YAML===r)return!0;if(c.t6.PYTHON===r&&l)return!0}return!1}function g(e){return(null==e?void 0:e.stream)||(null==e?void 0:e.tap_stream_id)}function x(e){return null==e?void 0:e.parent_stream}function j(e){return[x(e),g(e)].filter((function(e){return e})).join("/")}function C(e){var n;return 0===(null==e||null===(n=e.breadcrumb)||void 0===n?void 0:n.length)}function y(e){var n;return(null==e||null===(n=e.metadata)||void 0===n?void 0:n.find(C))||{breadcrumb:[],metadata:{}}}function O(e,n){var t=(null==n?void 0:n.catalog)||{streams:[]},o=(0,l.Z)((null==t?void 0:t.streams)||[]),r=null==o?void 0:o.findIndex((function(n){return j(n)===j(e)}));return r>=0?o[r]=e:o.push(e),h(h({},n),{},{catalog:h(h({},t),{},{streams:o})})}function k(e,n){var t,o,r=h({},e);null!=r&&r.metadata||(r.metadata=[]);var i=null==r||null===(t=r.metadata)||void 0===t?void 0:t.findIndex(C),l={breadcrumb:[],metadata:{}};i>=0&&(l=y(r)||{breadcrumb:[],metadata:{}});var u=h(h({},l),{},{metadata:h(h({},null===(o=l)||void 0===o?void 0:o.metadata),n)});return i>=0?r.metadata[i]=u:r.metadata.push(u),r}function Z(e){var n,t,o=(e||{}).metadata;return null==o||null===(n=o.find(C))||void 0===n||null===(t=n.metadata)||void 0===t?void 0:t.selected}function T(e,n){var t=(n||{}).getAll,o=null==e?void 0:e.catalog,r=(null==o?void 0:o.streams)||[];return t?r:null==r?void 0:r.filter(Z)}function E(e,n){var t=n||{},o=t.noParents,r=t.parents,i={noParents:{},parents:{}};return null==e||e.forEach((function(e){var n,t=null==e?void 0:e.parent_stream,l=g(e);t?null!=r&&null!==(n=r[t])&&void 0!==n&&n[l]||(i.parents[t]||(i.parents[t]={}),i.parents[t][l]=e):null!=o&&o[l]||(i.noParents[l]=e)})),i}function P(e){var n=e||{},t=n.noParents,o=void 0===t?{}:t,r=n.parents,i=void 0===r?{}:r;return Object.values(o||[]).concat(Object.values(i||[]).reduce((function(e,n){return e.concat(Object.values(n))}),[]))}function S(e,n){var t,o,r,i=null==e?void 0:e.parent_stream,l=g(e);return i?null==n||null===(o=n.parents)||void 0===o||null===(r=o[i])||void 0===r?void 0:r[l]:null==n||null===(t=n.noParents)||void 0===t?void 0:t[l]}function _(e,n,t){return!!S(e,n)&&!!S(e,t)}function I(e,n,t){var o=function(e,n){var t,o,i={},l=[],u={};function c(e,n){null!=i&&i[e]||(i[e]={}),i[e]=h(h({},null==i?void 0:i[e]),n)}var a=(null==e||null===(t=e.schema)||void 0===t?void 0:t.properties)||{},s=(null==n||null===(o=n.schema)||void 0===o?void 0:o.properties)||{};return Object.entries(a).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],o=n[1],a=null==s?void 0:s[t];if(a){var p=(null==o?void 0:o.type)||[];p=Array.isArray(p)?p:[p];var h=(null==a?void 0:a.type)||[];h=Array.isArray(h)?h:[h],(0,d.fS)(p,h)||c(t,{type:p});var m=null==o?void 0:o.format;m!==(null==a?void 0:a.format)&&c(t,{format:m});var v=(null==o?void 0:o.anyOf)||{},b=(null==a?void 0:a.anyOf)||{};(0,f.Xy)(v,b)||c(t,{anyOf:v}),null!=i&&i[t]&&(u[t]=o)}else l.push(t),u[t]=o})),{newColumnSettings:i,newColumns:l,stream:h(h({},n),{},{schema:h(h({},null==n?void 0:n.schema),{},{properties:h(h(h({},s),u),i)})})}}(S(e,n),S(e,t)),i=o||{},l=i.newColumnSettings,u=i.newColumns;if(!(0,f.Qr)(l||{})||(null==u?void 0:u.length)>=1)return o}function w(e,n){return[].concat((0,l.Z)(Object.values(e||{})),(0,l.Z)(Object.values(n||{}))).every((function(e){return(0,f.Qr)(e)}))}function A(e){var n,t,o=h({},(null==e||null===(n=e.schema)||void 0===n?void 0:n.properties)||{});return null==e||null===(t=e.metadata)||void 0===t||t.forEach((function(e){if(!C(e)){var n,t=null==e||null===(n=e.breadcrumb)||void 0===n?void 0:n.find((function(e){return e!==s.u7.PROPERTIES}));t&&null!=o&&o[t]&&(o[t]=h(h({},o[t]),{},{metadata:e}))}})),o}function R(e){var n;return null==e||null===(n=e.metadata)||void 0===n?void 0:n.reduce((function(e,n){if(C(n))return e;var t=D(n);return t&&(e[t]=n),e}),{})}function D(e){var n;return null==e||null===(n=e.breadcrumb)||void 0===n?void 0:n.find((function(e){return e!==s.u7.PROPERTIES}))}function B(e){return{breadcrumb:[s.u7.PROPERTIES,e],metadata:{inclusion:s.ks.AVAILABLE,selected:!0}}}function M(e,n){var t;return h(h({},e),{},{schema:h(h({},null==e?void 0:e.schema),{},{properties:h(h({},null==e||null===(t=e.schema)||void 0===t?void 0:t.properties),n)})})}function N(e,n){var t=y(e),o=h(h({},R(e)),n);return h(h({},e),{},{metadata:[t].concat((0,l.Z)(Object.values(o||{})))})}function L(e,n){var t=n||{},o=t.type,r=void 0===o?[]:o,i=t.typesDerived,u=h({},n),c=Array.isArray(r)?r:[r],a=(0,l.Z)(c),d=(0,l.Z)(i);return null==e||e.forEach((function(e){s.Xv===e?u.format=s.zS.DATE_TIME:s.zS.UUID===e?u.format=s.zS.UUID:(null!=a&&a.includes(e)||a.push(e),null!=d&&d.includes(e)||d.push(e))})),h(h({},u),{},{type:a,typesDerived:d})}function U(e,n){var t=n||{},o=t.format,r=t.type,i=void 0===r?[]:r,u=t.typesDerived,c=h({},n),a=Array.isArray(i)?i:[i],d=(0,l.Z)(a),f=(0,l.Z)(u);return null==e||e.forEach((function(e){if(o&&s.eL[o]===e)delete c.format;else{var n,t,r,i;if(null!==(n=d)&&void 0!==n&&n.includes(e))d=(0,l.Z)(null===(r=d)||void 0===r?void 0:r.filter((function(n){return n!==e})));if(null!==(t=f)&&void 0!==t&&t.includes(e))f=(0,l.Z)(null===(i=f)||void 0===i?void 0:i.filter((function(n){return n!==e})))}})),h(h({},c),{},{type:d,typesDerived:f})}function G(e,n){var t,o=n||{},r=o.format,i=o.type,l=void 0===i?[]:i,u=l;Array.isArray(l)||(u=l?[l]:[]);var c=null===(t=u)||void 0===t?void 0:t.filter((function(e){var n;return!(null!==(n=[s.Xv,s.zS.UUID])&&void 0!==n&&n.includes(e))}));return s.eL[r]&&(null!=c&&c.includes(s.eL[r])||c.push(s.eL[r])),h(h({},n),{},{typesDerived:c,uuid:e})}function F(e){var n=e||{},t=n.noParents,o=n.parents;return[{groupHeader:null,streams:(0,d.YC)(Object.values(t),(function(e){return g(e)}))}].concat((0,l.Z)((0,d.YC)(Object.entries(o),(function(e){return(0,r.Z)(e,1)[0]})).map((function(e){var n=(0,r.Z)(e,2),t=n[0],o=n[1];return{groupHeader:t,streams:(0,d.YC)(Object.values(o),(function(e){return g(e)}))}}))))}function H(e,n,t){var o,r,l,u=(t||{}).remove,c=g(e||{}),a=x(e||{}),s=h({},n);if(a)u?null==s||(null===(o=s.parents)||void 0===o||(null===(r=o[a])||void 0===r||delete r[c])):s.parents=h(h({},null==s?void 0:s.parents),{},(0,i.Z)({},a,h(h({},null==s||null===(l=s.parents)||void 0===l?void 0:l[a]),{},(0,i.Z)({},c,e))));else if(c){var d;if(u)null==s||(null===(d=s.noParents)||void 0===d||delete d[c]);else s.noParents=h(h({},null==s?void 0:s.noParents),{},(0,i.Z)({},c,e))}return s}function K(e,n){var t=[o.AUTO_ADD_NEW_FIELDS,o.DISABLE_COLUMN_TYPE_CHECK,o.REPLICATION_METHOD,o.RUN_IN_PARALLEL,o.UNIQUE_CONFLICT_METHOD],l=Object.entries(n||{}).reduce((function(e,n){var t=(0,r.Z)(n,2),o=t[0],l=t[1],u=l.selected,c=l.value;return h(h({},e),u?(0,i.Z)({},o,c):{})}),{}),u=h({},e),c=e&&P(e)||[];return null==c||c.forEach((function(e){u=H(function(e){var n,o=h({},e);return null==o||null===(n=o.schema)||void 0===n||n.properties,Object.entries(l||{}).forEach((function(e){var n=(0,r.Z)(e,2),i=n[0],l=n[1];t.includes(i)&&(o[i]=l)})),o}(e),u)})),u}function z(e,n,t){var l=[o.BOOKMARK_PROPERTIES,o.KEY_PROPERTIES,o.PARTITION_KEYS,o.UNIQUE_CONSTRAINTS],u=Object.entries(n||{}).reduce((function(e,n){var t=(0,r.Z)(n,2),o=t[0];return t[1]?e.concat(o):e}),[]),c=Object.entries(t||{}).reduce((function(e,n){var t=(0,r.Z)(n,2),o=t[0],l=t[1],u=l.selected,c=l.value;return h(h({},e),u?(0,i.Z)({},o,c):{})}),{}),a=h({},e),p=e&&P(e)||[];return null==p||p.forEach((function(e){a=H(function(e){var n,t=h({},e),i=(null==t||null===(n=t.schema)||void 0===n?void 0:n.properties)||{},a=R(e);return null==u||u.forEach((function(e){null!=i&&i[e]&&Object.entries(c||{}).forEach((function(n){var u=(0,r.Z)(n,2),c=u[0],p=u[1];if(o.PROPERTY_SELECTED===c){var m=(null==a?void 0:a[e])||B(e)||{breadcrumb:[],metadata:{}},v=h(h({},m),{},{metadata:h(h({},null==m?void 0:m.metadata),{},{selected:p})});a[e]=v}else if(l.includes(c)){var b;null!=t&&t[c]||(t[c]=[]);var g=null===(b=t[c])||void 0===b?void 0:b.includes(e);p&&!g?t[c].push(e):!p&&g&&(t[c]=(0,d.Od)(t[c],(function(n){return n===e})))}else if(s.D5.includes(c)){var x,j=h({},(null==i?void 0:i[e])||{}),C=(p?L:U)([c],G(e,j)),y=C.anyOf,O=C.format,k=C.type;null!=t&&t.schema||(t.schema={properties:{}}),null!=t&&null!==(x=t.schema)&&void 0!==x&&x.properties||(t.schema=h(h({},null==t?void 0:t.schema),{},{properties:{}}));var Z=(0,f.hB)({anyOf:y,format:O,type:k});t.schema.properties[e]=Z}}))})),N(t,a)}(e),a)})),a}function W(e){var n,t,o=(null==e||null===(n=e.schema)||void 0===n?void 0:n.properties)||{};return null==e||null===(t=e.metadata)||void 0===t?void 0:t.reduce((function(e,n){var t;if(C(n))return e;if(!(null==n||null===(t=n.metadata)||void 0===t?void 0:t.selected))return e;var r=D(n),l=null==o?void 0:o[r];return h(h({},e),{},(0,i.Z)({},r,h(h({},l),{},{metadata:n,uuid:r})))}),{})}function Q(e,n){var t=(null==n?void 0:n.inputs)||{};return null==e?void 0:e.reduce((function(e,n){var o=null==n?void 0:n.uuid,r=o&&(null==t?void 0:t[o]);return r?e.concat({block:n,input:r}):e}),[])}function Y(e){var n,t,o={},i={},l={};return null==e||null===(n=e.metadata)||void 0===n||n.forEach((function(e){if(!C(e)){var n,t=D(e);if(t&&null!=e&&e.metadata)l[t]=null==e||null===(n=e.metadata)||void 0===n?void 0:n.selected}})),Object.entries((null==e||null===(t=e.schema)||void 0===t?void 0:t.properties)||{}).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],u=h(h({},n[1]),{},{uuid:t});t in l?null!=l&&l[t]&&(i[t]=u):i[t]=u,o[t]=u})),{allColumns:o,selectedColumns:i}}function V(e){var n=e||{},t=n.configuration,o=n.tags;return(null==t?void 0:t.dynamic)||(null==o?void 0:o.includes(c.L8.DYNAMIC))}function q(e){var n=(e||{}).tags;return null==n?void 0:n.includes(c.L8.DYNAMIC_CHILD)}function X(e){var n=e||{},t=n.configuration,o=n.tags;return(null==t?void 0:t.reduce_output)||(null==o?void 0:o.includes(c.L8.REDUCE_OUTPUT))}!function(e){e.AUTO_ADD_NEW_FIELDS="auto_add_new_fields",e.BOOKMARK_PROPERTIES="bookmark_properties",e.DISABLE_COLUMN_TYPE_CHECK="disable_column_type_check",e.KEY_PROPERTIES="key_properties",e.PARTITION_KEYS="partition_keys",e.PROPERTY_SELECTED="property_selected",e.REPLICATION_METHOD="replication_method",e.RUN_IN_PARALLEL="run_in_parallel",e.UNIQUE_CONFLICT_METHOD="unique_conflict_method",e.UNIQUE_CONSTRAINTS="unique_constraints"}(o||(o={}))},65044:function(e,n,t){t.d(n,{Gr:function(){return r},Lz:function(){return o},Vc:function(){return l},gr:function(){return i}});var o=/\[__internal_output__\]/,r=/\[__internal_test__\]/,i="[__internal_output__]",l="[__internal_test__]"},19698:function(e,n,t){var o=t(82684),r=t(5332),i=t(59457);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.delay,t=void 0===n?7e3:n,l=e.pauseFetch,u=e.refreshInterval,c=e.revalidateOnFocus,a=(0,i.Z)(r.ZP.statuses.list,{},{refreshInterval:u,revalidateOnFocus:c},{delay:t,condition:function(){return!l}}).data;return{status:(0,o.useMemo)((function(){var e;return null==a||null===(e=a.statuses)||void 0===e?void 0:e[0]}),[a])}}}}]);