(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6780],{74395:function(e,n,t){"use strict";t.d(n,{M:function(){return s},W:function(){return r}});var i=t(38626),l=t(46684),r=34*t(70515).iI,s=i.default.div.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-12ee2ib-0"})(["min-height:calc(100vh - ","px);"],l.Mz)},8955:function(e,n,t){"use strict";t.d(n,{G7:function(){return P},ZP:function(){return _},u$:function(){return x}});var i=t(75582),l=t(82394),r=t(26304),s=t(90299),a=t(9134),c=t(24138),u=t(38276),o=t(30160),d=t(75499),p=t(70515),f=t(16488),v=t(42122),b=t(28598),h=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var x=44,Z={uuid:"Run details"},g={uuid:"Dependency tree"},P=[g,Z];function _(e){var n=e.height,t=e.heightOffset,l=e.pipeline,m=e.selectedRun,_=e.selectedTab,k=e.setSelectedTab,y=j({},(0,r.Z)(e,h));m?y.blockStatus=(0,f.IJ)(null===m||void 0===m?void 0:m.block_runs):y.noStatus=!0;var O=(0,v.Kn)(null===m||void 0===m?void 0:m.variables)?j({},null===m||void 0===m?void 0:m.variables):(null===m||void 0===m?void 0:m.variables)||{},I=null===m||void 0===m?void 0:m.event_variables;if(I&&(0,v.Kn)(I)&&!(0,v.Qr)(I))if((0,v.Kn)(O)&&O.hasOwnProperty("event")){var w=(0,v.Kn)(O.event)?O.event:{};O.event=j(j({},w),I)}else O.event=j({},I);var E=[];O&&JSON.stringify(O,null,2).split("\n").forEach((function(e){E.push("    ".concat(e))}));var D=m&&[["Run ID",null===m||void 0===m?void 0:m.id],["Variables",(0,b.jsx)(a.Z,{language:"json",small:!0,source:E.join("\n")},"variable_value")]],S=m&&(0,b.jsx)(u.Z,{pb:p.cd,px:p.cd,children:(0,b.jsx)(d.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(e){return 1===e?"100px":null},rows:D.map((function(e,n){var t=(0,i.Z)(e,2),l=t[0],r=t[1];return[(0,b.jsx)(o.ZP,{monospace:!0,muted:!0,children:l},"key_".concat(n)),(0,b.jsx)(o.ZP,{monospace:!0,textOverflow:!0,children:r},"val_".concat(n))]})),uuid:"LogDetail"})}),C=_&&k;return(0,b.jsxs)(b.Fragment,{children:[C&&(0,b.jsx)(u.Z,{py:p.cd,children:(0,b.jsx)(s.Z,{onClickTab:k,selectedTabUUID:null===_||void 0===_?void 0:_.uuid,tabs:P,underlineStyle:!0})}),(!C||g.uuid===(null===_||void 0===_?void 0:_.uuid))&&(0,b.jsx)(c.ZP,j(j({},y),{},{height:n,heightOffset:(t||0)+(C?x:0),pipeline:l})),Z.uuid===(null===_||void 0===_?void 0:_.uuid)&&S]})}},83641:function(e,n,t){"use strict";t.d(n,{I7:function(){return i},IB:function(){return c},VV:function(){return r},_7:function(){return s},rn:function(){return a}});var i,l=t(41143),r="datetime",s="code",a=l.V;!function(e){e.SECOND="second",e.MINUTE="minute",e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month",e.YEAR="year",e.CUSTOM="custom"}(i||(i={}));var c=[i.MINUTE,i.HOUR,i.DAY,i.WEEK,i.MONTH,i.YEAR,i.CUSTOM]},51532:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ue}});var i=t(75582),l=t(77837),r=t(82394),s=t(38860),a=t.n(s),c=t(82684),u=t(69864),o=t(34376),d=t(83641),p=t(71180),f=t(15338),v=t(55485),b=t(85854),h=t(55072),m=t(75457),j=t(53943),x=t(44265),Z=t(83784),g=t(44085),P=t(38276),_=t(4190),k=t(75499),y=t(30160),O=t(35686),I=t(8955),w=t(72473),E=t(74395),D=t(70515),S=t(28795),C=t(81728),M=t(3917),T=t(8916),N=t(81655),L=t(16488),F=t(15610),A=t(42122),R=t(50178),U=t(72619),V=t(3314),B=t(69419),H=t(70320),z=t(28598);function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var X=function(e){var n=e.backfill,t=e.errors,l=e.fetchBackfill,r=e.pipeline,s=e.setErrors,a=e.variables,Y=(0,R.Ct)(),X=(0,H.q)(),G=(0,o.useRouter)(),W=n||{},q=W.block_uuid,Q=W.end_datetime,J=W.id,$=W.interval_type,ee=W.interval_units,ne=W.name,te=W.pipeline_run_dates,ie=W.start_datetime,le=W.status,re=W.total_run_count,se=W.variables,ae=void 0===se?{}:se,ce=r.uuid,ue=(0,B.iV)(),oe={_limit:40,_offset:40*(null!==ue&&void 0!==ue&&ue.page?ue.page:0)};null!==ue&&void 0!==ue&&ue.status&&(oe.status=ue.status);var de=O.ZP.pipeline_runs.list(K(K({},oe),{},{backfill_id:J}),{refreshInterval:3e3,revalidateOnFocus:!0},{pauseFetch:!J}),pe=de.data,fe=de.mutate,ve=!(ie&&Q&&$&&ee),be=!le,he=(0,c.useMemo)((function(){return(be?te:null===pe||void 0===pe?void 0:pe.pipeline_runs)||[]}),[pe,te,be]),me=(0,c.useMemo)((function(){var e;return(null===pe||void 0===pe||null===(e=pe.metadata)||void 0===e?void 0:e.count)||[]}),[pe]),je=(0,c.useState)(null),xe=je[0],Ze=je[1],ge=(0,c.useMemo)((function(){var e=null!==ue&&void 0!==ue&&ue.page?ue.page:0;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(j.Z,{disableRowSelect:be,emptyMessage:null!==ue&&void 0!==ue&&ue.status?"No runs available":'No runs available. Please complete backfill configuration by clicking "Edit backfill" above.',fetchPipelineRuns:fe,onClickRow:function(e){return Ze((function(n){var t=he[e];return(null===n||void 0===n?void 0:n.id)!==t.id?t:null}))},pipelineRuns:he,selectedRun:xe,setErrors:s,setSelectedRun:Ze}),(0,z.jsx)(P.Z,{p:2,children:(0,z.jsx)(h.ZP,{maxPages:9,onUpdate:function(e){var n=Number(e),t=K(K({},ue),{},{page:n>=0?n:0});G.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(ce,"/backfills/").concat(J,"?").concat((0,B.uM)(t)))},page:Number(e),totalPages:Math.ceil(me/40)})})]})}),[fe,J,he,ce,ue,G,xe,s,be,me]),Pe=(0,c.useState)(I.G7[0]),_e=Pe[0],ke=Pe[1],ye=(0,u.Db)(O.ZP.backfills.useUpdate(J),{onSuccess:function(e){return(0,U.wD)(e,{callback:function(){l(),fe()},onErrorCallback:function(e,n){return s({errors:n,response:e})}})}}),Oe=(0,i.Z)(ye,2),Ie=Oe[0],we=Oe[1].isLoading,Ee=(0,c.useMemo)((function(){return!!le&&(d.rn.CANCELLED!==le&&d.rn.FAILED!==le)}),[le]),De=(0,c.useMemo)((function(){return le&&d.rn.CANCELLED!==le&&d.rn.FAILED!==le&&d.rn.INITIAL!==le&&d.rn.RUNNING!==le}),[le]),Se=(0,c.useMemo)((function(){var e={default:!0,size:1.5*D.iI},n=[[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.VW,K({},e)),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"Backfill type"})]},"backfill_type_label"),(0,z.jsx)(y.ZP,{monospace:!0,children:q?d._7:d.VV},"backfill_type")],[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.rs,K({},e)),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"Status"})]},"backfill_status_label"),(0,c.createElement)(y.ZP,K(K({},(0,N.NC)(le)),{},{key:"backfill_status"}),le||"inactive")]];return q||n.push.apply(n,[[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.aw,K({},e)),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"Start date and time"})]},"backfill_start_date_label"),(0,z.jsx)(y.ZP,{monospace:!0,small:!0,children:X?(0,M.XG)(ie,X):(0,L.Vx)(ie)},"backfill_start_date")],[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.aw,K({},e)),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"End date and time"})]},"backfill_end_date_label"),(0,z.jsx)(y.ZP,{monospace:!0,small:!0,children:X?(0,M.XG)(Q,X):(0,L.Vx)(Q)},"backfill_end_date")],[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.Pf,K({},e)),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"Interval type"})]},"interval_type_label"),(0,z.jsx)(y.ZP,{monospace:!0,children:$&&(0,C.kC)($)},"interval_type")],[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.Pf,K({},e)),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"Interval units"})]},"interval_units_label"),(0,z.jsx)(y.ZP,{monospace:!0,children:ee},"interval_units")],[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.qZ,K({},e)),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"Total runs"})]},"total_runs_label"),(0,z.jsx)(y.ZP,{monospace:!0,children:re},"total_runs")]]),(0,z.jsx)(k.Z,{columnFlex:[null,1],rows:n})}),[q,X,Q,$,ee,ie,le,re]),Ce=(0,c.useMemo)((function(){return ae||{}}),[ae]),Me=(0,c.useMemo)((function(){var e=(0,T.wx)(a,(function(e){return e.uuid===Z.C}))||[];return(0,A.Qr)(Ce)||Object.entries(Ce).forEach((function(n){var t=(0,i.Z)(n,2),l=t[0],r=t[1],s=e.findIndex((function(e){return(null===e||void 0===e?void 0:e.uuid)===l}));-1!==s?e.splice(s,1,{uuid:l,value:(0,T.FS)(r)}):e.push({uuid:l,value:(0,T.FS)(r)})})),"undefined"!==typeof e&&null!==e&&void 0!==e&&e.length?(0,z.jsx)(k.Z,{columnFlex:[null,1],rows:e.map((function(e){var n=e.uuid,t=e.value;return[(0,z.jsx)(y.ZP,{default:!0,monospace:!0,small:!0,children:n},"settings_variable_label_".concat(n)),(0,z.jsx)(y.ZP,{monospace:!0,small:!0,children:t},"settings_variable_".concat(n))]}))}):null}),[Ce,a]);return(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(m.Z,{afterHidden:!xe,before:(0,z.jsxs)(E.M,{children:[(0,z.jsxs)(P.Z,{mb:D.HN,pt:D.cd,px:D.cd,children:[(0,z.jsx)(P.Z,{mb:D.cd,children:(0,z.jsx)(w.yg,{size:5*D.iI})}),(0,z.jsx)(b.Z,{children:ne})]}),(0,z.jsx)(P.Z,{px:D.cd,children:(0,z.jsx)(b.Z,{level:5,children:"Settings"})}),(0,z.jsx)(f.Z,{light:!0,mt:1,short:!0}),Se,Me&&(0,z.jsxs)(P.Z,{my:D.HN,children:[(0,z.jsx)(P.Z,{px:D.cd,children:(0,z.jsx)(b.Z,{level:5,children:"Runtime variables"})}),(0,z.jsx)(f.Z,{light:!0,mt:1,short:!0}),Me]})]}),beforeWidth:34*D.iI,breadcrumbs:[{label:function(){return"Backfills"},linkProps:{as:"/pipelines/".concat(ce,"/backfills"),href:"/pipelines/[pipeline]/backfills"}},{label:function(){return ne},linkProps:{as:"/pipelines/".concat(ce,"/backfills/").concat(J),href:"/pipelines/[pipeline]/backfills/[...slug]"}}],buildSidekick:function(e){return(0,I.ZP)(K(K({},e),{},{selectedRun:xe,selectedTab:_e,setSelectedTab:ke}))},errors:t,pageName:S.M.BACKFILLS,pipeline:r,setErrors:s,subheader:(0,z.jsxs)(v.ZP,{alignItems:"center",children:[!De&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(p.ZP,{beforeIcon:Ee?(0,z.jsx)(w.dz,{size:2*D.iI}):(0,z.jsx)(w.Py,{inverted:!(d.rn.CANCELLED===le||d.rn.FAILED===le),size:2*D.iI}),danger:Ee,disabled:ve,loading:we,onClick:function(e){(0,V.j)(e),Ie({backfill:{status:Ee?d.rn.CANCELLED:d.rn.INITIAL}})},outline:!0,success:!Ee&&!(d.rn.CANCELLED===le||d.rn.FAILED===le)&&!ve,children:Ee?"Cancel backfill":d.rn.CANCELLED===le||d.rn.FAILED===le?"Retry backfill":"Start backfill"}),(0,z.jsx)(P.Z,{mr:D.cd})]}),!Y&&(0,z.jsxs)(z.Fragment,{children:[le===x.VO.COMPLETED?(0,z.jsx)(y.ZP,{bold:!0,default:!0,large:!0,children:"Filter runs by status:"}):(0,z.jsx)(p.ZP,{linkProps:{as:"/pipelines/".concat(ce,"/backfills/").concat(J,"/edit"),href:"/pipelines/[pipeline]/backfills/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Edit backfill"}),(0,z.jsx)(P.Z,{mr:D.cd})]}),!be&&(0,z.jsxs)(g.Z,{compact:!0,defaultColor:!0,onChange:function(e){e.preventDefault(),"all"===e.target.value?G.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(ce,"/backfills/").concat(J)):(0,F.u7)({page:0,status:e.target.value})},paddingRight:4*D.iI,placeholder:"Select run status",value:(null===ue||void 0===ue?void 0:ue.status)||"all",children:[(0,z.jsx)("option",{value:"all",children:"All statuses"},"all_statuses"),x.IK.map((function(e){return(0,z.jsx)("option",{value:e,children:x.Do[e]},e)}))]})]}),title:function(){return ne},uuid:"backfill/detail",children:[(0,z.jsx)(P.Z,{mt:D.cd,px:D.cd,children:(0,z.jsx)(b.Z,{level:5,children:"Runs for this backfill"})}),(0,z.jsx)(f.Z,{light:!0,mt:D.cd,short:!0}),pe?ge:(0,z.jsx)(P.Z,{m:2,children:(0,z.jsx)(_.Z,{inverted:!0})})]})})},G=t(14805),W=t(50724),q=t(97618),Q=t(37899),J=t(17488),$=[{label:function(){return"Date and time window"},description:function(){return"Backfill between a date and time range."},uuid:d.VV}],ee=t(88785),ne=t(79500);function te(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function ie(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?te(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):te(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var le=function(e){var n=e.backfill,t=e.errors,l=e.fetchBackfill,r=e.pipeline,s=e.setErrors,a=e.variables,h=(0,o.useRouter)(),j=(0,H.q)(),x=(0,c.useState)(),Z=x[0],_=x[1],I=Z||{},E=I.block_uuid,M=I.id,N=I.interval_type,F=I.interval_units,R=I.name,V=r.uuid,B=(0,c.useMemo)((function(){return(0,A.Qr)((null===n||void 0===n?void 0:n.variables)||{})?(0,T.Tt)(a)||{}:(0,A.Xc)(n.variables,(function(e){return(0,T.FS)(e)}))}),[null===n||void 0===n?void 0:n.variables,a]),Y=(0,c.useState)(!1),K=Y[0],X=Y[1],te=(0,c.useState)(B),le=te[0],re=te[1],se=(0,c.useState)(E?d._7:d.VV),ae=se[0],ce=se[1],ue=(0,c.useState)(!1),oe=ue[0],de=ue[1],pe=(0,c.useState)(!1),fe=pe[0],ve=pe[1],be=(0,c.useState)(null),he=be[0],me=be[1],je=(0,c.useState)(null),xe=je[0],Ze=je[1],ge=(0,c.useState)({hour:"00",minute:"00"}),Pe=ge[0],_e=ge[1],ke=(0,c.useState)({hour:"00",minute:"00"}),ye=ke[0],Oe=ke[1];(0,c.useEffect)((function(){if(n){_(n);var e=n.start_datetime;if(e){var t=(0,ne.a)(e,{localTimezone:j});Ze(null===t||void 0===t?void 0:t.date),Oe(t.time)}var i=n.end_datetime;if(i){var l=(0,ne.a)(i,{localTimezone:j});me(null===l||void 0===l?void 0:l.date),_e(null===l||void 0===l?void 0:l.time)}}}),[j,n]);var Ie=(0,c.useMemo)((function(){var e=[[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.KJ,{default:!0}),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"Backfill name"})]},"model_name_detail"),(0,z.jsx)(J.Z,{monospace:!0,onChange:function(e){e.preventDefault(),_((function(n){return ie(ie({},n),{},{name:e.target.value})}))},placeholder:"Name this backfill",value:R},"model_name_input_detail")]];return d.VV===ae&&e.push.apply(e,[[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.aw,{default:!0}),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"Start date and time"})]},"start_time"),(0,z.jsxs)("div",{style:{minHeight:"".concat(5.75*D.iI,"px")},children:[!oe&&(0,z.jsx)(J.Z,{monospace:!0,onClick:function(){return de((function(e){return!e}))},onFocus:function(){return de(!0)},placeholder:"YYYY-MM-DD HH:MM",value:xe?(0,L.XM)(xe,ye,{localTimezone:j}):""}),(0,z.jsx)("div",{style:{width:"400px"},children:(0,z.jsx)(W.Z,{disableEscape:!0,onClickOutside:function(){return de(!1)},open:oe,style:{position:"relative"},children:(0,z.jsx)(G.Z,{localTime:j,selectedDate:xe,selectedTime:ye,setSelectedDate:Ze,setSelectedTime:Oe,topPosition:!0})})})]},"start_time_input")],[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.aw,{default:!0}),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"End date and time"})]},"end_time"),(0,z.jsxs)("div",{style:{minHeight:"".concat(5.75*D.iI,"px")},children:[!fe&&(0,z.jsx)(J.Z,{monospace:!0,onClick:function(){return ve((function(e){return!e}))},onFocus:function(){return ve(!0)},placeholder:"YYYY-MM-DD HH:MM",value:he?(0,L.XM)(he,Pe,{localTimezone:j}):""}),(0,z.jsx)("div",{style:{width:"400px"},children:(0,z.jsx)(W.Z,{disableEscape:!0,onClickOutside:function(){return ve(!1)},open:fe,style:{position:"relative"},children:(0,z.jsx)(G.Z,{localTime:j,selectedDate:he,selectedTime:Pe,setSelectedDate:me,setSelectedTime:_e,topPosition:!0})})})]},"end_time_input")],[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.Pf,{default:!0}),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"Interval type"})]},"interval_type"),(0,z.jsx)(g.Z,{monospace:!0,onChange:function(e){e.preventDefault(),_((function(n){return ie(ie({},n),{},{interval_type:e.target.value})}))},placeholder:"Time spacing between each backfill",value:N,children:d.IB.map((function(e){return(0,z.jsx)("option",{value:e,children:(0,C.kC)(e)},e)}))},"interval_type_input")],[(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.Pf,{default:!0}),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"Interval units"})]},"interval_units"),(0,z.jsx)(J.Z,{disabled:!N,monospace:!0,onChange:function(e){e.preventDefault(),_((function(n){return ie(ie({},n),{},{interval_units:e.target.value})}))},placeholder:N?"Number of ".concat(N).concat(N!==d.I7.CUSTOM?"s":""," between each backfill"):"Interval type is required",type:"number",value:F},"interval_unit_input")]]),(0,A.Qr)(B)||e.push([(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(w.LO,{default:!0}),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(y.ZP,{default:!0,children:"Runtime variables"})]},"overwrite_runtime_variables"),(0,z.jsx)(Q.Z,{borderless:!0,compact:!0,enableVariablesOverwrite:K,runtimeVariables:le,setEnableVariablesOverwrite:X,setRuntimeVariables:re},"overwrite_runtime_variables_table")]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(P.Z,{mb:2,px:D.cd,children:(0,z.jsx)(b.Z,{children:"Settings"})}),(0,z.jsx)(f.Z,{light:!0,short:!0}),(0,z.jsx)(k.Z,{columnFlex:[null,1],rows:e})]})}),[he,xe,j,K,N,F,R,le,B,ae,oe,fe,Pe,ye]),we=(0,u.Db)(O.ZP.backfills.useUpdate(M),{onSuccess:function(e){return(0,U.wD)(e,{callback:function(){l(),h.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(V,"/backfills/").concat(M))},onErrorCallback:function(e,n){return s({errors:n,response:e})}})}}),Ee=(0,i.Z)(we,2),De=Ee[0],Se=Ee[1].isLoading,Ce=(0,c.useCallback)((function(){var e=ie(ie({},(0,A.GL)(Z,["name"])),{},{end_datetime:null,interval_type:null,interval_units:null,start_datetime:null,variables:K?(0,T.e7)(le):{}});return d._7===ae||(e.interval_type=N,e.interval_units=F,e.end_datetime=he&&null!==Pe&&void 0!==Pe&&Pe.hour&&null!==Pe&&void 0!==Pe&&Pe.minute?(0,L.XM)(he,Pe,{convertToUtc:j,includeSeconds:!0,localTimezone:j}):null,e.start_datetime=xe&&null!==ye&&void 0!==ye&&ye.hour&&null!==ye&&void 0!==ye&&ye.minute?(0,L.XM)(xe,ye,{convertToUtc:j,includeSeconds:!0,localTimezone:j}):null),De({backfill:e})}),[he,xe,j,K,N,F,Z,le,ae,Pe,ye,De]),Me=(0,c.useMemo)((function(){return d._7===ae?!E:!(he&&xe&&N&&F)}),[E,he,xe,N,F,ae]);return(0,z.jsxs)(m.Z,{breadcrumbs:[{label:function(){return"Backfills"},linkProps:{as:"/pipelines/".concat(V,"/backfills"),href:"/pipelines/[pipeline]/backfills"}},{label:function(){return null===Z||void 0===Z?void 0:Z.name},linkProps:{as:"/pipelines/".concat(V,"/backfills/").concat(M),href:"/pipelines/[pipeline]/backfills/[...slug]"}}],errors:t,pageName:S.M.BACKFILLS,pipeline:r,setErrors:s,subheader:(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(p.ZP,{disabled:Me,loading:Se,onClick:Ce,outline:!0,primary:!0,children:"Save changes"}),(0,z.jsx)(P.Z,{mr:1}),(0,z.jsx)(p.ZP,{linkProps:{href:"/pipelines/[pipeline]/backfills/[...slug]",as:"/pipelines/".concat(V,"/backfills/").concat(M)},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Cancel"})]}),title:function(){return"Edit ".concat(null===Z||void 0===Z?void 0:Z.name)},uuid:"backfill/edit",children:[(0,z.jsxs)(P.Z,{p:D.cd,children:[(0,z.jsxs)(P.Z,{mb:2,children:[(0,z.jsx)(b.Z,{children:"Backfill type"}),(0,z.jsx)(y.ZP,{muted:!0,children:"How would you like this pipeline to be backfilled?"})]}),(0,z.jsx)(v.ZP,{children:$.map((function(e){var n=e.label,t=e.description,i=e.uuid,l=ae===i,r=ae&&!l;return(0,z.jsx)(p.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){ce(i)},children:(0,z.jsx)(ee.U,{selected:l,children:(0,z.jsxs)(v.ZP,{alignItems:"center",children:[(0,z.jsx)(q.Z,{children:(0,z.jsx)("input",{checked:l,type:"radio"})}),(0,z.jsx)(P.Z,{mr:D.cd}),(0,z.jsxs)(q.Z,{alignItems:"flex-start",flexDirection:"column",children:[(0,z.jsx)(b.Z,{bold:!0,default:!l&&!r,level:5,muted:!l&&r,children:n()}),(0,z.jsx)(y.ZP,{default:!l&&!r,leftAligned:!0,muted:r,children:t()})]})]})})},i)}))})]}),(0,z.jsx)(P.Z,{mt:5,children:Ie})]})},re=t(93808);function se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?se(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ce(e){var n=e.backfillId,t=e.pipelineUUID,i=e.subpath,l=(0,c.useState)(null),r=l[0],s=l[1],a=O.ZP.variables.pipelines.list(t,{},{revalidateOnFocus:!1}).data,u=(0,c.useMemo)((function(){return null===a||void 0===a?void 0:a.variables}),[a]),o=O.ZP.pipelines.detail(t,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,d=(0,c.useMemo)((function(){return ae(ae({},null===o||void 0===o?void 0:o.pipeline),{},{uuid:t})}),[o,t]),p=O.ZP.backfills.detail(n,{include_preview_runs:!0}),f=p.data,v=p.mutate,b=(0,c.useMemo)((function(){return null===f||void 0===f?void 0:f.backfill}),[f]);return"edit"===i?(0,z.jsx)(le,{backfill:b,errors:r,fetchBackfill:v,pipeline:d,setErrors:s,variables:u}):(0,z.jsx)(X,{backfill:b,errors:r,fetchBackfill:v,pipeline:d,setErrors:s,variables:u})}ce.getInitialProps=function(){var e=(0,l.Z)(a().mark((function e(n){var t,l,r,s,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.query,l=t.pipeline,r=t.slug,!Array.isArray(r)){e.next=4;break}return s=(0,i.Z)(r,2),c=s[0],u=s[1],e.abrupt("return",{backfillId:c,pipelineUUID:l,subpath:u});case 4:return e.abrupt("return",{pipelineUUID:l});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var ue=(0,re.Z)(ce)},53664:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/backfills/[...slug]",function(){return t(51532)}])}},function(e){e.O(0,[2678,1154,844,5820,1124,9161,4495,4267,600,8487,8264,7858,5499,5457,4366,722,3943,845,9774,2888,179],(function(){return n=53664,e(e.s=n);var n}));var n=e.O();_N_E=n}]);