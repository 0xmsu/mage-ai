(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8450],{28795:function(e,n,t){"use strict";var r;t.d(n,{B:function(){return i},M:function(){return r}}),function(e){e.BACKFILLS="backfills",e.BLOCK_RUNS="block_runs",e.DASHBOARD="dashboard",e.EDIT="edit",e.MONITOR="monitor",e.PIPELINE_LOGS="pipeline_logs",e.PIPELINE_RUNS="pipeline_runs",e.RUNS="runs",e.SETTINGS="settings",e.SYNCS="syncs",e.TRIGGERS="triggers"}(r||(r={}));var i="cancel_all_running_pipeline_runs"},75457:function(e,n,t){"use strict";t.d(n,{Z:function(){return S}});var r=t(82394),i=t(21831),u=t(82684),c=t(34376),o=t(50724),l=t(94629),a=t(15338),s=t(82555),f=t(55485),d=t(85854),p=t(38276),b=t(5332),O=t(9518),h=t(44897),E=t(42631),v=t(70515),P=O.default.div.withConfig({displayName:"indexstyle__BannerStyle",componentId:"sc-1te3pmf-0"})(["border-radius:","px;padding:","px;"," "," ",""],E.n_,3*v.iI,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||h.Z.shadow).small,";\n  ")}),(function(e){return e.background&&"\n    background: ".concat(e.background,";\n  ")}),(function(e){return e.backgroundImage&&'\n    background-image: url("'.concat(e.backgroundImage,'");\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n  ')})),m=t(46684),I=t(85010),g=t(72619),_=t(19183),N=t(28598);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function k(e,n){var t=e.after,r=e.afterHidden,O=e.afterWidth,h=e.before,E=e.beforeWidth,T=e.breadcrumbs,k=e.buildSidekick,S=e.children,A=e.errors,Z=e.headline,j=e.pageName,R=e.pipeline,C=e.setErrors,L=e.subheader,D=e.subheaderBackground,w=e.subheaderBackgroundImage,M=e.subheaderButton,U=e.subheaderNoPadding,x=e.subheaderText,Y=e.title,G=e.uuid,H=(0,_.i)().height,V=(0,c.useRouter)().query.pipeline,B=null==R?void 0:R.uuid,F=b.ZP.pipelines.detail(B,{includes_outputs:!1},{revalidateOnFocus:!1}).data,K=null==F?void 0:F.pipeline;(0,u.useEffect)((function(){(0,g.bB)(F,C)}),[F,C]);var W=O||(t||k?50*v.iI:null),X=(0,u.useCallback)((function(e){var n=e.width;return t||(k?k({height:H,heightOffset:m.Mz,pipeline:K,width:n||W}):null)}),[t,W,k,H,K]),q=(0,u.useMemo)((function(){var e=[];return K?(e.push.apply(e,[{label:function(){return"Pipelines"},linkProps:{href:"/pipelines"}}]),T?(e.push({label:function(){return K.uuid},linkProps:{as:"/pipelines/".concat(B,"/triggers"),href:"/pipelines/[pipeline]/triggers"}}),e.push.apply(e,(0,i.Z)(T)),e[e.length-1].bold=!0):e.push({bold:!0,label:function(){return K.name}})):null!=F&&F.error&&e.push({bold:!0,danger:!0,label:function(){return"Error loading pipeline"}}),e}),[T,null==F?void 0:F.error,K,B]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(l.Z,{after:t||k?X:null,afterHidden:r,afterWidth:W,before:h,beforeWidth:E,breadcrumbs:q,navigationItems:(0,I.H)(j,K,V),ref:n,subheaderChildren:void 0!==L&&L,subheaderNoPadding:U,title:K?Y?Y(K):K.name:null,uuid:G,children:[(M||x)&&(0,N.jsx)(p.Z,{mb:v.Mq,mt:v.cd,mx:v.cd,children:(0,N.jsx)(P,{background:D,backgroundImage:w,children:(0,N.jsxs)(f.ZP,{alignItems:"center",children:[M,x&&(0,N.jsx)(p.Z,{ml:3}),x]})})}),Z&&(0,N.jsx)(p.Z,{p:v.cd,children:(0,N.jsxs)(p.Z,{mt:v.cd,px:v.cd,children:[(0,N.jsx)(d.Z,{level:5,children:Z}),(0,N.jsx)(a.Z,{light:!0,mt:v.cd,short:!0})]})}),S]}),A&&(0,N.jsx)(o.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null==C?void 0:C(null)},children:(0,N.jsx)(s.Z,y(y({},A),{},{onClose:function(){return null==C?void 0:C(null)}}))})]})}var S=u.forwardRef(k)},85010:function(e,n,t){"use strict";t.d(n,{H:function(){return o}});var r=t(57653),i=t(72473),u=t(28795),c=t(50178);function o(e,n,t){var o=(n||{}).uuid||t,l=[{Icon:i.Lightning,id:u.M.TRIGGERS,isSelected:function(){return u.M.TRIGGERS===e},label:function(){return"Triggers"},linkProps:{as:"/pipelines/".concat(o,"/triggers"),href:"/pipelines/[pipeline]/triggers"}},{Icon:i.Schedule,id:u.M.RUNS,isSelected:function(){return u.M.RUNS===e},label:function(){return"Runs"},linkProps:{as:"/pipelines/".concat(o,"/runs"),href:"/pipelines/[pipeline]/runs"}},{Icon:i.Logs,id:u.M.PIPELINE_LOGS,isSelected:function(){return u.M.PIPELINE_LOGS===e},label:function(){return"Logs"},linkProps:{as:"/pipelines/".concat(o,"/logs"),href:"/pipelines/[pipeline]/logs"}},{Icon:i.Monitor,id:u.M.MONITOR,isSelected:function(){return u.M.MONITOR===e},label:function(){return"Monitor"},linkProps:{as:"/pipelines/".concat(o,"/monitors"),href:"/pipelines/[pipeline]/monitors"}}];return r.qL.PYTHON===(null==n?void 0:n.type)&&l.splice(2,0,{Icon:i.BackfillV2,id:u.M.BACKFILLS,isSelected:function(){return u.M.BACKFILLS===e},label:function(){return"Backfills"},linkProps:{as:"/pipelines/".concat(o,"/backfills"),href:"/pipelines/[pipeline]/backfills"}}),r.qL.INTEGRATION===(null==n?void 0:n.type)&&l.unshift({Icon:i.PipeIcon,id:u.M.SYNCS,isSelected:function(){return u.M.SYNCS===e},label:function(){return"Syncs"},linkProps:{as:"/pipelines/".concat(o,"/syncs"),href:"/pipelines/[pipeline]/syncs"}}),l.unshift({Icon:i.Code,disabled:!o,id:u.M.EDIT,isSelected:function(){return u.M.EDIT===e},label:function(){return(0,c.Ct)()?"View pipeline":"Edit pipeline"},linkProps:{as:"/pipelines/".concat(o,"/edit"),href:"/pipelines/[pipeline]/edit"}}),l.push({Icon:i.SettingsWithKnobs,id:u.M.SETTINGS,isSelected:function(){return u.M.SETTINGS===e},label:function(){return"Pipeline settings"},linkProps:{as:"/pipelines/".concat(o,"/settings"),href:"/pipelines/[pipeline]/settings"}}),l.unshift({Icon:i.NavDashboard,id:u.M.DASHBOARD,isSelected:function(){return u.M.DASHBOARD===e},label:function(){return"Dashboard"},linkProps:{as:"/pipelines/".concat(o,"/dashboard"),href:"/pipelines/[pipeline]/dashboard"}}),l}},16488:function(e,n,t){"use strict";t.d(n,{IJ:function(){return O},M8:function(){return T},Uc:function(){return m},XM:function(){return N},_U:function(){return b},eI:function(){return P},gU:function(){return g},lO:function(){return Z},ri:function(){return E},tL:function(){return I},vJ:function(){return _},xH:function(){return v}});var r,i=t(82394),u=t(92083),c=t.n(u),o=t(3917),l=t(4383),a=t(30229),s=t(42122),f=t(86735);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var b=function(e){return!!e&&!Object.values(a.U5).includes(e)};function O(e){return null==e?void 0:e.reduce((function(e,n){var t=n.block_uuid,r=n.completed_at,u=n.started_at,o=n.status,l=null;u&&r&&(l=c()(r).valueOf()-c()(u).valueOf());return p(p({},e),{},(0,i.Z)({},t,{runtime:l,status:o}))}),{})}var h,E=function(e){var n=[{description:function(){return"This pipeline will run continuously on an interval or just once."},label:function(){return"Schedule"},uuid:a.Xm.TIME},{description:function(){return"This pipeline will run when a specific event occurs."},label:function(){return"Event"},uuid:a.Xm.EVENT},{description:function(){return"Run this pipeline when you make an API call."},label:function(){return"API"},uuid:a.Xm.API}];return e?n.slice(0,1):n};function v(e){var n=(0,s.gR)(e,[a.gm.INTERVAL,a.gm.TYPE]),t=e[a.gm.INTERVAL];t&&(n["schedule_interval[]"]=encodeURIComponent(t));var r=e[a.gm.TYPE];return r&&(n["schedule_type[]"]=r),n}function P(e){return e?new Date(c()(e).valueOf()):null}function m(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n?(0,o.XG)(e,n,t):function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"!=typeof e)return e;var t=e.split("+")[0];return c()(P(t)).format(n||o.Nx)}(e,t)}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(h||(h={}));var I=(r={},(0,i.Z)(r,h.DAY,86400),(0,i.Z)(r,h.HOUR,3600),(0,i.Z)(r,h.MINUTE,60),(0,i.Z)(r,h.SECOND,1),r);function g(e){var n=h.SECOND,t=e;return e%86400==0?(t/=86400,n=h.DAY):e%3600==0?(t/=3600,n=h.HOUR):e%60==0&&(t/=60,n=h.MINUTE),{time:t,unit:n}}function _(e,n){return e*I[n]}function N(e,n,t){var r,i=c()(e);return i.set("hour",+(null==n?void 0:n.hour)||0),i.set("minute",+(null==n?void 0:n.minute)||0),i.set("second",0),r=i.format(o.TD),null!=t&&t.includeSeconds&&(r=r.concat(":00")),null!=t&&t.localTimezone&&(r=i.format(o.lE),null!=t&&t.convertToUtc&&(r=(0,o.d$)(r,{includeSeconds:null==t?void 0:t.includeSeconds,utcFormat:!0}))),r}function T(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t="",r=(0,l.XF)();return n?t="".concat(r,"/api/pipeline_schedules/").concat(null==e?void 0:e.id,"/api_trigger"):(t="".concat(r,"/api/pipeline_schedules/").concat(null==e?void 0:e.id,"/pipeline_runs"),null!=e&&e.token&&(t="".concat(t,"/").concat(e.token))),t}function y(e,n,t){return e.match(/[*,-/]/)?{additionalOffset:0,cronValue:e}:function(e,n,t){var r=t.indexOf(e),i=0;if(n<0)for(var u=0;u>n;u--)0===r?(r=t.length-1,i-=1):r-=1;else if(n>0)for(var c=0;c<n;c++)r===t.length-1?(r=0,i+=1):r+=1;var o="number"==typeof t[r]?t[r]:e;return{additionalOffset:i,cronValue:String(o)}}(+e,n,t)}var k=(0,f.m5)(60),S=(0,f.m5)(24),A=(0,o.Cs)();function Z(e,n){if(!e)return e;var t=c()().local().format("Z"),r=t.split(":"),i="-"===t[0],u=3===r[0].length?Number(r[0].slice(1)):Number(r[0]),o=Number(r[1]);(i&&!n||!i&&n)&&(u=-u,o=-o);var l=e.split(" "),a=l[0],s=l[1],f=l[2],d=y(a,o,k),p=y(s,u+d.additionalOffset,S);if(l[0]=d.cronValue,l[1]=p.cronValue,0!==(null==p?void 0:p.additionalOffset)){var b=y(f,p.additionalOffset,A);l[2]=b.cronValue}return l.join(" ")}},83641:function(e,n,t){"use strict";t.d(n,{I7:function(){return r},IB:function(){return l},VV:function(){return u},_7:function(){return c},rn:function(){return o}});var r,i=t(41143),u="datetime",c="code",o=i.V;!function(e){e.SECOND="second",e.MINUTE="minute",e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month",e.YEAR="year",e.CUSTOM="custom"}(r||(r={}));var l=[r.MINUTE,r.HOUR,r.DAY,r.WEEK,r.MONTH,r.YEAR]},72098:function(e,n,t){"use strict";var r;t.d(n,{U:function(){return r}}),function(e){e.PYSPARK="pysparkkernel",e.PYTHON3="python3"}(r||(r={}))},44265:function(e,n,t){"use strict";t.d(n,{Az:function(){return f},BF:function(){return s},Do:function(){return p},IK:function(){return l},P0:function(){return i},VO:function(){return c},hn:function(){return a},sZ:function(){return d}});var r,i,u=t(82394),c=t(41143).V,o="last_run_failed",l=[c.FAILED,o,c.COMPLETED,c.RUNNING,c.CANCELLED,c.INITIAL],a=[c.FAILED,c.COMPLETED,c.RUNNING,c.CANCELLED,c.INITIAL],s=[c.INITIAL,c.RUNNING],f=[c.CANCELLED,c.COMPLETED,c.FAILED],d="__mage_variables",p=(r={},(0,u.Z)(r,o,"Last run failed"),(0,u.Z)(r,c.CANCELLED,"Cancelled"),(0,u.Z)(r,c.COMPLETED,"Done"),(0,u.Z)(r,c.FAILED,"Failed"),(0,u.Z)(r,c.INITIAL,"Ready"),(0,u.Z)(r,c.RUNNING,"Running"),r);!function(e){e.PIPELINE_UUID="pipeline_uuid[]",e.STATUS="status[]",e.TAG="pipeline_tag[]"}(i||(i={}))},30229:function(e,n,t){"use strict";t.d(n,{PN:function(){return o},TR:function(){return b},U5:function(){return a},Wb:function(){return p},Xm:function(){return u},Z4:function(){return s},fq:function(){return l},gm:function(){return f},kJ:function(){return d}});var r,i,u,c=t(82394),o="__bookmark_values__";!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(u||(u={}));var l,a,s=(r={},(0,c.Z)(r,u.API,(function(){return"API"})),(0,c.Z)(r,u.EVENT,(function(){return"event"})),(0,c.Z)(r,u.TIME,(function(){return"schedule"})),r);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(l||(l={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly",e.ALWAYS_ON="@always_on"}(a||(a={}));var f,d,p=[a.ONCE,a.HOURLY,a.DAILY,a.WEEKLY,a.MONTHLY];!function(e){e.INTERVAL="frequency[]",e.STATUS="status[]",e.TAG="tag[]",e.TYPE="type[]"}(f||(f={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(d||(d={}));var b=(i={},(0,c.Z)(i,d.CREATED_AT,"Created at"),(0,c.Z)(i,d.NAME,"Name"),(0,c.Z)(i,d.PIPELINE,"Pipeline"),(0,c.Z)(i,d.STATUS,"Active"),(0,c.Z)(i,d.TYPE,"Type"),i)},57653:function(e,n,t){"use strict";t.d(n,{$1:function(){return h},G7:function(){return m},LM:function(){return I},Mj:function(){return g},QK:function(){return O},RH:function(){return P},a_:function(){return N},ad:function(){return v},fj:function(){return T},kA:function(){return _},pF:function(){return l},qL:function(){return o},r0:function(){return E}});var r,i,u,c,o,l,a=t(75582),s=t(82394),f=t(72473),d=t(72098);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e.INTEGRATION="integration",e.PYTHON="python",e.PYSPARK="pyspark",e.STREAMING="streaming"}(o||(o={})),function(e){e.SKIP="skip",e.WAIT="wait"}(l||(l={}));var O,h,E,v="invalid",P=(r={},(0,s.Z)(r,o.INTEGRATION,"Integration"),(0,s.Z)(r,o.PYTHON,"Python"),(0,s.Z)(r,o.PYSPARK,"PySpark"),(0,s.Z)(r,o.STREAMING,"Streaming"),r),m=(i={},(0,s.Z)(i,o.INTEGRATION,"Integration"),(0,s.Z)(i,o.PYTHON,"Standard"),(0,s.Z)(i,o.PYSPARK,"PySpark"),(0,s.Z)(i,o.STREAMING,"Streaming"),i),I="all",g=(o.PYTHON,o.INTEGRATION,o.STREAMING,u={},(0,s.Z)(u,I,f.HexagonAll),(0,s.Z)(u,o.INTEGRATION,f.IntegrationPipeline),(0,s.Z)(u,o.PYTHON,f.BatchPipeline),(0,s.Z)(u,o.STREAMING,f.StreamingPipeline),u);!function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.NO_SCHEDULES="no_schedules",e.RETRY="retry",e.RETRY_INCOMPLETE_BLOCK_RUNS="retry_incomplete_block_runs"}(O||(O={})),function(e){e.GROUP="group_by",e.HISTORY_DAYS="from_history_days",e.NO_TAGS="no_tags",e.SEARCH="search",e.STATUS="status[]",e.TAG="tag[]",e.TYPE="type[]"}(h||(h={})),function(e){e.STATUS="status",e.TAG="tag",e.TYPE="type"}(E||(E={}));var _=[O.ACTIVE,O.INACTIVE,O.NO_SCHEDULES],N=(c={},(0,s.Z)(c,o.PYTHON,d.U.PYTHON3),(0,s.Z)(c,o.PYSPARK,d.U.PYSPARK),c),T=Object.entries(N).reduce((function(e,n){var t=(0,a.Z)(n,2),r=t[0],i=t[1];return b(b({},e),{},(0,s.Z)({},i,r))}),{})},4303:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var r=t(77837),i=t(75582),u=t(38860),c=t.n(u),o=t(82684),l=t(83455),a=t(34376),s=t(82394),f=t(12691),d=t.n(f),p=t(83641),b=t(71180),O=t(55485),h=t(48670),E=t(75499),v=t(30160),P=t(5332),m=t(50724),I=t(89515),g=t(38276),_=t(81655),N=t(72191),T=t(72473),y=t(72619),k=t(23780),S=t(28598);var A=function(e){var n=e.fetchItems,t=e.mutationFn,r=e.path,u=e.pipelineUUID,c=(0,a.useRouter)(),s=(0,o.useRef)({}),f=(0,o.useState)(null),d=f[0],p=f[1],O=(0,o.useState)(0),h=O[0],E=O[1],v=(0,o.useState)(0),P=v[0],A=v[1],Z=(0,k.VI)(null,{},[],{uuid:"".concat(r,"/").concat(u,"/delete/error")}),j=(0,i.Z)(Z,1)[0],R=(0,l.Db)((function(e){return t(e)()}),{onSuccess:function(e){return(0,y.wD)(e,{callback:function(){null==n||n(),u&&c.push("/pipelines/[pipeline]/".concat(r),"/pipelines/".concat(u,"/").concat(r))},onErrorCallback:function(e,n){return j({errors:n,response:e})}})}}),C=(0,i.Z)(R,1)[0];return{deleteButton:function(e,n,t){return s.current[e]=(0,o.createRef)(),(0,S.jsxs)(g.Z,{mr:1,children:[(0,S.jsx)(b.ZP,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){var n,t,r,i;p(e),E((null===(n=s.current[e])||void 0===n||null===(t=n.current)||void 0===t?void 0:t.offsetTop)||0),A((null===(r=s.current[e])||void 0===r||null===(i=r.current)||void 0===i?void 0:i.offsetLeft)||0)},ref:s.current[e],title:"Delete",children:(0,S.jsx)(T.Trash,{default:!0,size:N.bL})}),(0,S.jsx)(m.Z,{onClickOutside:function(){return p(null)},open:d===e,children:(0,S.jsx)(I.Z,{danger:!0,left:(P||0)-_.nH,onCancel:function(){return p(null)},onClick:function(){p(null),C(e)},title:t,top:(h||0)-(n<=1?_.oz:_.OK),width:_.Xx})})]})}}},Z=t(44265),j=t(70515),R=t(16488),C=t(50178),L=t(70320),D=t(3917);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U={default:!0,monospace:!0};var x=function(e){var n=e.fetchBackfills,t=e.models,r=e.onClickRow,i=e.pipeline,u=e.selectedRow,c=(0,C.Ct)(),l=(0,L.qB)(),a=null==i?void 0:i.uuid,s=l?_.O$:{},f=A({fetchItems:n,mutationFn:P.ZP.backfills.useDelete,path:"backfills",pipelineUUID:a}).deleteButton,m=[{uuid:"Status"},{uuid:"Name"},M(M({},s),{},{uuid:"Backfill"}),{uuid:"Ready"},{uuid:"Running"},{uuid:"Cancelled"},{uuid:"Completed"},{uuid:"Failed"},{uuid:"Total runs"},M(M({},s),{},{uuid:"Started at"}),M(M({},s),{},{uuid:"Completed at"}),{uuid:"Interval"},{uuid:"Interval units"},{uuid:"Type"}];return c||m.push({label:function(){return""},uuid:"edit_delete_backfill"}),(0,S.jsx)(E.Z,{columnFlex:[null,1,1,null,null,null,null,null,null,1,1,null,null,null,null],columns:m,isSelectedRow:function(e){return t[e].id===(null==u?void 0:u.id)},onClickRow:function(e){return null==r?void 0:r(t[e])},rows:t.map((function(e,n){var t=e.block_uuid,r=e.completed_at,i=e.end_datetime,u=e.id,s=e.interval_type,E=e.interval_units,P=e.name,m=e.run_status_counts,I=void 0===m?{}:m,g=e.start_datetime,N=e.started_at,y=e.status,k=e.total_run_count,A=[(0,o.createElement)(v.ZP,M(M({},(0,_.NC)(y)),{},{key:"status_".concat(n)}),y||"inactive"),(0,S.jsx)(d(),{as:"/pipelines/".concat(a,"/backfills/").concat(u),href:"/pipelines/[pipeline]/backfills/[...slug]",passHref:!0,children:(0,S.jsx)(h.Z,{bold:!0,sameColorAsText:!0,children:P})},"name_".concat(n)),(0,o.createElement)(v.ZP,M(M({},U),{},{key:"backfill_".concat(n),small:!0}),g&&i&&(0,S.jsxs)(S.Fragment,{children:[(0,R.Uc)(g,l)," - ",(0,R.Uc)(i,l)]}),!(g&&i)&&(0,S.jsx)(S.Fragment,{children:"—"})),(0,o.createElement)(v.ZP,M(M({},U),{},{key:"ready_".concat(n)}),I[Z.VO.INITIAL]||0),(0,o.createElement)(v.ZP,M(M({},U),{},{info:I[Z.VO.RUNNING]>0,key:"running_".concat(n)}),I[Z.VO.RUNNING]||0),(0,o.createElement)(v.ZP,M(M({},U),{},{key:"cancelled_".concat(n),warning:I[Z.VO.CANCELLED]>0}),I[Z.VO.CANCELLED]||0),(0,o.createElement)(v.ZP,M(M({},U),{},{key:"completed_".concat(n),success:I[Z.VO.COMPLETED]>0}),I[Z.VO.COMPLETED]||0),(0,o.createElement)(v.ZP,M(M({},U),{},{danger:I[Z.VO.FAILED]>0,key:"failed_".concat(n)}),I[Z.VO.FAILED]||0),(0,o.createElement)(v.ZP,M(M({},U),{},{bold:!0,key:"total_runs_".concat(n)}),k||0),(0,o.createElement)(v.ZP,M(M({},U),{},{key:"started_at_".concat(n),small:!0,title:N?(0,D._6)(N):null}),N?(0,R.Uc)(N,l):(0,S.jsx)(S.Fragment,{children:"—"})),(0,o.createElement)(v.ZP,M(M({},U),{},{key:"completed_at_".concat(n),small:!0,title:r?(0,D._6)(r):null}),r?(0,R.Uc)(r,l):(0,S.jsx)(S.Fragment,{children:"—"})),(0,o.createElement)(v.ZP,M(M({},U),{},{key:"interval_".concat(n)}),s||(0,S.jsx)(S.Fragment,{children:"—"})),(0,o.createElement)(v.ZP,M(M({},U),{},{key:"interval_units_".concat(n)}),E||(0,S.jsx)(S.Fragment,{children:"—"})),(0,o.createElement)(v.ZP,M(M({},U),{},{key:"type_".concat(n)}),t?p._7:p.VV)];return c||A.push((0,S.jsxs)(O.ZP,{children:[(0,S.jsx)(b.ZP,{default:!0,disabled:!!N,iconOnly:!0,linkProps:{as:"/pipelines/".concat(a,"/backfills/").concat(u,"/edit"),href:"/pipelines/[pipeline]/backfills/[...slug]"},noBackground:!0,title:"Edit",children:(0,S.jsx)(T.Edit,{default:!0,size:2*j.iI})},"".concat(n,"_edit_button")),f(u,n,'Are you sure you want to delete the backfill "'.concat(P,'?"'))]},"edit_delete_backfill_".concat(n))),A})),uuid:"pipeline-runs"})},Y=t(68562),G=t(75457),H=t(93808),V=t(28795),B=t(69419),F=t(81728);function K(e){var n=e.pipeline,t=(0,a.useRouter)(),r=n.uuid,u=P.ZP.backfills.list({_limit:20,_offset:0,include_run_count:!0,pipeline_uuid:r},{refreshInterval:6e4}),c=u.data,s=u.mutate,f=(0,o.useMemo)((function(){return(null==c?void 0:c.backfills)||[]}),[c]),d=(0,B.iV)(),p=(0,o.useState)(null),b=p[0],O=p[1],h=(0,o.useState)(null),E=h[0],m=h[1];(0,o.useEffect)((function(){null!=d&&d.backfill_id?O(null==f?void 0:f.find((function(e){return e.id===Number(d.backfill_id)}))):b&&O(null)}),[f,d,b]);var I=(0,o.useMemo)((function(){var e="/pipelines/".concat(r,"/backfills"),n=[{label:function(){return"Backfills"},linkProps:b?{as:e,href:"/pipelines/[pipeline]/backfills"}:null}];return b&&n.push({label:function(){return b.name}}),n}),[r,b]),_=(0,l.Db)(P.ZP.backfills.pipelines.useCreate(r),{onSuccess:function(e){return(0,y.wD)(e,{callback:function(e){var n=e.backfill.id;t.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(r,"/backfills/").concat(n,"/edit"))},onErrorCallback:function(e,n){return m({errors:n,response:e})}})}}),N=(0,i.Z)(_,2),k=N[0],A=N[1].isLoading;return(0,S.jsxs)(G.Z,{breadcrumbs:I,errors:E,pageName:V.M.BACKFILLS,pipeline:n,setErrors:m,title:function(e){var n=e.name;return"".concat(n," backfills")},uuid:"".concat(V.M.BACKFILLS,"_").concat(r),children:[(0,S.jsx)(g.Z,{p:j.cd,children:(0,S.jsx)(Y.ZP,{beforeElement:(0,S.jsx)(T.Add,{size:2.5*j.iI}),blackBorder:!0,inline:!0,loading:A,noHoverUnderline:!0,onClick:function(){return k({backfill:{name:(0,F.Y6)()}})},sameColorAsText:!0,uuid:"PipelineDetailPage/Backfills/add_new_backfill",children:"Create new backfill"})}),f&&0===f.length&&(0,S.jsx)(g.Z,{p:j.cd,children:(0,S.jsx)(v.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No backfills available"})}),(null==f?void 0:f.length)>=1&&(0,S.jsx)(x,{fetchBackfills:s,models:f,pipeline:n,selectedRow:b})]})}K.getInitialProps=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var W=(0,H.Z)(K)},37459:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/backfills",function(){return t(4303)}])},80022:function(e,n,t){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,{Z:function(){return r}})},15544:function(e,n,t){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.d(n,{Z:function(){return r}})},13692:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(61049);function i(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,r.Z)(e,n)}},93189:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(12539),i=t(80022);function u(e,n){if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},61049:function(e,n,t){"use strict";function r(e,n){return r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},r(e,n)}t.d(n,{Z:function(){return r}})}},function(e){e.O(0,[2678,365,184,9518,5946,2655,3745,9565,5329,5332,9868,9895,564,2371,1557,2512,5604,5499,9774,2888,179],(function(){return n=37459,e(e.s=n);var n}));var n=e.O();_N_E=n}]);