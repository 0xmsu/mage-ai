(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4913],{78688:function(e,n,t){"use strict";var r=t(82394),i=t(82684),l=t(15338),c=t(77456),o=t(97618),s=t(55485),u=t(85854),a=t(65956),d=t(38276),p=t(30160),f=t(72473),m=t(70515),j=t(74778),x=t(74260),h=t(81728),g=t(28598);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.contained,t=void 0===n||n,r=e.onClickStep,v=e.setupSteps,b=e.small,P=(0,i.useCallback)((function(e,n,i,v){var y=e.name,_=e.description,k=e.group,O=e.error,C=e.required,S=e.status_calculated,E=e.steps,I=e.tab,w=e.uuid,T=(null==E?void 0:E.length)||0,D=v||{completedGroup:!1,level:0,numberEl:null},M=D.completedGroup,A=D.level,R=D.numberEl,B=0===A?2*m.iI:1.5*m.iI;if(k){var N=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Z,{p:m.cd,children:(0,g.jsx)(s.ZP,{children:(0,g.jsxs)(o.Z,{flex:1,flexDirection:"column",children:[(0,g.jsxs)(s.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,g.jsx)(u.Z,{level:b?5:4,children:y}),(0,g.jsx)(d.Z,{mr:m.cd}),x.br.COMPLETED===S&&(0,g.jsx)(f.Check,{size:B,success:!0})]}),_&&(0,g.jsx)(d.Z,{mt:1,children:(0,g.jsx)(p.ZP,{default:!0,small:b,children:_})})]})})}),(0,g.jsx)(l.Z,{light:!0}),null==E?void 0:E.map((function(e,n){return P(e,n,T,{completedGroup:x.br.COMPLETED===S,level:0})}))]});return(0,g.jsxs)(d.Z,{mb:b?0:m.cd,children:[t&&(0,g.jsx)(a.Z,{noPadding:!0,children:N}),!t&&N]},w)}var z=x.br.COMPLETED===S,F=0===A?String(n+1):(0,h.bH)()[n].toLowerCase();var L=!!I&&r,H=(0,g.jsx)(d.Z,{pl:0===A?m.cd:0,children:(0,g.jsxs)(p.ZP,{large:!b,monospace:!0,muted:!0,children:[F,"."]})}),W={muted:z||M,strikethrough:z||M};return(0,g.jsx)(j.aw,{clickable:!!L,onClick:L?function(){return null==r?void 0:r(I)}:null,children:(0,g.jsxs)(d.Z,{py:0!==A||b?1:m.cd,children:[(0,g.jsxs)(s.ZP,{children:[R&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{opacity:0},children:R}),(0,g.jsx)(d.Z,{mr:1})]}),H,(0,g.jsx)(d.Z,{mr:1}),(0,g.jsx)(o.Z,{flex:1,flexDirection:"column",children:(0,g.jsxs)(s.ZP,{flexDirection:"column",children:[(0,g.jsxs)(s.ZP,{alignItems:"center",children:[(0,g.jsxs)(o.Z,{flex:1,children:[0===A&&!b&&(0,g.jsx)(u.Z,Z(Z({level:5},W),{},{children:y})),0===A&&b&&(0,g.jsx)(p.ZP,Z(Z({bold:!0,large:!0},W),{},{children:y})),A>=1&&(0,g.jsx)(p.ZP,Z(Z({bold:!0,large:!b},W),{},{children:y})),!C&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Z,{mr:1}),(0,g.jsx)(p.ZP,{muted:!0,uppercase:!0,xsmall:!0,children:"optional"})]})]}),(0,g.jsx)(d.Z,{mr:m.cd}),z&&(0,g.jsx)(f.Check,{size:B,success:!0}),x.br.INCOMPLETE===S&&(0,g.jsx)(f.AlertTriangle,{muted:!0,size:B}),x.br.ERROR===S&&(0,g.jsx)(f.AlertTriangle,{danger:!0,size:B}),(0,g.jsx)(d.Z,{pr:m.cd*(S?1:2)})]}),_&&(0,g.jsx)(d.Z,{mt:1,pr:3*m.cd,children:(0,g.jsx)(p.ZP,Z(Z({default:!0},W),{},{small:b,children:_}))}),O&&(0,g.jsx)(c.Z,{error:O,small:!0,warning:!0})]})})]}),T>=1&&(0,g.jsx)(d.Z,{mt:1,children:null==E?void 0:E.map((function(e,n){return P(e,n,T,{completedGroup:M,level:1,numberEl:H})}))})]})},w)}),[t,r,b]),y=[],_=(null==v?void 0:v.length)||0;return null==v||v.forEach((function(e,n){e.status;y.push(P(e,n,_))})),t?(0,g.jsx)(d.Z,{p:m.cd,children:y}):(0,g.jsx)(g.Fragment,{children:y})}},89308:function(e,n,t){"use strict";var r=t(82394),i=t(75582),l=t(82684),c=t(83455),o=t(71180),s=t(26032),u=t(74260),a=t(15338),d=t(97618),p=t(55485),f=t(85854),m=t(65956),j=t(78688),x=t(38276),h=t(30160),g=t(5332),v=t(70515),Z=t(72473),b=t(81728),P=t(10332),y=t(72619),_=t(23780),k=t(28598);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.actionsOnly,t=e.computeService,r=e.computeConnections,O=e.contained,S=void 0===O||O,E=e.fetchAll,I=e.hideDetails,w=e.onClickStep,T=e.small,D=(0,_.VI)(null,{},[],{uuid:"ConnectionSettings"}),M=(0,i.Z)(D,1)[0],A=(0,l.useState)(null),R=A[0],B=A[1],N=(0,l.useState)(null),z=N[0],F=N[1],L=(0,c.Db)((function(e){var n=e.action,r=e.uuid;return g.ZP.compute_connections.compute_services.useUpdate(null==t?void 0:t.uuid,r)({compute_connection:{action:n}})}),{onSuccess:function(e){return(0,y.wD)(e,{callback:function(e){var n=e.compute_connection;null==E||E(),F(C(C({},R),{},{computeConnection:n}))},onErrorCallback:function(e,n){return M({errors:n,response:e})}})}}),H=(0,i.Z)(L,2),W=H[0],U=H[1].isLoading;return(0,l.useEffect)((function(){if(z){var e,n=null==r?void 0:r.find((function(e){var n,t=e.uuid;return(null==z||null===(n=z.computeConnection)||void 0===n?void 0:n.uuid)===t}));(null==n?void 0:n.state)!==(null==z||null===(e=z.computeConnection)||void 0===e?void 0:e.state)&&F(null)}}),[r,z,F]),(0,k.jsx)(x.Z,{py:S?v.cd:0,children:null==r?void 0:r.map((function(e,t){var r,l,c,g,y=e.actions,_=e.attributes,O=e.connection,C=e.description,E=e.name,D=e.required,M=e.status_calculated,A=e.steps,N=e.uuid;!I&&!n&&_&&(null===(r=Object.keys(_||{}))||void 0===r?void 0:r.length)>=1&&(c=(0,P.s)(Object.entries(_||{}).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[(0,b.vg)(t),r]})))),!I&&!n&&O&&(null===(l=Object.keys(O||{}))||void 0===l?void 0:l.length)>=1&&(g=(0,P.s)(Object.entries(O||{}).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[(0,b.vg)(t),r]}))));var L=(0,k.jsxs)(k.Fragment,{children:[!n&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(x.Z,{p:v.cd,children:(0,k.jsx)(p.ZP,{children:(0,k.jsxs)(d.Z,{flex:1,flexDirection:"column",children:[(0,k.jsxs)(p.ZP,{alignItems:"center",children:[(0,k.jsx)(d.Z,{flex:1,children:(0,k.jsx)(f.Z,{level:T?5:4,children:E})}),(0,k.jsx)(x.Z,{mr:v.cd}),(0,k.jsx)(Z.PowerOnOffButton,{danger:u.br.ERROR===M,muted:D&&u.br.INCOMPLETE===M,size:2*v.iI,success:!D||u.br.COMPLETED===M})]}),C&&(0,k.jsx)(x.Z,{mt:1,children:(0,k.jsx)(h.ZP,{default:!0,small:T,children:C})})]})})}),(null==A?void 0:A.length)>=1&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(a.Z,{light:!0}),(0,k.jsx)(j.Z,{contained:!1,onClickStep:w,setupSteps:A,small:T})]})]}),(c||g)&&(0,k.jsx)(x.Z,{p:v.cd,children:(0,k.jsxs)(p.ZP,{children:[c&&(0,k.jsx)(m.Z,{noPadding:!0,children:(0,k.jsxs)(p.ZP,{flexDirection:"column",children:[(0,k.jsx)(x.Z,{p:v.cd,children:(0,k.jsx)(h.ZP,{bold:!0,large:!0,children:"Attributes"})}),(0,k.jsx)(a.Z,{light:!0}),c,(0,k.jsx)(x.Z,{mb:v.cd})]})}),c&&g&&(0,k.jsx)(x.Z,{pr:v.cd}),g&&(0,k.jsx)(m.Z,{noPadding:!0,children:(0,k.jsxs)(p.ZP,{flexDirection:"column",children:[(0,k.jsx)(x.Z,{p:v.cd,children:(0,k.jsx)(h.ZP,{bold:!0,large:!0,children:"Connection"})}),(0,k.jsx)(a.Z,{light:!0}),g,(0,k.jsx)(x.Z,{mb:v.cd})]})})]})}),(null==y?void 0:y.length)>=1&&(0,k.jsxs)(k.Fragment,{children:[!n&&(0,k.jsx)(x.Z,{p:v.cd,children:(0,k.jsx)(p.ZP,{children:(0,k.jsx)(d.Z,{flex:1,flexDirection:"column",children:(0,k.jsx)(p.ZP,{alignItems:"center",children:(0,k.jsx)(d.Z,{flex:1,children:(0,k.jsx)(f.Z,{level:T?5:4,children:"Actions"})})})})})}),null==y?void 0:y.map((function(e,t){var r,i=e.description,l=e.name,c=e.uuid,u=U&&(null==R?void 0:R.uuid)===N&&(null==R?void 0:R.actionUUID)===c||s.i.PENDING===(null==z||null===(r=z.computeConnection)||void 0===r?void 0:r.state);return(0,k.jsxs)("div",{children:[(!n||t>=1)&&(0,k.jsx)(a.Z,{light:!0}),(0,k.jsx)(x.Z,{p:v.cd,children:(0,k.jsx)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,k.jsxs)(d.Z,{flex:1,flexDirection:"column",children:[(0,k.jsx)(h.ZP,{default:!0,large:!T,children:i}),(0,k.jsx)(x.Z,{mt:v.cd,children:(0,k.jsx)(o.ZP,{compact:T,danger:[s._.DELETE].includes(c),loading:u,onClick:function(){B({actionUUID:c,uuid:N}),F(null),W({action:c,uuid:N})},primary:[s._.CREATE,s._.UPDATE].includes(c),secondary:[s._.DESELECT].includes(c),small:T,children:l})})]})})})]},c)}))]})]});return(0,k.jsxs)(x.Z,{mt:t>=1?v.cd:0,px:S?v.cd:0,children:[S&&(0,k.jsx)(m.Z,{noPadding:!0,children:L}),!S&&L]},N)}))})}},77456:function(e,n,t){"use strict";var r=t(82394),i=t(75582),l=t(43695),c=t(30160),o=t(28598);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.danger,t=e.error,r=e.large,s=e.small,a=e.warning,d=t.message,p=t.variables,f=d;return p&&Object.entries(p||{}).forEach((function(e){var t=(0,i.Z)(e,2),d=t[0],p=t[1];f=f.replace("{{".concat(d,"}}"),(0,l.Dq)((0,o.jsx)(c.ZP,u(u({danger:n,inline:!0,large:r,muted:!n&&!a,small:s,warning:a},p||{}),{},{children:d}))))})),(0,o.jsx)(c.ZP,{danger:n,dangerouslySetInnerHTML:{__html:f},muted:!n&&!a,large:r,small:s,warning:a})}},74778:function(e,n,t){"use strict";t.d(n,{UE:function(){return s},aw:function(){return u},bC:function(){return a}});var r=t(9518),i=t(44897),l=t(42631),c=t(70515),o=t(91437),s=r.default.div.withConfig({displayName:"indexstyle__CardStyle",componentId:"sc-1b5e7g-0"})([""," border-radius:","px;padding:","px;"," ",""],(0,o.eR)(),l.D7,2.5*c.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border: 1px solid ").concat((e.theme.borders||i.Z.borders).darkLight,";\n    box-shadow: ").concat((e.theme.shadow||i.Z.shadow).frame,";\n  ")}),(function(e){return!e.inline&&"\n    height: ".concat(28*c.iI,"px;\n    width: ").concat(40*c.iI,"px;\n    margin: ").concat(c.cd/2*c.iI,"px;\n  ")})),u=r.default.div.withConfig({displayName:"indexstyle__SetupStepRowStyle",componentId:"sc-1b5e7g-1"})([""," ",""],(0,o.eR)(),(function(e){return e.clickable&&"\n    &:hover {\n      background-color: ".concat((e.theme.interactive||i.Z.interactive).hoverOverlay,";\n      cursor: pointer;\n    }\n  ")})),a=r.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-1b5e7g-2"})([""," height:","px;padding-left:","px;padding-right:","px;"," ",""],(0,o.eR)(),7*c.iI,c.cd*c.iI,c.cd*c.iI,(function(e){return!e.selected&&"\n    &:hover {\n      background-color: ".concat((e.theme.interactive||i.Z.interactive).rowHoverBackground,";\n    }\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.background||i.Z.background).codeTextarea,";\n  ")}))},8193:function(e,n,t){"use strict";t.d(n,{N:function(){return s},Z:function(){return o}});var r=t(9518),i=t(44897),l=t(42631),c=t(70515),o=2*c.iI,s=r.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1ck7mzt-0"})(["border-radius:","px;padding:","px;",""],l.n_,c.cd*c.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).codeArea,";\n  ")}))},28071:function(e,n,t){"use strict";var r;t.d(n,{X:function(){return r}}),function(e){e.BOOTSTRAPPING="BOOTSTRAPPING",e.RUNNING="RUNNING",e.STARTING="STARTING",e.TERMINATED="TERMINATED",e.TERMINATED_WITH_ERRORS="TERMINATED_WITH_ERRORS",e.TERMINATING="TERMINATING",e.WAITING="WAITING"}(r||(r={}))},26032:function(e,n,t){"use strict";var r,i;t.d(n,{_:function(){return r},i:function(){return i}}),function(e){e.CREATE="CREATE",e.DELETE="DELETE",e.DESELECT="DESELECT",e.UPDATE="UPDATE"}(r||(r={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.PENDING="PENDING"}(i||(i={}))},4910:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return qe}});var r=t(77837),i=t(38860),l=t.n(i),c=t(82684),o=t(82394),s=t(75582),u=t(83455),a=t(71180),d=t(92083),p=t.n(d),f=t(21764),m=t(28071),j=t(15338),x=t(55485),h=t(85854),g=t(97618),v=t(38276),Z=t(30160),b=t(70515),P=t(28598);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var k=function(e){var n=e.rows;return(0,P.jsx)(P.Fragment,{children:null==n?void 0:n.map((function(e){var n=e.key,t=e.textProps,r=e.value;return(0,P.jsxs)("div",{children:[(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsx)(x.ZP,{flexDirection:"column",children:(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:n})}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,justifyContent:"flex-end",children:(0,P.jsx)(Z.ZP,_(_({default:!0,large:!0},t),{},{children:r}))})]})})]},n)}))})},O=t(65956),C=t(4190),S=t(75499),E=t(69650),I=t(5332),w=t(72473),T=t(3917),D=t(9518),M=t(44897),A=D.default.div.withConfig({displayName:"indexstyle__SubheaderStyle",componentId:"sc-169asq7-0"})(["position:sticky;top:0;z-index:1;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||M.Z.background).codeArea,";\n  ")})),R=t(81728);function B(e){var n;if(null==e||!e.length)return null;var t=null==e?void 0:e[0],r=null===(n=Object.keys(t||{}))||void 0===n?void 0:n.map((function(e){return{uuid:(0,R.vg)(e)}}));return(0,P.jsx)(S.Z,{columnFlex:null==r?void 0:r.map((function(e,n){return 0===n?null:1})),columns:r,rows:null==e?void 0:e.map((function(e){return Object.entries(e||{}).map((function(e){var n=(0,s.Z)(e,2),t=n[0],r=n[1];return[(0,P.jsx)(Z.ZP,{default:!0,monospace:!0,children:r},t)]}))}))})}var N=t(72619),z=t(95924),F=t(42122),L=t(70320),H=t(23780);function W(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?W(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var V=2*b.iI,G={default:!0,monospace:!0};var X=function(e){var n=e.clusters,t=e.computeService,r=e.fetchAll,i=e.includeAllStates,l=e.loading,o=e.setIncludeAllStates,d=(0,c.useMemo)((function(){return"".concat(null==t?void 0:t.uuid,"/clusters")}),[t]),g=(0,L.qB)(),y=(0,c.useState)(null),_=y[0],D=y[1],M=(0,H.VI)(null,{},[],{uuid:d}),W=(0,s.Z)(M,1)[0],X=(0,u.Db)(I.ZP.compute_clusters.compute_services.useCreate(null==t?void 0:t.uuid),{onSuccess:function(e){return(0,N.wD)(e,{callback:function(){r().then((function(){return D(0)}))},onErrorCallback:function(e,n){return W({errors:n,response:e})}})}}),q=(0,s.Z)(X,2),J=q[0],K=q[1].isLoading,Y=(0,u.Db)((function(e){return I.ZP.compute_clusters.compute_services.useDelete(null==t?void 0:t.uuid,null==e?void 0:e.id)()}),{onSuccess:function(e){return(0,N.wD)(e,{callback:function(){r().then((function(){return D(null)}))},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.exception,i=n.message,l=n.type;f.Am.error((null==t?void 0:t.error)||r||i,{position:f.Am.POSITION.BOTTOM_RIGHT,toastId:l})}})}}),Q=(0,s.Z)(Y,2),$=Q[0],ee=Q[1].isLoading,ne=(0,u.Db)((function(e){return I.ZP.compute_clusters.compute_services.useUpdate(null==t?void 0:t.uuid,null==e?void 0:e.id)({compute_cluster:(0,F.GL)(e,["active"])})}),{onSuccess:function(e){return(0,N.wD)(e,{callback:function(){r()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.exception,i=n.message,l=n.type;f.Am.error((null==t?void 0:t.error)||r||i,{position:f.Am.POSITION.BOTTOM_RIGHT,toastId:l})}})}}),te=(0,s.Z)(ne,2),re=te[0],ie=te[1].isLoading,le=(0,c.useMemo)((function(){return(null==n?void 0:n.length)||0}),[n]),ce=(0,c.useMemo)((function(){return(0,P.jsx)(a.ZP,{beforeIcon:(0,P.jsx)(w.WorkspacesUsersIcon,{size:V}),compact:le>=1,loading:K,onClick:function(){return J()},primary:!0,small:le>=1,children:"Launch new cluster"})}),[le,J,K]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(A,{children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,P.jsxs)(x.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,P.jsx)(h.Z,{level:4,children:(0,R._6)("cluster",le,!0)}),o&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(E.Z,{checked:i,compact:!0,onCheck:function(e){return o(e(i))}}),(0,P.jsx)(v.Z,{mr:1}),(0,P.jsx)(Z.ZP,{default:i,muted:!i,small:!0,children:"Include terminated clusters"})]})]}),(0,P.jsx)(v.Z,{mr:b.cd}),le>=1&&ce]})}),(0,P.jsx)(j.Z,{light:!0})]}),(0,P.jsx)(S.Z,{apiForFetchingAfterAction:I.ZP.compute_clusters.compute_services.detail,buildApiOptionsFromObject:function(e){return[null==t?void 0:t.uuid,null==e?void 0:e.id,{},{refreshInterval:3e3,revalidateOnFocus:!0}]},columnFlex:[null,null,null,null,null],columns:[{uuid:"Cluster ID"},{uuid:"Cluster Name"},{uuid:"Status"},{uuid:"Created"},{center:!0,uuid:"Hours"},{label:function(){return""},rightAligned:!0,uuid:"Active"}],onClickRow:function(e,n){D((function(n){return n===e?null:e}))},renderExpandedRowWithObject:function(e,n){var t,r,i,l,c=null==n||null===(t=n.compute_cluster)||void 0===t?void 0:t.cluster;if(!c)return(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(C.Z,{inverted:!0})});var o=c.active,s=c.applications,u=c.ec2_instance_attributes,d=c.name,f=c.status,y=c.tags,_=null==f?void 0:f.state,S=[m.X.TERMINATED,m.X.TERMINATED_WITH_ERRORS,m.X.TERMINATING].includes(_),E=[m.X.RUNNING,m.X.WAITING].includes(_),I=null==f||null===(r=f.timeline)||void 0===r?void 0:r.creation_date_time;return(0,P.jsxs)(v.Z,{p:b.cd,children:[!S&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(h.Z,{level:4,children:"Actions"})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{children:[E&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(a.ZP,{beforeIcon:(0,P.jsx)(w.PowerOnOffButton,{size:V,success:o}),loading:ie,notClickable:o,onClick:o?null:function(){return re(U(U({},c),{},{active:!0}))},primary:!o,children:o?"Activated":"Activate cluster for compute"}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(a.ZP,{loading:ee,onClick:function(){window.confirm("Are you sure you want to terminate this cluster?")&&$(c)},secondary:!0,children:"Terminate cluster"})]}),!E&&(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsx)(C.Z,{inverted:!0,small:!0}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:(null==f||null===(i=f.state_change_reason)||void 0===i?void 0:i.message)||"Cluster is still launching."})]})]})})]}),(0,P.jsx)(v.Z,{mb:b.cd})]}),(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(h.Z,{level:4,children:"Details"})}),(0,P.jsx)(k,{rows:[{key:"ID",textProps:{monospace:!0},value:null==c?void 0:c.id},{key:"Name",value:d},{key:"Master public DNS name",value:(null==c?void 0:c.master_public_dns_name)||"Available after cluster starts."},{key:"Created at",textProps:{monospace:!0},value:I?(0,T.XG)(p()(I).format(T.BL),g):"-"},{key:"Status message",value:(null==f||null===(l=f.state_change_reason)||void 0===l?void 0:l.message)||"None"},{key:"Release label",textProps:{monospace:!0},value:null==c?void 0:c.release_label},{key:"Service role",textProps:{monospace:!0},value:null==c?void 0:c.service_role},{key:"Scale down behavior",value:null!=c&&c.scale_down_behavior?(0,R.vg)(null==c?void 0:c.scale_down_behavior):null==c?void 0:c.scale_down_behavior},{key:"Auto terminate",value:null!=c&&c.auto_terminate?(0,P.jsx)(w.Check,{size:V,success:!0}):(0,P.jsx)(w.Close,{danger:!0,size:V})},{key:"Termination protected",value:null!=c&&c.termination_protected?(0,P.jsx)(w.Check,{size:V,success:!0}):(0,P.jsx)(w.Close,{danger:!0,size:V})},{key:"Visible to all users",value:null!=c&&c.visible_to_all_users?(0,P.jsx)(w.Check,{size:V,success:!0}):(0,P.jsx)(w.Close,{danger:!0,size:V})},{key:"EBS root volume size",textProps:{monospace:!0},value:null==c?void 0:c.ebs_root_volume_size},{key:"Normalized instance hours",textProps:{monospace:!0},value:null==c?void 0:c.normalized_instance_hours},{key:"Step concurrency level",textProps:{monospace:!0},value:null==c?void 0:c.step_concurrency_level}]})]}),(0,P.jsx)(v.Z,{mb:b.cd}),(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(h.Z,{level:4,children:"EC2 instance attributes"})}),(0,P.jsx)(k,{rows:[{key:"Availability zone",textProps:{monospace:!0},value:null==u?void 0:u.ec2_availability_zone},{key:"Master security group",textProps:{monospace:!0},value:null==u?void 0:u.emr_managed_master_security_group},{key:"Slave security group",textProps:{monospace:!0},value:null==u?void 0:u.emr_managed_slave_security_group},{key:"IAM profile",textProps:{monospace:!0},value:null==u?void 0:u.iam_instance_profile}]})]}),(0,P.jsx)(v.Z,{mb:b.cd}),(0,P.jsxs)(x.ZP,{children:[(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{px:b.cd,py:b.cd,children:(0,P.jsx)(h.Z,{level:4,children:"Applications"})}),(0,P.jsx)(j.Z,{light:!0,short:!0}),B(s||[])]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{px:b.cd,py:b.cd,children:(0,P.jsx)(h.Z,{level:4,children:"Tags"})}),(0,P.jsx)(j.Z,{light:!0,short:!0}),B(y||[])]})]})]})},getObjectAtRowIndex:function(e){return null==n?void 0:n[e]},rows:null==n?void 0:n.map((function(e){var n,t,r=e.active,i=e.id,l=e.name,o=e.normalized_instance_hours,s=e.status,u=null==s||null===(n=s.timeline)||void 0===n?void 0:n.creation_date_time,d=null==s?void 0:s.state,f=null==s||null===(t=s.state_change_reason)||void 0===t?void 0:t.message,j=[m.X.BOOTSTRAPPING,m.X.STARTING].includes(d),h=[m.X.TERMINATING].includes(d);return[(0,c.createElement)(Z.ZP,U(U({},G),{},{key:"id",success:r}),i),(0,c.createElement)(Z.ZP,U(U({},G),{},{key:"name",monospace:!1,preWrap:!0}),l),(0,P.jsxs)("div",{children:[(0,P.jsx)(Z.ZP,U(U({},G),{},{danger:[m.X.TERMINATED_WITH_ERRORS].includes(d),default:[m.X.STARTING].includes(d),muted:[m.X.TERMINATED].includes(d),success:[m.X.RUNNING,m.X.WAITING].includes(d),warning:[m.X.TERMINATING].includes(d),children:null!=s&&s.state?(0,R.vg)(null==s?void 0:s.state):null==s?void 0:s.state})),f&&(0,P.jsx)(Z.ZP,{muted:!0,preWrap:!0,small:!0,children:f})]},"state"),(0,c.createElement)(Z.ZP,U(U({},G),{},{key:"created",preWrap:!0}),u?(0,T.XG)(p()(u).format(T.BL),g):"-"),(0,c.createElement)(Z.ZP,U(U({},G),{},{center:!0,key:"normalizedInstanceHours"}),o||0),(0,P.jsx)(x.ZP,{justifyContent:"flex-end",children:j||h?(0,P.jsx)(C.Z,{inverted:j,small:!0}):(0,P.jsx)(a.ZP,{iconOnly:!0,loading:ie,noBackground:!0,noBorder:!0,noPadding:!0,notClickable:r,onClick:r?null:function(n){(0,z.j)(n),re(U(U({},e),{},{active:!0}))},children:(0,P.jsx)(w.PowerOnOffButton,{muted:!r,size:V,success:r})})},"active")]})),selectedRowIndexInternal:_,uuid:d}),l&&(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(C.Z,{inverted:!0})}),!l&&!le&&(0,P.jsx)(v.Z,{p:b.cd,children:ce})]})},q=t(48670),J=t(90299),K=t(89308),Y=t(74521),Q=t(93004),$=t(8970);function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var te="Applications",re="Connections",ie="Jobs",le="SQLs";var ce=function(e){var n,t=e.applications,r=e.computeConnections,i=e.computeService,l=e.connectionsLoading,o=e.fetchAll,s=e.jobs,u=e.loadingApplications,a=e.loadingJobs,d=(e.objectAttributes,e.refButtonTabs),p=(e.selectedComputeService,e.setSelectedSql),f=e.setSelectedTab,m=(0,c.useContext)(D.ThemeContext),x=(0,c.useState)(),h=x[0],g=x[1],y=(0,c.useCallback)((function(e){p((function(){return null})),g(e)}),[p,g]),_=(0,L.qB)(),k=I.ZP.spark_stages.list({details:!0,_format:"with_details"}).data,O=(0,c.useMemo)((function(){return((null==k?void 0:k.spark_stages)||[]).reduce((function(e,n){var t=null==n?void 0:n.application;return(null==t?void 0:t.calculated_id)in e||(e[null==t?void 0:t.calculated_id]={}),e[null==t?void 0:t.calculated_id][null==n?void 0:n.stage_id]=n,e}),{})}),[k]),C=(0,c.useMemo)((function(){return(0,P.jsx)(K.Z,{computeService:i,computeConnections:r,fetchAll:o,onClickStep:function(e){return f((function(){return{main:e}}))}})}),[r,i,o,f]),E=(0,c.useMemo)((function(){return(0,P.jsx)(S.Z,{columnFlex:[null,null,null,null,null,null,null],columns:[{uuid:"ID"},{uuid:"URL"},{uuid:"Name"},{uuid:"Version"},{uuid:"Spark user"},{uuid:"Started at"},{rightAligned:!0,uuid:"Last updated"}],rows:null==t?void 0:t.map((function(e){var n=e.attempts,t=e.id,r=e.name,i=e.spark_ui_url,l=(null==n?void 0:n[0])||{},o=l.app_spark_version,s=l.last_updated_epoch,u=l.start_time_epoch,a=l.spark_user,d=u&&(0,T.JX)(u/1e3,{withSeconds:!0}),p=d&&(0,T.XG)(d,_);return[(0,c.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"id"}),t),(0,c.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"sparkUIURL"}),i),(0,c.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"name"}),r),(0,c.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"version"}),o),(0,c.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"sparkUser"}),a),(0,c.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"startTime"}),p||"-"),(0,c.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"lastUpdated",rightAligned:!0}),s?(0,T.XG)((0,T.JX)(s/1e3,{withSeconds:!0}),_):"-")]})),uuid:"applications"})}),[t,_]),w=(0,c.useMemo)((function(){var e={};return null==s||s.forEach((function(n){var t,r,i=null==n?void 0:n.application;(null==i?void 0:i.calculated_id)in e||(e[null==i?void 0:i.calculated_id]={application:i,jobs:[]}),null===(t=e[null==i?void 0:i.calculated_id])||void 0===t||null===(r=t.jobs)||void 0===r||r.push(n)})),Object.values(e).map((function(e){var n=e.application,t=e.jobs;return(0,P.jsxs)("div",{children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(Z.ZP,{default:!0,bold:!0,children:["Application ",null==n?void 0:n.calculated_id]})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(Y.Z,{jobs:t,stagesMapping:O})]},null==n?void 0:n.calculated_id)}))}),[s,O]),M=(0,c.useMemo)((function(){return(0,P.jsx)(Q.Z,{setSelectedSql:p,stagesMapping:O})}),[p,O]),A=(0,c.useMemo)((function(){var e=[{label:function(){return(0,P.jsxs)(P.Fragment,{children:[te,"   ",u?"":(null==t?void 0:t.length)||0]})},uuid:te},{label:function(){return(0,P.jsxs)(P.Fragment,{children:[ie,"   ",a?"":(null==s?void 0:s.length)||0]})},uuid:ie},{label:function(){return le},uuid:le}];return(null==r?void 0:r.length)>=1&&e.unshift({label:function(){return re},uuid:re}),e}),[r,o]);return(0,c.useEffect)((function(){h||l||((null==r?void 0:r.length)>=1?y(re):y(te))}),[r,l,h,y]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(v.Z,{px:b.cd,children:(0,P.jsx)(J.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return y(n)},ref:d,regularSizeText:!0,selectedTabUUID:h,tabs:A,underlineColor:null==m||null===(n=m.accent)||void 0===n?void 0:n.blue,underlineStyle:!0})}),(0,P.jsx)(j.Z,{light:!0}),re===h&&C,te===h&&E,ie===h&&w,le===h&&M]})},oe=t(17488),se=t(8193);function ue(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ue(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ue(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var de=function(e){var n=e.addButtonText,t=e.addTextInputPlaceholder,r=e.alreadyExistsMessage,i=e.configurationValuePlaceholder,l=e.configurations,u=e.createButtonText,d=e.description,p=e.emptyState,f=e.setConfigurations,m=e.title,y=(0,c.useRef)(null),_=(0,c.useState)(!1),k=_[0],C=_[1],S=(0,c.useState)(null),E=S[0],I=S[1],T=(0,c.useMemo)((function(){var e;return(null===(e=Object.keys(l||{}))||void 0===e?void 0:e.length)>=1}),[l]),D=(0,c.useMemo)((function(){return E in(l||{})}),[l,E]),M=(0,c.useMemo)((function(){return(0,P.jsxs)(x.ZP,{alignItems:"center",children:[!k&&(0,P.jsx)(a.ZP,{beforeIcon:(0,P.jsx)(w.Add,{}),compact:!0,onClick:function(e){(0,z.j)(e),C(!0),setTimeout((function(){var e;return null==y||null===(e=y.current)||void 0===e?void 0:e.focus()}),1)},secondary:!T,small:!0,children:n||"Add configuration"}),k&&(0,P.jsxs)(P.Fragment,{children:[D&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Z.ZP,{danger:!0,small:!0,children:r||"Already exists"}),(0,P.jsx)(v.Z,{mr:1})]}),(0,P.jsx)(oe.Z,{autoComplete:"off",compact:!0,meta:{touched:!!D,error:""},monospace:!0,onClick:function(e){return(0,z.j)(e)},paddingVertical:b.iI/2-2,placeholder:t,onChange:function(e){(0,z.j)(e),I(e.target.value)},ref:y,small:!0,value:E||""}),(0,P.jsx)(v.Z,{mr:1}),(0,P.jsx)(a.ZP,{disabled:D,compact:!0,onClick:function(e){(0,z.j)(e),D||(f(ae(ae({},l),{},(0,o.Z)({},E,""))),C(!1),I(null))},primary:!0,small:!0,children:u||"Create configuration"}),(0,P.jsx)(v.Z,{mr:1}),(0,P.jsx)(a.ZP,{compact:!0,onClick:function(e){(0,z.j)(e),C(!1),I(null)},secondary:!0,small:!0,children:"Cancel"})]})]})}),[n,D,l,T,k,E,y,C,I]),A=(0,c.useMemo)((function(){return Object.entries(l||{}).map((function(e){var n=(0,s.Z)(e,2),t=n[0],r=n[1];return(0,P.jsxs)("div",{children:[(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsx)(a.ZP,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){var e=ae({},l);null==e||delete e[t],f(e)},children:(0,P.jsx)(w.Trash,{default:!0,size:se.Z})}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(Z.ZP,{default:!0,large:!0,monospace:!0,children:t}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,fullWidth:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,onChange:function(e){return f(ae(ae({},l),{},(0,o.Z)({},t,e.target.value)))},paddingHorizontal:0,paddingVertical:0,placeholder:i,value:r||""})})]})})]},t)}))}),[l,f]);return(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,P.jsxs)(g.Z,{flex:1,flexDirection:"column",children:[(0,P.jsx)(h.Z,{level:4,children:m}),d&&(0,P.jsx)(v.Z,{mt:1,children:d})]}),(0,P.jsx)(v.Z,{mr:b.cd}),T&&(0,P.jsx)(x.ZP,{alignItems:"center",children:M})]})}),!T&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(j.Z,{light:!0}),(0,P.jsxs)(v.Z,{p:b.cd,children:[p&&(0,P.jsx)(v.Z,{mb:b.cd,children:(0,P.jsx)(Z.ZP,{default:!0,children:p})}),(0,P.jsx)(x.ZP,{alignItems:"center",children:M})]})]}),T&&A]})},pe=t(74260);function fe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function me(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?fe(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var je=function(e){var n,t=e.attributesTouched,r=e.isLoading,i=e.mutateObject,l=e.objectAttributes,o=e.onCancel,s=e.selectedComputeService,u=e.setObjectAttributes,d=(0,c.useCallback)((function(e){return u({emr_config:me(me({},null==l?void 0:l.emr_config),e)})}),[l,u]),p=(0,c.useCallback)((function(e){return u({spark_config:me(me({},null==l?void 0:l.spark_config),e)})}),[l,u]),f=(0,c.useMemo)((function(){return(null==l?void 0:l.emr_config)||{}}),[l]),m=(0,c.useMemo)((function(){return(null==l?void 0:l.spark_config)||{}}),[l]);return(0,P.jsxs)(se.N,{children:[(0,P.jsx)(de,{addButtonText:"Add Spark configuration",addTextInputPlaceholder:"e.g. spark.driver.cores",alreadyExistsMessage:"Spark configuration exists",configurationValuePlaceholder:"e.g. 4g",configurations:null==m?void 0:m.others,createButtonText:"Create Spark configuration",description:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(Z.ZP,{muted:!0,children:["List of key-value pairs to be set in ",(0,P.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,children:"SparkConf"}),", e.g. ",(0,P.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,children:"spark.executor.memory=4g"}),"."]}),(0,P.jsxs)(Z.ZP,{muted:!0,children:["For a list of all configurations, see the ",(0,P.jsx)(q.Z,{href:"https://spark.apache.org/docs/latest/configuration.html",inline:!0,openNewWindow:!0,children:"Spark configuration documentation"}),"."]})]}),emptyState:"There are currently no executor Spark configurations.",setConfigurations:function(e){return p({others:e})},title:"Spark configurations"}),(0,P.jsx)(v.Z,{mb:b.HN}),pe.GO.AWS_EMR===s&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(x.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,P.jsxs)(g.Z,{flex:1,flexDirection:"column",children:[(0,P.jsx)(h.Z,{level:4,warning:!(null!=f&&f.ec2_key_name&&null!=f&&f.ec2_key_path),children:"Spark observability"}),(!(null!=f&&f.ec2_key_name)||!(null!=f&&f.ec2_key_path))&&"ec2_key_name"in((null==t?void 0:t.emr_config)||{})&&"ec2_key_path"in((null==t?void 0:t.emr_config)||{})&&(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(v.Z,{mt:1,children:(0,P.jsxs)(Z.ZP,{warning:!0,children:["Without all the fields in this section present and valid, Mage won’t automatically create the SSH tunnel.",(0,P.jsx)("br",{}),"You must manually create the SSH tunnel in order for Mage to retrieve and display the Spark jobs, statuses, metrics, and system information."]})})}),(0,P.jsx)(v.Z,{mt:1,children:(0,P.jsxs)(Z.ZP,{muted:!0,children:["In order to see the Spark jobs, statuses, metrics, and system information, an SSH tunnel to the AWS EMR Master Node must be created.",(0,P.jsx)("br",{}),"Mage can automatically create the SSH tunnel for you if every field in this section is present and valid."]})}),(0,P.jsx)(v.Z,{mt:1,children:(0,P.jsx)(Z.ZP,{muted:!0})})]})})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsxs)(x.ZP,{flexDirection:"column",children:[(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:"EC2 key name"}),(0,P.jsxs)(Z.ZP,{muted:!0,small:!0,children:["SSH tunnel into the EMR cluster using a key pair created from the ",(0,P.jsx)(q.Z,{href:"https://console.aws.amazon.com/ec2/home#KeyPairs",inline:!0,openNewWindow:!0,small:!0,children:"AWS guide"}),"."]})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({ec2_key_name:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. ec2_key_pair_name",value:(null==f?void 0:f.ec2_key_name)||""})})]})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsxs)(x.ZP,{flexDirection:"column",children:[(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:"EC2 key path"}),(0,P.jsx)(Z.ZP,{muted:!0,small:!0,children:"The absolute file path to the EC2 public key that was used when creating a cluster."})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,autoComplete:"off",large:!0,monospace:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({ec2_key_path:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. ec2_key_pair_name",value:(null==f?void 0:f.ec2_key_path)||""})})]})})]}),(0,P.jsx)(v.Z,{mb:b.HN}),(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(x.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,P.jsxs)(g.Z,{flex:1,flexDirection:"column",children:[(0,P.jsx)(h.Z,{level:4,children:"EMR instance types"}),(0,P.jsx)(v.Z,{mt:1,children:(0,P.jsxs)(Z.ZP,{muted:!0,children:["Refer to the ",(0,P.jsx)(q.Z,{href:"https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-supported-instance-types.html",openNewWindow:!0,children:"AWS EMR"})," documentation for all supported EMR instance types."]})})]})})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsx)(x.ZP,{flexDirection:"column",children:(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:"Master instance type"})}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({master_instance_type:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. r5.4xlarge",value:(null==f?void 0:f.master_instance_type)||""})})]})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsx)(x.ZP,{flexDirection:"column",children:(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:"Slave instance type"})}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({slave_instance_type:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. r5.2xlarge",value:(null==f?void 0:f.slave_instance_type)||""})})]})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsx)(x.ZP,{flexDirection:"column",children:(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:"Number of slave instances"})}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){var n=e.target.value||"";(""===n||/^\d+$/.exec(n))&&d({slave_instance_count:n})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. 2",value:(null==f?void 0:f.slave_instance_count)||""})})]})})]}),(0,P.jsx)(v.Z,{mb:b.HN}),(0,P.jsx)(de,{addButtonText:"Add Spark configuration",addTextInputPlaceholder:"e.g. spark.driver.cores",alreadyExistsMessage:"Spark configuration exists",configurationValuePlaceholder:"e.g. 4g",configurations:null==f?void 0:f.master_spark_properties,createButtonText:"Create Spark configuration",description:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(Z.ZP,{muted:!0,children:["List of key-value pairs to be set in ",(0,P.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,children:"SparkConf"})," for the master instance."]}),(0,P.jsxs)(Z.ZP,{muted:!0,children:["For a list of all configurations, see the ",(0,P.jsx)(q.Z,{href:"https://spark.apache.org/docs/latest/configuration.html",inline:!0,openNewWindow:!0,children:"Spark configuration documentation"}),"."]})]}),emptyState:"There are currently no Spark configurations for the master instance.",setConfigurations:function(e){return d({master_spark_properties:e})},title:"Master Spark configurations"}),(0,P.jsx)(v.Z,{mb:b.HN}),(0,P.jsx)(de,{addButtonText:"Add Spark configuration",addTextInputPlaceholder:"e.g. spark.driver.cores",alreadyExistsMessage:"Spark configuration exists",configurationValuePlaceholder:"e.g. 4g",configurations:null==f?void 0:f.slave_spark_properties,createButtonText:"Create Spark configuration",description:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(Z.ZP,{muted:!0,children:["List of key-value pairs to be set in ",(0,P.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,children:"SparkConf"})," for the slave instance."]}),(0,P.jsxs)(Z.ZP,{muted:!0,children:["For a list of all configurations, see the ",(0,P.jsx)(q.Z,{href:"https://spark.apache.org/docs/latest/configuration.html",inline:!0,openNewWindow:!0,children:"Spark configuration documentation"}),"."]})]}),emptyState:"There are currently no Spark configurations for the slave instance.",setConfigurations:function(e){return d({slave_spark_properties:e})},title:"Slave Spark configurations"}),(0,P.jsx)(v.Z,{mb:b.HN}),(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(x.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,P.jsxs)(g.Z,{flex:1,flexDirection:"column",children:[(0,P.jsx)(h.Z,{level:4,children:"Security"}),(0,P.jsx)(v.Z,{mt:1,children:(0,P.jsx)(Z.ZP,{muted:!0,children:"Configure security groups for EMR cluster instances."})})]})})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsxs)(x.ZP,{flexDirection:"column",children:[(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:"Master security group"}),(0,P.jsxs)(Z.ZP,{muted:!0,small:!0,children:["The default managed security group is ",(0,P.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"ElasticMapReduce-master"}),"."]})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({master_security_group:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. sg-xxxxxxxxxxxx",value:(null==f?void 0:f.master_security_group)||""})})]})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsxs)(x.ZP,{flexDirection:"column",children:[(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:"Slave security group"}),(0,P.jsxs)(Z.ZP,{muted:!0,small:!0,children:["The default managed security group is ",(0,P.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"ElasticMapReduce-slave"}),"."]})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({slave_security_group:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. sg-yyyyyyyyyyyy",value:(null==f?void 0:f.slave_security_group)||""})})]})})]}),(0,P.jsx)(v.Z,{mb:b.HN})]}),(0,P.jsxs)(x.ZP,{children:[(0,P.jsx)(a.ZP,{beforeIcon:(0,P.jsx)(w.Save,{}),disabled:!t||!(null!==(n=Object.keys(t))&&void 0!==n&&n.length),loading:r,onClick:function(){return i()},primary:!0,children:"Save changes"}),o&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(a.ZP,{onClick:function(){return null==o?void 0:o()},secondary:!0,children:"Cancel and go back"})]})]})]})},xe=t(77456),he=t(86735);function ge(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ve(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ge(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ge(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ze=function(e){var n,t,r=e.attributesTouched,i=e.computeService,l=e.isLoading,o=e.mutateObject,s=e.objectAttributes,u=e.onCancel,d=e.selectedComputeService,p=e.setObjectAttributes,f=(0,c.useCallback)((function(e){return p({emr_config:ve(ve({},null==s?void 0:s.emr_config),e)})}),[s,p]),m=(0,c.useCallback)((function(e){return p({spark_config:ve(ve({},null==s?void 0:s.spark_config),e)})}),[s,p]),y=(0,c.useMemo)((function(){return(null==s?void 0:s.emr_config)||{}}),[s]),_=(0,c.useMemo)((function(){return(null==s?void 0:s.spark_config)||{}}),[s]),k=(0,c.useRef)(null),C=(0,c.useState)(!1),S=C[0],I=C[1],T=(0,c.useState)(null),D=T[0],M=T[1],A=(0,c.useMemo)((function(){return((null==_?void 0:_.spark_jars)||[]).map((function(e){return{config:$.Ts.SPARK,value:e}}))}),[_]),R=(0,c.useMemo)((function(){return((null==y?void 0:y.spark_jars)||[]).map((function(e){return{config:$.Ts.EMR,value:e}}))}),[y]),B=(0,c.useMemo)((function(){return A.concat(R)}),[R,A]),N=(0,c.useMemo)((function(){return(null==B?void 0:B.length)>=1}),[B]),F=(0,c.useMemo)((function(){return(B||[]).some((function(e){return e.value===D}))}),[B,D]),L=(0,c.useMemo)((function(){return(0,P.jsxs)(x.ZP,{alignItems:"center",children:[!S&&(0,P.jsx)(a.ZP,{beforeIcon:(0,P.jsx)(w.Add,{}),compact:!0,onClick:function(e){(0,z.j)(e),I(!0),setTimeout((function(){var e;return null==k||null===(e=k.current)||void 0===e?void 0:e.focus()}),1)},secondary:!N,small:!0,children:"Add JAR file"}),S&&(0,P.jsxs)(P.Fragment,{children:[F&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Z.ZP,{danger:!0,small:!0,children:"JAR file exists"}),(0,P.jsx)(v.Z,{mr:1})]}),(0,P.jsx)(oe.Z,{autoComplete:"off",compact:!0,meta:{error:"",touched:!!F},minWidth:30*b.iI,monospace:!0,onChange:function(e){(0,z.j)(e),M(e.target.value)},onClick:function(e){return(0,z.j)(e)},paddingVertical:b.iI/2-2,placeholder:"e.g. /home/path/example1.jar",ref:k,small:!0,value:D||""}),(0,P.jsx)(v.Z,{mr:1}),(0,P.jsx)(a.ZP,{compact:!0,disabled:F,onClick:function(e){if((0,z.j)(e),!F){if(d===pe.GO.AWS_EMR){var n=R.map((function(e){return e.value})).concat(D);f({spark_jars:n})}else{var t=A.map((function(e){return e.value})).concat(D);m({spark_jars:t})}I(!1),M(null)}},primary:!0,small:!0,children:"Add JAR file"}),(0,P.jsx)(v.Z,{mr:1}),(0,P.jsx)(a.ZP,{compact:!0,onClick:function(e){(0,z.j)(e),I(!1),M(null)},secondary:!0,small:!0,children:"Cancel"})]})]})}),[S,N,F,D,R,d,f,A,m]),H=(0,c.useMemo)((function(){return null==B?void 0:B.map((function(e,n){var t=e.config,r=e.value;return(0,P.jsxs)("div",{children:[(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsx)(a.ZP,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){if(t===$.Ts.EMR){var e=R.map((function(e){return e.value}));f({spark_jars:(0,he.oM)(e,n-A.length)})}else{var r=A.map((function(e){return e.value}));m({spark_jars:(0,he.oM)(r,n)})}},children:(0,P.jsx)(w.Trash,{default:!0,size:se.Z})}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsxs)(Z.ZP,{default:!0,large:!0,monospace:!0,children:["File ",n+1," (",t,")"]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,justifyContent:"flex-end",children:(0,P.jsx)(Z.ZP,{large:!0,monospace:!0,children:r})})]})})]},r)}))}),[B,R,f,m,A]),W=(0,c.useMemo)((function(){var e="remote_variables_dir",n=null==i?void 0:i.setup_steps,t=null==n?void 0:n.find((function(n){return n.uuid===e}));return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"flex-start",children:[(0,P.jsxs)(x.ZP,{flexDirection:"column",children:[(0,P.jsxs)(Z.ZP,{danger:!(null!=s&&s[e]&&(null==t||!t.error)),default:!0,large:!0,children:["Remote variables directory ",!(null!=s&&s[e])&&(0,P.jsx)(Z.ZP,{danger:!0,inline:!0,large:!0,children:"is required"})]}),(0,P.jsx)(Z.ZP,{muted:!0,small:!0,children:"This S3 bucket will be used by Spark."})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsxs)(g.Z,{flex:1,flexDirection:"column",children:[(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,fullWidth:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,onChange:function(e){return p({remote_variables_dir:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. s3://magically-powerful-bucket",value:(null==s?void 0:s.remote_variables_dir)||""}),(null==t?void 0:t.error)&&(0,P.jsx)(x.ZP,{justifyContent:"flex-end",children:(0,P.jsx)(v.Z,{mt:1,children:(0,P.jsx)(xe.Z,{error:null==t?void 0:t.error})})})]})]})})]})}),[i,s,p]);return(0,P.jsxs)(se.N,{children:[(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(h.Z,{level:4,children:"Setup"})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsxs)(Z.ZP,{danger:"app_name"in r&&!(null!=_&&_.app_name),default:!0,large:!0,children:["Application name ","app_name"in r&&!(null!=_&&_.app_name)&&(0,P.jsx)(Z.ZP,{danger:!0,inline:!0,large:!0,children:"is required"})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,autoComplete:"off",fullWidth:!0,large:!0,noBackground:!0,noBorder:!0,onChange:function(e){return m({app_name:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. Sparkmage",value:(null==_?void 0:_.app_name)||""})})]})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"flex-start",children:[(0,P.jsxs)(x.ZP,{flexDirection:"column",children:[(0,P.jsxs)(Z.ZP,{danger:"spark_master"in r&&!(null!=_&&_.spark_master),default:!0,large:!0,children:["Master URL ","spark_master"in r&&!(null!=_&&_.spark_master)&&(0,P.jsx)(Z.ZP,{danger:!0,inline:!0,large:!0,children:"is required"})]}),(0,P.jsx)(Z.ZP,{muted:!0,small:!0,children:"The URL for connecting to the master."})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,fullWidth:!0,large:!0,noBackground:!0,noBorder:!0,onChange:function(e){return m({spark_master:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. local, yarn, spark://host:port",value:(null==_?void 0:_.spark_master)||""})})]})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"flex-start",children:[(0,P.jsxs)(x.ZP,{flexDirection:"column",children:[(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:"Spark home directory"}),(0,P.jsx)(Z.ZP,{muted:!0,small:!0,children:"Path where Spark is installed on worker nodes."})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,fullWidth:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,onChange:function(e){return m({spark_home:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. /usr/lib/spark",value:(null==_?void 0:_.spark_home)||""})})]})}),pe.GO.AWS_EMR===d&&W]}),(0,P.jsx)(v.Z,{mb:b.HN}),(null==i?void 0:i.connection_credentials)&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(h.Z,{level:4,children:"Credentials"})}),null==i||null===(n=i.connection_credentials)||void 0===n?void 0:n.map((function(e){var n=e.description,t=e.error,r=e.name,i=e.required,l=e.uuid,c=e.valid,o=e.value;return(0,P.jsxs)("div",{children:[(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsxs)(x.ZP,{flexDirection:"column",children:[(0,P.jsxs)(Z.ZP,{danger:!c,default:!0,large:!0,monospace:!r,children:[r||l," ",!c&&(0,P.jsx)(Z.ZP,{danger:!0,inline:!0,large:!0,children:"is invalid"})]}),n&&(0,P.jsx)(Z.ZP,{muted:!0,small:!0,children:n})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsxs)(g.Z,{flex:1,justifyContent:"flex-end",children:[!c&&(0,P.jsxs)(P.Fragment,{children:[!t&&i&&(0,P.jsx)(Z.ZP,{large:!0,muted:!0,children:"Required but missing"}),!t&&!i&&(0,P.jsx)(Z.ZP,{large:!0,muted:!0,children:"Invalid"}),t&&(0,P.jsx)(xe.Z,{error:t,large:!0})]}),c&&o&&(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:o})]})]})})]},l)}))]}),(0,P.jsx)(v.Z,{mb:b.HN})]}),(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(h.Z,{level:4,children:"Customizations"})}),(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"flex-start",children:[(0,P.jsxs)(x.ZP,{flexDirection:"column",children:[(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:"Use custom session"}),(0,P.jsxs)(Z.ZP,{muted:!0,small:!0,children:["Whether to create custom SparkSession via",(0,P.jsx)("br",{}),"code and set it in ",(0,P.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"kwargs['context']"}),"."]})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,justifyContent:"flex-end",children:(0,P.jsx)(E.Z,{checked:null==_?void 0:_.use_custom_session,compact:!0,onCheck:function(e){return m({use_custom_session:e(null==_?void 0:_.use_custom_session)})}})})]})}),(null==_?void 0:_.use_custom_session)&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(j.Z,{light:!0}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"flex-start",children:[(0,P.jsxs)(x.ZP,{flexDirection:"column",children:[(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:"Custom session variable"}),(0,P.jsxs)(Z.ZP,{muted:!0,small:!0,children:["The variable name to set in ",(0,P.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"kwargs['context']"}),",",(0,P.jsx)("br",{}),"e.g. If variable name is ",(0,P.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"spark"})," then the Spark session",(0,P.jsx)("br",{}),"is accessed using ",(0,P.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"kwargs['context']['spark']"}),"."]})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,fullWidth:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,onChange:function(e){return m({custom_session_var_name:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. spark",value:(null==_?void 0:_.custom_session_var_name)||""})})]})})]}),pe.GO.AWS_EMR===d&&(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsxs)(x.ZP,{flexDirection:"column",children:[(0,P.jsx)(Z.ZP,{default:!0,large:!0,children:"Bootstrap script path"}),(0,P.jsx)(Z.ZP,{muted:!0,small:!0,children:"Use a custom script to bootstrap the EMR cluster."})]}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(g.Z,{flex:1,children:(0,P.jsx)(oe.Z,{afterIcon:(0,P.jsx)(w.Edit,{}),afterIconClick:function(e,n){var t;null==n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:se.Z,alignRight:!0,autoComplete:"off",fullWidth:!0,large:!0,noBackground:!0,noBorder:!0,onChange:function(e){return f({bootstrap_script_path:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. /path/to/emr_bootstrap.sh",value:(null==y?void 0:y.bootstrap_script_path)||""})})]})})]}),(0,P.jsx)(v.Z,{mb:b.HN}),(0,P.jsx)(de,{addButtonText:"Add environment variable",addTextInputPlaceholder:"e.g. PYTHONPATH",alreadyExistsMessage:"Environment variable exists",configurationValuePlaceholder:"e.g. /home/path",configurations:null==_?void 0:_.executor_env,createButtonText:"Create environment variable",description:(0,P.jsx)(Z.ZP,{muted:!0,children:"Environment variables for the executor."}),emptyState:"There are currently no executor environment variables.",setConfigurations:function(e){return m({executor_env:e})},title:"Environment variables"}),(0,P.jsx)(v.Z,{mb:b.HN}),(0,P.jsxs)(O.Z,{noPadding:!0,children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsx)(x.ZP,{alignItems:"flex-start",justifyContent:"space-between",children:(0,P.jsxs)(g.Z,{flex:1,flexDirection:"column",children:[(0,P.jsxs)(x.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,P.jsx)(h.Z,{level:4,children:"JAR files"}),N&&L]}),(0,P.jsx)(v.Z,{mt:1,children:(0,P.jsxs)(Z.ZP,{muted:!0,children:["These files will be uploaded to the cluster and added to the ",(0,P.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,children:"classpath"}),"."]})})]})})}),!N&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(j.Z,{light:!0}),(0,P.jsxs)(v.Z,{p:b.cd,children:[(0,P.jsx)(v.Z,{mb:b.cd,children:(0,P.jsx)(Z.ZP,{default:!0,children:"There are currently no JAR files."})}),(0,P.jsx)(x.ZP,{alignItems:"center",children:L})]})]}),N&&H]}),(0,P.jsx)(v.Z,{mb:b.HN}),(0,P.jsxs)(x.ZP,{children:[(0,P.jsx)(a.ZP,{beforeIcon:(0,P.jsx)(w.Save,{}),disabled:!r||!(null!==(t=Object.keys(r))&&void 0!==t&&t.length),loading:l,onClick:function(){return o()},primary:!0,children:"Save changes"}),u&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(a.ZP,{onClick:function(){return null==u?void 0:u()},secondary:!0,children:"Cancel and go back"})]})]})]})},be=t(35185);var Pe=function(e){var n=e.computeService,t=e.onClick,r=(0,c.useMemo)((function(){var e,t=[],r=0;return null==n||null===(e=n.setup_steps)||void 0===e||e.forEach((function(e){var n=e.group,i=e.required,l=e.status_calculated,c=e.steps;n?null==c||c.forEach((function(e){t.push(e);var n=e.required,i=e.status_calculated;n&&pe.br.COMPLETED!==i||(r+=1)})):(t.push(e),i&&pe.br.COMPLETED!==l||(r+=1))})),{steps:t,stepsCompleted:r}}),[n]),i=r.steps,l=r.stepsCompleted,o=(0,c.useMemo)((function(){return(null==i?void 0:i.length)||1}),[i]),s=(0,c.useMemo)((function(){return l/o}),[l,o]);return(0,P.jsxs)(q.Z,{block:!0,noHoverUnderline:!0,noOutline:!0,onClick:t?function(){return null==t?void 0:t()}:null,preventDefault:!0,children:[(0,P.jsx)(j.Z,{light:!0}),(0,P.jsxs)(v.Z,{p:b.cd,children:[(0,P.jsx)(v.Z,{mb:1,children:(0,P.jsxs)(Z.ZP,{monospace:!0,muted:!0,children:[(0,P.jsx)(Z.ZP,{default:!0,inline:!0,children:l})," / ",(0,P.jsx)(Z.ZP,{default:!0,inline:!0,children:o})," ",(0,R._6)("step",o,!1,!0)," completed"]})}),(0,P.jsx)(be.Z,{progress:100*s})]}),(0,P.jsx)(j.Z,{light:!0})]})},ye=t(78688),_e=t(72748),ke=t(32013),Oe=t(98777);function Ce(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ce(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ce(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ee="Environment",Ie="Executors";var we=function(e){e.objectAttributes;var n,t=(0,c.useContext)(D.ThemeContext),r=(0,c.useState)(Ee),i=r[0],l=r[1],o=I.ZP.spark_executors.list().data,u=(0,c.useMemo)((function(){return null==o?void 0:o.spark_executors}),[o]),a=I.ZP.spark_environments.detail("0").data,d=(0,c.useMemo)((function(){return null==a?void 0:a.spark_environment}),[a]),p=(0,c.useMemo)((function(){var e,n,t,r,i,l,o;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(v.Z,{px:b.cd,children:(0,P.jsxs)(ke.Z,{noBoxShadow:!0,children:[(0,P.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Runtime",children:[(0,P.jsx)(S.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===(e=Object.entries((null==d?void 0:d.runtime)||{}))||void 0===e?void 0:e.map((function(e){return[(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),e[0]),(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1])]}))}),(0,P.jsx)(v.Z,{p:1})]}),(0,P.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Hadoop properties",children:[(0,P.jsx)(S.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null==d||null===(n=d.hadoop_properties)||void 0===n?void 0:n.map((function(e){return[(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),e[0]),(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1])]}))}),(0,P.jsx)(v.Z,{p:1})]}),(0,P.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Metrics properties",children:[(0,P.jsx)(S.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null==d||null===(t=d.metrics_properties)||void 0===t?void 0:t.map((function(e){return[(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),e[0]),(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1])]}))}),(0,P.jsx)(v.Z,{p:1})]}),(0,P.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Spark properties",children:[(0,P.jsx)(S.Z,{columnFlex:[1,4],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null==d||null===(r=d.spark_properties)||void 0===r?void 0:r.map((function(e){return[(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),e[0]),(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1])]}))}),(0,P.jsx)(v.Z,{p:1})]}),(0,P.jsxs)(Oe.Z,{noPaddingContent:!0,title:"System properties",children:[(0,P.jsx)(S.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null==d||null===(i=d.system_properties)||void 0===i?void 0:i.map((function(e){return[(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),e[0]),(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1])]}))}),(0,P.jsx)(v.Z,{p:1})]}),(0,P.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Classpath entries",children:[(0,P.jsx)(S.Z,{columnFlex:[null,null],columns:[{uuid:"Type"},{uuid:"Value"}],rows:null==d||null===(l=d.classpath_entries)||void 0===l?void 0:l.map((function(e){return[(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"type"}),e[1]),(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[0])]}))}),(0,P.jsx)(v.Z,{p:1})]})]})}),null==d||null===(o=d.resource_profiles)||void 0===o?void 0:o.map((function(e){var n=e.executor_resources,t=e.id,r=e.task_resources;return(0,P.jsxs)("div",{children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(h.Z,{level:4,children:["Executor resources ID ",t]})}),(0,P.jsx)(v.Z,{px:b.cd,children:(0,P.jsx)(ke.Z,{noBoxShadow:!0,children:Object.entries(n||{}).map((function(e){var n,t=(0,s.Z)(e,2),r=t[0],i=t[1];return(0,P.jsxs)(Oe.Z,{noPaddingContent:!0,title:(0,R.vg)(r),children:[(0,P.jsx)(S.Z,{columnFlex:[1,2],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===(n=Object.entries(i))||void 0===n?void 0:n.map((function(e){return[(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),(0,R.vg)(e[0])),(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1]||"-")]}))}),(0,P.jsx)(v.Z,{p:1})]},r)}))})}),(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(h.Z,{level:4,children:["Task resources ID ",t]})}),(0,P.jsx)(v.Z,{px:b.cd,children:(0,P.jsx)(ke.Z,{noBoxShadow:!0,children:Object.entries(r||{}).map((function(e){var n,t=(0,s.Z)(e,2),r=t[0],i=t[1];return(0,P.jsxs)(Oe.Z,{noPaddingContent:!0,title:(0,R.vg)(r),children:[(0,P.jsx)(S.Z,{columnFlex:[1,2],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===(n=Object.entries(i))||void 0===n?void 0:n.map((function(e){return[(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),(0,R.vg)(e[0])),(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1]||"-")]}))}),(0,P.jsx)(v.Z,{p:1})]},r)}))})})]},t)}))]})}),[d]),f=(0,c.useMemo)((function(){return null==u?void 0:u.map((function(e){return(0,P.jsxs)("div",{children:[(0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(h.Z,{level:4,children:["Executor ",null==e?void 0:e.id]})}),(0,P.jsx)(v.Z,{px:b.cd,children:(0,P.jsxs)(ke.Z,{noBoxShadow:!0,children:[(0,P.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Metrics",children:[(0,P.jsx)(S.Z,{columnFlex:[1,2],columns:[{uuid:"Metric"},{uuid:"Value"}],rows:["active_tasks","add_time","completed_tasks","disk_used","failed_tasks","host_port","is_active","is_blacklisted","is_excluded","max_memory","max_tasks","memory_used","rdd_blocks","resource_profile_id","total_cores","total_duration","total_gc_time","total_input_bytes","total_shuffle_read","total_shuffle_write","total_tasks"].map((function(n){var t=null==e?void 0:e[n];return[(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),(0,R.vg)(n)),(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),void 0===t?"-":"boolean"==typeof t?String(t):t)]}))}),(0,P.jsx)(v.Z,{p:1})]}),(0,P.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Memory metrics",children:[(0,P.jsx)(S.Z,{columnFlex:[1,2],columns:[{uuid:"Metric"},{uuid:"Value"}],rows:Object.entries((null==e?void 0:e.memory_metrics)||{}).map((function(e){var n=(0,s.Z)(e,2),t=n[0],r=n[1];return[(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),(0,R.vg)(t)),(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),void 0===r?"-":"boolean"==typeof r?String(r):r)]}))}),(0,P.jsx)(v.Z,{p:1})]}),(0,P.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Peak memory metrics",children:[(0,P.jsx)(S.Z,{columnFlex:[1,2],columns:[{uuid:"Metric"},{uuid:"Value"}],rows:Object.entries((null==e?void 0:e.peak_memory_metrics)||{}).map((function(e){var n=(0,s.Z)(e,2),t=n[0],r=n[1];return[(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),(0,R.vg)(t)),(0,c.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),void 0===r?"-":"boolean"==typeof r?String(r):r)]}))}),(0,P.jsx)(v.Z,{p:1})]})]})})]},null==e?void 0:e.id)}))}),[u]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(v.Z,{px:b.cd,children:(0,P.jsx)(J.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return l(n)},regularSizeText:!0,selectedTabUUID:i,tabs:[{label:function(){return Ee},uuid:Ee},{label:function(){return Ie},uuid:Ie}],underlineColor:null==t||null===(n=t.accent)||void 0===n?void 0:n.blue,underlineStyle:!0})}),(0,P.jsx)(v.Z,{mb:b.cd,children:(0,P.jsx)(j.Z,{light:!0})}),Ee===i&&p,Ie===i&&f]})},Te=t(62547),De=t(23657),Me=t(74778),Ae=t(75375),Re=t(46684),Be=t(53808),Ne=t(10332),ze=t(15610),Fe=t(69419),Le=t(19183);function He(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function We(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?He(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):He(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ue=function(e){var n,t=e.contained,r=e.heightOffset,i=e.mainContainerRef,l=(0,Le.i)(),d=l.height,p=(l.width,(0,c.useMemo)((function(){return"ComputeManagement/".concat(t?"contained":"open")}),[t])),f=(0,H.VI)(null,{},[],{uuid:p}),m=(0,s.Z)(f,1)[0],j=((0,c.useRef)(null),(0,c.useRef)(null),(0,c.useRef)(null),(0,c.useRef)(null)),y=(0,c.useMemo)((function(){return d-(r||0)}),[r,d]),_=(0,c.useState)(!1),k=_[0],O=_[1],C=(0,c.useState)(null),S=C[0],E=C[1],T=(0,De.Z)({clustersRefreshInterval:1e4,includeAllStates:k}),D=T.activeCluster,M=T.clusters,A=T.clustersLoading,R=T.computeService,B=T.connections,z=T.connectionsLoading,L=T.fetchAll,W=T.setupComplete,U=(0,c.useState)(null),V=U[0],G=U[1];(0,c.useEffect)((function(){var e;G(null==j||null===(e=j.current)||void 0===e?void 0:e.getBoundingClientRect())}),[d,j]);var J=(0,c.useMemo)((function(){return"compute_management_after_width_".concat(p)}),[p]),K=(0,c.useMemo)((function(){return"compute_management_before_width_".concat(p)}),[p]),Y=(0,c.useState)((0,Be.U2)(J,60*b.iI)),Q=Y[0],ee=Y[1],ne=(0,c.useCallback)((function(e){ee(e),(0,Be.t8)(J,Math.max(e,60*b.iI))}),[J,ee]),te=(0,c.useState)(!1),re=te[0],ie=te[1],le=(0,c.useState)(Math.max((0,Be.U2)(K),20*b.iI)),oe=le[0],se=le[1],ue=(0,c.useCallback)((function(e){se((e||20*b.iI)-Ae.H),(0,Be.t8)(K,e||20*b.iI)}),[K,se]),ae=(0,c.useState)(!1),de=ae[0],pe=ae[1],fe=(0,c.useState)(!0),me=fe[0],xe=fe[1],he=(0,c.useState)(null),ge=he[0],ve=he[1],be=(0,c.useCallback)((function(e){ve((function(n){var t=e(n);return t&&me?xe(!1):t||me||!W||xe(!0),t}))}),[me,xe,ve,W]),ke=(0,c.useState)(null),Oe=ke[0],Ce=ke[1],Se=(0,c.useCallback)((function(e){var n;(0,ze.u)((0,o.Z)({},"tab",null===(n="function"==typeof e?null==e?void 0:e():e)||void 0===n?void 0:n.main)),be((function(){return null}))}),[be]),Ee=(0,Fe.iV)();(0,c.useEffect)((function(){var e=null==Ee?void 0:Ee.tab;(null==Oe?void 0:Oe.main)!==e&&Ce(e?{main:e}:null)}),[Oe,Ee]);var Ie=(0,c.useState)(null),He=Ie[0],Ue=Ie[1],Ve=(0,c.useState)({}),Ge=Ve[0],Xe=Ve[1],qe=(0,c.useCallback)((function(e){Xe((function(n){return We(We({},n),e)})),Ue((function(n){return We(We({},n),e)}))}),[Xe,Ue]),Je=((0,c.useCallback)((function(e){return qe({spark_config:We(We({},null==He?void 0:He.spark_config),e)})}),[He,qe]),I.ZP.projects.list({},{revalidateOnFocus:!1})),Ke=Je.data,Ye=Je.mutate,Qe=(0,c.useMemo)((function(){var e;return null==Ke||null===(e=Ke.projects)||void 0===e?void 0:e[0]}),[Ke]),$e=(0,c.useMemo)((function(){return null==Qe?void 0:Qe.name}),[Qe]),en=I.ZP.spark_applications.list().data,nn=(0,c.useMemo)((function(){return null==en?void 0:en.spark_applications}),[en]),tn=I.ZP.spark_jobs.list().data,rn=(0,c.useMemo)((function(){return null==tn?void 0:tn.spark_jobs}),[tn]);(0,c.useEffect)((function(){xe(W)}),[W]),(0,c.useEffect)((function(){Qe&&(Ue(Qe),E((0,Ne.d)(Qe)))}),[Qe,Ue,E,Se]),(0,c.useEffect)((function(){!Oe&&S&&Se({main:$.uK.SETUP})}),[S,Oe,Se]);var ln=(0,u.Db)(I.ZP.projects.useUpdate($e),{onSuccess:function(e){return(0,N.wD)(e,{callback:function(e){var n=e.project;Xe({}),Ue(n),L(),Ye()},onErrorCallback:function(e,n){return m({errors:n,response:e})}})}}),cn=(0,s.Z)(ln,2),on=cn[0],sn=cn[1].isLoading,un=(0,c.useCallback)((function(e){return on({project:(0,F.GL)(We(We({},He),e),["emr_config","remote_variables_dir","spark_config"])})}),[He,on]),an=(0,c.useMemo)((function(){var e=(0,$.kI)(R).map((function(e){var n,t=e.Icon,r=e.renderStatus,i=e.uuid;return r&&(n=null==r?void 0:r({applications:nn,applicationsLoading:!en,clusters:M,clustersLoading:A,computeConnections:B,computeService:R,jobs:rn,jobsLoading:!tn})),(0,P.jsx)(q.Z,{block:!0,disabled:!S,noHoverUnderline:!0,noOutline:!0,onClick:function(){return Se((function(){return{main:i}}))},preventDefault:!0,children:(0,P.jsx)(Me.bC,{selected:(null==Oe?void 0:Oe.main)===i,children:(0,P.jsxs)(x.ZP,{alignItems:"center",fullHeight:!0,justifyContent:"space-between",children:[(0,P.jsxs)(g.Z,{alignItems:"center",flex:1,children:[(0,P.jsx)(t,{size:2*b.iI}),(0,P.jsx)(v.Z,{mr:2}),(0,P.jsx)(Z.ZP,{bold:!0,large:!0,children:$.TD[i]})]}),n&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(v.Z,{mr:b.cd}),n]})]})})},i)}));if(S){var n=String(S),t=$.l[n],r=$.Eb[n],i=$.LF[n];if(t&&r&&i){var l,c;null!=R&&R.setup_steps&&(c=W?D?null!=D&&D.ready?"Cluster is ready, commence coding.":"Cluster activated and initializing.":"Setup complete but no clusters activated.":"All setup steps have not been completed yet.");var o=[];null!=R&&R.setup_steps&&o.push((0,P.jsx)(v.Z,{py:1,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[W&&(0,P.jsx)(w.PowerOnOffButton,{muted:!(null!=D&&D.ready),size:1.5*b.iI,success:null==D?void 0:D.ready}),!W&&(0,P.jsx)(w.AlertTriangle,{danger:!0,size:1.5*b.iI}),(0,P.jsx)(v.Z,{mr:1}),(0,P.jsxs)(g.Z,{flex:1,flexDirection:"column",children:[(0,P.jsx)(Z.ZP,{default:!W||!D,small:!0,children:W&&D?"Compute service connected":"Compute service unconnected"}),c&&(0,P.jsx)(Z.ZP,{muted:!0,xsmall:!0,children:c})]})]})},"compute-service-setup-steps")),(null==R||null===(l=R.setup_steps)||void 0===l?void 0:l.length)>=1&&!W&&e.unshift((0,P.jsx)(Pe,{computeService:R,onClick:function(){return xe(!1)}},"setupProgress")),e.unshift((0,P.jsx)(v.Z,{p:b.cd,children:(0,P.jsxs)(Me.UE,{inline:!0,children:[(0,P.jsxs)(x.ZP,{alignItems:"flex-start",children:[(0,P.jsx)(g.Z,{flex:1,children:i()}),(0,P.jsx)(a.ZP,{compact:!0,onClick:function(){E(null),Se(null)},secondary:!0,small:!0,children:"Change"})]}),(0,P.jsx)(v.Z,{mt:b.cd,children:(0,P.jsx)(x.ZP,{alignItems:"flex-end",children:(0,P.jsxs)(g.Z,{flex:1,flexDirection:"column",children:[(0,P.jsx)(Z.ZP,{default:!0,monospace:!0,children:r}),(0,P.jsx)(h.Z,{level:5,children:t})]})})}),(null==o?void 0:o.length)>=1&&(0,P.jsx)(v.Z,{mt:b.cd,children:o})]})},"".concat(t,"-").concat(r)))}}return e}),[D,nn,M,A,R,B,en,tn,rn,S,Oe,xe,Se,W]),dn=(0,c.useMemo)((function(){var e;return ge?(0,P.jsx)(_e.Z,{height:y-(((null==V?void 0:V.height)||0)+Re.Mz+1),model:ge}):(null==R||null===(e=R.setup_steps)||void 0===e?void 0:e.length)>=1?(0,P.jsx)(ye.Z,{onClickStep:function(e){return Se((function(){return{main:e}}))},setupSteps:null==R?void 0:R.setup_steps}):void 0}),[null==V?void 0:V.height,R,y,ge,Se]),pn=(0,c.useMemo)((function(){return(0,P.jsx)(Ze,{attributesTouched:Ge||{},computeService:R,isLoading:sn,mutateObject:un,objectAttributes:He,selectedComputeService:S,setObjectAttributes:qe})}),[Ge,R,sn,He,S,qe,un]),fn=(0,c.useMemo)((function(){return(0,P.jsx)(je,{attributesTouched:Ge||{},isLoading:sn,mutateObject:un,objectAttributes:He,selectedComputeService:S,setObjectAttributes:qe})}),[Ge,sn,He,S,qe,un]),mn=(0,c.useMemo)((function(){if([$.B2.AWS_EMR,$.B2.STANDALONE_CLUSTER].includes(S))return(0,P.jsx)(ce,{applications:nn,computeConnections:B,computeService:R,connectionsLoading:z,fetchAll:L,jobs:rn,loadingApplications:!en,loadingJobs:!tn,objectAttributes:He,refButtonTabs:j,selectedComputeService:S,setSelectedSql:be,setSelectedTab:Se})}),[nn,R,B,z,L,en,tn,rn,He,j,S,be,Se]),jn=(0,c.useMemo)((function(){if([$.B2.AWS_EMR,$.B2.STANDALONE_CLUSTER].includes(S))return(0,P.jsx)(we,{objectAttributes:He})}),[He,S]),xn=(0,c.useMemo)((function(){return(0,P.jsxs)(v.Z,{mx:1,py:b.cd,children:[(0,P.jsx)(v.Z,{mb:b.cd,px:b.cd,children:(0,P.jsx)(h.Z,{children:"Select a compute service"})}),(0,P.jsx)(x.ZP,{alignItems:"center",flexWrap:"wrap",children:$.sY.map((function(e){var n=e.buildPayload,t=e.displayName,r=e.documentationHref,i=e.kicker,l=e.renderIcon,c=e.uuid;return(0,P.jsxs)(Me.UE,{children:[l(),(0,P.jsxs)(v.Z,{mt:b.cd,children:[(0,P.jsx)(Z.ZP,{default:!0,monospace:!0,children:i}),(0,P.jsx)(h.Z,{level:4,children:t})]}),(0,P.jsx)(v.Z,{mt:b.cd,children:(0,P.jsxs)(x.ZP,{alignItems:"center",children:[(0,P.jsx)(a.ZP,{loading:sn&&c===S,onClick:function(){E(c),un(n(He))},primary:!0,children:"Enable"}),(0,P.jsx)(v.Z,{mr:b.cd}),(0,P.jsx)(q.Z,{href:r,default:!0,openNewWindow:!0,children:"View setup documentation"})]})})]},c)}))})]})}),[sn,He,S,E,un]),hn=(0,c.useMemo)((function(){return(0,P.jsx)(X,{clusters:M,computeService:R,fetchAll:L,includeAllStates:k,loading:A,setIncludeAllStates:O})}),[M,A,R,L,k,O]),gn=(0,c.useMemo)((function(){if(!S&&He)return xn;if(S&&Qe&&null!=Oe&&Oe.main){var e=null==Oe?void 0:Oe.main;if($.uK.SETUP===e)return pn;if($.uK.RESOURCES===e)return fn;if($.uK.MONITORING===e)return mn;if($.uK.SYSTEM===e)return jn;if($.uK.CLUSTERS===e)return hn}}),[hn,xn,mn,He,Qe,fn,S,Oe,pn,jn]);return(0,P.jsx)(Te.Z,{after:dn,afterDividerContrast:!0,afterDraggableTopOffset:Re.Mz,afterHeightOffset:Re.Mz,afterHidden:me&&!ge,afterMousedownActive:re,afterWidth:Q,before:an,beforeDividerContrast:!0,beforeHeightOffset:0,beforeHidden:!S,beforeMousedownActive:de,beforeWidth:oe,contained:!0,height:y,hideAfterCompletely:!(null!=R&&null!==(n=R.setup_steps)&&void 0!==n&&n.length),hideBeforeCompletely:!S,inline:!0,mainContainerRef:i,setAfterHidden:xe,setAfterMousedownActive:ie,setAfterWidth:ne,setBeforeMousedownActive:pe,setBeforeWidth:ue,uuid:p,children:gn})},Ve=t(94629),Ge=t(93808);function Xe(){var e=(0,c.useRef)(null);return(0,P.jsx)(Ve.Z,{title:"Compute management",uuid:"Compute management/index",children:(0,P.jsx)("div",{ref:e,children:(0,P.jsx)(Ue,{heightOffset:Re.Mz,mainContainerRef:e})})})}Xe.getInitialProps=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var qe=(0,Ge.Z)(Xe)},23657:function(e,n,t){"use strict";var r=t(82394),i=t(75582),l=t(82684),c=t(74260),o=t(5332),s=t(59457),u=t(77417);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.clustersRefreshInterval,t=e.computeServiceRefreshInterval,a=e.connectionsRefreshInterval,p=e.includeAllStates,f=e.pauseFetch,m=(0,u.Z)().sparkEnabled,j=(0,s.Z)(o.ZP.compute_services.detail,"compute-service",{},{refreshInterval:t},{condition:function(){return m&&!f}}),x=j.data,h=j.mutate,g=(0,l.useMemo)((function(){return null==x?void 0:x.compute_service}),[x]),v={};p&&(v.include_all_states=!0);var Z=o.ZP.compute_clusters.compute_services.list(!m||f?null:null==g?void 0:g.uuid,v,{refreshInterval:n}),b=Z.data,P=Z.mutate,y=(0,l.useMemo)((function(){return(null==b?void 0:b.compute_clusters)||[]}),[b]),_=(0,l.useMemo)((function(){return null==y?void 0:y.map((function(e){return e.cluster}))}),[y]),k=(0,l.useMemo)((function(){var e,n;return null!=g&&null!==(e=g.setup_steps)&&void 0!==e&&e.length?null==g||null===(n=g.setup_steps)||void 0===n?void 0:n.every((function(e){var n=e.required,t=e.status_calculated;return!n||!t||c.br.COMPLETED===t})):null}),[g]),O=((0,l.useMemo)((function(){return null==_?void 0:_.find((function(e){return e.active}))}),[_]),o.ZP.compute_connections.compute_services.list(null==g?void 0:g.uuid,{},{refreshInterval:a},{pauseFetch:!m||f})),C=O.data,S=O.mutate,E=(0,l.useMemo)((function(){return(null==C?void 0:C.compute_connections)||[]}),[C]),I=(0,l.useCallback)((function(){return new Promise((function(){null==P||P(),null==S||S(),null==h||h()}))}),[P,S,h]);return{activeCluster:null==_?void 0:_.find((function(e){return e.active})),clusters:_,clustersLoading:!b,computeService:g,computeServiceUUIDs:Object.entries(c.GO).reduce((function(e,n){var t=(0,i.Z)(n,2),l=t[0],c=t[1];return d(d({},e),{},(0,r.Z)({},l,c))}),{}),connections:E,connectionsLoading:!C,fetchAll:I,fetchComputeClusters:P,fetchComputeConnections:S,fetchComputeService:h,setupComplete:k}}},42278:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/compute",function(){return t(4910)}])},80022:function(e,n,t){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,{Z:function(){return r}})},15544:function(e,n,t){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.d(n,{Z:function(){return r}})},13692:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(61049);function i(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,r.Z)(e,n)}},93189:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(12539),i=t(80022);function l(e,n){if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}}},function(e){e.O(0,[9774,2678,365,184,9518,5946,2655,3745,9565,5329,3656,2755,5332,9868,9895,564,2371,1557,2512,5604,5499,18,2056,2888,179],(function(){return n=42278,e(e.s=n);var n}));var n=e.O();_N_E=n}]);