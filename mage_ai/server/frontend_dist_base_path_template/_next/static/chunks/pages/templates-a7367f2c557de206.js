(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5240],{80029:function(e,n,t){"use strict";var r=t(82394),i=t(82684),u=t(9518),l=t(55485),o=t(30160),c=t(84649),s=t(28598);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.navLinks,t=e.selectedLink,r=e.setSelectedLink,a=(0,i.useContext)(u.ThemeContext);return(0,s.jsx)(s.Fragment,{children:n.map((function(e){var n=e.Icon,i=e.description,u=e.label,p=e.selectedBackgroundColor,f=e.selectedIconProps,h=e.uuid,m=(null==t?void 0:t.uuid)===h,j=d({size:c.ZG},m&&f?f:{});return(0,s.jsx)(c.wj,{onClick:function(){return r(e)},selected:m,children:(0,s.jsxs)(l.ZP,{alignItems:"center",children:[n&&(0,s.jsx)(c.ze,{backgroundColor:m&&p?p(a):null,children:(0,s.jsx)(n,d({},j))}),(0,s.jsxs)(l.ZP,{alignItems:"flex-start",flexDirection:"column",justifyContent:"center",children:[(0,s.jsx)(o.ZP,{bold:!0,large:!0,children:u?u():h}),i&&(0,s.jsx)(o.ZP,{muted:!0,small:!0,children:null==i?void 0:i()})]})]})},h)}))})}},60523:function(e,n,t){"use strict";var r=t(21831),i=t(82394),u=t(82684),l=t(9518),o=t(34376),c=t(80029),s=t(54750),a=t(71180),d=t(90299),p=t(44898),f=t(55485),h=t(88328),m=t(38276),j=t(4190),b=t(48381),x=t(5755),v=t(30160),g=t(5332),y=t(72473),Z=t(84649),w=t(32929),P=t(15610),O=t(19183),k=t(28598);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n,t=e.contained,i=e.defaultLinkUUID,C=e.defaultTab,I=e.objectType,T=e.onClickCustomTemplate,S=e.pipelineUUID,U=e.showAddingNewTemplates,A=e.showBreadcrumbs,D=e.tabs,E=(0,o.useRouter)(),N=(0,u.useContext)(l.ThemeContext),M=(0,O.i)(),R=M.height,L=M.width,q=(0,u.useMemo)((function(){return D||w.dP}),[D]),B=(0,u.useState)(U||!1),F=B[0],z=B[1],G=(0,u.useState)(i?w.qy.find((function(e){return e.uuid===i})):w.qy[0]),X=G[0],Y=G[1],H=(0,u.useState)(C?q.find((function(e){return e.uuid===(null==C?void 0:C.uuid)})):q[0]),V=H[0],W=H[1],J=(0,u.useState)(null),K=J[0],Q=J[1],$=g.ZP.custom_templates.list({object_type:p.Z},{},{pauseFetch:w.n9.uuid!==(null==V?void 0:V.uuid)}),ee=$.data,ne=$.mutate,te=(0,u.useMemo)((function(){var e=(null==ee?void 0:ee.custom_templates)||[];return null!=X&&X.filterTemplates?null==X?void 0:X.filterTemplates(e):e}),[ee,X]),re=g.ZP.custom_templates.list({object_type:p.R},{},{pauseFetch:w.A2.uuid!==(null==V?void 0:V.uuid)}),ie=re.data,ue=re.mutate,le=(0,u.useMemo)((function(){var e=(null==ie?void 0:ie.custom_templates)||[];return null!=X&&X.filterTemplates?null==X?void 0:X.filterTemplates(e):e}),[ie,X]),oe=(0,u.useMemo)((function(){return w.hS.map((function(e){var n=e.Icon,t=e.label,r=e.selectedBackgroundColor,i=e.selectedIconProps,u=e.uuid,l=(null==X?void 0:X.uuid)===u,o=_({size:Z.ZG},l&&i?i:{});return(0,k.jsx)(Z.wj,{onClick:function(){return Y(e)},selected:l,children:(0,k.jsxs)(f.ZP,{alignItems:"center",children:[(0,k.jsx)(Z.ze,{backgroundColor:l&&r?r(N):null,children:n?(0,k.jsx)(n,_({},o)):(0,k.jsx)(y.BlocksStacked,_({},o))}),(0,k.jsx)(v.ZP,{bold:!0,large:!0,children:t?t():u})]})},u)}))}),[X,N]),ce=(0,u.useMemo)((function(){return null==te?void 0:te.map((function(e){var n=e.description,t=e.name,i=e.tags,u=e.template_uuid,l=e.user,o=[];return null!=i&&i.length?o.push.apply(o,(0,r.Z)(i)):null!=l&&l.username&&o.push(null==l?void 0:l.username),(0,k.jsxs)(Z.UE,{onClick:function(){T?T(e):E.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(u)))},children:[(0,k.jsx)(Z.Tj,{children:(0,k.jsx)(v.ZP,{bold:!0,monospace:!0,textOverflow:!0,children:t||u})}),(0,k.jsx)(Z.SL,{children:(0,k.jsx)(v.ZP,{default:!!n,italic:!n,muted:!n,textOverflowLines:2,children:n||"No description"})}),(0,k.jsx)(Z.EN,{children:(null==o?void 0:o.length)>=1&&(0,k.jsx)(b.Z,{tags:null==o?void 0:o.map((function(e){return{uuid:e}}))})})]},u)}))}),[te,T,E]),se=(0,u.useMemo)((function(){return null==le?void 0:le.map((function(e){var n=e.description,t=e.name,i=e.tags,u=e.template_uuid,l=e.user,o=[];return null!=i&&i.length?o.push.apply(o,(0,r.Z)(i)):null!=l&&l.username&&o.push(null==l?void 0:l.username),(0,k.jsxs)(Z.UE,{onClick:function(){T?T(e):E.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(u),"?object_type=").concat(p.R))},children:[(0,k.jsx)(Z.Tj,{children:(0,k.jsx)(v.ZP,{bold:!0,monospace:!0,textOverflow:!0,children:t||u})}),(0,k.jsx)(Z.SL,{children:(0,k.jsx)(v.ZP,{default:!!n,italic:!n,muted:!n,textOverflowLines:2,children:n||"No description"})}),(0,k.jsx)(Z.EN,{children:(null==o?void 0:o.length)>=1&&(0,k.jsx)(b.Z,{tags:null==o?void 0:o.map((function(e){return{uuid:e}}))})})]},u)}))}),[le,T,E]),ae=(0,u.useMemo)((function(){if(!A)return null;var e=[];return F?e.push.apply(e,[{label:function(){return"Templates"},onClick:function(){z(!1)}},{bold:!0,label:function(){return"New custom template"}}]):e.push({label:function(){return"Templates"}}),(0,k.jsx)(Z.FX,{children:(0,k.jsx)(s.Z,{breadcrumbs:e})})}),[F,A]),de=(0,u.useMemo)((function(){return A?36:0}),[A]),pe=(0,u.useMemo)((function(){return R-de}),[R,de]);if(F)return n=p.R===I&&S?(0,k.jsx)(h.Z,{onMutateSuccess:ue,pipelineUUID:S,templateAttributes:X&&(null==X?void 0:X.uuid)!==(null===w.qy||void 0===w.qy?void 0:w.qy[0].uuid)?{pipeline_type:null==X?void 0:X.uuid}:null,templateUUID:null==K?void 0:K.template_uuid}):(0,k.jsx)(x.Z,{contained:t,heightOffset:de,onCreateCustomTemplate:t?function(e){Q(e)}:null,onMutateSuccess:ne,templateAttributes:X&&(null==X?void 0:X.uuid)!==(null===w.qy||void 0===w.qy?void 0:w.qy[0].uuid)?{block_type:null==X?void 0:X.uuid}:null,templateUUID:null==K?void 0:K.template_uuid}),t?(0,k.jsxs)(k.Fragment,{children:[A&&ae,(0,k.jsx)(Z.Rd,{height:pe,width:L,children:n})]}):n;var fe=(0,k.jsxs)(Z.Nk,{children:[(0,k.jsxs)(Z.bC,{height:t?pe:null,children:[(0,k.jsx)(Z.Yf,{children:(0,k.jsx)(d.Z,{noPadding:!0,onClickTab:function(e){t?W(e):(0,P.u)({object_type:w.A2.uuid===e.uuid?p.R:p.Z})},selectedTabUUID:null==V?void 0:V.uuid,tabs:q})}),(0,k.jsxs)(Z.wl,{contained:t,heightOffset:de,children:[w.n9.uuid===(null==V?void 0:V.uuid)&&(0,k.jsx)(c.Z,{navLinks:w.qy,selectedLink:X,setSelectedLink:Y}),w.A2.uuid===(null==V?void 0:V.uuid)&&oe]})]}),(0,k.jsxs)(Z.w5,{children:[w.n9.uuid===(null==V?void 0:V.uuid)&&(0,k.jsx)(Z.HS,{children:(0,k.jsx)(a.ZP,{beforeIcon:(0,k.jsx)(y.Add,{size:Z.ZG}),onClick:function(){z(!0)},primary:!0,children:"New block template"})}),w.n9.uuid===(null==V?void 0:V.uuid)&&(0,k.jsxs)(k.Fragment,{children:[!ee&&(0,k.jsx)(m.Z,{p:2,children:(0,k.jsx)(j.Z,{inverted:!0})}),ee&&!(null!=ce&&ce.length)&&(0,k.jsxs)(m.Z,{p:2,children:[(0,k.jsx)(v.ZP,{children:"There are currently no templates matching your search."}),(0,k.jsx)("br",{}),(0,k.jsx)(v.ZP,{children:"Add a new template by clicking the button above."})]}),(null==ce?void 0:ce.length)>=1&&(0,k.jsx)(Z.n8,{children:ce})]}),w.A2.uuid===(null==V?void 0:V.uuid)&&(0,k.jsxs)(k.Fragment,{children:[!ie&&(0,k.jsx)(m.Z,{p:2,children:(0,k.jsx)(j.Z,{inverted:!0})}),ie&&!(null!=se&&se.length)&&(0,k.jsxs)(m.Z,{p:2,children:[(0,k.jsx)(v.ZP,{children:"There are currently no templates matching your search."}),(0,k.jsx)("br",{}),(0,k.jsx)(v.ZP,{children:'Add a new template by right-clicking a pipeline row from the Pipelines page and selecting "Create template".'})]}),(null==se?void 0:se.length)>=1&&(0,k.jsx)(Z.n8,{children:se})]})]})]});return t?(0,k.jsxs)(k.Fragment,{children:[A&&ae,(0,k.jsx)(Z.Rd,{height:pe,width:L,children:fe})]}):fe}},48381:function(e,n,t){"use strict";var r=t(82684),i=t(31882),u=t(55485),l=t(30160),o=t(86735),c=t(28598);n.Z=function(e){var n=e.onClickTag,t=e.tags,s=void 0===t?[]:t,a=(0,r.useMemo)((function(){return(null==s?void 0:s.length)||0}),[s]),d=(0,r.useMemo)((function(){return(0,o.YC)(s||[],"uuid")}),[s]);return(0,c.jsx)(u.ZP,{alignItems:"center",flexWrap:"wrap",children:null==d?void 0:d.reduce((function(e,t){return e.push((0,c.jsx)("div",{style:{marginBottom:2,marginRight:a>=2?4:0,marginTop:2},children:(0,c.jsx)(i.Z,{onClick:n?function(){return n(t)}:null,small:!0,children:(0,c.jsx)(l.ZP,{children:t.uuid})})},"tag-".concat(t.uuid))),e}),[])})}},31882:function(e,n,t){"use strict";var r=t(9518),i=t(71180),u=t(55485),l=t(30160),o=t(44897),c=t(72473),s=t(70515),a=t(61896),d=t(28598),p=r.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," "," ",""],(function(e){return!e.primary&&"\n    background-color: ".concat((e.theme.background||o.Z.background).tag,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.chart||o.Z.chart).primary,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((s.iI+a.Al)/2,"px;\n    height: ").concat(1.5*s.iI+a.Al,"px;\n    padding: ").concat(s.iI/1.5,"px ").concat(1.25*s.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((s.iI/2+a.Al)/2,"px;\n    height: ").concat(a.Al+s.iI/2+2,"px;\n    padding: ").concat(s.iI/4,"px ").concat(s.iI,"px;\n  ")}),(function(e){return e.xsmall&&"\n    border-radius: ".concat((s.iI/1+a.Al)/1,"px;\n    height: ").concat(20,"px;\n    padding: 4px 6px;\n  ")}),(function(e){return e.border&&"\n    border: 1px solid ".concat((e.theme.content||o.Z.content).muted,";\n  ")}));n.Z=function(e){var n=e.border,t=e.children,r=e.disabled,o=e.label,a=e.monospace,f=e.onClick,h=e.primary,m=e.small,j=e.xsmall;return(0,d.jsx)(p,{border:n,primary:h,small:m,xsmall:j,children:(0,d.jsx)(i.ZP,{basic:!0,disabled:r,noBackground:!0,noPadding:!0,onClick:f,transparent:!0,children:(0,d.jsxs)(u.ZP,{alignItems:"center",children:[t,o&&(0,d.jsx)(l.ZP,{monospace:a,small:m,xsmall:j,children:o}),!r&&f&&(0,d.jsx)("div",{style:{marginLeft:2}}),!r&&f&&(0,d.jsx)(c.Close,{default:h,muted:!h,size:m?s.iI:1.25*s.iI})]})})})}},60820:function(e,n,t){"use strict";t.r(n);var r=t(77837),i=t(38860),u=t.n(i),l=t(82684),o=t(60523),c=t(94629),s=t(93808),a=t(32929),d=t(44898),p=t(69419),f=t(28598);function h(){var e=(0,l.useState)(!1),n=e[0],t=e[1],r=(0,l.useState)(null),i=r[0],u=r[1],s=(0,l.useState)(null),h=s[0],m=s[1],j=(0,p.iV)();(0,l.useEffect)((function(){var e=j.new,n=j.object_type,r=j.pipeline_uuid;n&&u(n),r&&m(r),t(!!e)}),[j]);var b=(0,l.useMemo)((function(){var e=[n?"New":"Browse"];return i&&e.push(i),h&&e.push(h),e}),[n,i,h]),x=(0,l.useMemo)((function(){return d.R===i}),[i]);return(0,f.jsx)(c.Z,{addProjectBreadcrumbToCustomBreadcrumbs:n,breadcrumbs:n?[{label:function(){return"Templates"},linkProps:{href:x?"/templates?object_type=".concat(d.R):"/templates"}},{bold:!0,label:function(){return"New"}}]:null,title:"Templates",uuid:"Templates/index",children:(0,f.jsx)(o.Z,{defaultTab:x?a.A2:null,objectType:i,pipelineUUID:h,showAddingNewTemplates:n},b.join("_"))})}h.getInitialProps=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),n.default=(0,s.Z)(h)},87710:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/templates",function(){return t(60820)}])},80022:function(e,n,t){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,{Z:function(){return r}})},15544:function(e,n,t){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.d(n,{Z:function(){return r}})},13692:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(61049);function i(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,r.Z)(e,n)}},93189:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(12539),i=t(80022);function u(e,n){if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}}},function(e){e.O(0,[2678,365,184,9518,5946,2655,3745,9565,5329,3656,2755,341,6639,433,2125,8522,5332,9868,9895,564,2371,1557,2512,5604,5499,18,3498,770,2056,4052,6370,9774,2888,179],(function(){return n=87710,e(e.s=n);var n}));var n=e.O();_N_E=n}]);