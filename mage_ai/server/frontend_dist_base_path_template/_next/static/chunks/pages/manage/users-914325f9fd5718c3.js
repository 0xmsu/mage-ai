(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1911],{75083:function(e,r,n){"use strict";n.d(r,{HF:function(){return o},L6:function(){return t}});var t,u=n(72473);function o(e,r,n){var o=e.owner,i=(e.roles,[{Icon:u.WorkspacesIcon,id:t.WORKSPACES,isSelected:function(){return t.WORKSPACES===n},label:function(){return"Workspaces"},linkProps:{href:"/manage"}}]);return o&&i.push({Icon:u.WorkspacesUsersIcon,id:t.USERS,isSelected:function(){return t.USERS===n},label:function(){return"Users"},linkProps:{href:"/manage/users"}}),i.push.apply(i,[{Icon:u.Settings,id:t.SETTINGS,isSelected:function(){return t.SETTINGS===n},label:function(){return"Settings"},linkProps:{href:"/manage/settings"}},{Icon:u.File,id:t.FILE_BROWSER,isSelected:function(){return t.FILE_BROWSER===n},label:function(){return"File browser"},linkProps:{href:"/manage/files"}}]),i}!function(e){e.WORKSPACES="workspaces",e.USERS="users",e.SETTINGS="settings",e.FILE_BROWSER="file_browser"}(t||(t={}))},59533:function(e,r,n){"use strict";var t=n(82684),u=n(94629),o=n(5332),i=n(70515),s=n(75083),c=n(50178),a=n(28598);r.Z=function(e){var r=e.before,n=e.breadcrumbs,l=void 0===n?[]:n,f=e.children,d=e.errors,p=e.headerOffset,b=e.mainContainerHeader,v=e.pageName,h=e.setErrors,m=e.subheaderChildren,O=o.ZP.statuses.list().data,_=(0,t.useMemo)((function(){var e,r;return null==O||null===(e=O.statuses)||void 0===e||null===(r=e[0])||void 0===r?void 0:r.project_type}),[O]),w=(0,c.PR)()||{};return(0,a.jsx)(u.Z,{before:r,beforeWidth:r?50*i.iI:0,breadcrumbs:l,errors:d,headerOffset:p,mainContainerHeader:b,navigationItems:(0,s.HF)(w,_,v),setErrors:h,subheaderChildren:m,title:"Workspaces",uuid:"workspaces/index",children:f})}},12222:function(e,r,n){"use strict";n.r(r);var t=n(77837),u=n(82394),o=n(38860),i=n.n(o),s=n(82684),c=n(34376),a=n(71180),l=n(85854),f=n(93808),d=n(38276),p=n(75499),b=n(30160),v=n(59533),h=n(5332),m=n(98464),O=n(72473),_=n(70515),w=n(75083),S=n(72619),E=n(50178),P=n(42122),j=n(69419),g=n(28598);function y(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function Z(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?y(Object(n),!0).forEach((function(r){(0,u.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function k(){var e=(0,c.useRouter)(),r=(0,s.useState)(null),n=r[0],t=r[1],u=((0,E.PR)()||{}).owner,o=(0,s.useState)(null),i=o[0],f=o[1],y=h.ZP.users.list({},{revalidateOnFocus:!1}),k=y.data;y.mutate;(0,s.useEffect)((function(){(0,S.bB)(k,t)}),[k]);var R=(0,s.useMemo)((function(){return(null==k?void 0:k.users)||[]}),[null==k?void 0:k.users]),I=h.ZP.users.detail(null==i?void 0:i.user_id,{},{revalidateOnFocus:!1}),x=I.data;I.mutate;(0,s.useEffect)((function(){(0,S.bB)(x,t)}),[x]);var W=null==x?void 0:x.user,C=(0,j.iV)(),F=(0,m.Z)(C);return(0,s.useEffect)((function(){var e=C.add_new_user,r=C.user_id;if(!(0,P.Xy)(C,F)){var n=Z(Z({},F),C);r?n.user_id=r:delete n.user_id,e?n.add_new_user=e:delete n.add_new_user,f(n)}}),[C,F]),(0,g.jsxs)(v.Z,{breadcrumbs:[{label:function(){return"Workspaces"},linkProps:{as:"/manage",href:"/manage"}},{bold:!0,label:function(){return"Users"}}],errors:n,pageName:w.L6.USERS,children:[u&&(0,g.jsx)(d.Z,{p:_.cd,children:(0,g.jsx)(a.ZP,{beforeIcon:(0,g.jsx)(O.Add,{}),onClick:function(){return e.push("/manage/users/new")},primary:!0,children:"Add new user"})}),(0,g.jsx)(d.Z,{p:_.cd,children:(0,g.jsx)(l.Z,{children:"Users"})}),(0,g.jsx)(p.Z,{columnFlex:[1,1,1],columns:[{uuid:"Username"},{uuid:"Email"},{uuid:"Role"}],isSelectedRow:function(e){var r;return(null===(r=R[e])||void 0===r?void 0:r.id)===(null==W?void 0:W.id)},onClickRow:function(r){var n,t=null===(n=R[r])||void 0===n?void 0:n.id;e.push("/manage/users/[user]","/manage/users/".concat(t))},rows:R.map((function(e){var r=e.email,n=e.roles_display,t=e.roles_new,u=e.username;return[(0,g.jsx)(b.ZP,{bold:!0,children:u},"username"),(0,g.jsx)(b.ZP,{default:!0,children:r},"email"),(0,g.jsx)(b.ZP,{default:!0,children:t&&t[0]?t[0].name:n},"roles")]})),uuid:"pipeline-runs"})]})}k.getInitialProps=(0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),r.default=(0,f.Z)(k)},72695:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/users",function(){return n(12222)}])},80022:function(e,r,n){"use strict";function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(r,{Z:function(){return t}})},15544:function(e,r,n){"use strict";function t(e){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(e)}n.d(r,{Z:function(){return t}})},13692:function(e,r,n){"use strict";n.d(r,{Z:function(){return u}});var t=n(61049);function u(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&(0,t.Z)(e,r)}},93189:function(e,r,n){"use strict";n.d(r,{Z:function(){return o}});var t=n(12539),u=n(80022);function o(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return(0,u.Z)(e)}},61049:function(e,r,n){"use strict";function t(e,r){return t=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},t(e,r)}n.d(r,{Z:function(){return t}})}},function(e){e.O(0,[2678,365,184,9518,5946,2655,3745,9565,5329,5332,9868,9895,564,2371,1557,2512,5604,5499,9774,2888,179],(function(){return r=72695,e(e.s=r);var r}));var r=e.O();_N_E=r}]);