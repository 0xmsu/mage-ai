"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2717],{8916:function(e,n,t){t.d(n,{FS:function(){return s},JZ:function(){return p},Tt:function(){return d},e7:function(){return v},wx:function(){return a}});var i=t(75582),r=t(82394),l=t(83784),o=t(30229);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e){return"string"===typeof e?e:JSON.stringify(e)}function a(e,n){var t,i;return null===e||void 0===e||null===(t=e.find((function(e){var t=e.block;return n(t)})))||void 0===t||null===(i=t.variables)||void 0===i?void 0:i.map((function(e){var n=e.value;return c(c({},e),{},{value:s(n)})}))}function d(e){var n;return null===(n=a(e,(function(e){return e.uuid===l.C})))||void 0===n?void 0:n.reduce((function(e,n){var t=n.uuid,i=n.value;return c(c({},e),{},(0,r.Z)({},t,i))}),{})}function p(e,n){return n===o.Xm.TIME?e.push({uuid:"execution_date",value:"<run datetime>"}):n===o.Xm.EVENT&&e.push({uuid:"event",value:"<trigger event>"}),e}function v(e){return e?Object.entries(e).reduce((function(e,n){var t=(0,i.Z)(n,2),l=t[0],o=t[1],u=o;try{u=JSON.parse(o)}catch(s){}return c(c({},e),{},(0,r.Z)({},l,u))}),{}):e}},71610:function(e,n,t){var i=t(82394),r=t(75582),l=t(12691),o=t.n(l),u=t(38626),c=t(82684),s=t(32013),a=t(98777),d=t(15338),p=t(48670),v=t(88543),h=t(38276),f=t(4190),m=t(75499),j=t(30160),g=t(35686),x=t(70515),Z=t(30229),b=t(32080),y=t(81728),O=t(3917),P=t(55283),_=t(70320),S=t(28598);function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var I={large:!1};n.Z=function(e){var n=e.bookmarkValues,t=e.originalBookmarkValues,l=e.setBookmarkValues,E=e.pipeline,T=(0,c.useContext)(u.ThemeContext),w=(0,_.qB)(),C=(0,c.useState)(null),M=C[0],A=C[1],D=(0,c.useMemo)((function(){return null!==E&&void 0!==E&&E.blocks?(0,b.n)(E):null}),[E]),N=(0,c.useMemo)((function(){return Object.keys(D||{})||[]}),[D]),L=g.ZP.integration_sources.pipelines.list(null===E||void 0===E?void 0:E.uuid,{block_uuid:N},{},{pauseFetch:!(null!==N&&void 0!==N&&N.length)}).data,R=(0,c.useMemo)((function(){return null===L||void 0===L?void 0:L.integration_sources}),[L]);return(0,c.useEffect)((function(){if((null===R||void 0===R?void 0:R.length)>=1&&(!n||!M)){var e={};null===R||void 0===R||R.map((function(n){var t,i=n.block,l=n.streams,o=null===i||void 0===i?void 0:i.uuid;e[o]={},null===(t=Object.entries(l||{}))||void 0===t||t.forEach((function(n){var t,i,l=(0,r.Z)(n,2),u=l[0],c=l[1];e[o][u]=null===c||void 0===c||null===(t=c.state)||void 0===t||null===(i=t.bookmarks)||void 0===i?void 0:i[u]}))})),n||l(e),M||A(e)}}),[n,M,l,A,R]),(0,S.jsxs)(h.Z,{p:x.cd,children:[!L&&(0,S.jsx)(f.Z,{inverted:!0,small:!0}),null===R||void 0===R?void 0:R.map((function(e){var u=e.block,f=e.pipeline_run,g=e.pipeline_schedule,b=e.streams,_=null===u||void 0===u?void 0:u.uuid;return(0,S.jsx)(v.Z,{title:(0,S.jsx)(j.ZP,{color:(0,P.qn)(null===u||void 0===u?void 0:u.type,{blockColor:null===u||void 0===u?void 0:u.color,theme:T}).accent,monospace:!0,children:_}),children:(0,S.jsx)(s.Z,{noBorder:!0,noBoxShadow:!0,children:Object.entries(b||{}).map((function(e){var u,s,b,P,T=(0,r.Z)(e,2),C=T[0],A=T[1],D=A.record,N=A.state,L=(null===N||void 0===N||null===(u=N.bookmarks)||void 0===u?void 0:u[C])||{};return(0,S.jsxs)(a.Z,{noBorderRadius:!0,noPaddingContent:!0,title:(0,S.jsx)(j.ZP,{default:!0,monospace:!0,children:C}),titleXPadding:x.cd*x.iI,titleYPadding:x.cd*x.iI,children:[(0,S.jsx)(v.S,k(k({},I),{},{title:"Last pipeline run started at",children:(0,S.jsx)(j.ZP,{default:!0,monospace:!0,children:(null===f||void 0===f?void 0:f.started_at)&&(0,O.XG)(null===f||void 0===f?void 0:f.started_at,w)})})),(0,S.jsx)(d.Z,{light:!0}),(0,S.jsx)(v.S,k(k({},I),{},{title:"Last pipeline run completed at",children:(0,S.jsx)(j.ZP,{default:!0,monospace:!0,children:(null===f||void 0===f?void 0:f.completed_at)&&(0,O.XG)(null===f||void 0===f?void 0:f.completed_at,w)})})),(0,S.jsx)(d.Z,{light:!0}),(0,S.jsx)(d.Z,{light:!0}),(0,S.jsx)(v.S,k(k({},I),{},{title:"Trigger",children:(0,S.jsx)(o(),{as:"/pipelines/".concat(null===E||void 0===E?void 0:E.uuid,"/triggers/").concat(null===g||void 0===g?void 0:g.id),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,S.jsx)(p.Z,{block:!0,default:!0,openNewWindow:!0,children:(0,S.jsx)(j.ZP,{default:!0,monospace:!0,children:null===g||void 0===g?void 0:g.name})})})})),(0,S.jsx)(d.Z,{light:!0}),(0,S.jsx)(v.S,k(k({},I),{},{title:"Type",children:(0,S.jsx)(j.ZP,{default:!0,monospace:!0,children:(0,y.kC)((null===(s=Z.Z4[null===g||void 0===g?void 0:g.schedule_type])||void 0===s?void 0:s.call(Z.Z4))||"")})})),(0,S.jsx)(d.Z,{light:!0}),(0,S.jsx)(v.S,k(k({},I),{},{title:"Frequency",children:(0,S.jsx)(j.ZP,{default:!0,monospace:!0,children:null===g||void 0===g?void 0:g.schedule_interval})})),(0,S.jsx)(d.Z,{light:!0}),(0,S.jsxs)(h.Z,{p:x.cd,children:[(0,S.jsx)(j.ZP,{bold:!0,large:!0,children:"Bookmark values"}),(0,S.jsx)(h.Z,{mt:1,children:(0,S.jsxs)(j.ZP,{muted:!0,small:!0,children:["Overriding the bookmark values will be applied to all pipeline runs",(0,S.jsx)("br",{}),"for this trigger until there is at least 1 successful pipeline run in this trigger."]})})]}),(0,S.jsx)(d.Z,{light:!0,short:!0}),!(null!==(b=Object.values(L||{}))&&void 0!==b&&b.length)&&(0,S.jsx)(h.Z,{p:x.cd,children:(0,S.jsx)(j.ZP,{muted:!0,children:"There are currently no bookmark values for this stream."})}),Object.entries(L||{}).map((function(e){var o,u,s,a,d,p,h=(0,r.Z)(e,2),f=h[0],m=(h[1],null===n||void 0===n||null===(o=n[_])||void 0===o||null===(u=o[C])||void 0===u?void 0:u[f]),g=(null===t||void 0===t||null===(s=t[_])||void 0===s||null===(a=s[C])||void 0===a||a[f],null===M||void 0===M||null===(d=M[_])||void 0===d||null===(p=d[C])||void 0===p?void 0:p[f]);return(0,c.createElement)(v.S,k(k({},I),{},{title:(0,S.jsx)(j.ZP,{default:!0,monospace:!0,children:f}),description:g&&g!==m&&(0,S.jsxs)(j.ZP,{muted:!0,small:!0,children:["Original bookmark value from the last pipeline run: ",(0,S.jsx)(j.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:g})]}),key:"".concat(_,"-bookmark-values-").concat(f),textInput:{monospace:!0,onChange:function(e){return l((function(t){var r;return k(k({},t),{},(0,i.Z)({},_,k(k({},null===n||void 0===n?void 0:n[_]),{},(0,i.Z)({},C,k(k({},null===n||void 0===n||null===(r=n[_])||void 0===r?void 0:r[C]),{},(0,i.Z)({},f,e.target.value))))))}))},value:String(m||"")}}))})),(0,S.jsx)(d.Z,{light:!0}),(0,c.createElement)(v.S,k(k({},I),{},{title:"Record",description:"The most recently synced record.",key:"block-uuid-".concat(_,"-").concat(C)}),(0,S.jsx)(m.Z,{columnFlex:[1,null],columns:[{uuid:"Column"},{uuid:"Value"}],rows:null===(P=Object.entries(D||{}))||void 0===P?void 0:P.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return[(0,S.jsx)(j.ZP,{default:!0,monospace:!0,children:t},t),(0,S.jsx)(j.ZP,{default:!0,monospace:!0,children:String(i)},"".concat(t,"-").concat(i))]}))}))]})}))})})}))]})}},88785:function(e,n,t){t.d(n,{J:function(){return c},U:function(){return u}});var i=t(38626),r=t(44897),l=t(42631),o=t(70515),u=i.default.div.withConfig({displayName:"indexstyle__CardStyle",componentId:"sc-m7tlau-0"})(["border-radius:","px;border-style:solid;border-width:2px;height:","px;margin-right:","px;padding:","px;width:","px;"," ",""],l.TR,14*o.iI,o.cd*o.iI,o.cd*o.iI,40*o.iI,(function(e){return!e.selected&&"\n    border-color: ".concat((e.theme.borders||r.Z.borders).light,";\n  ")}),(function(e){return e.selected&&"\n    border-color: ".concat((e.theme.interactive||r.Z.interactive).linkPrimary,";\n  ")})),c=i.default.div.withConfig({displayName:"indexstyle__DateSelectionContainer",componentId:"sc-m7tlau-1"})(["border-radius:","px;padding:","px;"," "," ",""],l.n_,o.tr,(function(e){return"\n    background-color: ".concat((e.theme.interactive||r.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.absolute&&"\n    position: absolute;\n    z-index: 2;\n    right: 0;\n    top: ".concat(2.5*o.iI,"px;\n  ")}),(function(e){return e.topPosition&&"\n    top: -".concat(42*o.iI,"px;\n  ")}))},12717:function(e,n,t){t.d(n,{Z:function(){return Ue}});var i=t(21831),r=t(82394),l=t(75582),o=t(12691),u=t.n(o),c=t(82684),s=t(20026),a=t.n(s),d=t(92083),p=t.n(d),v=t(21764),h=t(69864),f=t(34376),m=t(71610),j=t(71180),g=t(90299),x=t(14805),Z=t(70652),b=t(50724),y=t(9134),O=t(39457),P=t(38626),_=t(39867),S=t(55485),E=t(85854),k=t(38276),I=t(75499),T=t(30160),w=t(17488),C=t(12468),M=t(44375),A=t(70515),D=t(55283),N=t(86735),L=t(28598);function R(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?R(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var H=function(e){var n=e.blocks,t=e.updateVariables,i=e.variables,l=(0,c.useContext)(P.ThemeContext),o=(0,c.useCallback)((function(e,n){return t((function(){var t=(null===i||void 0===i?void 0:i.__mage_variables)||{},l=(null===t||void 0===t?void 0:t.blocks)||{},o=l[e]||{},u=(null===o||void 0===o?void 0:o.configuration)||{};return U(U({},i),{},{__mage_variables:U(U({},t),{},{blocks:U(U({},l),{},(0,r.Z)({},e,U(U({},o),{},{configuration:U(U({},u),n)})))})})}))}),[t,i]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(E.Z,{children:"dbt runtime settings"}),(0,L.jsx)(k.Z,{mt:A.Mq,children:(0,L.jsx)(I.Z,{columnFlex:[1,null,null,null],columns:[{uuid:"Block"},{uuid:"Flags"},{uuid:"Prefix"},{uuid:"Suffix"}],compact:!0,rows:null===n||void 0===n?void 0:n.map((function(e){var n,t,r,u=e.type,c=e.uuid,s=(0,M.IU)(e).name,a=(0,D.qn)(u,{blockColor:e.color,theme:l}).accent,d=null===i||void 0===i||null===(n=i.__mage_variables)||void 0===n||null===(t=n.blocks)||void 0===t||null===(r=t[c])||void 0===r?void 0:r.configuration,p=d||{},v=p.prefix,h=p.suffix,f=(null===d||void 0===d?void 0:d.flags)||[],m=!(null===f||void 0===f||!f.includes(M.Dy));return[(0,L.jsx)(C.Z,{block:!0,label:(0,L.jsx)(T.ZP,{monospace:!0,small:!0,children:c}),size:null,widthFitContent:!0,children:(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(_.Z,{color:a,size:1.5*A.iI,square:!0}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsxs)(T.ZP,{monospace:!0,small:!0,children:[v&&(0,L.jsx)(T.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:v}),s,h&&(0,L.jsx)(T.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:h})]})]})},"uuid-".concat(c)),(0,L.jsx)(S.ZP,{alignItems:"center",children:(0,L.jsx)(Z.Z,{checked:m,label:M.Dy,monospace:!0,onClick:function(){return o(c,{flags:m?(0,N.Od)(f,(function(e){return M.Dy===e})):f.concat(M.Dy)})},small:!0})},"flags-".concat(c)),(0,L.jsx)(w.Z,{compact:!0,monospace:!0,onChange:function(e){return o(c,{prefix:e.target.value})},placeholder:"N+, +",small:!0,value:v,width:10*A.iI},"prefix-".concat(c)),(0,L.jsx)(w.Z,{compact:!0,monospace:!0,onChange:function(e){return o(c,{suffix:e.target.value})},placeholder:"+, +N",small:!0,value:h,width:10*A.iI},"suffix-".concat(c))]}))})})]})},F=t(97196),q=t(15338),z=t(97618),B=t(48670),G=t(26304),V=t(44897),W=t(95363),Y=t(61896),K=["children","large","lineHeight","ordered"];function J(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function X(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?J(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Q=(0,P.css)([""," "," "," "," "," "," "," "," "," ",""],(function(e){return!e.muted&&"\n    color: ".concat((e.theme.content||V.Z.content).default,";\n  ")}),(function(e){return e.muted&&"\n    color: ".concat((e.theme.content||V.Z.content).muted,";\n  ")}),(function(e){return e.inverted&&"\n    color: ".concat((e.theme.content||V.Z.content).inverted,";\n  ")}),(function(e){return e.color&&"\n    color: ".concat(e.color,";\n  ")}),(function(e){return!e.monospace&&"\n    font-family: ".concat(W.ry,";\n  ")}),(function(e){return e.monospace&&"\n    font-family: ".concat(W.Vp,";\n  ")}),(function(e){return e.large&&"\n    ".concat(Y.x_,"\n  ")}),(function(e){return!e.large&&!e.small&&"\n    ".concat(Y.i3,"\n  ")}),(function(e){return e.small&&"\n    ".concat(Y.J5,"\n  ")}),(function(e){return e.lineHeight&&"\n    line-height: ".concat(e.lineHeight,"px !important;\n  ")})),$=P.default.ul.withConfig({displayName:"List__UnorderedListStyle",componentId:"sc-1f6yhbi-0"})(["",""],Q),ee=P.default.ol.withConfig({displayName:"List__OrderedListStyle",componentId:"sc-1f6yhbi-1"})(["",""],Q),ne=P.default.li.withConfig({displayName:"List__ListItemStyle",componentId:"sc-1f6yhbi-2"})(["",""],(function(e){return e.large&&e.marginTop&&"\n    margin-top: ".concat(1*A.iI,"px;\n  ")}));var te,ie=function(e){var n=e.children,t=e.large,i=e.lineHeight,r=e.ordered,l=(0,G.Z)(e,K),o=r?ee:$;return(0,L.jsx)(o,X(X({large:t,lineHeight:i},l),{},{children:c.Children.map(n,(function(e,n){var i;return(0,L.jsx)(ne,X(X({large:t,marginTop:n>=1},l),{},{children:c.cloneElement(e)}),(null===(i=e.props)||void 0===i?void 0:i.key)||n)}))}))},re=t(37899),le=t(75457),oe=t(30229),ue=t(57653),ce=t(83784),se=t(82359),ae=t(44085),de=t(81334),pe=t(69650),ve=t(81769),he=t(54193),fe=t(72473),me=t(81728),je=t(16488),ge=t(70320),xe=(te={},(0,r.Z)(te,he.zj.DATE,fe.aw),(0,r.Z)(te,he.zj.DATETIME,fe.Pf),(0,r.Z)(te,he.zj.DICTIONARY,fe.$l),(0,r.Z)(te,he.zj.FLOAT,fe.As),(0,r.Z)(te,he.zj.INTEGER,fe.qZ),(0,r.Z)(te,he.zj.LIST,fe.B4),(0,r.Z)(te,he.zj.STRING,fe.KJ),te);var Ze=function(e){var n,t,i,r=e.containerRef,o=e.date,u=e.interactions,s=e.pipeline,a=e.pipelineInteraction,d=e.pipelineSchedule,p=e.setVariables,v=e.showSummary,h=e.time,f=e.triggerTypes,m=e.variables,j=(0,c.useMemo)((function(){return(0,N.HK)(u||[],(function(e){return e.uuid}))}),[u]),g=(0,c.useMemo)((function(){return(null===s||void 0===s?void 0:s.blocks)||[]}),[s]),x=(0,c.useMemo)((function(){return(null===a||void 0===a?void 0:a.blocks)||{}}),[a]),Z=(0,c.useMemo)((function(){var e=[];null===g||void 0===g||g.length;return null===g||void 0===g||g.map((function(n,t){var i=(n||{uuid:null}).uuid,l=(null===x||void 0===x?void 0:x[i])||[];null===l||void 0===l||l.length;e.push((0,L.jsx)(k.Z,{p:A.cd,children:null===l||void 0===l?void 0:l.map((function(e,n){return(0,L.jsx)(k.Z,{mt:n>=1?2*A.cd:0,children:(0,L.jsx)(ve.Z,{blockInteraction:e,containerRef:r,interaction:null===j||void 0===j?void 0:j[null===e||void 0===e?void 0:e.uuid],setVariables:p,variables:m})},"".concat(null===e||void 0===e?void 0:e.uuid,"-").concat(n))}))}))})),e}),[g,r,j,p,m]),b=(0,ge.qB)(),y=(0,c.useMemo)((function(){return o&&null!==h&&void 0!==h&&h.hour&&null!==h&&void 0!==h&&h.minute?(0,je.XM)(o,h,{convertToUtc:b,includeSeconds:!0,localTimezone:b}):null}),[o,b,h]),O=(0,c.useMemo)((function(){var e=[];null===g||void 0===g||g.length;return null===g||void 0===g||g.map((function(n,t){var i=(n||{uuid:null}).uuid,r=(null===x||void 0===x?void 0:x[i])||[];null===r||void 0===r||r.forEach((function(n,r){var o=null===j||void 0===j?void 0:j[null===n||void 0===n?void 0:n.uuid];Object.entries((null===o||void 0===o?void 0:o.variables)||{}).forEach((function(n,o){var u,c=(0,l.Z)(n,2),s=c[0],a=c[1],d=a.name,p=a.required,v=a.types,h=null===m||void 0===m?void 0:m[s],f="undefined"===typeof h,j=p&&f,g=(null===xe||void 0===xe?void 0:xe[v[0]])||fe.KJ,x=[];"undefined"!==typeof h?h&&Array.isArray(h||[])?null===h||void 0===h||h.forEach((function(e){x.push(e&&"object"===typeof e?x.push(JSON.stringify(e)):x.push(String(e)))})):h&&"object"===typeof h?Object.entries(h||{}).forEach((function(e){var n=(0,l.Z)(e,2),t=n[0];n[1]&&x.push(String(t))})):x.push(String(h)):x.push(h||""),e.push([(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(g,{default:!0,size:1.5*A.iI}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,monospace:!0,children:s})]},"".concat(i,"-").concat(s,"-label-").concat(d,"-").concat(t,"-").concat(r,"-").concat(o)),(0,L.jsx)(k.Z,{py:A.cd,children:(0,L.jsxs)(T.ZP,{danger:j,monospace:!j,muted:f,children:[f&&!j&&"-",j&&"This is required",!f&&!j&&(null===x||void 0===x||null===(u=x.map((function(e){return String(e)})))||void 0===u?void 0:u.join(", "))]})},"".concat(i,"-").concat(s,"-value-").concat(d,"-").concat(h,"-").concat(t,"-").concat(r,"-").concat(o))])}))}))})),(0,L.jsx)(I.Z,{columnFlex:[null,1],rows:e})}),[g,j,m]);return(0,L.jsxs)(L.Fragment,{children:[!v&&Z,v&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(k.Z,{p:A.cd,children:(0,L.jsx)(E.Z,{children:"Settings"})}),(0,L.jsx)(q.Z,{light:!0,short:!0}),(0,L.jsx)(I.Z,{columnFlex:[null,1],rows:[[(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.Bf,{default:!0}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"Trigger type"})]},"trigger_type"),(0,L.jsx)(k.Z,{py:A.cd,children:(0,L.jsx)(T.ZP,{danger:!(null!==d&&void 0!==d&&d.schedule_type),monospace:!0,children:null!==d&&void 0!==d&&d.schedule_type?null===f||void 0===f||null===(n=f.find((function(e){return e.uuid===(null===d||void 0===d?void 0:d.schedule_type)})))||void 0===n||null===(t=n.label)||void 0===t?void 0:t.call(n):"This is required"})},"trigger_type_input")],[(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.KJ,{default:!0}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"Trigger name"})]},"trigger_name"),(0,L.jsx)(k.Z,{py:A.cd,children:(0,L.jsx)(T.ZP,{danger:!(null!==d&&void 0!==d&&d.name),monospace:!0,children:(null===d||void 0===d?void 0:d.name)||"This is required"})},"trigger_name_input")],[(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.KJ,{default:!0}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"Trigger description"})]},"trigger_description"),(0,L.jsx)(k.Z,{py:A.cd,children:(0,L.jsx)(T.ZP,{monospace:!0,muted:!(null!==d&&void 0!==d&&d.description),children:(null===d||void 0===d?void 0:d.description)||"-"})},"trigger_description_input")],[(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.Pf,{default:!0,size:1.5*A.iI}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"Frequency"})]},"frequency"),(0,L.jsx)(k.Z,{py:A.cd,children:(0,L.jsxs)(T.ZP,{danger:!(null!==d&&void 0!==d&&d.schedule_interval),monospace:!0,muted:!(null!==d&&void 0!==d&&d.schedule_interval),children:[(null===d||void 0===d?void 0:d.schedule_interval)&&(0,me.vg)((null===d||void 0===d||null===(i=d.schedule_interval)||void 0===i?void 0:i.substring(1))||""),!(null!==d&&void 0!==d&&d.schedule_interval)&&"This is required"]})},"frequency_input")],[(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.aw,{default:!0,size:1.5*A.iI}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"Start date and time"})]},"start_time"),(0,L.jsx)(k.Z,{py:A.cd,children:(0,L.jsx)(T.ZP,{danger:!y,monospace:!!y,muted:!y,children:y||"This is required"})},"start_time_input")]]}),(0,L.jsx)(k.Z,{p:A.cd,children:(0,L.jsx)(E.Z,{children:"Customize"})}),(0,L.jsx)(q.Z,{light:!0,short:!0}),O]})]})},be=t(35686),ye=t(77417),Oe=t(44425),Pe=t(88785),_e=t(28795),Se={label:function(){return"CUSTOMIZE"},uuid:"customize"},Ee={label:function(){return"SETTINGS"},uuid:"settings"},ke={label:function(){return"REVIEW"},uuid:"review"},Ie=[Ee,Se,ke],Te=t(32080),we=t(22286),Ce=t(79500),Me=t(8916),Ae=t(42122),De=t(72619),Ne=t(3917);function Le(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Le(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Le(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ue=function(e){var n=e.creatingWithLimitation,t=e.errors,o=e.fetchPipelineSchedule,s=e.onCancel,d=e.pipeline,P=e.pipelineSchedule,_=e.setErrors,C=e.variables,M=e.useCreateScheduleMutation,R=(0,ye.Z)().project,U=(0,c.useRef)(null),G=(0,f.useRouter)(),V=(0,ge.qB)(),W=null===d||void 0===d?void 0:d.uuid,Y=(0,c.useMemo)((function(){return null===P||void 0===P?void 0:P.id}),[P]),K=(null===d||void 0===d?void 0:d.type)===ue.qL.STREAMING,J=(0,c.useMemo)((function(){var e;return null===P||void 0===P||null===(e=P.variables)||void 0===e?void 0:e[oe.PN]}),[P]),X=(0,c.useState)(J?"string"===typeof J&&(0,me.Pb)(J)?JSON.stringify(J):J:null),Q=X[0],$=X[1],ee=(0,c.useState)([]),ne=ee[0],te=ee[1],ve=(0,c.useState)(!0),he=ve[0],xe=ve[1],Le=(0,c.useState)(!1),Ue=Le[0],He=Le[1],Fe=(0,c.useState)(!1),qe=Fe[0],ze=Fe[1],Be=(0,c.useState)(null),Ge=Be[0],Ve=Be[1],We=(0,c.useState)({}),Ye=We[0],Ke=We[1],Je=(0,c.useState)(null),Xe=Je[0],Qe=Je[1],$e=(0,c.useState)(null),en=$e[0],nn=$e[1],tn=(0,c.useState)(!1),rn=tn[0],ln=tn[1],on=(0,c.useState)(null),un=on[0],cn=on[1],sn=be.ZP.client_pages.detail("pipeline_schedule:create",{"pipeline_schedules[]":[Y],"pipelines[]":[W]},{},{key:"Triggers/Edit/".concat(W,"/").concat(Y),pauseFetch:!W||!Y}).data,an=((0,c.useMemo)((function(){return null===sn||void 0===sn?void 0:sn.client_page}),[sn]),(0,c.useState)(Ie[0].uuid)),dn=an[0],pn=an[1],vn=(0,c.useMemo)((function(){var e;return!(null===R||void 0===R||null===(e=R.features)||void 0===e||!e[se.d.INTERACTIONS])}),[null===R||void 0===R?void 0:R.features]),hn=(0,c.useMemo)((function(){return!Y&&n}),[n,Y]),fn=be.ZP.pipeline_interactions.detail(vn&&W,{filter_for_permissions:1}).data,mn=be.ZP.interactions.pipeline_interactions.list(vn&&W).data,jn=(0,c.useMemo)((function(){return(null===fn||void 0===fn?void 0:fn.pipeline_interaction)||{}}),[fn]),gn=(0,c.useMemo)((function(){return(null===mn||void 0===mn?void 0:mn.interactions)||[]}),[mn]),xn=(0,c.useMemo)((function(){var e;return vn&&(null===(e=Object.keys((null===jn||void 0===jn?void 0:jn.blocks)||{}))||void 0===e?void 0:e.length)>=1}),[vn,jn]),Zn=(0,c.useMemo)((function(){return!!Y&&xn}),[xn,Y]),bn=(0,c.useMemo)((function(){var e,n={};return null===jn||void 0===jn||null===(e=jn.permissions)||void 0===e||e.forEach((function(e){var t=e.triggers;null===t||void 0===t||t.forEach((function(e){var t=e.schedule_interval,i=e.schedule_type;null!==n&&void 0!==n&&n[i]||(n[i]={}),t&&(n[i][t]=!0)}))})),n}),[jn]),yn=(0,c.useMemo)((function(){return(0,Me.wx)(C,(function(e){return e.uuid===ce.C}))}),[C]),On=(0,c.useMemo)((function(){return Xe||{}}),[Xe]),Pn=On.description,_n=On.name,Sn=On.schedule_interval,En=On.schedule_type,kn=On.settings,In=void 0===kn?{}:kn,Tn=On.start_time,wn=On.tags,Cn=On.variables,Mn=void 0===Cn?{}:Cn;(0,c.useEffect)((function(){!Ge&&In&&Ve(In)}),[Ge,In]);var An=(0,c.useState)(null),Dn=An[0],Nn=An[1],Ln=(0,c.useState)({hour:"00",minute:"00"}),Rn=Ln[0],Un=Ln[1],Hn=(0,c.useState)({dayOfMonth:null,dayOfWeek:null,hour:null,minute:null,second:null}),Fn=Hn[0],qn=Hn[1],zn=be.ZP.event_rules.detail(oe.Xm.EVENT===En?"aws":null).data,Bn=(0,c.useMemo)((function(){var e;return(null===zn||void 0===zn||null===(e=zn.event_rule)||void 0===e?void 0:e.rules)||[]}),[zn]),Gn=(0,c.useMemo)((function(){return(0,N.HK)(Bn,(function(e){return e.name}))}),[Bn]),Vn=(0,h.Db)(be.ZP.pipeline_schedules.useUpdate(Y),{onSuccess:function(e){return(0,De.wD)(e,{callback:function(){null===o||void 0===o||o(),G.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(W,"/triggers/").concat(Y))},onErrorCallback:function(e,n){return _({errors:n,response:e})}})}}),Wn=(0,l.Z)(Vn,2),Yn=Wn[0],Kn=Wn[1].isLoading,Jn=(0,c.useMemo)((function(){return Mn||{}}),[Mn]);(0,c.useEffect)((function(){if(Tn){var e=(0,Ce.a)(Tn,{localTimezone:V});Nn(null===e||void 0===e?void 0:e.date),Un(null===e||void 0===e?void 0:e.time);var n=p()(Tn).utc();qn({dayOfMonth:n.date(),dayOfWeek:n.day(),hour:n.hours(),minute:n.minutes(),second:n.seconds()})}else{var t=new Date;Nn(t),Un(V?{hour:(0,Ne.lJ)(String(t.getHours())),minute:(0,Ne.lJ)(String(t.getMinutes()))}:{hour:(0,Ne.lJ)(String(t.getUTCHours())),minute:(0,Ne.lJ)(String(t.getUTCMinutes()))})}}),[V,Tn]),(0,c.useEffect)((function(){Jn&&Object.keys(Jn).length>0&&xe(!0)}),[Jn]),(0,c.useEffect)((function(){Ke(he?null===yn||void 0===yn?void 0:yn.reduce((function(e,n){var t=n.uuid,i=n.value;return Re(Re({},e),{},(0,r.Z)({},t,Jn[t]||i))}),{}):null)}),[yn,he,Jn]);var Xn=(0,c.useMemo)((function(){return(0,je._U)(Sn)}),[Sn]),Qn=(0,c.useMemo)((function(){return Xn&&un?a().toString(un,{throwExceptionOnParseError:!1}):""}),[un,Xn]),$n=(0,c.useMemo)((function(){return null===Qn||void 0===Qn?void 0:Qn.toLowerCase().includes("error")}),[Qn]);(0,c.useEffect)((function(){if(P&&!Xe){if(te(P.event_matchers),(0,je._U)(null===P||void 0===P?void 0:P.schedule_interval)){var e=V?(0,je.lO)(null===P||void 0===P?void 0:P.schedule_interval):null===P||void 0===P?void 0:P.schedule_interval;cn(e),Qe(Re(Re({},P),{},{schedule_interval:"custom"}))}else Qe(K?Re(Re({},P),{},{schedule_interval:oe.U5.ONCE}):P);var n=P.sla;if(n){He(!0);var t=(0,je.gU)(n),i=t.time,r=t.unit;Qe((function(e){return Re(Re({},e),{},{slaAmount:i,slaUnit:r})}))}}}),[V,K,P,Xe,Sn]);var et=(0,c.useMemo)((function(){return!(null===Ge||void 0===Ge||!Ge.landing_time_enabled)}),[Ge]),nt=(0,c.useMemo)((function(){return oe.Xm.TIME!==En||![oe.U5.DAILY,oe.U5.HOURLY,oe.U5.MONTHLY,oe.U5.WEEKLY].includes(Sn)}),[Sn,En]),tt=(0,c.useMemo)((function(){return et&&!nt}),[nt,et]),it=(0,c.useCallback)((function(){var e=Re(Re({},(0,Ae.GL)(Xe,["name","description","schedule_type","tags"])),{},{event_matchers:[],schedule_interval:null,start_time:null,variables:(0,Me.e7)(Re(Re({},Ye),Q?(0,r.Z)({},oe.PN,Q):{}))});if(tt){var n=Fn.dayOfMonth,t=Fn.dayOfWeek,i=Fn.hour,l=Fn.minute,o=Fn.second,u=p()("2023-07-01").utc();(0,me.HW)(n)&&(u=u.date(n)),(0,me.HW)(t)&&(u=u.day(t)),(0,me.HW)(i)&&(u=u.hours(i)),(0,me.HW)(l)&&(u=u.minutes(l)),(0,me.HW)(o)&&(u=u.seconds(o)),e.schedule_interval=Xn?un:Xe.schedule_interval,e.start_time=u.toISOString()}else oe.Xm.EVENT===Xe.schedule_type?e.event_matchers=ne:(e.schedule_interval=Xn?V&&!$n&&un?(0,je.lO)(un,!0):un:Xe.schedule_interval,e.start_time=Dn&&null!==Rn&&void 0!==Rn&&Rn.hour&&null!==Rn&&void 0!==Rn&&Rn.minute?(0,je.XM)(Dn,Rn,{convertToUtc:V,includeSeconds:!0,localTimezone:V}):null);if(Ue){var c=null===Xe||void 0===Xe?void 0:Xe.slaAmount,s=null===Xe||void 0===Xe?void 0:Xe.slaUnit;if(!c||isNaN(c)||!s)return void v.Am.error("Please enter a valid SLA",{position:v.Am.POSITION.BOTTOM_RIGHT,toastId:"sla_error"});e.sla=(0,je.vJ)(c,s)}else null!==P&&void 0!==P&&P.sla&&(e.sla=0);e.settings=Ge,Yn({pipeline_schedule:Re(Re({},e),{},{variables:en||(null===e||void 0===e?void 0:e.variables)})})}),[Q,$n,un,Dn,V,Ue,ne,Xn,Fn,P,Ye,Xe,Ge,tt,Rn,Yn,en]),rt=(0,c.useMemo)((function(){if(null===P||void 0===P||!P.runtime_average)return"Trigger doesn\u2019t have enough history to estimate runtime.";var e=Number(null===P||void 0===P?void 0:P.runtime_average),n=Math.max(Math.floor(e/3600),0),t=Math.max(Math.floor((e-60*n*60)/60),0),i=Math.max(Math.floor(e-(60*n*60+60*t)),0),r=[];return n>=1&&r.push((0,me._6)("hour",n,!0)),t>=1&&r.push((0,me._6)("minute",t,!0)),i>=1&&r.push((0,me._6)("second",i,!0)),r.join(" ")}),[P]),lt=(0,c.useMemo)((function(){if(!tt)return null;var e=[(0,L.jsxs)(k.Z,{mr:1,children:[(0,L.jsx)(k.Z,{mb:1,children:(0,L.jsx)(T.ZP,{bold:!0,default:!0,small:!0,children:"Minute"})}),(0,L.jsxs)(ae.Z,{compact:!0,monospace:!0,onChange:function(e){qn((function(n){return Re(Re({},n),{},{minute:e.target.value})}))},value:(null===Fn||void 0===Fn?void 0:Fn.minute)||"",children:[(0,L.jsx)("option",{value:""}),(0,N.w6)(60).map((function(e,n){return(0,L.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Minute"),(0,L.jsxs)(k.Z,{mr:1,children:[(0,L.jsx)(k.Z,{mb:1,children:(0,L.jsx)(T.ZP,{bold:!0,default:!0,small:!0,children:"Second"})}),(0,L.jsxs)(ae.Z,{compact:!0,monospace:!0,onChange:function(e){qn((function(n){return Re(Re({},n),{},{second:e.target.value})}))},value:(null===Fn||void 0===Fn?void 0:Fn.second)||"",children:[(0,L.jsx)("option",{value:""}),(0,N.w6)(60).map((function(e,n){return(0,L.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Second")];return[oe.U5.DAILY,oe.U5.MONTHLY,oe.U5.WEEKLY].includes(Sn)&&e.unshift((0,L.jsxs)(k.Z,{mr:1,children:[(0,L.jsx)(k.Z,{mb:1,children:(0,L.jsx)(T.ZP,{bold:!0,default:!0,small:!0,children:"Hour"})}),(0,L.jsxs)(ae.Z,{compact:!0,monospace:!0,onChange:function(e){qn((function(n){return Re(Re({},n),{},{hour:e.target.value})}))},value:(null===Fn||void 0===Fn?void 0:Fn.hour)||"",children:[(0,L.jsx)("option",{value:""}),(0,N.w6)(24).map((function(e,n){return(0,L.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Hour")),oe.U5.WEEKLY===Sn?e.unshift((0,L.jsxs)(k.Z,{mr:1,children:[(0,L.jsx)(k.Z,{mb:1,children:(0,L.jsx)(T.ZP,{bold:!0,default:!0,small:!0,children:"Day of the week"})}),(0,L.jsxs)(ae.Z,{compact:!0,monospace:!0,onChange:function(e){qn((function(n){return Re(Re({},n),{},{dayOfWeek:e.target.value})}))},value:(null===Fn||void 0===Fn?void 0:Fn.dayOfWeek)||"",children:[(0,L.jsx)("option",{value:""}),(0,L.jsx)("option",{value:6,children:"Sunday"}),(0,L.jsx)("option",{value:0,children:"Monday"}),(0,L.jsx)("option",{value:1,children:"Tuesday"}),(0,L.jsx)("option",{value:2,children:"Wednesday"}),(0,L.jsx)("option",{value:3,children:"Thursday"}),(0,L.jsx)("option",{value:4,children:"Friday"}),(0,L.jsx)("option",{value:5,children:"Saturday"})]})]},"Day of the week")):oe.U5.MONTHLY===Sn&&e.unshift((0,L.jsxs)(k.Z,{mr:1,children:[(0,L.jsx)(k.Z,{mb:1,children:(0,L.jsx)(T.ZP,{bold:!0,default:!0,small:!0,children:"Day of the month"})}),(0,L.jsxs)(ae.Z,{compact:!0,monospace:!0,onChange:function(e){qn((function(n){return Re(Re({},n),{},{dayOfMonth:e.target.value})}))},value:(null===Fn||void 0===Fn?void 0:Fn.dayOfMonth)||"",children:[(0,L.jsx)("option",{value:""}),(0,N.w6)(31).map((function(e,n){return(0,L.jsx)("option",{value:n+1,children:n+1>=10?String(n+1):"0".concat(n+1)},n+1)}))]})]},"Day of the month")),(0,L.jsx)(S.ZP,{children:e})}),[Fn,Sn,tt]),ot=(0,c.useMemo)((function(){return[(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.KJ,{default:!0}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"Trigger name"})]},"trigger_name"),(0,L.jsx)(w.Z,{monospace:!0,onChange:function(e){e.preventDefault(),Qe((function(n){return Re(Re({},n),{},{name:e.target.value})}))},placeholder:"Name this trigger",value:_n},"trigger_name_input")]}),[_n]),ut=(0,c.useMemo)((function(){return[(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.KJ,{default:!0}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"Trigger description"})]},"trigger_description"),(0,L.jsx)(w.Z,{monospace:!0,onChange:function(e){e.preventDefault(),Qe((function(n){return Re(Re({},n),{},{description:e.target.value})}))},placeholder:"Description",value:Pn},"trigger_description_input")]}),[Pn]),ct=(0,c.useMemo)((function(){var e=[ot,ut,[(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.Pf,{default:!0,size:1.5*A.iI}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"Frequency"})]},"frequency"),(0,L.jsxs)("div",{children:[(0,L.jsxs)(ae.Z,{monospace:!0,onChange:function(e){e.preventDefault();var n=e.target.value;Qe((function(e){return Re(Re({},e),{},{schedule_interval:n})}))},placeholder:"Choose the frequency to run",value:Sn,children:[Object.values(oe.U5).reduce((function(e,n){var t;return!hn||null!==bn&&void 0!==bn&&null!==(t=bn[oe.Xm.TIME])&&void 0!==t&&t[n]?e.concat((0,L.jsx)("option",{value:n,children:n.substring(1)},n)):e}),[]),!hn&&(0,L.jsx)("option",{value:"custom",children:"custom"},"custom")]}),!hn&&(0,L.jsx)(k.Z,{mt:1,p:1,children:(0,L.jsxs)(T.ZP,{muted:!0,small:!0,children:["If you don't see the frequency option you need, select ",(0,L.jsx)(T.ZP,{inline:!0,monospace:!0,small:!0,children:"custom"})," and enter CRON syntax."]})})]},"frequency_input")]];return hn||e.push([(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.rs,{default:!0,size:1.5*A.iI}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"Enable landing time"})]},"frequency"),(0,L.jsxs)("div",{children:[(0,L.jsx)(pe.Z,{checked:et,disabled:nt,onCheck:function(){Ve((function(e){return Re(Re({},e),{},{landing_time_enabled:!et})}))}}),(0,L.jsxs)(k.Z,{mt:1,p:1,children:[nt&&(0,L.jsxs)(T.ZP,{muted:!0,small:!0,children:["In order to enable landing time, the trigger\u2019s frequency must be ",(0,L.jsx)(T.ZP,{inline:!0,monospace:!0,small:!0,children:oe.U5.HOURLY}),", ",(0,L.jsx)(T.ZP,{inline:!0,monospace:!0,small:!0,children:oe.U5.DAILY}),", ",(0,L.jsx)(T.ZP,{inline:!0,monospace:!0,small:!0,children:oe.U5.WEEKLY}),", or ",(0,L.jsx)(T.ZP,{inline:!0,monospace:!0,small:!0,children:oe.U5.MONTHLY}),"."]}),!nt&&(0,L.jsx)(T.ZP,{muted:!0,small:!0,children:"Instead of starting at a specific time, this trigger will schedule pipeline runs at a time where it will finish by the specified time below."})]})]},"frequency_input")]),tt&&e.push([(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.Pf,{default:!0,size:1.5*A.iI}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"Average runtime"})]},"runtime_average"),(0,L.jsx)(S.ZP,{alignItems:"center",style:{minHeight:"".concat(5.75*A.iI,"px")},children:(0,L.jsx)(T.ZP,{monospace:!0,children:rt})},"runtime_average_value")]),e.push([(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.aw,{default:!0,size:1.5*A.iI}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsxs)(T.ZP,{default:!0,children:[tt&&"Pipeline complete by",!tt&&"Start date and time"]})]},"start_time"),tt?lt:(0,L.jsxs)("div",{style:{minHeight:"".concat(5.75*A.iI,"px")},children:[!rn&&(0,L.jsx)(w.Z,{monospace:!0,onClick:function(){return ln((function(e){return!e}))},placeholder:"YYYY-MM-DD HH:MM",value:Dn?(0,je.XM)(Dn,Rn,{localTimezone:V}):""}),(0,L.jsx)("div",{style:{width:"400px"},children:(0,L.jsx)(b.Z,{disableEscape:!0,onClickOutside:function(){return ln(!1)},open:rn,style:{position:"relative"},children:(0,L.jsx)(x.Z,{localTime:V,selectedDate:Dn,selectedTime:Rn,setSelectedDate:Nn,setSelectedTime:Un,topPosition:!0})})})]},"start_time_input")]),K&&e.splice(2,2),Xn&&e.splice(2,0,[(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.EK,{default:!0,size:1.5*A.iI}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"Cron expression"})]},"cron_expression"),(0,L.jsxs)("div",{children:[(0,L.jsx)(w.Z,{monospace:!0,onChange:function(e){e.preventDefault(),cn(e.target.value)},placeholder:"* * * * *",value:un}),(0,L.jsxs)(k.Z,{mt:1,p:1,children:[(0,L.jsx)(T.ZP,{monospace:!0,xsmall:!0,children:"[minute] [hour] [day(month)] [month] [day(week)]"}),(0,L.jsx)(k.Z,{mb:"2px"}),un?(0,L.jsx)(T.ZP,{danger:$n,muted:!0,small:!0,children:$n?"Invalid cron expression. Please check the cron syntax.":(0,L.jsxs)(L.Fragment,{children:['"',Qn,'"']})}):null,V&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(T.ZP,{bold:!0,inline:!0,small:!0,warning:!0,children:"Note:\xa0"}),(0,L.jsxs)(T.ZP,{inline:!0,small:!0,children:["If you have the display_local_timezone setting enabled, the local cron expression above will match your local timezone only",(0,L.jsx)("br",{}),"if the minute and hour values are single values without any special characters, such as the comma, hyphen, or slash.",(0,L.jsx)("br",{}),"You can still use cron expressions with special characters for the minute/hour values, but it will be based in UTC time."]})]})]})]},"cron_expression_input")]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(k.Z,{mb:2,px:A.cd,children:(0,L.jsx)(E.Z,{children:"Settings"})}),(0,L.jsx)(q.Z,{light:!0,short:!0}),(0,L.jsx)(I.Z,{columnFlex:[null,1],rows:e})]})}),[$n,un,Dn,V,hn,Xn,K,nt,et,lt,bn,Qn,rt,Sn,rn,tt,Rn,ot,ut]),st=(0,c.useCallback)((function(e,n){te((function(t){return Object.entries(n).forEach((function(n){var i=(0,l.Z)(n,2),r=i[0],o=i[1];t[e][r]=o})),(0,i.Z)(t)}))}),[te]),at=(0,c.useMemo)((function(){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(k.Z,{mb:A.cd,px:A.cd,children:(0,L.jsx)(E.Z,{children:"Settings"})}),(0,L.jsx)(q.Z,{light:!0,short:!0}),(0,L.jsx)(I.Z,{columnFlex:[null,1],rows:[ot,ut]}),(0,L.jsxs)(k.Z,{mb:2,mt:5,px:A.cd,children:[(0,L.jsx)(E.Z,{children:"Events"}),(0,L.jsxs)(T.ZP,{muted:!0,children:["Add 1 or more event that will trigger this pipeline to run.",(0,L.jsx)("br",{}),"If you add more than 1 event, this pipeline will trigger if any of the events are received."]}),(0,L.jsxs)(k.Z,{mt:A.Mq,children:[(0,L.jsx)(T.ZP,{bold:!0,large:!0,children:"AWS events"}),(0,L.jsxs)(T.ZP,{muted:!0,children:["In order to retrieve all the possible AWS events you can trigger your pipeline from,",(0,L.jsx)("br",{}),"you\u2019ll need to set 3 environment variables (",(0,L.jsx)(B.Z,{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html",openNewWindow:!0,underline:!0,children:"more info here"}),"):"]}),(0,L.jsx)(k.Z,{mt:1,children:(0,L.jsxs)(ie,{monospace:!0,ordered:!0,children:[(0,L.jsx)(T.ZP,{monospace:!0,children:"AWS_REGION_NAME"}),(0,L.jsx)(T.ZP,{monospace:!0,children:"AWS_ACCESS_KEY_ID"}),(0,L.jsx)(T.ZP,{monospace:!0,children:"AWS_SECRET_ACCESS_KEY"})]})})]})]}),(0,L.jsx)(q.Z,{light:!0,short:!0}),(null===ne||void 0===ne?void 0:ne.length)>=1&&(0,L.jsx)(I.Z,{alignTop:!0,columnFlex:[1,1,2,null],columns:[{uuid:"Provider"},{uuid:"Event"},{uuid:"Pattern"},{label:function(){return""},uuid:"delete"}],rows:null===ne||void 0===ne?void 0:ne.map((function(e,n){var t=e.event_type,i=e.name,r=e.pattern,l=e.id||"".concat(t,"-").concat(i,"-").concat(n,"-").concat(JSON.stringify(r)),o=[];return r&&JSON.stringify(r,null,2).split("\n").forEach((function(e){o.push("    ".concat(e))})),[(0,L.jsx)(ae.Z,{monospace:!0,onChange:function(e){return st(n,{event_type:e.target.value})},placeholder:"Event provider",value:t||"",children:F.S5.map((function(e){var n=e.label,t=e.uuid;return(0,L.jsx)("option",{value:t,children:n()},t)}))},"event-provider-".concat(l)),(0,L.jsx)(ae.Z,{monospace:!0,onChange:function(e){var t,i=e.target.value,r=null===(t=Gn[i])||void 0===t?void 0:t.event_pattern;st(n,{name:i,pattern:r?JSON.parse(r):null})},placeholder:"Event name",value:i,children:Bn.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))},"event-name-".concat(l)),r&&(0,L.jsx)(y.Z,{language:"json",small:!0,source:o.join("\n")}),(0,L.jsx)(j.ZP,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return te((function(e){return(0,N.oM)(e,n)}))},children:(0,L.jsx)(fe.rF,{default:!0,size:2*A.iI})},"remove_event")]}))}),(0,L.jsx)(k.Z,{p:A.cd,children:(0,L.jsx)(j.ZP,{beforeIcon:(0,L.jsx)(fe.mm,{size:2*A.iI}),onClick:function(){return te((function(e){return e.concat({})}))},outline:!0,children:"Add event matcher"})})]})}),[ne,Bn,Gn,ot,ut,st]),dt=(0,c.useMemo)((function(){var e=(0,je.M8)(P,qe);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(k.Z,{mb:A.cd,px:A.cd,children:(0,L.jsx)(E.Z,{children:"Settings"})}),(0,L.jsx)(q.Z,{light:!0,short:!0}),(0,L.jsx)(I.Z,{columnFlex:[null,1],rows:[ot,ut]}),(0,L.jsxs)(k.Z,{mb:2,mt:5,px:A.cd,children:[(0,L.jsx)(E.Z,{children:"Endpoint"}),(0,L.jsxs)(T.ZP,{muted:!0,children:["Make a ",(0,L.jsx)(T.ZP,{bold:!0,inline:!0,monospace:!0,children:"POST"})," request to the following endpoint:"]}),(0,L.jsx)(k.Z,{mt:A.Mq,children:(0,L.jsx)(O.Z,{copiedText:e,linkText:e,monospace:!0,withCopyIcon:!0})}),(0,L.jsx)(k.Z,{mt:A.Mq,children:(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(k.Z,{mr:1,children:(0,L.jsx)(pe.Z,{checked:qe,onCheck:function(){return ze(!qe)}})}),(0,L.jsx)(T.ZP,{muted:!0,children:"Show alternative endpoint to pass token in headers"})]})})]}),qe&&(0,L.jsxs)(k.Z,{mb:2,mt:5,px:A.cd,children:[(0,L.jsx)(E.Z,{children:"Headers"}),(0,L.jsx)(T.ZP,{muted:!0,children:"You will need to include the following headers in your request to authenticate with the server."}),(0,L.jsx)(k.Z,{mt:A.Mq,children:(0,L.jsx)(O.Z,{copiedText:"Content-Type: application/json\n  Authorization: Bearer ".concat(null===P||void 0===P?void 0:P.token,"\n  "),withCopyIcon:!0,children:(0,L.jsx)(y.Z,{language:"json",small:!0,source:"\n      Content-Type: application/json\n      Authorization: Bearer ".concat(null===P||void 0===P?void 0:P.token,"\n  ")})})})]}),(0,L.jsxs)(k.Z,{mb:2,mt:5,px:A.cd,children:[(0,L.jsx)(E.Z,{children:"Payload"}),(0,L.jsx)(T.ZP,{muted:!0,children:"You can optionally include runtime variables in your request payload. These runtime variables are accessible from within each pipeline block."}),(0,L.jsx)(k.Z,{mt:A.Mq,children:(0,L.jsx)(O.Z,{copiedText:'{\n  "pipeline_run": {\n    "variables": {\n      "key1": "value1",\n      "key2": "value2"\n    }\n  }\n}\n',withCopyIcon:!0,children:(0,L.jsx)(y.Z,{language:"json",small:!0,source:'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\n'})})})]}),(0,L.jsxs)(k.Z,{mb:2,mt:5,px:A.cd,children:[(0,L.jsx)(E.Z,{children:"Sample cURL command"}),(0,L.jsx)(k.Z,{mt:A.Mq,children:(0,L.jsx)(y.Z,{language:"bash",small:!0,source:qe?"\n    curl -X POST ".concat(e," \\\n      --header 'Content-Type: application/json' \\\n      --header 'Authorization: Bearer ").concat(null===P||void 0===P?void 0:P.token,'\' \\\n      --data \'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\'\n  '):"\n    curl -X POST ".concat(e,' \\\n      --header \'Content-Type: application/json\' \\\n      --data \'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\'\n')})})]})]})}),[P,ze,ut,ot,qe]),pt=!En||oe.Xm.TIME===En&&!(K&&Dn||!K&&Dn&&Sn)||oe.Xm.EVENT===En&&(!(null!==ne&&void 0!==ne&&ne.length)||!ne.every((function(e){var n=e.event_type,t=e.name;return n&&t}))),vt=(0,c.useMemo)((function(){var e;return(null===d||void 0===d||null===(e=d.blocks)||void 0===e?void 0:e.filter((function(e){var n=e.type;return Oe.tf.DBT===n})))||[]}),[d]),ht=(0,c.useMemo)((function(){return null!==d&&void 0!==d&&d.blocks?(0,Te.n)(d):null}),[d]),ft=(0,c.useMemo)((function(){var e,n;return(0,L.jsxs)(k.Z,{py:A.cd,children:[(0,L.jsxs)(k.Z,{mb:A.HN,px:A.cd,children:[(0,L.jsx)(E.Z,{children:"Run settings"}),(0,L.jsxs)(k.Z,{mt:A.Mq,children:[!K&&(0,L.jsxs)(k.Z,{mb:A.Mq,children:[(0,L.jsx)(T.ZP,{children:"Set a timeout for each run of this trigger (optional)"}),(0,L.jsx)(k.Z,{mb:1}),(0,L.jsx)(w.Z,{label:"Timeout (in seconds)",onChange:function(e){return Ve((function(n){return Re(Re({},n),{},{timeout:e.target.value})}))},primary:!0,setContentOnMount:!0,type:"number",value:null===Ge||void 0===Ge?void 0:Ge.timeout})]}),(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(k.Z,{mr:2,children:(0,L.jsx)(pe.Z,{checked:Ue,onCheck:function(e){He(e),e||Qe((function(e){return Re(Re({},e),{},{slaAmount:0})}))}})}),(0,L.jsx)(T.ZP,{default:!0,monospace:!0,children:"Configure trigger SLA"})]}),Ue&&(0,L.jsx)(I.Z,{columnFlex:[null,1],rows:[[(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(fe.aw,{default:!0,size:1.5*A.iI}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:!0,children:"SLA"})]},"sla_detail"),(0,L.jsxs)(S.ZP,{children:[(0,L.jsx)(z.Z,{flex:1,children:(0,L.jsx)(w.Z,{fullWidth:!0,monospace:!0,noBorder:!0,onChange:function(e){e.preventDefault(),Qe((function(n){return Re(Re({},n),{},{slaAmount:e.target.value})}))},placeholder:"Time",value:null===Xe||void 0===Xe?void 0:Xe.slaAmount})}),(0,L.jsx)(z.Z,{flex:1,children:(0,L.jsx)(ae.Z,{fullWidth:!0,monospace:!0,noBorder:!0,onChange:function(e){e.preventDefault(),Qe((function(n){return Re(Re({},n),{},{slaUnit:e.target.value})}))},placeholder:"Select time unit",small:!0,value:null===Xe||void 0===Xe?void 0:Xe.slaUnit,children:Object.keys(je.tL).map((function(e){return(0,L.jsx)("option",{value:e,children:"".concat(e,"(s)")},e)}))})})]},"sla_input_detail")]]})]}),(0,L.jsx)(k.Z,{mt:A.Mq,children:(0,L.jsx)(S.ZP,{alignItems:"center",children:(0,L.jsx)(Z.Z,{checked:null===Ge||void 0===Ge?void 0:Ge.allow_blocks_to_fail,label:"Keep running pipeline even if blocks fail",onClick:function(){return Ve((function(e){return Re(Re({},e),{},{allow_blocks_to_fail:!(null!==Ge&&void 0!==Ge&&Ge.allow_blocks_to_fail)})}))}})})}),oe.Xm.TIME===En&&(0,L.jsx)(k.Z,{mt:A.Mq,children:(0,L.jsx)(S.ZP,{alignItems:"center",children:(0,L.jsx)(Z.Z,{checked:null===Ge||void 0===Ge?void 0:Ge.skip_if_previous_running,label:"Skip run if previous run still in progress",onClick:function(){return Ve((function(e){return Re(Re({},e),{},{skip_if_previous_running:!(null!==Ge&&void 0!==Ge&&Ge.skip_if_previous_running)})}))}})})})]}),(0,L.jsxs)(k.Z,{mb:A.HN,children:[(0,L.jsxs)(k.Z,{px:A.cd,children:[(0,L.jsx)(E.Z,{children:"Runtime variables"}),(0,Ae.Qr)(yn)&&(0,L.jsxs)(k.Z,{mt:1,children:[(0,L.jsx)(T.ZP,{default:!0,children:"This pipeline has no runtime variables."}),(0,L.jsx)(u(),{as:"/pipelines/".concat(W,"/edit?sideview=variables"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,L.jsx)(B.Z,{primary:!0,children:"Click here"})})," ",(0,L.jsx)(T.ZP,{default:!0,inline:!0,children:"to add variables to this pipeline."})]})]}),(0,L.jsx)(k.Z,{mt:A.Mq,children:(0,L.jsx)(re.Z,{enableVariablesOverwrite:!0,originalVariables:null===P||void 0===P?void 0:P.variables,runtimeVariables:Ye,setRuntimeVariables:Ke})})]}),ht&&(null===(e=Object.keys(ht||{}))||void 0===e?void 0:e.length)>=1&&(0,L.jsxs)(k.Z,{mb:A.HN,children:[(0,L.jsx)(k.Z,{px:A.cd,children:(0,L.jsx)(E.Z,{children:"Override bookmark values"})}),(0,L.jsx)(m.Z,{bookmarkValues:Q,originalBookmarkValues:null===P||void 0===P||null===(n=P.variables)||void 0===n?void 0:n[oe.PN],pipeline:d,setBookmarkValues:$})]}),(null===vt||void 0===vt?void 0:vt.length)>=1&&(0,L.jsx)(k.Z,{mb:A.HN,children:(0,L.jsx)(H,{blocks:vt,updateVariables:Ke,variables:Re(Re({},Jn),Ye)})})]})}),[ht,Q,vt,Ue,yn,K,he,d,W,Ye,Xe,En,Jn,$,He,xe,Ke,Ge]),mt=be.ZP.tags.list().data,jt=(0,c.useMemo)((function(){return((null===mt||void 0===mt?void 0:mt.tags)||[]).filter((function(e){var n=e.uuid;return!(null!==wn&&void 0!==wn&&wn.includes(n))}))}),[mt,wn]),gt=(0,c.useMemo)((function(){return(0,je.ri)(K)}),[K]),xt=(0,c.useMemo)((function(){return(0,L.jsx)(Ze,{containerRef:U,date:Dn,interactions:gn,pipeline:d,pipelineInteraction:jn,pipelineSchedule:Xe,setVariables:function(e){Qe((function(n){var t=Re({},e((null===n||void 0===n?void 0:n.variables)||{})),i=Re({},t);return null===gn||void 0===gn||gn.forEach((function(e){Object.entries((null===e||void 0===e?void 0:e.variables)||{}).forEach((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1].types;i&&t in i&&(i[t]=(0,we.M)(i[t],r))}))})),nn(i),Re(Re({},n),{},{variables:t})}))},showSummary:ke.uuid===dn,time:Rn,triggerTypes:gt,variables:null===Xe||void 0===Xe?void 0:Xe.variables})}),[U,Dn,gn,d,jn,Xe,dn,Qe,nn,Rn,gt]),Zt=(0,c.useMemo)((function(){return oe.fq.ACTIVE===(null===Xe||void 0===Xe?void 0:Xe.status)}),[Xe]),bt=M?null===M||void 0===M?void 0:M((function(e){return G.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(null===d||void 0===d?void 0:d.uuid,"/triggers/").concat(e))})):[null,{isLoading:!1}],yt=(0,l.Z)(bt,2),Ot=yt[0],Pt=yt[1].isLoading,_t=(0,c.useCallback)((function(){null===Ot||void 0===Ot||Ot({pipeline_schedule:Re(Re({},Xe),{},{variables:en||(null===Xe||void 0===Xe?void 0:Xe.variables)})})}),[Ot,en,Xe]),St=(0,c.useMemo)((function(){var e,n;return Y?(e=(0,L.jsx)(j.ZP,{linkProps:{as:"/pipelines/".concat(W,"/triggers/").concat(Y),href:"/pipelines/[pipeline]/triggers/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Cancel and go back"}),n=(0,L.jsx)(j.ZP,{onClick:it,primary:!0,children:"Save trigger"})):Ee.uuid===dn?(e=(0,L.jsx)(j.ZP,{onClick:function(){return null===s||void 0===s?void 0:s()},secondary:!0,children:"Cancel and go back"}),n=(0,L.jsx)(j.ZP,{afterIcon:(0,L.jsx)(fe.Kw,{}),onClick:function(){return pn(Se.uuid)},primary:!0,children:"Next: Customize"})):Se.uuid===dn?(e=(0,L.jsx)(j.ZP,{beforeIcon:(0,L.jsx)(fe.Hd,{}),onClick:function(){return pn(Ee.uuid)},secondary:!0,children:"Back: Settings"}),n=(0,L.jsx)(j.ZP,{afterIcon:(0,L.jsx)(fe.Kw,{}),onClick:function(){return pn(ke.uuid)},primary:!0,children:"Next: Review"})):ke.uuid===dn&&(e=(0,L.jsx)(j.ZP,{beforeIcon:(0,L.jsx)(fe.Hd,{}),onClick:function(){return pn(Se.uuid)},secondary:!0,children:"Back: Customize"}),n=(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(j.ZP,{beforeIcon:(0,L.jsx)(fe.Bf,{}),loading:Pt,onClick:function(){return _t()},primary:!0,children:Y?"Save trigger":"Create trigger"}),!Y&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(k.Z,{mr:A.cd}),(0,L.jsx)(pe.Z,{checked:Zt,compact:!0,onCheck:function(e){return Qe((function(n){return Re(Re({},n),{},{status:e(Zt)?oe.fq.ACTIVE:oe.fq.INACTIVE})}))}}),(0,L.jsx)(k.Z,{mr:1}),(0,L.jsx)(T.ZP,{default:Zt,muted:!Zt,small:!0,children:"Set trigger to be active immediately after creating"})]})]})),(0,L.jsx)(k.Z,{p:A.cd,children:(0,L.jsxs)(S.ZP,{alignItems:"center",children:[e,e&&n&&(0,L.jsx)(k.Z,{mr:A.cd}),n]})})}),[_t,Pt,Zt,s,it,Y,W,dn,pn]),Et=(0,c.useMemo)((function(){var e,n,t,i,r,l,o;return"undefined"===typeof(null===d||void 0===d||null===(e=d.settings)||void 0===e||null===(n=e.triggers)||void 0===n?void 0:n.save_in_code_automatically)?null===R||void 0===R||null===(t=R.pipelines)||void 0===t||null===(i=t.settings)||void 0===i||null===(r=i.triggers)||void 0===r?void 0:r.save_in_code_automatically:null===d||void 0===d||null===(l=d.settings)||void 0===l||null===(o=l.triggers)||void 0===o?void 0:o.save_in_code_automatically}),[d,R]);return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(le.Z,{after:!hn&&ft,afterHidden:hn,breadcrumbs:[{label:function(){return"Triggers"},linkProps:{as:"/pipelines/".concat(W,"/triggers"),href:"/pipelines/[pipeline]/triggers"}},{label:function(){return null===P||void 0===P?void 0:P.name},linkProps:{as:"/pipelines/".concat(W,"/triggers/").concat(Y),href:"/pipelines/[pipeline]/triggers/[...slug]"}}],errors:t,pageName:_e.M.TRIGGERS,pipeline:d,setErrors:_,subheader:hn||Zn?(0,L.jsx)(k.Z,{px:A.cd,children:(0,L.jsx)(g.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return pn(n)},regularSizeText:!0,selectedTabUUID:dn,tabs:Ie,underlineColor:(0,D.qn)(Oe.tf.DATA_LOADER).accent,underlineStyle:!0})}):(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(j.ZP,{disabled:pt,loading:Kn,onClick:it,outline:!0,primary:!0,children:"Save changes"}),(0,L.jsx)(k.Z,{mr:A.cd}),(0,L.jsx)(j.ZP,{linkProps:{as:"/pipelines/".concat(W,"/triggers/").concat(Y),href:"/pipelines/[pipeline]/triggers/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Cancel"}),Et&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(k.Z,{mr:A.cd}),(0,L.jsxs)(T.ZP,{default:!0,xsmall:!0,children:["This trigger will automatically be persisted in code.",(0,L.jsx)("br",{}),"To change this behavior, update the ",(0,L.jsx)(u(),{as:"/pipelines/".concat(W,"/settings"),href:"/pipelines/[pipeline]/settings",passHref:!0,children:(0,L.jsx)(B.Z,{openNewWindow:!0,xsmall:!0,children:"pipeline\u2019s settings"})})," or ",(0,L.jsx)(u(),{as:"/settings/workspace/preferences",href:"/settings/workspace/preferences",passHref:!0,children:(0,L.jsx)(B.Z,{openNewWindow:!0,xsmall:!0,children:"project settings"})}),"."]})]})]}),subheaderNoPadding:hn||Zn,title:function(){return null!==P&&void 0!==P&&P.name?"Edit ".concat(null===P||void 0===P?void 0:P.name):"New trigger"},uuid:"triggers/edit",children:(0,L.jsxs)("div",{ref:U,children:[(hn||Zn)&&(0,L.jsx)(q.Z,{light:!0}),(hn||Zn)&&(Se.uuid===dn||ke.uuid===dn)&&xt,(!hn||Ee.uuid===dn)&&(!Zn||Ee.uuid===dn)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(k.Z,{p:A.cd,children:[(0,L.jsxs)(k.Z,{mb:2,children:[(0,L.jsx)(E.Z,{children:"Trigger type"}),(0,L.jsx)(T.ZP,{muted:!0,children:"How would you like this pipeline to be triggered?"})]}),(0,L.jsx)(S.ZP,{children:gt.reduce((function(e,n){var t=n.label,i=n.description,r=n.uuid,l=En===r,o=En&&!l;return!hn||null!==bn&&void 0!==bn&&bn[r]?e.concat((0,L.jsx)(j.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){oe.Xm.EVENT!==r||null!==ne&&void 0!==ne&&ne.length||te([{}]),Qe((function(e){return Re(Re({},e),{},{schedule_type:r})}))},children:(0,L.jsx)(Pe.U,{selected:l,children:(0,L.jsxs)(S.ZP,{alignItems:"center",children:[(0,L.jsx)(z.Z,{children:(0,L.jsx)("input",{checked:l,type:"radio"})}),(0,L.jsx)(k.Z,{mr:A.cd}),(0,L.jsxs)(z.Z,{alignItems:"flex-start",flexDirection:"column",children:[(0,L.jsx)(E.Z,{bold:!0,default:!l&&!o,level:5,muted:!l&&o,children:t()}),(0,L.jsx)(T.ZP,{default:!l&&!o,leftAligned:!0,muted:o,children:i()})]})]})})},r)):e}),[])})]}),(0,L.jsxs)(k.Z,{mt:A.HN,children:[oe.Xm.TIME===En&&ct,oe.Xm.EVENT===En&&at,oe.Xm.API===En&&dt]}),!hn&&(0,L.jsxs)(k.Z,{mt:A.HN,px:A.cd,children:[(0,L.jsxs)(k.Z,{mb:2,children:[(0,L.jsx)(E.Z,{children:"Tags"}),(0,L.jsx)(T.ZP,{muted:!0,children:"Add or remove tags from this trigger."})]}),(0,L.jsx)(de.Z,{removeTag:function(e){Qe((function(n){return Re(Re({},n),{},{tags:null===wn||void 0===wn?void 0:wn.filter((function(n){return n!==e.uuid}))})}))},selectTag:function(e){Qe((function(n){return Re(Re({},n),{},{tags:(0,N.$C)(e.uuid,wn,(function(n){return n===e.uuid}))})}))},selectedTags:null===wn||void 0===wn?void 0:wn.map((function(e){return{uuid:e}})),tags:jt,uuid:"TagsAutocompleteInputField-trigger-".concat(Y)})]})]}),(hn||Zn)&&St]})})})}},37899:function(e,n,t){var i=t(82394),r=t(75582),l=t(82684),o=t(71180),u=t(15338),c=t(97618),s=t(55485),a=t(38276),d=t(75499),p=t(30160),v=t(35576),h=t(17488),f=t(72473),m=t(70515),j=t(42122),g=t(81728),x=t(28598);function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){e.borderless,e.compact;var n=e.enableVariablesOverwrite,t=e.originalVariables,Z=e.runtimeVariables,y=(e.setEnableVariablesOverwrite,e.setRuntimeVariables),O=(0,l.useState)({}),P=O[0],_=O[1],S=(0,l.useState)(null),E=S[0],k=S[1],I=(0,l.useState)(null),T=I[0],w=I[1];(0,l.useEffect)((function(){var e=Object.entries(Z||{}).reduce((function(e,n){var t=(0,r.Z)(n,2),l=t[0],o=t[1],u=(0,g.Pb)(o)&&"object"===typeof JSON.parse(o)&&!Array.isArray(JSON.parse(o))&&null!==JSON.parse(o);return b(b({},e),{},(0,i.Z)({},l,u))}),{});_(e)}),[]);var C=function(e,n){var t={borderless:!0,key:"variable_uuid_input_".concat(e),monospace:!0,onChange:function(n){n.preventDefault(),y((function(t){return b(b({},t),{},(0,i.Z)({},e,n.target.value))}))},paddingHorizontal:0,placeholder:"Variable value",value:n};return P[e]?(0,x.jsx)(v.Z,b(b({},t),{},{rows:1,value:n})):(0,x.jsx)(h.Z,b({},t))};return(0,x.jsxs)(x.Fragment,{children:[n&&Z&&Object.entries(Z).length>0&&(0,x.jsx)(d.Z,{columnFlex:[null,1,null],columns:[{uuid:"Variable"},{uuid:"Value"},{label:function(){return""},uuid:"Action"}],rows:Object.entries(Z).map((function(e){var n=(0,r.Z)(e,2),i=n[0],l=n[1];return[(0,x.jsx)(p.ZP,{default:!0,monospace:!0,children:i},"variable_".concat(i)),C(i,l),!(null!==t&&void 0!==t&&t[i])&&(0,x.jsx)(o.ZP,{iconOnly:!0,onClick:function(){y((function(e){return(0,j.gR)(e,[i])}))},children:(0,x.jsx)(f.rF,{default:!0})})]}))}),(0,x.jsx)(a.Z,{p:m.cd,children:(0,x.jsxs)(s.ZP,{alignItems:"center",children:[(0,x.jsx)(c.Z,{flex:1,children:(0,x.jsx)(h.Z,{fullWidth:!0,monospace:!0,onChange:function(e){return k(e.target.value)},placeholder:"New variable UUID",value:E||""})}),(0,x.jsx)(a.Z,{mr:1}),(0,x.jsx)(c.Z,{flex:1,children:(0,x.jsx)(h.Z,{fullWidth:!0,monospace:!0,onChange:function(e){return w(e.target.value)},placeholder:"Variable value",value:T||""})}),(0,x.jsx)(a.Z,{mr:1}),(0,x.jsx)(o.ZP,{beforeIcon:(0,x.jsx)(f.mm,{}),disabled:!E||!T,onClick:function(){y((function(e){return b(b({},e),{},(0,i.Z)({},E,T))})),k(null),w(null)},children:"Add runtime variable"})]})}),(0,x.jsx)(u.Z,{light:!0})]})}},97196:function(e,n,t){t.d(n,{S5:function(){return l},_P:function(){return o}});var i,r=t(86735);!function(e){e.AWS="aws_event"}(i||(i={}));var l=[{label:function(){return"AWS"},uuid:i.AWS}],o=(0,r.HK)(l,(function(e){return e.uuid}))},61599:function(e,n,t){t.d(n,{D5:function(){return j},MU:function(){return o},RL:function(){return s},Xv:function(){return a},Zj:function(){return m},_B:function(){return r},eL:function(){return d},fe:function(){return h},jL:function(){return c},kB:function(){return g},ks:function(){return v},th:function(){return f},u7:function(){return p},zS:function(){return u}});var i,r,l=t(82394);!function(e){e.FULL_TABLE="FULL_TABLE",e.INCREMENTAL="INCREMENTAL",e.LOG_BASED="LOG_BASED"}(r||(r={}));var o,u,c=[r.FULL_TABLE,r.INCREMENTAL];!function(e){e.IGNORE="IGNORE",e.UPDATE="UPDATE"}(o||(o={})),function(e){e.DATE_TIME="date-time",e.UUID="uuid"}(u||(u={}));var s,a="datetime",d=(i={},(0,l.Z)(i,u.DATE_TIME,a),(0,l.Z)(i,u.UUID,u.UUID),i);!function(e){e.ARRAY="array",e.BOOLEAN="boolean",e.INTEGER="integer",e.NULL="null",e.NUMBER="number",e.OBJECT="object",e.STRING="string"}(s||(s={}));var p,v,h,f,m,j=[s.ARRAY,s.BOOLEAN,a,s.INTEGER,s.NULL,s.NUMBER,s.OBJECT,s.STRING,u.UUID];!function(e){e.PROPERTIES="properties"}(p||(p={})),function(e){e.AUTOMATIC="automatic",e.AVAILABLE="available",e.UNSUPPORTED="unsupported"}(v||(v={})),function(e){e.FORCED_REPLICATION_METHOD="forced-replication-method",e.KEY_PROPERTIES="table-key-properties",e.REPLICATION_KEYS="valid-replication-keys",e.SCHEMA_NAME="schema-name"}(h||(h={})),function(e){e.AMPLITUDE="amplitude",e.BIGQUERY="bigquery",e.CHARGEBEE="chargebee",e.GOOGLE_ADS="google_ads",e.GOOGLE_SEARCH_CONSOLE="google_search_console",e.GOOGLE_SHEETS="google_sheets",e.INTERCOM="intercom",e.MYSQL="mysql",e.PIPEDRIVE="pipedrive",e.POSTGRESQL="postgresql",e.REDSHIFT="redshift",e.SALESFORCE="salesforce",e.STRIPE="stripe"}(f||(f={})),function(e){e.AMAZON_S3="amazon_s3",e.BIGQUERY="bigquery",e.DELTA_LAKE_S3="delta_lake_s3",e.GOOGLE_CLOUD_STORAGE="google_cloud_storage",e.KAFKA="kafka",e.MYSQL="mysql",e.POSTGRESQL="postgresql",e.SNOWFLAKE="snowflake"}(m||(m={}));var g=[m.AMAZON_S3,m.GOOGLE_CLOUD_STORAGE,m.KAFKA]},83784:function(e,n,t){t.d(n,{C:function(){return i}});var i="global"},14805:function(e,n,t){var i=t(82394),r=t(44495),l=t(55485),o=t(44085),u=t(38276),c=t(30160),s=t(88785),a=t(70515),d=t(86735),p=t(28598);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.localTime,t=e.selectedDate,i=e.selectedTime,v=e.setSelectedDate,f=e.setSelectedTime,m=e.topPosition;return(0,p.jsxs)(s.J,{absolute:!0,topPosition:m,children:[(0,p.jsx)(r.ZP,{onChange:v,value:t}),(0,p.jsx)(u.Z,{mb:2}),(0,p.jsxs)(l.ZP,{alignItems:"center",children:[(0,p.jsxs)(c.ZP,{default:!0,large:!0,children:["Time (",n?"Local":"UTC","):"]}),(0,p.jsx)(u.Z,{pr:2}),(0,p.jsx)(o.Z,{compact:!0,monospace:!0,onChange:function(e){e.preventDefault(),f((function(n){return h(h({},n),{},{hour:e.target.value})}))},paddingRight:5*a.iI,placeholder:"HH",value:null===i||void 0===i?void 0:i.hour,children:(0,d.m5)(24,0).map((function(e){return String(e).padStart(2,"0")})).map((function(e){return(0,p.jsx)("option",{value:e,children:e},"hour_".concat(e))}))}),(0,p.jsx)(u.Z,{px:1,children:(0,p.jsx)(c.ZP,{bold:!0,large:!0,children:":"})}),(0,p.jsx)(o.Z,{compact:!0,monospace:!0,onChange:function(e){e.preventDefault(),f((function(n){return h(h({},n),{},{minute:e.target.value})}))},paddingRight:5*a.iI,placeholder:"MM",value:null===i||void 0===i?void 0:i.minute,children:(0,d.m5)(60,0).map((function(e){return String(e).padStart(2,"0")})).map((function(e){return(0,p.jsx)("option",{value:e,children:e},"minute_".concat(e))}))})]})]})}},79500:function(e,n,t){t.d(n,{a:function(){return l}});var i=t(16488),r=t(3917);function l(e,n){var t,l;if(null!==n&&void 0!==n&&n.localTimezone)t=(0,r.n$)(e),l={hour:(0,r.lJ)(String(t.getHours())),minute:(0,r.lJ)(String(t.getMinutes()))};else{var o=e.split(" ")[1];t=(0,i.eI)(e),l={hour:o.substring(0,2),minute:o.substring(3,5)}}return{date:t,time:l}}},9134:function(e,n,t){var i=t(82684),r=t(21124),l=t(68432),o=t(38626),u=t(65292),c=t(44897),s=t(95363),a=t(70515),d=t(28598);n.Z=function(e){var n=e.language,t=e.maxWidth,p=e.showLineNumbers,v=e.small,h=e.source,f=e.wrapLines,m=(0,i.useContext)(o.ThemeContext);function j(e){var i=e.value;return(0,d.jsx)(l.Z,{customStyle:{backgroundColor:(m.background||c.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:s.Vp,fontSize:v?12:14,marginBottom:0,marginTop:0,maxWidth:t,paddingBottom:2*a.iI,paddingTop:2*a.iI},language:n,lineNumberStyle:{color:(m.content||c.Z.content).muted},showLineNumbers:p,style:u._4,useInlineStyles:!0,wrapLines:f,children:i})}return(0,d.jsx)(r.D,{components:{code:function(e){var n=e.children;return(0,d.jsx)(j,{value:n})}},children:h})}},39457:function(e,n,t){var i,r=t(82394),l=(t(82684),t(64866)),o=t(21764),u=t(55485),c=t(48670),s=t(38276),a=t(30160),d=t(12468),p=t(72473),v=t(70515),h=t(28598);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e.LEFT="left",e.RIGHT="right"}(i||(i={})),n.Z=function(e){var n,t=e.children,r=e.copiedText,f=e.iconPosition,j=void 0===f?i.LEFT:f,g=e.inverted,x=e.linkProps,Z=e.linkText,b=e.monospace,y=e.muted,O=e.small,P=e.toastMessage,_=e.withCopyIcon;return t?n=(0,h.jsx)("span",{children:t}):_&&(n=(0,h.jsx)(c.Z,m(m({href:"#",inline:!0,muted:y,preventDefault:!0,sameColorAsText:!0,small:O},x),{},{children:(0,h.jsxs)(u.ZP,{alignItems:"center",children:[j===i.LEFT&&(0,h.jsx)(s.Z,{mr:Z?1:0,children:(0,h.jsx)(u.ZP,{alignItems:"center",children:(0,h.jsx)(p.CK,{inverted:g,muted:y,size:2*v.iI})})}),Z&&(0,h.jsx)(a.ZP,{inverted:g,monospace:b,muted:y,small:O,children:Z}),j===i.RIGHT&&(0,h.jsx)(s.Z,{ml:Z?1:0,children:(0,h.jsx)(u.ZP,{alignItems:"center",children:(0,h.jsx)(p.CK,{inverted:g,muted:y})})})]})}))),(0,h.jsx)(d.Z,{block:!0,label:"Copy",size:null,widthFitContent:!0,children:(0,h.jsx)(l.CopyToClipboard,{onCopy:function(){return o.Am.success(P||"Successfully copied to clipboard.",{position:o.Am.POSITION.BOTTOM_RIGHT,toastId:r})},text:r,children:n})})}},22286:function(e,n,t){t.d(n,{M:function(){return a}});var i=t(82394),r=t(75582),l=t(54193),o=t(81728),u=t(42122);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){var t,c;if(!n||null===n||void 0===n||!n.length)return e;if(null!==n&&void 0!==n&&n.includes(l.zj.LIST))return((0,u.Kn)(e)?Object.keys(e||{}):[e]).map((function(e){return a(e,null===n||void 0===n?void 0:n.filter((function(e){return l.zj.LIST!==e})))}));if(null!==n&&void 0!==n&&n.includes(l.zj.DICTIONARY)){var d=(0,u.Kn)(e)?e:(0,o.Pb)(e)?JSON.parse(e):e;if((0,u.Kn)(d))return Object.entries(d).reduce((function(e,t){var o=(0,r.Z)(t,2),u=o[0],c=o[1];return s(s({},e),{},(0,i.Z)({},u,a(c,null===n||void 0===n?void 0:n.filter((function(e){return l.zj.DICTIONARY!==e})))))}),{})}if(null!==n&&void 0!==n&&n.includes(l.zj.BOOLEAN)){var p,v;if("boolean"===typeof e)return e;if("true"===(null===(p=String(e))||void 0===p?void 0:p.toLowerCase()))return!0;if("false"===(null===(v=String(e))||void 0===v?void 0:v.toLowerCase()))return!1}return null!==n&&void 0!==n&&null!==(t=n.includes)&&void 0!==t&&t.call(n,l.zj.FLOAT)&&(0,o.HW)(e)?parseFloat(e):null!==n&&void 0!==n&&null!==(c=n.includes)&&void 0!==c&&c.call(n,l.zj.INTEGER)&&(0,o.HW)(e)?parseInt(e):e}},32080:function(e,n,t){t.d(n,{n:function(){return l}});var i=t(44425),r=t(61599);function l(e){var n,t={};return null===e||void 0===e||null===(n=e.blocks)||void 0===n||n.forEach((function(e){var n=e.catalog,l=e.type,o=e.uuid;if(i.tf.DATA_LOADER===l&&null!==n&&void 0!==n&&n.streams){var u,c=null===n||void 0===n||null===(u=n.streams)||void 0===u?void 0:u.filter((function(e){var n=e.replication_method;return r._B.INCREMENTAL===n}));(null===c||void 0===c?void 0:c.length)>=1&&(o in t||(t[o]={block:e,streams:[]}),t[o].streams.push(c))}})),t}}}]);