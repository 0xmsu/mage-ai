(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2858],{1210:function(e,n,r){"use strict";r.d(n,{Z:function(){return k}});var o=r(82394),t=r(21831),i=r(82684),l=r(47999),c=r(49894),s=r(93461),d=r(57384),u=r(41424),a=r(72454),h=r(28598);function f(e,n){var r=e.children;return(0,h.jsx)(a.HS,{ref:n,children:r})}var m=i.forwardRef(f),v=r(32063),j=r(85019),x=r(82531),b=r(66166),g=r(3055),p=r(49125),Z=r(91427),w=r(24141);function C(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function y(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?C(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var k=function(e){var n,r=e.after,o=e.afterHidden,f=e.afterWidth,C=e.afterWidthOverride,k=e.before,P=e.beforeWidth,_=e.breadcrumbs,I=e.children,O=e.errors,S=e.headerMenuItems,M=e.headerOffset,D=e.mainContainerHeader,B=e.navigationItems,F=e.setErrors,E=e.subheaderChildren,H=e.title,N=e.uuid,A=(0,w.i)().width,T="dashboard_after_width_".concat(N),U="dashboard_before_width_".concat(N),R=(0,i.useRef)(null),G=(0,i.useState)(C?f:(0,Z.U2)(T,f)),q=G[0],L=G[1],z=(0,i.useState)(!1),V=z[0],W=z[1],Q=(0,i.useState)(k?Math.max((0,Z.U2)(U,P),13*p.iI):null),K=Q[0],X=Q[1],Y=(0,i.useState)(!1),J=Y[0],$=Y[1],ee=(0,i.useState)(null)[1],ne=x.ZP.projects.list({},{revalidateOnFocus:!1}).data,re=null===ne||void 0===ne?void 0:ne.projects,oe=[];_?oe.push.apply(oe,(0,t.Z)(_)):(null===re||void 0===re?void 0:re.length)>=1&&oe.push.apply(oe,[{label:function(){var e;return null===(e=re[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return H}}]),(0,i.useEffect)((function(){null===R||void 0===R||!R.current||V||J||null===ee||void 0===ee||ee(R.current.getBoundingClientRect().width)}),[V,q,J,K,R,ee,A]),(0,i.useEffect)((function(){V||(0,Z.t8)(T,q)}),[o,V,q,T]),(0,i.useEffect)((function(){J||(0,Z.t8)(U,K)}),[J,K,U]);var te=(0,b.Z)(f);return(0,i.useEffect)((function(){C&&te!==f&&L(f)}),[C,f,te]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.Z,{title:H}),(0,h.jsx)(u.Z,{breadcrumbs:oe,menuItems:S,project:null===re||void 0===re?void 0:re[0],version:null===re||void 0===re||null===(n=re[0])||void 0===n?void 0:n.version}),(0,h.jsxs)(a.Nk,{children:[0!==(null===B||void 0===B?void 0:B.length)&&(0,h.jsx)(a.lm,{showMore:!0,children:(0,h.jsx)(j.Z,{navigationItems:B,showMore:!0})}),(0,h.jsx)(s.Z,{flex:1,flexDirection:"column",children:(0,h.jsxs)(v.Z,{after:r,afterHeightOffset:g.Mz,afterHidden:o,afterMousedownActive:V,afterWidth:q,before:k,beforeHeightOffset:g.Mz,beforeMousedownActive:J,beforeWidth:a.k1+(k?K:0),headerOffset:M,hideAfterCompletely:!0,leftOffset:k?a.k1:null,mainContainerHeader:D,mainContainerRef:R,setAfterMousedownActive:W,setAfterWidth:L,setBeforeMousedownActive:$,setBeforeWidth:X,children:[E&&(0,h.jsx)(m,{children:E}),I]})})]}),O&&(0,h.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===F||void 0===F?void 0:F(null)},children:(0,h.jsx)(c.Z,y(y({},O),{},{onClose:function(){return null===F||void 0===F?void 0:F(null)}}))})]})}},32316:function(e,n,r){"use strict";r.d(n,{Z:function(){return j}});var o=r(82684),t=r(60328),i=r(67971),l=r(882),c=r(86673),s=r(19711),d=r(99994),u=r(38626),a=r(49125),h=r(37391),f=u.default.div.withConfig({displayName:"indexstyle__TabsContainerStyle",componentId:"sc-segf7l-0"})(["padding-left:","px;padding-right:","px;"," "," ",""],a.cd*a.iI,a.cd*a.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.allowScroll&&"\n    overflow: auto;\n  "}),h.w5),m=r(66653),v=r(28598);var j=function(e){var n=e.allowScroll,r=e.compact,u=e.contained,h=e.noPadding,j=e.onClickTab,x=e.selectedTabUUID,b=e.small,g=e.tabs,p=(0,o.useMemo)((function(){var e=g.length,n=[];return g.forEach((function(o,u){var h=o.Icon,f=o.IconSelected,g=o.label,p=o.uuid,Z=p===x,w=Z&&f||h,C=g?g():p,y=(0,v.jsxs)(i.Z,{alignItems:"center",children:[w&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w,{default:!Z,size:2*a.iI}),(0,v.jsx)(c.Z,{mr:1})]}),(0,v.jsx)(s.ZP,{bold:!0,default:!Z,noWrapping:!0,small:!0,children:C})]});u>=1&&e>=2&&n.push((0,v.jsx)("div",{style:{marginLeft:1.5*a.iI}},"spacing-".concat(p))),Z?n.push((0,v.jsx)(l.Z,{backgroundGradient:d.yr,backgroundPanel:!0,borderLess:!0,borderWidth:2,compact:r||b,onClick:function(e){(0,m.j)(e),j(o)},paddingUnitsHorizontal:1.75,paddingUnitsVertical:1.25,small:b,children:y},p)):n.push((0,v.jsx)("div",{style:{padding:2},children:(0,v.jsx)(t.Z,{borderLess:!0,compact:r||b,default:!0,onClick:function(e){(0,m.j)(e),j(o)},outline:!0,small:b,children:y})},"button-tab-".concat(p)))})),n}),[r,j,x,b,g]),Z=(0,v.jsx)(i.Z,{alignItems:"center",children:p});return u?Z:(0,v.jsx)(f,{allowScroll:n,noPadding:h,children:Z})}},83243:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Ce}});var o=r(77837),t=r(38860),i=r.n(t),l=r(41788),c=r(82394),s=r(75582),d=r(54407),u=r.n(d),a=r(82684),h=r(83455),f=r(60328),m=r(34744),v=r(67971),j=r(87372),x=r(55378),b=r(86673),g=r(54283),p=r(19711),Z=r(38435),w=r(82944),C=r(46261),y=r(82531),k=r(10503),P="delete",_="merge",I="pull",O="push",S="rebase",M={uuid:"Branches"},D={uuid:"Files"},B={uuid:"Push"},F={uuid:"Setup"},E=[F,M,D,B],H=r(49125),N=r(90211),A=r(96510),T=r(28598);var U=function(e){var n=e.branch,r=e.branches,o=e.fetchBranch,t=e.fetchBranches,i=e.showError,l=(0,a.useState)(""),d=l[0],u=l[1],I=(0,a.useState)(null),O=I[0],M=I[1],B=(0,a.useState)(null),E=B[0],U=B[1],R=(0,a.useState)(null),G=R[0],q=R[1],L=(0,a.useState)(""),z=L[0],V=L[1],W=(0,h.Db)(y.ZP.git_branches.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){o(),t(),V("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),Q=(0,s.Z)(W,2),K=Q[0],X=Q[1].isLoading,Y=(0,h.Db)(y.ZP.git_branches.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){o()},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),J=(0,s.Z)(Y,2),$=J[0],ee=J[1].isLoading,ne=(0,h.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(e){var n=e.git_branch.progress;o(),u(""),M(""),U(n),q("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),re=(0,s.Z)(ne,2),oe=re[0],te=re[1].isLoading;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsxs)(j.Z,{children:["Branches",r?" (".concat(null===r||void 0===r?void 0:r.length,")"):""]}),(0,T.jsxs)(b.Z,{mt:H.Mq,children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(0,T.jsxs)(v.Z,{alignItems:"center",children:[(0,T.jsx)(C.Z,{fullSize:!0,label:"Choose a different branch to switch branches",widthFitContent:!0,children:(0,T.jsx)(x.Z,{beforeIcon:(0,T.jsx)(k.I0,{muted:!1}),beforeIconSize:2*H.iI,monospace:!0,onChange:function(e){return $({git_branch:{name:e.target.value}})},value:null===n||void 0===n?void 0:n.name,children:(null===n||void 0===n?void 0:n.name)&&(null===r||void 0===r?void 0:r.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)})))})}),(0,T.jsx)(b.Z,{mr:H.cd}),ee&&(0,T.jsx)(g.Z,{inverted:!0})]})]}),(0,T.jsx)(b.Z,{mt:H.Mq,children:(0,T.jsxs)(v.Z,{alignItems:"center",children:[(0,T.jsx)(w.Z,{label:"New branch name",monospace:!0,onChange:function(e){var n;return V(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:z||""}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsx)(f.Z,{beforeIcon:(0,T.jsx)(k.mm,{size:2*H.iI}),disabled:!z,loading:X,onClick:function(){K({git_branch:{name:z}})},primary:!0,children:"Create new branch"})]})})]}),(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsx)(j.Z,{children:"Actions"}),(0,T.jsxs)(b.Z,{mt:H.Mq,children:[(0,T.jsxs)(b.Z,{mb:H.Mq,children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),(null===n||void 0===n?void 0:n.name)&&(0,T.jsx)(p.ZP,{monospace:!0,children:null===n||void 0===n?void 0:n.name})]}),(0,T.jsxs)(v.Z,{alignItems:"center",children:[(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Base branch"})}),(0,T.jsx)(x.Z,{beforeIcon:(0,T.jsx)(k.I0,{}),beforeIconSize:1.5*H.iI,monospace:!0,onChange:function(e){return q(e.target.value)},placeholder:"Choose a branch",value:G,children:null===r||void 0===r?void 0:r.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))})]}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Action"})}),(0,T.jsxs)(x.Z,{onChange:function(e){return M(e.target.value)},placeholder:"Choose action",value:O||"",children:[(0,T.jsx)("option",{value:_,children:(0,N.vg)(_)}),(0,T.jsx)("option",{value:S,children:(0,N.vg)(S)}),(0,T.jsx)("option",{value:P,children:(0,N.vg)(P)})]})]})]}),O&&[_,S].includes(O)&&(0,T.jsxs)(b.Z,{mt:H.cd,children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsxs)(p.ZP,{bold:!0,muted:!0,children:["Message for ",O]})}),(0,T.jsx)(Z.Z,{monospace:!0,onChange:function(e){return u(e.target.value)},value:d||""})]}),(0,T.jsxs)(b.Z,{mt:H.cd,children:[(0,T.jsx)(f.Z,{beforeIcon:(0,T.jsx)(k.Bf,{size:2*H.iI}),disabled:!O||!G,loading:te,onClick:function(){(P!==O||"undefined"!==typeof location&&window.confirm("Are you sure you want to delete branch ".concat(G,"?")))&&oe({git_branch:(0,c.Z)({action_type:O,message:d},O,{base_branch:G})})},primary:!0,children:O?(0,N.vg)(O):"Execute action"}),E&&(0,T.jsx)(b.Z,{mt:H.cd,children:(0,T.jsx)(p.ZP,{default:!0,monospace:!0,preWrap:!0,children:E})})]})]})]}),(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsx)(b.Z,{mb:H.HN,children:(0,T.jsx)(m.Z,{light:!0})}),(0,T.jsxs)(v.Z,{children:[(0,T.jsx)(f.Z,{beforeIcon:(0,T.jsx)(k.Hd,{}),linkProps:{href:"/version-control?tab=".concat(F.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:F.uuid}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsxs)(f.Z,{afterIcon:(0,T.jsx)(k.Kw,{}),linkProps:{href:"/version-control?tab=".concat(D.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",D.uuid]})]})]})]})},R=r(32316),G=r(44182),q=r(25880),L=r(10919),z=r(87815),V=r(24224);function W(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function Q(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?W(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var K={base_branch:null,body:null,compare_branch:null,repository:null,title:null};var X=function(e){var n=e.branch,r=e.branches,o=e.fetchBranch,t=e.loading,i=e.remotes,l=e.showError,d=(0,a.useState)((null===n||void 0===n?void 0:n.name)||""),u=d[0],C=d[1],P=(0,a.useState)(null),_=P[0],I=P[1],S=(0,a.useState)(null),M=S[0],B=S[1],F=(0,a.useState)(""),E=F[0],U=F[1],R=(0,a.useState)(K),W=R[0],X=R[1],Y=(0,a.useState)(null),J=Y[0],$=Y[1],ee=(0,h.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(e){var n=e.git_branch,r=n.error,t=n.progress;r?(I(r),B(null)):(o(),C(null),I(null),U(null),B(t))},onErrorCallback:function(e,n){return l({errors:n,response:e})}})}}),ne=(0,s.Z)(ee,2),re=ne[0],oe=ne[1].isLoading,te=(0,a.useMemo)((function(){return(0,V.Tw)(i.reduce((function(e,n){var r;return e.concat((null===n||void 0===n||null===(r=n.repository_names)||void 0===r?void 0:r.map((function(e){var r;return{name:e,url:null===n||void 0===n||null===(r=n.urls)||void 0===r?void 0:r[0]}})))||[])}),[]),(function(e){return e.name}))}),[i]),ie=y.ZP.pull_requests.list({repository:J},{},{pauseFetch:!J}),le=ie.data,ce=ie.mutate,se=(0,a.useMemo)((function(){return(null===le||void 0===le?void 0:le.pull_requests)||[]}),[le]),de=(0,a.useMemo)((function(){return(0,T.jsx)(z.Z,{columnFlex:[null,null,null,null],columns:[{uuid:"Title"},{uuid:"Author"},{uuid:"Created"},{uuid:"Last modified"}],onClickRow:function(e){var n,r=null===se||void 0===se||null===(n=se[e])||void 0===n?void 0:n.url;r&&window.open(r,"_blank")},rows:null===se||void 0===se?void 0:se.map((function(e){var n=e.created_at,r=e.last_modified,o=e.title,t=e.url,i=e.user;return[(0,T.jsx)(L.Z,{default:!0,href:t,monospace:!0,openNewWindow:!0,small:!0,children:o},"title"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:i},"user"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:n},"createdAt"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:r||"-"},"lastModified")]})),uuid:"pull-requests"})}),[se]),ue=y.ZP.git_branches.list({repository:J},{},{pauseFetch:!J}).data,ae=(0,a.useMemo)((function(){return(null===ue||void 0===ue?void 0:ue.git_branches)||[]}),[ue]);(0,a.useEffect)((function(){null!==W&&void 0!==W&&W.compare_branch||null===ae||void 0===ae||!ae.find((function(e){return e.name===(null===n||void 0===n?void 0:n.name)}))||X((function(e){return Q(Q({},e),{},{compare_branch:null===n||void 0===n?void 0:n.name})}))}),[n,ae,W]);var he=(0,h.Db)(y.ZP.pull_requests.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){ce(),X(K)},onErrorCallback:function(e,n){return l({errors:n,response:e})}})}}),fe=(0,s.Z)(he,2),me=fe[0],ve=fe[1].isLoading;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(j.Z,{children:(0,N.vg)(O)})}),(0,T.jsxs)(b.Z,{mt:H.Mq,children:[(0,T.jsxs)(v.Z,{children:[(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Remote"})}),t&&(0,T.jsx)(g.Z,{inverted:!0}),!t&&(0,T.jsx)(x.Z,{beforeIcon:(0,T.jsx)(k.VW,{}),beforeIconSize:1.5*H.iI,monospace:!0,onChange:function(e){return U(e.target.value)},placeholder:"Choose remote",value:E||"",children:null===i||void 0===i?void 0:i.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))})]}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Branch"})}),(0,T.jsxs)(x.Z,{beforeIcon:(0,T.jsx)(k.I0,{}),beforeIconSize:1.5*H.iI,monospace:!0,onChange:function(e){return C(e.target.value)},placeholder:"Choose branch",value:u||"",children:[(0,T.jsx)("option",{value:""}),null===r||void 0===r?void 0:r.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,T.jsx)(b.Z,{mt:H.cd,children:(0,T.jsxs)(f.Z,{beforeIcon:(0,T.jsx)(k.Bf,{size:2*H.iI}),disabled:!E||!u,loading:oe,onClick:function(){B(null),re({git_branch:(0,c.Z)({action_type:O},O,{branch:u,remote:E})})},primary:!0,children:[(0,N.vg)(O)," ",E," ",E&&u]})}),(M||_)&&(0,T.jsx)(b.Z,{mt:H.cd,children:(0,T.jsx)(p.ZP,{danger:!!_,default:!!M,monospace:!0,preWrap:!0,children:M||_})})]})]}),(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(j.Z,{children:"Create pull request"})}),(0,T.jsxs)(b.Z,{mt:H.Mq,children:[t&&(0,T.jsx)(g.Z,{inverted:!0}),!t&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(v.Z,{children:[(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Repository"})}),(0,T.jsx)(x.Z,{beforeIcon:(0,T.jsx)(k.fy,{}),beforeIconSize:1.5*H.iI,monospace:!0,onChange:function(e){return $(e.target.value)},placeholder:"Choose repository",value:J||"",children:null===te||void 0===te?void 0:te.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))})]}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Base branch"})}),J&&!ue&&(0,T.jsx)(g.Z,{inverted:!0}),(!J||ue)&&(0,T.jsx)(x.Z,{beforeIcon:(0,T.jsx)(k.I0,{}),beforeIconSize:1.5*H.iI,disabled:!J,monospace:!0,onChange:function(e){return X((function(n){return Q(Q({},n),{},{base_branch:e.target.value})}))},placeholder:"Choose branch",value:(null===W||void 0===W?void 0:W.base_branch)||"",children:null===ae||void 0===ae?void 0:ae.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))})]}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),J&&!ue&&(0,T.jsx)(g.Z,{inverted:!0}),(!J||ue||(null===W||void 0===W?void 0:W.compare_branch))&&(0,T.jsxs)(x.Z,{beforeIcon:(0,T.jsx)(k.I0,{}),beforeIconSize:1.5*H.iI,disabled:!J,monospace:!0,onChange:function(e){return X((function(n){return Q(Q({},n),{},{compare_branch:e.target.value})}))},placeholder:"Choose branch",value:(null===W||void 0===W?void 0:W.compare_branch)||"",children:[!(null!==ae&&void 0!==ae&&ae.length)&&(null===W||void 0===W?void 0:W.compare_branch)&&(0,T.jsx)("option",{value:null===W||void 0===W?void 0:W.compare_branch,children:null===W||void 0===W?void 0:W.compare_branch}),null===ae||void 0===ae?void 0:ae.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,T.jsx)(b.Z,{mt:1,children:(0,T.jsx)(w.Z,{label:"Title",monospace:!0,onChange:function(e){return X((function(n){return Q(Q({},n),{},{title:e.target.value})}))},value:(null===W||void 0===W?void 0:W.title)||""})}),(0,T.jsx)(b.Z,{mt:1,children:(0,T.jsx)(Z.Z,{label:"Description",monospace:!0,onChange:function(e){return X((function(n){return Q(Q({},n),{},{body:e.target.value})}))},value:(null===W||void 0===W?void 0:W.body)||""})}),(0,T.jsx)(b.Z,{mt:H.cd,children:(0,T.jsx)(f.Z,{beforeIcon:(0,T.jsx)(k.Bf,{size:2*H.iI}),disabled:!J||!(null!==W&&void 0!==W&&W.title)||!(null!==W&&void 0!==W&&W.base_branch)||!(null!==W&&void 0!==W&&W.compare_branch),loading:ve,onClick:function(){me({pull_request:Q(Q({},W),{},{repository:J})})},primary:!0,children:"Create new pull request"})})]})]}),(0,T.jsx)(b.Z,{mt:H.Mq,children:(0,T.jsx)(G.Z,{visibleMapping:{0:!J},children:(0,T.jsxs)(q.Z,{noPaddingContent:!0,title:le?"Pull requests (".concat(null===se||void 0===se?void 0:se.length,")"):"Pull requests",children:[!J&&(0,T.jsx)(b.Z,{p:H.cd,children:(0,T.jsx)(p.ZP,{muted:!0,children:"Please select a repository to view open pull requests."})}),J&&(0,T.jsxs)(T.Fragment,{children:[!le&&(0,T.jsx)(b.Z,{p:H.cd,children:(0,T.jsx)(g.Z,{inverted:!0})}),le&&de]})]})})})]}),(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsx)(b.Z,{mb:H.HN,children:(0,T.jsx)(m.Z,{light:!0})}),(0,T.jsx)(v.Z,{children:(0,T.jsx)(f.Z,{beforeIcon:(0,T.jsx)(k.Hd,{}),linkProps:{href:"/version-control?tab=".concat(D.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:D.uuid})})]})]})},Y=r(1210),J=r(46299),$=r(38341),ee=r(93461),ne=r(38626),re=ne.default.div.withConfig({displayName:"indexstyle__SpacingStyle",componentId:"sc-el09vr-0"})(["margin-top:","px;"],.5*H.iI),oe=r(7715);function te(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function ie(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?te(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var le,ce=function(e){var n=e.branch,r=e.fetchBranch,o=e.modifiedFiles,t=e.setSelectedFilePath,i=e.showError,l=e.stagedFiles,c=e.untrackedFiles,d=(0,a.useRef)(null),u=(0,a.useState)(""),x=u[0],w=u[1],C=(0,a.useState)({}),P=C[0],_=C[1],I=(0,a.useState)({}),O=I[0],S=I[1],D=(0,a.useMemo)((function(){return Object.keys(o).concat(Object.keys(c)).sort()}),[o,c]),F=(0,a.useMemo)((function(){return Object.keys(l||{})}),[l]),E=(0,a.useMemo)((function(){return F.length}),[F]),U=(0,a.useMemo)((function(){return Object.keys(P).length===(null===D||void 0===D?void 0:D.length)}),[P,D]),R=(0,a.useMemo)((function(){return Object.keys(O).length===(null===F||void 0===F?void 0:F.length)}),[O,F]),V=(0,a.useMemo)((function(){return{onErrorCallback:function(e,n){return i({errors:n,response:e})}}}),[i]),W=(0,a.useMemo)((function(){return{onSuccess:function(e){return(0,A.wD)(e,ie({callback:function(){r(),_({})}},V))}}}),[r,V]),Q=(0,a.useMemo)((function(){return y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name)}),[n]),K=(0,h.Db)(Q,W),X=(0,s.Z)(K,2),Y=X[0],J=X[1].isLoading,ne=(0,h.Db)(Q,W),te=(0,s.Z)(ne,2),le=te[0],ce=te[1].isLoading,se=(0,h.Db)(Q,{onSuccess:function(e){return(0,A.wD)(e,ie({callback:function(){r(),S({})}},V))}}),de=(0,s.Z)(se,2),ue=de[0],ae=de[1].isLoading,he=(0,a.useCallback)((function(e,n,r,o,t){var i=(null===e||void 0===e?void 0:e.length)>=1;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(L.Z,{block:!0,noHoverUnderline:!0,onClick:function(){r(t?{}:o)},preventDefault:!0,children:(0,T.jsxs)(v.Z,{alignItems:"center",flexDirection:"row",children:[(0,T.jsx)($.Z,{checked:i&&t,disabled:!i}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsx)(p.ZP,{bold:!0,children:i&&t?"Unselect all":"Select all"})]})}),e.map((function(e){return(0,T.jsx)(re,{children:(0,T.jsx)(L.Z,{block:!0,noHoverUnderline:!0,onClick:function(){return r((function(n){var r=ie({},n);return!(null!==r&&void 0!==r&&r[e])?r[e]=!0:delete r[e],r}))},preventDefault:!0,children:(0,T.jsxs)(v.Z,{alignItems:"center",flexDirection:"row",children:[(0,T.jsx)($.Z,{checked:!(null===n||void 0===n||!n[e])}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,children:e})]})})},e)}))]})}),[]),fe=(0,a.useMemo)((function(){return(0,oe.Qr)(P)}),[P]),me=y.ZP.git_branches.detail("with_logs",{_format:"with_logs"}),ve=me.data,je=me.mutate,xe=(0,a.useMemo)((function(){var e;return(null===ve||void 0===ve||null===(e=ve.git_branch)||void 0===e?void 0:e.logs)||[]}),[ve]),be=(0,h.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){je(),r(),w("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),ge=(0,s.Z)(be,2),pe=ge[0],Ze=ge[1].isLoading,we=(0,a.useMemo)((function(){return(0,T.jsx)(z.Z,{columnFlex:[1,1,1],columns:[{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:xe.map((function(e){var n=e.author,r=e.date,o=e.message;return[(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===n||void 0===n?void 0:n.name},"author"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:r},"date"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:o},"message")]})),uuid:"git-branch-logs"})}),[xe]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(b.Z,{mb:H.HN,children:(0,T.jsxs)(v.Z,{children:[(0,T.jsxs)(ee.Z,{flex:1,flexDirection:"column",children:[(0,T.jsxs)(j.Z,{children:["Not staged ",(null===D||void 0===D?void 0:D.length)>=1&&"(".concat(null===D||void 0===D?void 0:D.length,")")]}),(0,T.jsx)(b.Z,{my:H.cd,children:(0,T.jsx)(m.Z,{light:!0})}),(0,T.jsx)(b.Z,{mb:H.cd,children:(0,T.jsxs)(v.Z,{flexDirection:"row",children:[(0,T.jsx)(f.Z,{compact:!0,disabled:fe||ae||ce,loading:J,onClick:function(){Y({git_branch:{action_type:"add",files:Object.keys(P)}}).then((function(e){var n,r=e.data;null!==r&&void 0!==r&&r.git_branch&&(null===d||void 0===d||null===(n=d.current)||void 0===n||n.focus())}))},primary:!0,children:"Add files"}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsx)(f.Z,{compact:!0,disabled:fe||J||ae,loading:ce,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to undo all changes in the selected files?")&&le({git_branch:{action_type:"checkout",files:Object.keys(P)}})},children:"Checkout files"})]})}),he(D,P,_,ie(ie({},o),c),U)]}),(0,T.jsx)(b.Z,{mr:H.cd}),(0,T.jsxs)(ee.Z,{flex:1,flexDirection:"column",children:[(0,T.jsxs)(j.Z,{children:["Staged files ",(null===F||void 0===F?void 0:F.length)>=1&&"(".concat(null===F||void 0===F?void 0:F.length,")")]}),(0,T.jsx)(b.Z,{my:H.cd,children:(0,T.jsx)(m.Z,{light:!0})}),(0,T.jsx)(b.Z,{mb:H.cd,children:(0,T.jsx)(v.Z,{flexDirection:"row",children:(0,T.jsx)(f.Z,{compact:!0,disabled:(0,oe.Qr)(O)||J||ce,loading:ae,onClick:function(){ue({git_branch:{action_type:"reset",files:Object.keys(O)}})},secondary:!0,children:"Reset files"})})}),he(F,O,S,l,R)]})]})}),(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(j.Z,{children:"Commit"})}),(0,T.jsx)(b.Z,{mb:H.cd,children:(0,T.jsx)(G.Z,{children:(0,T.jsx)(q.Z,{noPaddingContent:!0,title:E>=1?"Staged files (".concat(E,")"):"No staged files",children:null===F||void 0===F?void 0:F.map((function(e){return(0,T.jsx)(b.Z,{my:1,px:H.cd,children:(0,T.jsxs)(v.Z,{justifyContent:"space-between",children:[(0,T.jsx)(L.Z,{default:!0,monospace:!0,onClick:function(){return t((function(n){return n===e?null:e}))},warning:null===o||void 0===o?void 0:o[e],children:e}),(0,T.jsx)(b.Z,{mr:1}),(null===o||void 0===o?void 0:o[e])&&(0,T.jsx)(p.ZP,{warning:!0,children:"Modified after staging"})]})},e)}))})})}),(0,T.jsx)(Z.Z,{label:"Commit message",monospace:!0,onChange:function(e){return w(e.target.value)},ref:d,value:x||""}),(0,T.jsx)(b.Z,{mt:H.cd,children:(0,T.jsxs)(v.Z,{alignItems:"center",children:[(0,T.jsxs)(f.Z,{disabled:0===E||!((null===x||void 0===x?void 0:x.length)>=1),loading:Ze,onClick:function(){pe({git_branch:{action_type:"commit",files:F,message:x}})},primary:!0,children:["Commit ",(0,N._6)("file",E,!0)," with message"]}),0===E&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(b.Z,{mr:1}),(0,T.jsx)(p.ZP,{danger:!0,small:!0,children:"Please stage at least 1 file before committing."})]})]})})]}),(0,T.jsx)(b.Z,{mb:H.HN,children:(0,T.jsx)(G.Z,{children:(0,T.jsxs)(q.Z,{noPaddingContent:!0,title:"Logs",children:[!ve&&(0,T.jsx)(b.Z,{p:H.cd,children:(0,T.jsx)(g.Z,{inverted:!0})}),ve&&we]})})}),(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsx)(b.Z,{mb:H.HN,children:(0,T.jsx)(m.Z,{light:!0})}),(0,T.jsxs)(v.Z,{children:[(0,T.jsx)(f.Z,{beforeIcon:(0,T.jsx)(k.Hd,{}),linkProps:{href:"/version-control?tab=".concat(M.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:M.uuid}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsxs)(f.Z,{afterIcon:(0,T.jsx)(k.Kw,{}),linkProps:fe?{href:"/version-control?tab=".concat(B.uuid)}:null,noHoverUnderline:!0,primary:fe,sameColorAsText:!0,secondary:!fe,children:["Next: ",B.uuid]})]})]})]})},se=r(12691),de=r.n(se),ue=r(34376);!function(e){e.GITHUB="github"}(le||(le={}));var ae=r(59e3);var he=function(e){var n=e.branch,r=e.fetchBranch,o=e.loading,t=e.remotes,i=e.showError,l=(0,ue.useRouter)(),c=(0,a.useRef)(null),d=(0,a.useState)(null),u=d[0],Z=d[1],C=(0,a.useState)(null),P=C[0],_=C[1],O=(0,a.useState)(null),S=O[0],D=O[1],B=(0,a.useState)(null),F=B[0],E=B[1],U=(0,a.useState)(null),R=U[0],V=U[1],W=(0,a.useState)(!1),Q=W[0],K=W[1],X=(0,a.useState)(null),Y=X[0],J=X[1],$=(0,a.useState)(""),ne=$[0],re=$[1],oe=(0,a.useState)(""),te=oe[0],ie=oe[1],ce=(0,a.useState)(null),se=ce[0],he=ce[1];(0,a.useEffect)((function(){var e,r;null!==n&&void 0!==n&&null!==(e=n.sync_config)&&void 0!==e&&e.repo_path&&null===se&&he(null===n||void 0===n||null===(r=n.sync_config)||void 0===r?void 0:r.repo_path)}),[n,se]);var fe=(0,a.useMemo)((function(){var e,n;return null===t||void 0===t||null===(e=t.find((function(e){return e.name===R})))||void 0===e||null===(n=e.refs)||void 0===n?void 0:n.map((function(e){var n=e.name.split("/");return{name:n[n.length-1]}}))}),[R,t]),me=(0,h.Db)(y.ZP.syncs.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){r(),K(!1)},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),ve=(0,s.Z)(me,2),je=ve[0],xe=ve[1].isLoading,be=(0,h.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(e){var n=e.git_branch,o=n.error,t=n.progress;o?(_(o),E(null)):(r(),Z(null),_(null),D(null),E(t),V(null))},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),ge=(0,s.Z)(be,2),pe=ge[0],Ze=ge[1].isLoading,we=(0,h.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){r(),re(""),ie("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),Ce=(0,s.Z)(we,2),ye=Ce[0],ke=Ce[1].isLoading,Pe=(0,h.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){r(),J(null)},onErrorCallback:function(e,n){J(null),i({errors:n,response:e})}})}}),_e=(0,s.Z)(Pe,2),Ie=_e[0],Oe=_e[1].isLoading,Se=y.ZP.oauths.detail(le.GITHUB,{redirect_uri:encodeURIComponent(window.location.href)}),Me=Se.data,De=Se.mutate,Be=(0,a.useMemo)((function(){return(null===Me||void 0===Me?void 0:Me.oauth)||{}}),[Me]),Fe=(0,h.Db)(y.ZP.oauths.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){De()},onErrorCallback:function(e,n){i({errors:n,response:e})}})}}),Ee=(0,s.Z)(Fe,2),He=Ee[0],Ne=Ee[1].isLoading,Ae=((0,ae.iV)()||{}).access_token;(0,a.useEffect)((function(){!Be||null!==Be&&void 0!==Be&&Be.authenticated||!Ae||He({oauth:{provider:le.GITHUB,token:Ae}})}),[Ae,He,Be]);var Te=(0,a.useMemo)((function(){return null===t||void 0===t?void 0:t.map((function(e){var n=e.name,r=e.refs,o=e.urls;return(0,T.jsxs)(b.Z,{mt:H.Mq,children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsxs)(v.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,T.jsxs)(ee.Z,{alignItems:"center",children:[(0,T.jsx)(p.ZP,{bold:!0,children:n}),(0,T.jsx)(b.Z,{mx:1,children:(0,T.jsx)(k._Q,{muted:!0})}),null===o||void 0===o?void 0:o.map((function(e){return(0,T.jsx)(b.Z,{mr:1,children:(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:e})},e)}))]}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsx)(f.Z,{compact:!0,disabled:Oe&&Y!==n,iconOnly:!0,loading:Oe&&Y===n,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to remove remote ".concat(n,"?"))&&(J(n),Ie({git_branch:{action_type:"remove_remote",remote:{name:n}}}))},small:!0,title:"Remote remote ".concat(n),children:(0,T.jsx)(k.rF,{})})]})}),(0,T.jsx)(G.Z,{children:(0,T.jsxs)(q.Z,{noPaddingContent:!0,smallTitle:!0,title:"Refs (".concat(null===r||void 0===r?void 0:r.length,")"),children:[0===(null===r||void 0===r?void 0:r.length)&&(0,T.jsx)(b.Z,{p:H.cd,children:(0,T.jsx)(p.ZP,{muted:!0,children:"This remote has no refs."})}),(null===r||void 0===r?void 0:r.length)>=1&&(0,T.jsx)(z.Z,{columnFlex:[1,1,1],columns:[{uuid:"Ref"},{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:r.map((function(e){var n,r=e.commit,o=e.name;return[(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:o},"ref-name"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r||null===(n=r.author)||void 0===n?void 0:n.name},"author"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.date},"date"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.message},"message")]})),uuid:"git-branch-remotes-refs"})]})}),(0,T.jsx)(b.Z,{mt:H.Mq,children:(0,T.jsx)(m.Z,{light:!0})})]},n)}))}),[Oe,Y,t,Ie]);return(0,T.jsxs)(T.Fragment,{children:[Me&&(0,T.jsxs)(b.Z,{mb:H.HN,children:[(null===Be||void 0===Be?void 0:Be.authenticated)&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(f.Z,{beforeIcon:(0,T.jsx)(k.fy,{size:2*H.iI}),disabled:!0,children:"Successfully authenticated with GitHub"}),(0,T.jsx)(b.Z,{mt:1,children:(0,T.jsx)(p.ZP,{muted:!0,children:"You can pull, push, and create pull requests on GitHub."})})]}),!(null!==Be&&void 0!==Be&&Be.authenticated)&&(null===Be||void 0===Be?void 0:Be.url)&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(f.Z,{beforeIcon:(0,T.jsx)(k.fy,{size:2*H.iI}),loading:Ne,onClick:function(){return l.push(null===Be||void 0===Be?void 0:Be.url)},primary:!0,children:"Authenticate with GitHub"}),(0,T.jsx)(b.Z,{mt:1,children:(0,T.jsx)(p.ZP,{muted:!0,children:"Authenticating with GitHub will allow you to pull, push, and create pull requests on GitHub."})})]})]}),(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsx)(j.Z,{children:"Setup"}),(0,T.jsxs)(b.Z,{mt:H.Mq,children:[(0,T.jsxs)(b.Z,{mb:1,children:[(0,T.jsx)(p.ZP,{bold:!0,large:!0,children:"Git init directory"}),(0,T.jsxs)(p.ZP,{muted:!0,children:["If the directory below is blank, then the current working directory will be used to initialize git.",(0,T.jsx)("br",{}),"If git hasn\u2019t been initialized in the directory below, Mage will automatically run git init for you."]})]}),(0,T.jsxs)(v.Z,{alignItems:"center",children:[(0,T.jsx)(w.Z,{disabled:!Q,label:"Git directory",monospace:!0,onChange:function(e){return he(e.target.value)},ref:c,value:se||""}),(0,T.jsx)(b.Z,{mr:1}),Q&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(f.Z,{compact:!0,loading:xe,onClick:function(){je({sync:{repo_path:se}})},primary:!0,small:!0,children:"Save"}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsx)(L.Z,{onClick:function(){return K(!1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Cancel"})]}),!Q&&(0,T.jsx)(L.Z,{onClick:function(){K(!0),setTimeout((function(){var e;return null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.focus()}),1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Edit"})]})]})]}),(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsxs)(j.Z,{children:["Remotes",!o&&t?" (".concat(null===t||void 0===t?void 0:t.length,")"):""]}),o&&(0,T.jsx)(b.Z,{mt:H.Mq,children:(0,T.jsx)(g.Z,{inverted:!0})}),!o&&Te,(0,T.jsx)(b.Z,{mt:H.Mq,children:(0,T.jsxs)(v.Z,{alignItems:"flex-start",children:[(0,T.jsx)(w.Z,{label:"New remote name",monospace:!0,onChange:function(e){var n;return re(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:ne||""}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsxs)(v.Z,{flexDirection:"column",children:[(0,T.jsx)(w.Z,{label:"Remote URL",monospace:!0,onChange:function(e){var n;return ie(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:te||""}),(0,T.jsx)(b.Z,{mt:1,children:(0,T.jsxs)(p.ZP,{muted:!0,small:!0,children:["Use the https URL if you",(0,T.jsx)("br",{}),"authenticated with GitHub above."]})})]}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsx)(f.Z,{beforeIcon:(0,T.jsx)(k.mm,{size:2*H.iI}),disabled:!ne||!te,loading:ke,onClick:function(){ye({git_branch:{action_type:"add_remote",remote:{name:ne,url:te}}})},primary:!0,children:"Create new remote"})]})})]}),(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsx)(j.Z,{children:"Actions"}),(0,T.jsxs)(b.Z,{mt:H.Mq,children:[(0,T.jsxs)(b.Z,{mb:H.Mq,children:[(0,T.jsx)(b.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(null===n||void 0===n?void 0:n.name)&&(0,T.jsxs)(v.Z,{alignItems:"center",children:[(0,T.jsx)(p.ZP,{monospace:!0,children:null===n||void 0===n?void 0:n.name}),(0,T.jsx)(b.Z,{mr:H.cd}),(0,T.jsx)(de(),{href:"/version-control?tab=".concat(M.uuid),passHref:!0,children:(0,T.jsx)(L.Z,{small:!0,children:"Switch branch"})})]})]}),(0,T.jsxs)(v.Z,{children:[(0,T.jsx)(x.Z,{onChange:function(e){return D(e.target.value)},placeholder:"Action",value:S||"",children:(0,T.jsx)("option",{value:I,children:(0,N.vg)(I)})}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsx)(x.Z,{beforeIcon:(0,T.jsx)(k.VW,{}),beforeIconSize:1.5*H.iI,monospace:!0,onChange:function(e){return V(e.target.value)},placeholder:"Remote",value:R||"",children:null===t||void 0===t?void 0:t.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))}),(0,T.jsx)(b.Z,{mr:1}),(0,T.jsxs)(x.Z,{beforeIcon:(0,T.jsx)(k.I0,{}),beforeIconSize:1.5*H.iI,monospace:!0,onChange:function(e){return Z(e.target.value)},value:u||"",children:[(0,T.jsx)("option",{value:"",children:"All branches"}),null===fe||void 0===fe?void 0:fe.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))]})]}),(0,T.jsxs)(b.Z,{mt:H.cd,children:[(0,T.jsx)(f.Z,{beforeIcon:(0,T.jsx)(k.Bf,{size:2*H.iI}),disabled:!S||!R,loading:Ze,onClick:function(){E(null),pe({git_branch:{action_type:S,pull:{branch:u,remote:R}}})},primary:!0,children:S?(0,N.vg)(S):"Execute action"}),(F||P)&&(0,T.jsx)(b.Z,{mt:H.cd,children:(0,T.jsx)(p.ZP,{danger:!!P,default:!!F,monospace:!0,preWrap:!0,children:F||P})})]})]})]}),(0,T.jsxs)(b.Z,{mb:H.HN,children:[(0,T.jsx)(b.Z,{mb:H.HN,children:(0,T.jsx)(m.Z,{light:!0})}),(0,T.jsx)(v.Z,{children:(0,T.jsxs)(f.Z,{afterIcon:(0,T.jsx)(k.Kw,{}),linkProps:{href:"/version-control?tab=".concat(M.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",M.uuid]})})]})]})},fe=r(2005),me=ne.default.div.withConfig({displayName:"indexstyle__DiffContainerStyle",componentId:"sc-1fo4nus-0"})(["pre{font-family:",";}"],fe.Vp),ve={codeFoldGutter:{},content:{},contentText:{},diffAdded:{},diffContainer:{},diffRemoved:{},emptyGutter:{},emptyLine:{},gutter:{},highlightedGutter:{},highlightedLine:{},line:{},lineNumber:{},marker:{},splitView:{},titleBlock:{},variables:{dark:{addedBackground:"#044B53",addedColor:"white",addedGutterBackground:"#034148",addedGutterColor:"#8c8c8c",codeFoldBackground:"#262831",codeFoldContentColor:"#555a7b",codeFoldGutterBackground:"#21232b",diffViewerBackground:"#2e303c",diffViewerColor:"#FFF",diffViewerTitleBackground:"#2f323e",diffViewerTitleBorderColor:"#353846",diffViewerTitleColor:"#555a7b",emptyLineBackground:"#363946",gutterBackground:"#2c2f3a",gutterBackgroundDark:"#262933",gutterColor:"#464c67",highlightBackground:"#2a3967",highlightGutterBackground:"#2d4077",removedBackground:"#632F34",removedColor:"white",removedGutterBackground:"#632b30",removedGutterColor:"#8c8c8c",wordAddedBackground:"#055d67",wordRemovedBackground:"#7d383f"},light:{addedBackground:"#e6ffed",addedColor:"#24292e",addedGutterBackground:"#cdffd8",addedGutterColor:"#212529",codeFoldBackground:"#f1f8ff",codeFoldContentColor:"#212529",codeFoldGutterBackground:"#dbedff",diffViewerBackground:"#fff",diffViewerColor:"212529",diffViewerTitleBackground:"#fafbfc",diffViewerTitleBorderColor:"#eee",diffViewerTitleColor:"#212529",emptyLineBackground:"#fafbfc",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f3f1f1",gutterColor:"#212529",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b1",removedBackground:"#ffeef0",removedColor:"#24292e",removedGutterBackground:"#ffdce0",removedGutterColor:"#212529",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0"}},wordAdded:{},wordDiff:{},wordRemoved:{}},je=r(32821),xe=r(33766),be=r(9728);function ge(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function pe(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ge(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Ze=function(){var e=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,be.VI)(null,{},[],{uuid:"VersionControlPage"}),o=(0,s.Z)(r,1)[0],t=(0,a.useState)(null),i=t[0],l=t[1],h=(0,a.useState)(null),f=h[0],v=h[1],j=(0,a.useState)(E[0]),Z=j[0],w=j[1],k=(0,ae.iV)();(0,a.useEffect)((function(){null!==k&&void 0!==k&&k.tab&&w(E.find((function(e){return e.uuid===(null===k||void 0===k?void 0:k.tab)})))}),[k]);var P=y.ZP.git_branches.list(),_=P.data,I=P.mutate,O=(0,a.useMemo)((function(){return null===_||void 0===_?void 0:_.git_branches}),[_]),S=y.ZP.git_branches.detail("current"),N=S.data,A=S.mutate,G=(0,a.useMemo)((function(){return(null===N||void 0===N?void 0:N.git_branch)||{}}),[N]),q=(0,a.useMemo)((function(){return(null===G||void 0===G?void 0:G.files)||[]}),[G]),L=y.ZP.git_branches.detail("with_remotes",{_format:"with_remotes"}),z=L.data,V=L.mutate,W=(0,a.useMemo)((function(){return null===z||void 0===z?void 0:z.git_branch}),[z]),Q=(0,a.useMemo)((function(){return(null===W||void 0===W?void 0:W.remotes)||[]}),[W]),K=y.ZP.git_files.detail(f?encodeURIComponent(f):null,{base_branch:i}),$=K.data,ee=K.mutate,ne=(0,a.useMemo)((function(){return null===$||void 0===$?void 0:$.git_file}),[$]);(0,a.useEffect)((function(){i&&ee()}),[i,ee]),(0,a.useEffect)((function(){null!==$&&void 0!==$&&$.error&&o({errors:null===$||void 0===$?void 0:$.error,response:$})}),[$,o]);var re=(0,a.useMemo)((function(){var e,n,r;return{modifiedFiles:null===G||void 0===G||null===(e=G.modified_files)||void 0===e?void 0:e.reduce((function(e,n){return pe(pe({},e),{},(0,c.Z)({},n,!0))}),{}),stagedFiles:null===G||void 0===G||null===(n=G.staged_files)||void 0===n?void 0:n.reduce((function(e,n){return pe(pe({},e),{},(0,c.Z)({},n,!0))}),{}),untrackedFiles:null===G||void 0===G||null===(r=G.untracked_files)||void 0===r?void 0:r.reduce((function(e,n){return pe(pe({},e),{},(0,c.Z)({},n,!0))}),{})}}),[G]),te=re.modifiedFiles,ie=void 0===te?{}:te,le=re.stagedFiles,se=void 0===le?{}:le,de=re.untrackedFiles,ue=void 0===de?{}:de;(0,a.useEffect)((function(){f&&(0,oe.Qr)(ie)&&(0,oe.Qr)(se)&&(0,oe.Qr)(ue)&&v(null)}),[ie,f,se,ue]);var fe=(0,a.useMemo)((function(){return(null===q||void 0===q?void 0:q.length)>=1?(0,T.jsx)(J.Z,{allowEmptyFolders:!0,disableContextMenu:!0,fetchFileTree:A,files:q,isFileDisabled:function(){return!1},onClickFile:function(e){v((function(r){if(!r||r!==e){var o;if(!i)null===n||void 0===n||null===(o=n.current)||void 0===o||o.focus();return e}return null}))},ref:e,renderAfterContent:function(e){var n,r,o=e.children,t=(null===o||void 0===o?void 0:o.length)>=1,i=(0,je.a9)(e);t&&(i="".concat(i,"/"));var l={};return null!==ie&&void 0!==ie&&ie[i]?(n="M",r="Modified",l.warning=!0):null!==ue&&void 0!==ue&&ue[i]?(n="U",r="Untracked",l.danger=!0):null!==se&&void 0!==se&&se[i]&&(n="S",r="Staged",l.success=!0),t&&!n?null:(0,T.jsx)(b.Z,{mx:1,children:(0,T.jsx)(C.Z,{appearBefore:!0,label:r,widthFitContent:!0,children:(0,T.jsx)(p.ZP,pe(pe({},l),{},{monospace:!0,rightAligned:!0,small:!0,children:n}))})})},useRootFolder:!0}):(0,T.jsx)(b.Z,{p:H.cd,children:(0,T.jsx)(p.ZP,{monospace:!0,muted:!0,children:"No files modified"})})}),[i,A,e,q,ie,n,v,se,ue]),ge=(0,a.useMemo)((function(){return!$||!ne||f&&(null===ne||void 0===ne?void 0:ne.filename)!==f}),[$,ne,f]),Ze=(0,a.useMemo)((function(){if(!f)return null;var e=ne||{},n=e.content,r=e.content_from_base;return(0,T.jsxs)(me,{children:[!i&&(0,T.jsx)(b.Z,{p:H.cd,children:(0,T.jsx)(p.ZP,{muted:!0,children:"Please select a base branch to see the file diffs."})}),(null===ne||void 0===ne?void 0:ne.error)&&(0,T.jsx)(b.Z,{p:H.cd,children:(0,T.jsx)(p.ZP,{danger:!0,monospace:!0,preWrap:!0,children:null===ne||void 0===ne?void 0:ne.error})}),i&&!(null!==ne&&void 0!==ne&&ne.error)&&(0,T.jsxs)(T.Fragment,{children:[ge&&(0,T.jsx)(b.Z,{p:H.cd,children:(0,T.jsx)(g.Z,{inverted:!0})}),!ge&&(0,T.jsx)(u(),{compareMethod:d.DiffMethod.WORDS,newValue:n||"",oldValue:r||"",renderContent:function(e){return(0,T.jsx)(p.ZP,{monospace:!0,children:e})},splitView:!0,styles:ve,useDarkTheme:!0})]})]})}),[i,ne,ge,f]),we=(0,a.useMemo)((function(){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{style:{marginBottom:.5*H.iI,marginTop:.5*H.iI},children:(0,T.jsx)(R.Z,{compact:!0,onClickTab:function(e){var n=e.uuid;(0,xe.u7)({tab:n})},selectedTabUUID:null===Z||void 0===Z?void 0:Z.uuid,tabs:E})}),(0,T.jsx)(m.Z,{light:!0})]})}),[Z]),Ce=(0,a.useMemo)((function(){return(0,T.jsx)(he,{branch:G,fetchBranch:V,loading:!z,remotes:Q,showError:o})}),[G,z,V,Q,o]),ye=(0,a.useMemo)((function(){return(0,T.jsx)(U,{branch:G,branches:O,fetchBranch:A,fetchBranches:I,showError:o})}),[G,O,A,I,o]),ke=(0,a.useMemo)((function(){return(0,T.jsx)(ce,{branch:G,fetchBranch:A,modifiedFiles:ie,setSelectedFilePath:v,showError:o,stagedFiles:se,untrackedFiles:ue})}),[G,A,ie,v,o,se,ue]),Pe=(0,a.useMemo)((function(){return(0,T.jsx)(X,{branch:G,branches:O,fetchBranch:A,loading:!z,modifiedFiles:ie,remotes:Q,showError:o,stagedFiles:se})}),[G,O,z,A,ie,Q,o,se]);return(0,T.jsx)(Y.Z,{after:Ze,afterHidden:!f,before:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(b.Z,{p:1,children:(0,T.jsx)(x.Z,{compact:!0,label:"Base branch",onChange:function(e){return l(e.target.value)},ref:n,small:!0,value:i||"",children:null===O||void 0===O?void 0:O.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))})}),fe]}),mainContainerHeader:we,title:"Version control",uuid:"Version control/index",children:(0,T.jsxs)(b.Z,{p:H.cd,children:[!N&&(0,T.jsx)(g.Z,{inverted:!0}),N&&(0,T.jsxs)(T.Fragment,{children:[F.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Ce,M.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&ye,D.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&ke,B.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Pe]})]})})};function we(){return(0,T.jsx)(Ze,{})}we.getInitialProps=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Ce=(0,l.Z)(we)},75302:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/version-control",function(){return r(83243)}])}},function(e){e.O(0,[844,7607,7011,4407,1424,1005,7815,6694,551,9774,2888,179],(function(){return n=75302,e(e.s=n);var n}));var n=e.O();_N_E=n}]);